!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Playkit",[],t):"object"==typeof exports?exports.Playkit=t():e.Playkit=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this._id=t.id,this._active=t.active,this._label=t.label,this._language=t.language,this._index=t.index}return i(e,[{key:"id",get:function(){return this._id}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}},{key:"label",get:function(){return this._label}},{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._index}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(27),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),u={DEBUG:o.DEBUG,INFO:o.INFO,TIME:o.TIME,WARN:o.WARN,ERROR:o.ERROR,OFF:o.OFF},s=function(){function e(t){r(this,e),o.useDefaults(t||{})}return i(e,[{key:"getLogger",value:function(e){return e?o.get(e):o}}]),e}(),l=new s({defaultLevel:o.DEBUG});t.default=l,t.LOG_LEVEL=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=n}return i(e,[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._kind=e.kind,n}return a(t,e),o(t,[{key:"kind",get:function(){return this._kind}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._bandwidth=e.bandwidth,n._width=e.width,n._height=e.height,n}return a(t,e),o(t,[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return Number(e)===e}function o(e){return a(e)&&e%1==0}function u(e){return a(e)&&e%1!=0}function s(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;Object.assign(t,u)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return t}function l(e){return e&&"object"===(void 0===e?"undefined":g(e))&&!Array.isArray(e)}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var o=n.shift();if(l(e)&&l(o))for(var u in o)l(o[u])?(e[u]||Object.assign(e,i({},u,{})),c(e[u],o[u])):Object.assign(e,i({},u,o[u]));return c.apply(void 0,[e].concat(r(n)))}function f(e){var t=void 0;return Array.isArray(e)?(t=e.length>0?e.slice(0):[],t.forEach(function(e,n){("object"===(void 0===e?"undefined":g(e))&&e!=={}||Array.isArray(e)&&e.length>0)&&(t[n]=f(e))})):"object"===(void 0===e?"undefined":g(e))?(t=Object.assign({},e),Object.keys(t).forEach(function(e){("object"===g(t[e])&&t[e]!=={}||Array.isArray(t[e])&&t[e].length>0)&&(t[e]=f(t[e]))})):t=e,t}function d(e){var t=2+(!e||e<0?0:e-2);return"_"+Math.random().toString(36).substr(2,t)}function h(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function p(e,t){return t.split(".").reduce(function(e,t){return void 0===e||null===e?e:e[t]},e)}function _(e,t){if(!t)return!1;for(var n=t.split("."),r=0;r<n.length;r++){var i=n[r];if(!e||!e.hasOwnProperty(i))return!1;e=e[i]}return!0}Object.defineProperty(t,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isNumber=a,t.isInt=o,t.isFloat=u,t.isObject=l,t.merge=s,t.mergeDeep=c,t.copyDeep=f,t.uniqueId=d,t.isEmptyObject=h,t.getPropertyPath=p,t.hasPropertyPath=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17),u=r(o),s=n(2),l=(r(s),function(){function e(){i(this,e),this._bindingMap=new u.default}return a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listen",value:function(e,t,n){var r=new c(e,t,n);this._bindingMap&&this._bindingMap.push(t,r)}},{key:"unlisten",value:function(e,t){if(this._bindingMap)for(var n=this._bindingMap.get(t),r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.unlisten(),this._bindingMap&&this._bindingMap.remove(t,i))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e=this._bindingMap.getAll(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.unlisten()}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this._bindingMap&&this._bindingMap.clear()}}}]),e}()),c=function(){function e(t,n,r){i(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener(n,r,!1)}return a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,!1),this.target=null,this.listener=null)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_EVENTS=t.HTML5_EVENTS=t.PLAYER_EVENTS=void 0;var r=n(6),i={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},a={VIDEO_TRACK_CHANGED:"videotrackchanged",AUDIO_TRACK_CHANGED:"audiotrackchanged",TEXT_TRACK_CHANGED:"texttrackchanged",TRACKS_CHANGED:"trackschanged",PLAYER_STATE_CHANGED:"playerstatechanged",FIRST_PLAY:"firstplay",SOURCE_SELECTED:"sourceselected"},o=(0,r.merge)([i,a]);t.PLAYER_EVENTS=o,t.HTML5_EVENTS=i,t.CUSTOM_EVENTS=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),f=n(2),d=r(f),h=n(10),p=r(h),_=n(8),g=n(16),y=r(g),v=n(6),E=n(1),b=r(E),T=n(19),m=r(T),k=n(15),O=r(k),w=n(22),A=r(w),P=n(24),S=r(P),M=n(0),N=(r(M),n(5)),L=r(N),D=n(3),R=r(D),j=n(4),C=r(j),V=n(31),I=r(V);n(28);var x=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._tracks=[],r._config={},r._firstPlay=!0,r._stateManager=new A.default(r),r._pluginManager=new O.default,r._eventManager=new c.default,r._createReadyPromise(),r._appendPlayerContainer(e),r.configure(n),r}return o(t,e),s(t,[{key:"configure",value:function(e){var n=this._engine;this._maybeResetPlayer(e),this._config=(0,v.mergeDeep)((0,v.isEmptyObject)(this._config)?t._defaultConfig:this._config,e),this._selectEngine()&&(this._appendEngineEl(),this._attachMedia(),this._maybeLoadPlugins(n),this._handlePlaybackConfig())}},{key:"_maybeResetPlayer",value:function(e){this._engine&&e.sources&&(t._logger.debug("New sources on existing engine: reset engine to change media"),this._reset())}},{key:"_maybeLoadPlugins",value:function(e){this._engine&&!e&&(t._logger.debug("Engine created for the first time: load plugins"),this._loadPlugins())}},{key:"_reset",value:function(){this._engine&&this._engine.destroy(),this._config={},this._tracks=[],this._firstPlay=!0,this._eventManager.removeAll(),this._createReadyPromise()}},{key:"_createReadyPromise",value:function(){var e=this;this._readyPromise=new Promise(function(t,n){e._eventManager.listen(e,_.CUSTOM_EVENTS.TRACKS_CHANGED,function(){t()}),e._eventManager.listen(e,_.HTML5_EVENTS.ERROR,n)})}},{key:"destroy",value:function(){this._engine&&this._engine.destroy(),this._eventManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._config={},this._tracks=[],this._readyPromise=null,this._firstPlay=!0}},{key:"_loadPlugins",value:function(){var e=this._config.plugins;for(var t in e)this._pluginManager.load(t,this,e[t])}},{key:"_selectEngine",value:function(){return!!(this._config.sources&&this._config.playback&&this._config.playback.streamPriority)&&this._selectEngineByPriority()}},{key:"_selectEngineByPriority",value:function(){var e=this,n=this._config.playback.streamPriority,r=this._config.sources,i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=function(){var n=s.value,i="string"==typeof n.engine?n.engine.toLowerCase():"",a="string"==typeof n.format?n.format.toLowerCase():"",o=t._engines.find(function(e){return e.id===i});if(o){var u=r[a];if(u&&u.length>0){var l=u[0];if(o.canPlayType(l.mimetype))return e._loadEngine(o,l),{v:!0}}}}();if("object"===(void 0===c?"undefined":u(c)))return c.v}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return t._logger.warn("No playable engines was found to play the given sources"),!1}},{key:"_loadEngine",value:function(e,t){this.dispatchEvent(new d.default(_.CUSTOM_EVENTS.SOURCE_SELECTED,{selectedSource:t})),this._engine=e.createEngine(t,this._config)}},{key:"_attachMedia",value:function(){var e=this;if(this._engine){for(var t in _.HTML5_EVENTS)this._eventManager.listen(this._engine,_.HTML5_EVENTS[t],function(t){return e.dispatchEvent(t)});this._eventManager.listen(this._engine,_.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedVideoTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,_.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedAudioTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,_.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedTextTrack),e.dispatchEvent(t)}),this._eventManager.listen(this,_.HTML5_EVENTS.PLAY,this._onPlay.bind(this))}}},{key:"_handlePlaybackConfig",value:function(){this._config.playback&&(this._config.playback.muted&&(this.muted=!0),"auto"===this._config.playback.preload&&this.load(),this._config.playback.autoplay&&this.play())}},{key:"_appendPlayerContainer",value:function(e){if(!e)throw new Error("targetId is not found, it must be pass on initialization");if(void 0===this._el){this._createPlayerContainer();var t=document.getElementById(e);null!=t&&null!=this._el&&t.appendChild(this._el)}}},{key:"_createPlayerContainer",value:function(){this._el=document.createElement("div"),this._el.id=(0,v.uniqueId)(5),this._el.className="playkit-container",this._el.setAttribute("tabindex","-1")}},{key:"_appendEngineEl",value:function(){null!=this._el&&null!=this._engine&&this._el.appendChild(this._engine.getVideoElement())}},{key:"getTracks",value:function(e){return this._getTracksByType(e)}},{key:"_getTracksByType",value:function(e){return e?this._tracks.filter(function(t){return e===S.default.VIDEO?t instanceof L.default:e===S.default.AUDIO?t instanceof R.default:e!==S.default.TEXT||t instanceof C.default}):this._tracks}},{key:"getActiveTracks",value:function(){return{video:this._getTracksByType(S.default.VIDEO).find(function(e){return e.active}),audio:this._getTracksByType(S.default.AUDIO).find(function(e){return e.active}),text:this._getTracksByType(S.default.TEXT).find(function(e){return e.active})}}},{key:"selectTrack",value:function(e){this._engine&&(e instanceof L.default?this._engine.selectVideoTrack(e):e instanceof R.default?this._engine.selectAudioTrack(e):e instanceof C.default&&this._engine.selectTextTrack(e))}},{key:"hideTextTrack",value:function(){this._engine&&(this._engine.hideTextTrack(),this._getTracksByType(S.default.TEXT).map(function(e){return e.active=!1}))}},{key:"enableAdaptiveBitrate",value:function(){this._engine&&this._engine.enableAdaptiveBitrate()}},{key:"_markActiveTrack",value:function(e){var t=void 0;if(e instanceof L.default?t=S.default.VIDEO:e instanceof R.default?t=S.default.AUDIO:e instanceof C.default&&(t=S.default.TEXT),t)for(var n=this.getTracks(t),r=0;r<n.length;r++)n[r].active=e.index===r}},{key:"_onPlay",value:function(){this._firstPlay&&(this._firstPlay=!1,this.dispatchEvent(new d.default(_.CUSTOM_EVENTS.FIRST_PLAY)))}},{key:"ready",value:function(){return this._readyPromise?this._readyPromise:Promise.resolve()}},{key:"load",value:function(){var e=this;this._engine&&this._engine.load().then(function(t){e._tracks=t.tracks,e.dispatchEvent(new d.default(_.CUSTOM_EVENTS.TRACKS_CHANGED,{tracks:e._tracks}))}).catch(function(t){e.dispatchEvent(new d.default(_.HTML5_EVENTS.ERROR,t))})}},{key:"play",value:function(){var e=this;this._engine&&(this._engine.src?this._engine.play():(this.load(),this.ready().then(function(){e._engine.play()})))}},{key:"pause",value:function(){if(this._engine)return this._engine.pause()}},{key:"buffered",value:function(){}},{key:"config",get:function(){return this._config}},{key:"sessionId",set:function(e){this._config.session=this._config.session||{},this._config.session.id=e}},{key:"currentTime",set:function(e){if(this._engine&&(0,v.isNumber)(e)){var t=e;e<0&&(t=0),t>this._engine.duration&&(t=this._engine.duration),this._engine.currentTime=t}},get:function(){if(this._engine)return this._engine.currentTime}},{key:"duration",get:function(){if(this._engine)return this._engine.duration}},{key:"volume",set:function(e){if(this._engine&&(0,v.isFloat)(e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){if(this._engine)return this._engine.volume}},{key:"paused",get:function(){if(this._engine)return this._engine.paused}},{key:"seeking",get:function(){if(this._engine)return this._engine.seeking}},{key:"muted",set:function(e){this._engine&&(this._engine.muted=e)},get:function(){if(this._engine)return this._engine.muted}},{key:"src",get:function(){if(this._engine)return this._engine.src}},{key:"Event",get:function(){return _.PLAYER_EVENTS}},{key:"State",get:function(){return y.default}},{key:"Track",get:function(){return S.default}}],[{key:"_defaultConfig",get:function(){return(0,v.copyDeep)(I.default)}}]),t}(p.default);x._logger=b.default.getLogger("Player"),x._engines=[m.default],t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=(r(o),n(17)),s=r(u),l=function(){function e(){i(this,e),this._listeners=new s.default,this.dispatchTarget=this}return a(e,[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.name=t.name,this.message=t.message(n)}return i(e,[{key:"getError",value:function(){return{name:this.name,message:this.message}}}]),e}();a.TYPE={NOT_REGISTERED_PLUGIN:{name:"PluginNotRegisteredException",message:function(e){return"Cannot load "+e+" plugin. Name not found in the registry"}},NOT_VALID_HANDLER:{name:"PluginHandlerIsNotValidException",message:function(){return"To activate plugin you must provide a class derived from BasePlugin"}},NOT_IMPLEMENTED_METHOD:{name:"NotImplementedException",message:function(e){return e+" method not implemented"}}},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),c=n(10),f=r(c),d=n(11),h=r(d),p=n(8),_=n(1),g=r(_),y=n(0),v=(r(y),n(5)),E=r(v),b=n(3),T=r(b),m=n(4),k=r(m),O=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._videoElement=e,o._sourceObj=n,o._config=r,o}return o(t,e),u(t,null,[{key:"isSupported",value:function(){return!0}},{key:"createAdapter",value:function(e,t,n){return new this(e,t,n)}}]),u(t,[{key:"destroy",value:function(){this._sourceObj=null,this._config=null}},{key:"_onTrackChanged",value:function(e){e instanceof E.default?this._trigger(t.CustomEvents.VIDEO_TRACK_CHANGED,{selectedVideoTrack:e}):e instanceof T.default?this._trigger(t.CustomEvents.AUDIO_TRACK_CHANGED,{selectedAudioTrack:e}):e instanceof k.default&&this._trigger(t.CustomEvents.TEXT_TRACK_CHANGED,{selectedTextTrack:e})}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new l.default(e,t))}},{key:"load",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"load").getError()}},{key:"selectVideoTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectVideoTrack").getError()}},{key:"selectAudioTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectAudioTrack").getError()}},{key:"selectTextTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectTextTrack").getError()}},{key:"hideTextTrack",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"hideTextTrack").getError()}},{key:"enableAdaptiveBitrate",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"enableAdaptiveBitrate").getError()}},{key:"src",get:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"get src").getError()}}],[{key:"canPlayType",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"static canPlayType").getError()}}]),t}(f.default);O.CustomEvents=p.CUSTOM_EVENTS,O.getLogger=g.default.getLogger,t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMediaSourceAdapter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(20),u=r(o),s=n(1),l=r(s),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <"+t.id+"> is already registered, do not register again"):(e._logger.debug("Adapter <"+t.id+"> has been registered successfully"),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var n=e._mediaSourceAdapters.indexOf(t);n>-1&&(e._logger.debug("Unregistered <"+t.id+"> adapter"),e._mediaSourceAdapters.splice(n,1))}},{key:"canPlayType",value:function(t){for(var n=e._mediaSourceAdapters,r=0;r<n.length;r++)if(n[r].canPlayType(t))return e._selectedAdapter=n[r],e._logger.debug("Selected adapter is <"+e._selectedAdapter.id+">"),!0;return!1}},{key:"getMediaSourceAdapter",value:function(t,n,r){return t&&n&&r?(e._selectedAdapter||e.canPlayType(n.mimetype),e._selectedAdapter?e._selectedAdapter.createAdapter(t,n,r):null):null}},{key:"destroy",value:function(){e._selectedAdapter=null}}]),e}();c._logger=l.default.getLogger("MediaSourceProvider"),c._mediaSourceAdapters=[u.default],c._selectedAdapter=null,t.default=c;var f=c.register;t.registerMediaSourceAdapter=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),u=(r(o),n(1)),s=r(u),l=n(6),c=n(7),f=r(c),d=n(11),h=r(d),p=function(){function e(t,n,r){i(this,e),this.name=t,this.player=n,this.eventManager=new f.default,this.logger=s.default.getLogger(this.name),this.config=(0,l.merge)([this.constructor.defaultConfig,r])}return a(e,null,[{key:"createPlugin",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"isValid",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"isValid()").getError()}}]),a(e,[{key:"getConfig",value:function(e){return e?this.config[e]:this.config}},{key:"updateConfig",value:function(e){this.config=(0,l.merge)([this.config,e])}},{key:"destroy",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"destroy()").getError()}},{key:"getName",value:function(){return this.name}}]),e}();p.defaultConfig={},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlugin=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),u=r(o),s=n(11),l=r(s),c=n(9),f=(r(c),n(1)),d=r(f),h=d.default.getLogger("PluginManager"),p=function(){function e(){i(this,e),this._plugins=new Map}return a(e,[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw new l.default(l.default.TYPE.NOT_REGISTERED_PLUGIN,t).getError();var i=e._registry.get(t);return null!=i&&i.isValid()?(this._plugins.set(t,i.createPlugin(t,n,r)),h.debug("Plugin <"+t+"> has been loaded"),!0):(h.debug("Plugin <"+t+"> isn't loaded, isValid()=false"),!1)}},{key:"destroy",value:function(){this._plugins.forEach(this._destroy.bind(this))}},{key:"_destroy",value:function(e,t){e.destroy(),this._plugins.delete(t)}},{key:"get",value:function(e){return this._plugins.get(e)}}],[{key:"register",value:function(t,n){if("function"!=typeof n||n.prototype instanceof u.default==!1)throw new l.default(l.default.TYPE.NOT_VALID_HANDLER).getError();return e._registry.has(t)?(h.debug("Plugin <"+t+"> is already registered, do not register again"),!1):(e._registry.set(t,n),h.debug("Plugin <"+t+"> has been registered successfully"),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),h.debug("Unregistered <"+t+"> plugin."))}}]),e}();p._registry=new Map,t.default=p;var _=p.register;t.registerPlugin=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this._map=new Map}return i(e,[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=e.concat(o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}]),e}();t.default=a},function(e,t){e.exports={name:"playkit-js",version:"0.2.0",main:"dist/playkit.js",scripts:{clean:"rm -rf ./dist",prebuild:"npm run clean","build:prod":"NODE_ENV=production webpack",build:"webpack",dev:"webpack --progress --colors --watch",test:"NODE_ENV=test karma start --color","test:chrome":"NODE_ENV=test karma start --color --browsers Chrome","test:chrome:dots":"NODE_ENV=test karma start --color --browsers Chrome --reporters dots","test:firefox":"NODE_ENV=test karma start --color --browsers Firefox","test:safari":"NODE_ENV=test karma start --color --browsers Safari","test:watch":"NODE_ENV=test karma start --color --auto-watch",start:"webpack-dev-server",release:"npm run build:prod && npm run commit:dist && standard-version",publish:"git push --follow-tags --no-verify origin develop",eslint:"eslint . --color",flow:"flow check","eslint:flow:test":"npm run eslint && npm run flow && npm run test","commit:dist":"git add --all dist && (git commit -m 'chore: update dist' || exit 0)","prepush-msg:build":"echo '\nRunning build before push...\n' && exit 0","prepush-msg:dist":"echo '\nAdding dist files to a seperate commit...\n' && exit 0","prepush-msg:done":"echo '\nPre push tasks are done.\n' && exit 0"},"pre-push":["prepush-msg:build","prebuild","build","build:prod","prepush-msg:dist","commit:dist","prepush-msg:done"],devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-eslint":"^7.1.1","babel-loader":"^6.2.7","babel-plugin-istanbul":"^4.0.0","babel-plugin-transform-class-properties":"^6.22.0","babel-plugin-transform-flow-strip-types":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-register":"^6.23.0",chai:"^3.5.0","cross-env":"^3.1.4","css-loader":"^0.28.4",eslint:"^3.10.0","eslint-loader":"^1.6.1","eslint-plugin-flowtype":"^2.30.0","eslint-plugin-import":"^2.2.0","eslint-plugin-mocha-no-only":"^0.0.5","flow-bin":"latest",istanbul:"^0.4.5",karma:"^1.5.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.2",mocha:"^3.2.0","mocha-cli":"^1.0.1","pre-push":"^0.1.1",sinon:"^2.0.0","sinon-chai":"^2.8.0","standard-version":"^4.0.0","style-loader":"^0.18.2","uglifyjs-webpack-plugin":"^0.4.3",webpack:"latest","webpack-dev-server":"latest"},repository:{type:"git",url:"https://github.com/kaltura/playkit-js"},keywords:["kaltura","player","html5 player"],license:"AGPLV3",bugs:{url:"https://github.com/kaltura/playkit-js/issues"},homepage:"https://github.com/kaltura/playkit-js",dependencies:{"js-logger":"^1.3.0"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),l=r(s),c=n(2),f=r(c),d=n(7),h=r(d),p=n(8),_=n(13),g=r(_),y=n(5),v=(r(y),n(3)),E=(r(v),n(4)),b=(r(E),n(6)),T=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._eventManager=new h.default,r._createVideoElement(),r._loadMediaSourceAdapter(e,n),r.attach(),r}return o(t,e),u(t,null,[{key:"createEngine",value:function(e,t){return new this(e,t)}},{key:"canPlayType",value:function(e){return g.default.canPlayType(e)}}]),u(t,[{key:"destroy",value:function(){this.detach(),this._mediaSourceAdapter&&(this._mediaSourceAdapter.destroy(),g.default.destroy()),this._el&&(this.pause(),this._el.removeAttribute("src"),this._el.parentNode&&this._el.parentNode.removeChild(this._el)),this._eventManager.destroy()}},{key:"attach",value:function(){var e=this;for(var t in p.HTML5_EVENTS)!function(t){e._eventManager.listen(e._el,p.HTML5_EVENTS[t],function(){e.dispatchEvent(new f.default(p.HTML5_EVENTS[t]))})}(t);this._mediaSourceAdapter&&(this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}))}},{key:"detach",value:function(){for(var e in p.HTML5_EVENTS)this._eventManager.unlisten(this._el,p.HTML5_EVENTS[e]);this._mediaSourceAdapter&&(this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.TEXT_TRACK_CHANGED))}},{key:"getVideoElement",value:function(){return this._el}},{key:"_createVideoElement",value:function(){this._el=document.createElement("video"),this._el.id=(0,b.uniqueId)(5),this._el.className="playkit-engine-html5",this._el.controls=!1}},{key:"_loadMediaSourceAdapter",value:function(e,t){this._mediaSourceAdapter=g.default.getMediaSourceAdapter(this.getVideoElement(),e,t)}},{key:"selectVideoTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectVideoTrack(e)}},{key:"selectAudioTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectAudioTrack(e)}},{key:"selectTextTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectTextTrack(e)}},{key:"hideTextTrack",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.hideTextTrack()}},{key:"enableAdaptiveBitrate",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.enableAdaptiveBitrate()}},{key:"play",value:function(){return this._el.play()}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.load():Promise.resolve({})}},{key:"ready",value:function(){}},{key:"id",get:function(){return t.id}},{key:"src",set:function(e){this._el.src=e},get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.src:""}},{key:"currentTime",get:function(){return this._el.currentTime},set:function(e){this._el.currentTime=e}},{key:"duration",get:function(){return this._el.duration}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}}],[{key:"isSupported",value:function(){try{t.TEST_VID=document.createElement("video"),t.TEST_VID.volume=.5}catch(e){return!1}return!!t.TEST_VID.canPlayType}}]),t}(l.default);T.id="html5",t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),f=n(8),d=n(0),h=(r(d),n(5)),p=r(h),_=n(3),g=r(_),y=n(4),v=r(y),E=n(12),b=r(E),T=function(e){function t(e,n){i(this,t),t._logger.debug("Creating adapter");var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._eventManager=new c.default,r}return o(t,e),s(t,null,[{key:"canPlayType",value:function(e){var n="string"==typeof e&&!!document.createElement("video").canPlayType(e.toLowerCase());return t._logger.debug("canPlayType result for mimeType:"+e+" is "+n.toString()),n}}]),s(t,[{key:"load",value:function(){var e=this;return this._loadPromise||(this._loadPromise=new Promise(function(n,r){e._eventManager.listen(e._videoElement,f.HTML5_EVENTS.LOADED_DATA,function(){e._eventManager.unlisten(e._videoElement,f.HTML5_EVENTS.LOADED_DATA);var r={tracks:e._getParsedTracks()};t._logger.debug("The source has been loaded successfully"),n(r)}),e._eventManager.listen(e._videoElement,f.HTML5_EVENTS.ERROR,function(n){e._eventManager.unlisten(e._videoElement,f.HTML5_EVENTS.ERROR),t._logger.error(n),r(n)}),e._sourceObj&&e._sourceObj.url&&(e._videoElement.src=e._sourceObj.url)})),this._loadPromise}},{key:"destroy",value:function(){t._logger.debug("destroy"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._eventManager.destroy(),this._loadPromise=null}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}},{key:"_getParsedVideoTracks",value:function(){var e=this._videoElement.videoTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].selected,label:e[n].label,language:e[n].language,index:n};t.push(new p.default(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._videoElement.audioTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].enabled,label:e[n].label,language:e[n].language,index:n};t.push(new g.default(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=this._videoElement.textTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={kind:e[n].kind,active:"showing"===e[n].mode,label:e[n].label,language:e[n].language,index:n};t.push(new v.default(r))}return t}},{key:"selectVideoTrack",value:function(e){var t=this._videoElement.videoTracks;e instanceof p.default&&t&&t[e.index]&&(this._disableVideoTracks(),t[e.index].selected=!0,this._onTrackChanged(e))}},{key:"selectAudioTrack",value:function(e){var t=this._videoElement.audioTracks;e instanceof g.default&&t&&t[e.index]&&(this._disableAudioTracks(),t[e.index].enabled=!0,this._onTrackChanged(e))}},{key:"selectTextTrack",value:function(e){var t=this._videoElement.textTracks;e instanceof v.default&&("subtitles"===e.kind||"captions"===e.kind)&&t&&t[e.index]&&(this._disableTextTracks(),t[e.index].mode="showing",this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._disableTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){t._logger.debug("Enabling adaptive bitrate not supported")}},{key:"_disableVideoTracks",value:function(){var e=this._videoElement.videoTracks;if(e)for(var t=0;t<e.length;t++)e[t].selected=!1}},{key:"_disableAudioTracks",value:function(){var e=this._videoElement.audioTracks;if(e)for(var t=0;t<e.length;t++)e[t].enabled=!1}},{key:"_disableTextTracks",value:function(){var e=this._videoElement.textTracks;if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled"}},{key:"src",get:function(){return this._videoElement.src}}]),t}(b.default);T.id="NativeAdapter",T._logger=b.default.getLogger(T.id),t.default=T},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return new u.default(e,t||{})}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Utils=t.TextTrack=t.AudioTrack=t.VideoTrack=t.Track=t.BasePlugin=t.registerPlugin=t.BaseMediaSourceAdapter=t.registerMediaSourceAdapter=void 0,t.loadPlayer=a;var o=n(9),u=i(o),s=n(1),l=i(s),c=n(18),f=r(c),d=n(12),h=i(d),p=n(13),_=n(15),g=n(14),y=i(g),v=n(0),E=i(v),b=n(5),T=i(b),m=n(3),k=i(m),O=n(4),w=i(O),A=n(6),P=r(A),S=f.version;l.default.getLogger().log("%c Playkit "+S,"color: yellow; font-size: large"),l.default.getLogger().log("%c For more details see https://github.com/kaltura/playkit-js","color: yellow;"),t.registerMediaSourceAdapter=p.registerMediaSourceAdapter,t.BaseMediaSourceAdapter=h.default,t.registerPlugin=_.registerPlugin,t.BasePlugin=y.default,t.Track=E.default,t.VideoTrack=T.default,t.AudioTrack=k.default,t.TextTrack=w.default,t.Utils=P,t.VERSION=S,t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),s=(r(u),n(7)),l=r(s),c=n(23),f=r(c),d=n(16),h=r(d),p=n(8),_=n(2),g=r(_),y=n(1),v=r(y),E=function(){function e(t){var n,r,o,u,s,c,d=this;a(this,e),this._transitions=(c={},i(c,h.default.IDLE,(n={},i(n,p.HTML5_EVENTS.LOAD_START,function(){d._updateState(h.default.LOADING),d._dispatchEvent()}),i(n,p.HTML5_EVENTS.PLAY,function(){d._updateState(h.default.BUFFERING),d._dispatchEvent()}),n)),i(c,h.default.LOADING,(r={},i(r,p.HTML5_EVENTS.LOADED_METADATA,function(){d._player.config.playback.autoplay?d._updateState(h.default.PLAYING):d._updateState(h.default.PAUSED),d._dispatchEvent()}),i(r,p.HTML5_EVENTS.ERROR,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),r)),i(c,h.default.PAUSED,(o={},i(o,p.HTML5_EVENTS.PLAY,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(o,p.HTML5_EVENTS.PLAYING,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(o,p.HTML5_EVENTS.ENDED,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),o)),i(c,h.default.PLAYING,(u={},i(u,p.HTML5_EVENTS.PAUSE,function(){d._updateState(h.default.PAUSED),d._dispatchEvent()}),i(u,p.HTML5_EVENTS.WAITING,function(){d._updateState(h.default.BUFFERING),d._dispatchEvent()}),i(u,p.HTML5_EVENTS.ENDED,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),i(u,p.HTML5_EVENTS.ERROR,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),u)),i(c,h.default.BUFFERING,(s={},i(s,p.HTML5_EVENTS.PLAYING,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(s,p.HTML5_EVENTS.PAUSE,function(){d._updateState(h.default.PAUSED),d._dispatchEvent()}),s)),c),this._player=t,this._logger=v.default.getLogger("StateManager"),this._eventManager=new l.default,this._history=[],this._prevState=null,this._curState=new f.default(h.default.IDLE),this._attachListeners()}return o(e,[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,p.HTML5_EVENTS.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.WAITING,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){this._logger.debug("Do transition request",e);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new f.default(e),this._logger.debug("Switch player state: from "+this._prevState.type+" to "+this._curState.type))}},{key:"_dispatchEvent",value:function(){var e=new g.default(p.CUSTOM_EVENTS.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}]),e}();t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}return i(e,[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={VIDEO:"video",AUDIO:"audio",TEXT:"text"};t.default=r},function(e,t,n){t=e.exports=n(26)(void 0),t.push([e.i,'.playkit-container {\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  color: #fff;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n*[class^="playkit-engine-"] {\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n}\n',""])},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.3.0";var u,s={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){u=e},o.setLevel=function(e){h.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},o.get=function(e){return s[e]||(s[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,u=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(u,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?u=console.warn:i.level===o.ERROR&&console.error?u=console.error:i.level===o.INFO&&console.info&&(u=console.info),e.formatter(r,i),n(u,r))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){var r=n(25);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(29)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(c(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(c(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],u=a[1],s=a[2],l=a[3],c={css:u,media:s,sourceMap:l};r[o]?r[o].parts.push(c):n.push(r[o]={id:o,parts:[c]})}return n}function a(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=E[E.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),E.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=E.indexOf(e);t>=0&&E.splice(t,1)}function u(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=v++;n=y||(y=u(t)),r=f.bind(null,n,l,!1),i=f.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=h.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(t),r=d.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function f(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=T(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=b(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(o),u&&URL.revokeObjectURL(u)}var p={},_=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),y=null,v=0,E=[],b=n(30);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=_()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var u=n[o],s=p[u.id];s.refs--,a.push(s)}if(e){r(i(e,t),t)}for(var o=0;o<a.length;o++){var s=a[o];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete p[s.id]}}}};var T=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t){e.exports={playback:{preload:"none",autoplay:!1,muted:!1,options:{html5:{hls:{},dash:{}}},streamPriority:[{engine:"html5",format:"hls"},{engine:"html5",format:"dash"},{engine:"html5",format:"progressive"}]}}}])});
//# sourceMappingURL=playkit.min.js.map