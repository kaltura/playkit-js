{"version":3,"sources":["./core/webpack/universalModuleDefinition","./core/webpack/bootstrap 020319cf5e3088bd5327","./core/./utils/logger.js","./core/./error/error.js","./core/./event/fake-event.js","./core/./utils/util.js","./core/./event/event-type.js","./core/./track/track.js","./core/./event/event-manager.js","./core/./track/video-track.js","./core/./track/audio-track.js","./core/./track/text-track.js","./core/./player.js","./core/./utils/env.js","./core/./event/fake-event-target.js","./core/./utils/multi-map.js","./core/./plugin/base-plugin.js","./core/./state/state-type.js","./core/./track/track-type.js","./core/./middleware/base-middleware.js","./core/./engines/html5/media-source/media-source-provider.js","./core/./engines/html5/media-source/base-media-source-adapter.js","./core/./drm/base-drm-protocol.js","./core/./drm/drm-scheme.js","./core/./track/vtt-cue.js","./core/./track/text-track-display.js","./core/./plugin/plugin-manager.js","./core/./track/text-style.js","./core/./engines/stream-type.js","./core/./engines/engine-type.js","./core/./media-type.js","./core/./track/abr-mode-type.js","./core/./playkit.js","./core/../node_modules/ua-parser-js/src/ua-parser.js","./core/../node_modules/webpack/buildin/amd-options.js","./core/./utils/poster-manager.js","./core/./utils/jsonp.js","./core/../node_modules/js-logger/src/logger.js","./core/./error/severity.js","./core/./error/code.js","./core/./error/category.js","./core/./utils/locale.js","./core/./engines/html5/html5.js","./core/./engines/html5/media-source/adapters/native-adapter.js","./core/./utils/resolution.js","./core/./drm/fairplay.js","./core/./drm/drm-support.js","./core/./engines/html5/capabilities/html5-autoplay.js","./core/./assets/encoding-sources.json","./core/./engines/html5/capabilities/html5-is-supported.js","./core/./state/state-manager.js","./core/./state/state.js","./core/./track/label-to-track-map.js","./core/./track/label-options.js","./core/./middleware/playback-middleware.js","./core/./middleware/middleware.js","./core/./player-config.json","webpack:///./assets/style.css?7d9b","./core/./assets/style.css","./core/../node_modules/css-loader/lib/css-base.js","./core/../node_modules/style-loader/lib/addStyles.js","./core/../node_modules/style-loader/lib/urls.js"],"names":["JsLogger","LogLevel","DEBUG","INFO","TIME","WARN","ERROR","OFF","LogLevelType","Object","keys","forEach","key","useDefaults","defaultLevel","getLogger","name","get","getLogLevel","getLevel","setLogLevel","level","setLevel","CLASS_NAME","Error","severity","category","code","data","_logger","error","Severity","Category","Code","FakeEvent","type","payload","bubbles","cancelable","defaultPrevented","timeStamp","window","performance","now","Date","isTrusted","currentTarget","target","stopped","_Number","isNumber","n","Number","isInt","isFloat","_String","capitlize","string","charAt","toUpperCase","slice","endsWith","searchString","indexOf","length","_Object","merge","objects","obj","assign","isObject","item","Array","isArray","mergeDeep","sources","source","shift","copyDeep","node","e","i","isEmptyObject","hasOwnProperty","getPropertyPath","propertyPath","split","reduce","o","x","hasPropertyPath","properties","prop","createPropertyPath","path","value","pathArray","current","head","tail","undefined","deletePropertyPath","pop","defer","res","rej","promise","Promise","resolve","reject","bind","thisObj","fn","apply","arguments","_Generator","uniqueId","from","to","Math","random","toString","substr","guid","S4","substring","_Dom","addClassName","element","className","classList","add","hasClassName","removeClassName","remove","replace","RegExp","test","setAttribute","removeAttribute","setStyle","style","getPropertyValue","setProperty","appendChild","parent","child","removeChild","prependTo","firstChild","insertBefore","getElementById","id","document","createElement","tagName","loadScriptAsync","url","r","t","getElementsByTagName","s","src","async","onload","onreadystatechange","readyState","onerror","onabort","parentNode","_Http","execute","params","method","headers","request","XMLHttpRequest","status","jsonResponse","JSON","parse","responseText","open","setRequestHeader","send","jsonp","String","Generator","Dom","Http","Utils","Html5EventType","ABORT","CAN_PLAY","CAN_PLAY_THROUGH","DURATION_CHANGE","EMPTIED","ENDED","LOADED_DATA","LOADED_METADATA","LOAD_START","PAUSE","PLAY","PLAYING","PROGRESS","RATE_CHANGE","SEEKED","SEEKING","STALLED","SUSPEND","TIME_UPDATE","VOLUME_CHANGE","WAITING","CustomEventType","MEDIA_LOADED","PLAYER_RESET","PLAYER_DESTROY","ENTER_FULLSCREEN","EXIT_FULLSCREEN","REQUESTED_ENTER_FULLSCREEN","REQUESTED_EXIT_FULLSCREEN","AUTOPLAY_FAILED","FALLBACK_TO_MUTED_AUTOPLAY","CHANGE_SOURCE_STARTED","CHANGE_SOURCE_ENDED","MUTE_CHANGE","VIDEO_TRACK_CHANGED","AUDIO_TRACK_CHANGED","TEXT_TRACK_CHANGED","TEXT_CUE_CHANGED","TRACKS_CHANGED","ABR_MODE_CHANGED","PLAYER_STATE_CHANGED","FIRST_PLAY","PLAYBACK_STARTED","SOURCE_SELECTED","TEXT_STYLE_CHANGED","AD_LOADED","AD_STARTED","AD_RESUMED","AD_PAUSED","AD_CLICKED","AD_SKIPPED","AD_COMPLETED","AD_ERROR","ALL_ADS_COMPLETED","AD_BREAK_START","AD_BREAK_END","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_PROGRESS","EventType","Track","_id","_active","_label","_language","_index","inputLang","trackLang","toLowerCase","startsWith","settings","active","label","language","index","EventManager","_bindingMap","removeAll","listener","oneListener","event","unlisten","call","listen","binding","Binding_","push","list","listeners","getAll","clear","addEventListener","removeEventListener","VideoTrack","_bandwidth","_width","_height","bandwidth","width","height","AudioTrack","TextTrack","_kind","kind","PLAYBACK_RATES","DEFAULT_PLAYBACK_RATE","BLACK_COVER_CLASS_NAME","CONTAINER_CLASS_NAME","POSTER_CLASS_NAME","ENGINE_CLASS_NAME","SUBTITLES_STYLE_ID_NAME","SUBTITLES_CLASS_NAME","AUTO","DURATION_OFFSET","REPOSITION_CUES_TIMEOUT","Player","debug","_engines","Engine","runCapabilities","engineType","resolveCapabilities","result","_playerCapabilities","promises","getCapabilities","all","then","arrayOfResults","capabilities","catch","prepareVideoElement","config","_activeTextCues","_textDisplaySettings","_playbackAttributesState","muted","volume","rate","audioLanguage","textLanguage","_env","_tracks","_firstPlay","_fullscreen","_firstPlayInCurrentSession","_repositionCuesTimeout","_loadingMedia","_loading","_playbackStarted","_reset","_destroyed","_config","_defaultConfig","_eventManager","_posterManager","_stateManager","_pluginManager","_playbackMiddleware","_textStyle","_createReadyPromise","_createPlayerContainer","_appendDomElements","configure","logLevel","_hasSources","_configureOrLoadPlugins","plugins","receivedSourcesWhenHasEngine","_engine","reset","dispatchEvent","_selectEngineByPriority","_appendEngineEl","_attachMedia","_handlePlaybackOptions","setSrc","poster","_handlePreload","_handleAutoPlay","_readyPromise","resetFlags","startTime","playback","load","_updateTracks","tracks","_maybeSetTracksLabels","_setDefaultTracks","customLabels","callbackType","_setTracksCustomLabels","_getTracksByType","callback","track","play","_play","_prepareVideoElement","_playAfterAsyncMiddleware","CRITICAL","PLAYER","NO_SOURCE_PROVIDED","pause","_pause","_el","getVideoElement","_updateTextDisplay","_resetStateFlags","_engineType","_streamType","_showBlackCover","destroy","LIVE","isLive","dvr","seekToLiveEdge","getStartTimeOfDvrWindow","video","VIDEO","find","audio","AUDIO","text","TEXT","selectVideoTrack","selectAudioTrack","hideTextTrack","selectTextTrack","textTracks","map","textTrack","selectedTextTrack","enableAdaptiveBitrate","isAdaptiveBitrateEnabled","_updateCueDisplaySettings","hasBeenReset","adsPlugin","skipAd","adTagUrl","playAdNow","values","el","_playerId","engineEl","classname","classnameWithId","_textDisplayEl","_blackCoverEl","getElement","plugin","updateConfig","getConfig","getMiddlewareImpl","use","listenOnce","streamPriority","preferNative","priority","engineId","engine","format","formatSources","canPlaySource","_loadEngine","selectedSource","warn","restore","createEngine","html5Event","browser","_removeTextCuePatch","_markActiveTrack","selectedVideoTrack","ready","selectedAudioTrack","_onTracksChanged","_onCueChange","_onPlay","_onPlaying","_onEnded","playbackRate","_resetTextCuesAndReposition","clearTimeout","setTimeout","filteredActiveTextCues","filter","textCue","cueEndTime","_endTime","cueStartTime","_startTime","currTime","currentTime","playsinline","preload","autoplay","_canPreload","ima","allowMutedAutoPlay","mutedAutoPlay","show","isDvr","hide","_hideBlackCover","visibility","paused","_addTextTrackOffOption","cues","activeCues","cue","activeTracks","getActiveTracks","playbackConfig","offTextTrack","langComparer","currentOrConfiguredTextLang","_getLanguage","currentOrConfiguredAudioLang","_setDefaultTrack","configuredLanguage","defaultTrack","localeTrack","selectTrack","buffered","boundedTo","duration","vol","boundedVol","seeking","mute","clientWidth","clientHeight","sessionId","session","loading","sheet","cssRules","deleteRule","useNativeTextTrack","insertRule","toCSS","message","clone","Env","getResult","FakeEventTarget","_listeners","dispatchTarget","handleEvent","exception","MultiMap","_map","Map","has","set","concat","splice","BasePlugin","player","RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED","eventManager","logger","constructor","defaultConfig","attr","update","StateType","IDLE","LOADING","PAUSED","BUFFERING","TrackType","BaseMiddleware","next","MediaSourceProvider","mediaSourceAdapter","_mediaSourceAdapters","includes","_orderMediaSourceAdapters","mediaSourceAdapters","mimetype","canPlayType","drmData","canPlayDrm","_selectedAdapter","mse","unshift","videoElement","createAdapter","registerMediaSourceAdapter","register","BaseMediaSourceAdapter","_videoElement","_sourceObj","_handleLiveTimeUpdate","_trigger","_throwNotImplementedError","videoTrack","audioTrack","_getLiveEdge","_loadPromise","mimeType","BaseDrmProtocol","DrmSupport","DrmScheme","WIDEVINE","PLAYREADY","FAIRPLAY","autoKeyword","directionSetting","alignSetting","findDirectionSetting","dir","findAlignSetting","align","VTTCue","endTime","displayState","_pauseOnExit","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","_text","TypeError","resetCue","setting","SyntaxError","Cue","fontScale","parseTimeStamp","input","computeSeconds","h","m","f","match","ESCAPE","TAG_NAME","c","b","u","ruby","rt","v","lang","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","consume","unescape1","unescape","shouldAdd","localName","annotation","trim","rootDiv","tagStack","ts","createProcessingInstruction","createTextNode","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","childNodes","pushNodes","nextTextNode","textContent","innerText","charCodeAt","computeLinePos","line","snapToLines","textTrackList","mediaElement","trackList","count","mode","StyleBox","styles","div","val","unit","CueStyleBox","styleOptions","isIE8","navigator","userAgent","color","backgroundColor","textShadow","WebVTTSet","fontSet","backgroundSet","edgeSet","position","left","right","top","bottom","display","writingMode","vertical","unicodeBidi","applyStyles","textAlign","font","whiteSpace","direction","stylesunicodeBidi","textPos","positionAlign","size","formatStyle","move","box","BoxPosition","overlaps","b2","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","max","lineHeight","axis","toMove","boxes","container","min","y","intersectArea","reference","moveBoxToLinePosition","styleBox","containerBox","boxPositions","findBestPosition","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","p","intersectPercentage","boxPosition","linePos","step","round","maxPosition","initialAxis","abs","ceil","reverse","calculatedPercentage","lineAlign","toCSSCompatValues","convertCueToDOMTree","cuetext","FONT_SIZE_PERCENT","FONT_STYLE","CUE_BACKGROUND_PADDING","processCues","overlay","paddedOverlay","margin","shouldCompute","getSimpleBoxPosition","fontSize","PluginManager","_plugins","_registry","RUNTIME_ERROR_NOT_REGISTERED_PLUGIN","pluginClass","isValid","createPlugin","_destroy","delete","handler","prototype","RUNTIME_ERROR_NOT_VALID_HANDLER","registerPlugin","TextStyle","fontFamily","FontFamily","SANS_SERIF","fontColor","StandardColors","WHITE","fontOpacity","StandardOpacities","OPAQUE","BLACK","backgroundOpacity","fontEdge","EdgeStyles","NONE","attributes","_toRGBA","shadows","shadow","join","clonedTextStyle","opacity","FontSizes","StreamType","DASH","HLS","PROGRESSIVE","EngineType","HTML5","FLASH","SILVERLIGHT","MediaType","VOD","UNKNOWN","AbrMode","MANUAL","loadPlayer","VERSION","PLAYER_NAME","setCapabilities","PosterManager","_createEl","posterUrl","_posterUrl","_removeEl","JSONP_TIMEOUT","CALLBACK_PREFIX","JSONP_FORMAT_STRING","options","timeout","script","callbackId","scriptUri","timer","_cleanup","NETWORK","TIMEOUT","callbackResult","Locale","languages","userLanguage","Html5","_capabilities","capability","runCapability","getCapability","mergedResults","_showTextTrackFirstTime","_canLoadMediaSourceAdapterPromise","_createVideoElement","_init","detach","_mediaSourceAdapter","_handleVideoError","extended","_getMsExtendedError","MEDIA","VIDEO_ERROR","msExtendedCode","pow","_removeCueChangeListener","_addCueChangeListener","playPromise","_loadMediaSourceAdapter","attach","controls","getMediaSourceAdapter","textTrackEl","_getSelectedTextTrackElement","oncuechange","TextTrackCue","RECOVERABLE","UNABLE_TO_CREATE_TEXT_CUE","parseInt","NaN","seekable","played","defaultMuted","loop","defaultPlaybackRate","ended","networkState","videoHeight","videoWidth","getAttribute","NativeAdapter","TEST_VIDEO","_drmProtocols","drmProtocol","_drmProtocol","_maybeSetDrmPlayback","_progressiveSources","progressive","_liveEdge","setDrmPlayback","_dispatchErrorCallback","suitableTrack","_onLoadedData","_onError","_isProgressivePlayback","_setProgressiveSource","parseTracksAndResolve","_playerTracks","_getParsedTracks","_addNativeAudioTrackChangeListener","_addNativeTextTrackChangeListener","_addNativeTextTrackAddedListener","_handleLiveDurationChange","NATIVE_ADAPTER_LOAD_FAILED","_liveDurationChangeInterval","clearInterval","videoTracks","_getParsedVideoTracks","audioTracks","_getParsedAudioTracks","_getParsedTextTracks","_getParsedProgressiveVideoTracks","_getParsedAdaptiveVideoTracks","parsedTracks","selected","enabled","_selectProgressiveVideoTrack","selectAdaptiveVideoTrack","_onTrackChanged","_disableVideoTracks","_removeNativeAudioTrackChangeListener","_disableAudioTracks","_onNativeAudioTrackChange","pkAudioTracks","getActivePKAudioTrackIndex","activeAudioTrack","getActiveVidAudioTrackIndex","vidIndex","pkIndex","pkAudioTrack","_removeNativeTextTrackChangeListener","_disableTextTracks","_onNativeTextTrackChange","pkTextTracks","pkOffTrack","getActivePKTextTrackIndex","activeTextTrack","getActiveVidTextTrackIndex","pkTextTrack","_onNativeTextTrackAdded","end","Infinity","setInterval","liveEdge","Event","start","getSuitableSourceForResolution","mostSuitableWidth","mostSuitableWidthTracks","minWidthDiff","widthDiff","videoRatio","mostSuitableWidthAndRatioTracks","minRatioDiff","ratioDiff","maxBandwidth","FairPlay","isProtocolSupported","errorCallback","_WebkitEvents","NEED_KEY","_onWebkitNeedKey","_errorCallback","fpDrmData","drmEntry","scheme","_keySession","fpCertificate","certificate","initData","contentId","_extractContentId","aCertificate","_base64DecodeUint8Array","_concatInitDataIdAndCertificate","webkitKeys","keySystem","_selectKeySystem","webkitSetMediaKeys","WebKitMediaKeys","COULD_NOT_CREATE_MEDIA_KEYS","createSession","COULD_NOT_CREATE_KEY_SESSION","KEY_MESSAGE","_onWebkitKeyMessage","KEY_ADDED","_onWebkitKeyAdded","KEY_ERROR","_onWebkitKeyError","responseType","_licenseRequestLoaded","LICENSE_REQUEST_FAILED","_base64EncodeUint8Array","licenseUrl","keyText","responseObj","BAD_FAIRPLAY_RESPONSE","isValidResponse","_validateResponse","valid","ckc","DRM","status_code","details","link","href","_arrayToString","hostname","isTypeSupported","_KeySystem","array","fromCharCode","Uint16Array","buffer","raw","atob","rawLength","Uint8Array","ArrayBuffer","cert","_stringToArray","offset","byteLength","dataView","DataView","initDataArray","setUint32","idArray","certArray","strLen","keyStr","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","NOT_SUPPORTED","_Browsers","drmScheme","Safari","device","os","Chrome","Firefox","Edge","IE","osVersion","version","parseFloat","EncodingSources","WAIT_TIME","testVideoElement","Base64Mp4Source","Html5AutoPlayCapability","_playPromiseResult","_isDataSaverMode","_getPlayPromise","connection","saveData","_forcePromiseReturnValue","supported","Html5IsSupportedCapability","_vid","_result","isSupported","StateManager","_transitions","_updateState","_dispatchEvent","_prevState","_player","_history","_curState","_attachListeners","_doTransition","transition","State","_duration","_timestamp","LabelToTrackMap","CAPTIONS","QUALITIES","LabelOptions","PlaybackMiddleware","_middleware","Actions","middlewareInstance","run","Middleware","actions","_actions","_middlewares","action","apiAction","middlewares","_executeMiddleware","composition","reduceRight"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA,6BAA6B;AAC7B,kDAAkD;;AAElD;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;;AAEA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,cAAc,gBAAgB;AAC9B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,8CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oDAAoD,IAAI;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+CAA+C,IAAI,kCAAkC,IAAI;AACzF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,sDAAsD;AACtD;;AAEA,sBAAsB;AACtB;;AAEA,+BAA+B;AAC/B;;AAEA;AACA,kCAAkC,MAAM;AACxC;;AAEA,+CAA+C;AAC/C;;AAEA,uBAAuB;AACvB;;AAEA,+BAA+B,8BAA8B,gDAAgD;AAC7G;AACA;AACA;;AAEA;;AAEA,+BAA+B,QAAQ;AACvC;;AAEA;AACA;;AAEA,sBAAsB,IAAI;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kCAAkC;AAClC;AACA,kCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,wCAAwC,KAAK;AAC7C;;AAEA;AACA;AACA;AACA,sCAAsC,EAAE;AACxC;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB;AACA,oEAAoE;AACpE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB;;AAEA,mBAAmB,uBAAuB;AAC1C;AACA,2BAA2B,EAAE;AAC7B;;AAEA;AACA;AACA;AACA,mBAAmB,IAAI;AACvB;AACA;AACA,0CAA0C,IAAI;AAC9C;;AAEA,8CAA8C,SAAS,IAAI,IAAI;AAC/D;;AAEA,0BAA0B;AAC1B;;AAEA,sBAAsB;AACtB;;AAEA,sDAAsD,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,GAAG,GAAG,KAAK,EAAE;AAC5C;;AAEA,+BAA+B,GAAG,GAAG,eAAe,IAAI;AACxD;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA,mBAAmB,YAAY;AAC/B;;AAEA;AACA;;AAEA,uBAAuB;AACvB;;AAEA;AACA;;AAEA,uBAAuB;AACvB;;AAEA,uBAAuB;AACvB;;AAEA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB,4BAA4B;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,mBAAmB,aAAa;AAChC;AACA,yCAAyC;AACzC;AACA,0BAA0B;AAC1B;AACA,+BAA+B;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B,IAAI;AAChC;;AAEA;AACA;;AAEA,wDAAwD;AACxD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AAAA;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;ACr7BD;AACA;;;;;;;;;;;;;;;;;ACAA;;IAAY9nB,K;;;;;;IAENko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LC,mBAAa,MAAML,mBAAN,GAA4BI,UAAzC;AACD;;AAEDD,WAAOvyB,IAAP,GAAc,iBAAd;AACAuyB,WAAOxqB,GAAP,GAAa0qB,SAAb;AACAnrB,aAASO,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyChB,WAAzC,CAAqD0rB,MAArD;AACD,GAjCM,CAAP;AAkCD;;QAEOjpB,K,GAAAA,K;;;;;;ACzER;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;;AAEA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;;AAEA;AACA,0CAA0C,0BAA0B;;AAEpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mEAAmE,aAAa;AAChF;;AAEA;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;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gB,iBAAiB,uBAAuB,WAAW,YAAY,wBAAwB,GAAG,2PAA2P,kBAAkB,+BAA+B,qBAAqB,uBAAuB,mBAAmB,WAAW,cAAc,YAAY,aAAa,6BAA6B,uCAAuC,iCAAiC,2BAA2B,GAAG,wBAAwB,uBAAuB,WAAW,cAAc,aAAa,YAAY,GAAG,0BAA0B,uBAAuB,gBAAgB,iBAAiB,4BAA4B,GAAG;;AAErrC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC/VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA","file":"playkit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"core\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 020319cf5e3088bd5327","//@flow\nimport * as JsLogger from 'js-logger';\n\nexport type LogLevelObject = { value: number, name: string };\nexport type LogLevels = { [level: string]: LogLevelObject };\nexport type LogLevelTypes = { [level: string]: string };\n\nconst LogLevel: LogLevels = {\n  DEBUG: JsLogger.DEBUG,\n  INFO: JsLogger.INFO,\n  TIME: JsLogger.TIME,\n  WARN: JsLogger.WARN,\n  ERROR: JsLogger.ERROR,\n  OFF: JsLogger.OFF\n};\n\nconst LogLevelType: LogLevelTypes = {};\n\n// Build the log level types enums according to the LogLevel object\nObject.keys(LogLevel).forEach(key => {\n  LogLevelType[key] = key;\n});\n\nJsLogger.useDefaults({defaultLevel: JsLogger.ERROR});\n\n/**\n * get a logger\n * @param {?string} name - the logger name\n * @returns {Object} - the logger class\n */\nfunction getLogger(name?: string): Object {\n  if (!name) {\n    return JsLogger;\n  }\n  return JsLogger.get(name);\n}\n\n/**\n * get the log level\n * @param {?string} name - the logger name\n * @returns {LogLevelObject} - the log level\n */\nfunction getLogLevel(name?: string): LogLevelObject {\n  return getLogger(name).getLevel();\n}\n\n/**\n * sets the logger level\n * @param {LogLevelObject} level - the log level\n * @param {?string} name - the logger name\n * @returns {void}\n */\nfunction setLogLevel(level: LogLevelObject, name?: string): void {\n  getLogger(name).setLevel(level);\n}\n\nexport default getLogger;\nexport {LogLevel, LogLevelType, getLogLevel, setLogLevel};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/logger.js","//@flow\nimport getLogger, {getLogLevel, LogLevel} from '../utils/logger'\nimport {Severity} from './severity'\nimport type {SeverityType} from './severity'\nimport {Code} from './code'\nimport type {CodeType} from './code'\nimport {Category} from './category'\nimport type {CategoryType} from './category'\n\nconst CLASS_NAME: string = 'Error';\n\n/**\n * @classdesc This is a description of the error class.\n */\nexport default class Error {\n  severity: number;\n  category: number;\n  code: number;\n  data: any;\n  /**\n   * @enum {number}\n   */\n  static Severity: SeverityType = Severity;\n  /**\n   * @enum {number}\n   */\n  static Category: CategoryType = Category;\n  /**\n   * @enum {number}\n   */\n  static Code: CodeType = Code;\n  static _logger: any = getLogger(CLASS_NAME);\n\n  /**\n   * @constructor\n   * @param {number} severity - error's severity\n   * @param {number} category - error's category.\n   * @param {number} code - error's code.\n   * @param {any} data - additional data for the error.\n   */\n  constructor(severity: number, category: number, code: number, data: any = {}) {\n    this.severity = severity;\n    this.category = category;\n    this.code = code;\n    this.data = data;\n    if (getLogLevel(CLASS_NAME) !== LogLevel.OFF) {\n      Error._logger.error(`Category:${category} | Code:${code} |`, data);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./error/error.js","//@flow\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nclass FakeEvent {\n  /** @const {boolean} */\n  bubbles: boolean;\n\n  /** @const {boolean} */\n  cancelable: boolean;\n\n  /** @const {boolean} */\n  defaultPrevented: boolean;\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number | Date;\n\n  /** @const {string} */\n  type: string;\n\n  /** @const {boolean} */\n  isTrusted: boolean;\n\n  /** @type {EventTarget} */\n  currentTarget: any;\n\n  /** @type {EventTarget} */\n  target: any;\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n  stopped: boolean;\n\n  payload: any;\n\n  constructor(type: string, payload: any) {\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  preventDefault() {\n  }\n\n  /**\n   * Stops processing event listeners for this event.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopImmediatePropagation() {\n    this.stopped = true;\n  }\n\n  /**\n   * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopPropagation() {\n  }\n}\n\nexport default FakeEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event.js","//@flow\nimport {jsonp} from './jsonp'\n\n\"use strict\";\n\nconst _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function (n: number): boolean {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nconst _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function (string: string): string {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function (string: string, searchString: string): boolean {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nconst _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function (objects: Array<Object>): Object {\n    let target = {};\n    for (let obj of objects) {\n      Object.assign(target, obj);\n    }\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function (item: any) {\n    return (item && typeof item === 'object' && !Array.isArray(item));\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function (target: any, ...sources: any): Object {\n    if (!sources.length) {\n      return target;\n    }\n    const source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (const key in source) {\n        if (this.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, {[key]: {}});\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, {[key]: source[key]});\n        }\n      }\n    }\n    return this.mergeDeep(target, ...sources);\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function (data: any): any {\n    let node;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach((e, i) => {\n        if (\n          (typeof e === \"object\" && e !== {}) ||\n          (Array.isArray(e) && e.length > 0)\n        ) {\n          node[i] = this.copyDeep(e);\n        }\n      });\n    } else if (typeof data === \"object\") {\n      node = Object.assign({}, data);\n      Object.keys(node).forEach((key) => {\n        if (\n          (typeof node[key] === \"object\" && node[key] !== {}) ||\n          (Array.isArray(node[key]) && node[key].length > 0)\n        ) {\n          node[key] = this.copyDeep(node[key]);\n        }\n      });\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function (obj: Object): boolean {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key))\n        return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function (obj: Object, propertyPath: string): any {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return (typeof o === \"undefined\" || o === null) ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function (obj: Object, propertyPath: string): boolean {\n    if (!propertyPath) {\n      return false;\n    }\n    let properties = propertyPath.split('.');\n    for (let i = 0; i < properties.length; i++) {\n      let prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Create an object with a given property path.\n   * @param {Object} obj - The object to create on.\n   * @param {string} path - The path to create in the object.\n   * @param {any} value - The value to set in the path.\n   * @returns {Object} - The result object.\n   */\n  createPropertyPath: function (obj: Object, path: string, value: any = null): Object {\n    let pathArray = path.split('.');\n    let current = obj;\n    while (pathArray.length > 1) {\n      const [head, ...tail] = pathArray;\n      pathArray = tail;\n      if (current[head] === undefined) {\n        current[head] = {};\n      }\n      current = current[head];\n    }\n    current[pathArray[0]] = value;\n    return obj;\n  },\n\n  /**\n   * Deleted a property path from an object.\n   * @param {Object} obj - The object to delete the property path from.\n   * @param {string} path - The path to delete in the object.\n   * @returns {void}\n   */\n  deletePropertyPath: function (obj: Object, path: string): void {\n    if (!obj || !path) {\n      return;\n    }\n    let pathArray = path.split('.');\n    for (let i = 0; i < pathArray.length - 1; i++) {\n      obj = obj[pathArray[i]];\n      if (typeof obj === 'undefined') {\n        return;\n      }\n    }\n    delete obj[pathArray.pop()];\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function (): DeferredPromise {\n    let res, rej;\n    // $FlowFixMe\n    let promise = new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function (thisObj: any, fn: Function): Function {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nconst _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function (length: ?number) {\n    let from = 2;\n    let to = from + ((!length || length < 0) ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function (): string {\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n  }\n};\n\nconst _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!_Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  },\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (_Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  },\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName(element: HTMLElement, className: string) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  },\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute(element: HTMLElement, name: string, value: string): void {\n    element.setAttribute(name, value);\n  },\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute(element: HTMLElement, name: string): void {\n    element.removeAttribute(name);\n  },\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle(element: HTMLElement, name: string, value: string): void {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild(parent: ?Element, child: ?Element): void {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild(parent: ?Node, child: ?Element): void {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo(child: HTMLElement, parent: HTMLElement): void {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById(id: string): any {\n    return document.getElementById(id);\n  },\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement(tagName: string): any {\n    return document.createElement(tagName);\n  },\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync(url: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      let r = false,\n        t = document.getElementsByTagName(\"script\")[0],\n        s = this.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  }\n};\n\nconst _Http = {\n  execute: function (url: string, params: any, method: string = \"POST\", headers?: Map<string, string>): Promise<any> {\n    let request = new XMLHttpRequest();\n    return new Promise((resolve, reject) => {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            let jsonResponse = JSON.parse(request.responseText);\n            resolve(jsonResponse);\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach((value, key) => {\n          request.setRequestHeader(key, value);\n        });\n      }\n      request.send(params);\n    });\n  },\n  jsonp: jsonp\n};\n\nexport {\n  _Number as Number,\n  _String as String,\n  _Object as Object,\n  _Generator as Generator,\n  _Dom as Dom,\n  _Http as Http\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/util.js","//@flow\nimport * as Utils from '../utils/util'\n\nexport type EventTypes = { [event: string]: string };\n\nconst Html5EventType: EventTypes = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\nconst CustomEventType: EventTypes = {\n  /**\n   * Fires when the media is loaded.\n   */\n  MEDIA_LOADED: 'medialoaded',\n  /**\n   * Fires when the player ends reset operation.\n   */\n  PLAYER_RESET: 'playerreset',\n  /**\n   * Fires when the player ends destroy operation.\n   */\n  PLAYER_DESTROY: 'playerdestroy',\n  /**\n   * Fires when the player enters fullscreen.\n   */\n  ENTER_FULLSCREEN: 'enterfullscreen',\n  /**\n   * Fires when the player exits fullscreen.\n   */\n  EXIT_FULLSCREEN: 'exitfullscreen',\n  /**\n   * Fires when the player received a request to enter fullscreen.\n   */\n  REQUESTED_ENTER_FULLSCREEN: 'requestedenterfullscreen',\n  /**\n   * Fires when the player received a request to exit fullscreen.\n   */\n  REQUESTED_EXIT_FULLSCREEN: 'requestedexitfullscreen',\n  /**\n   * Fires when browser fails to autoplay with sound.\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead.\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started.\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended.\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute.\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed.\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed.\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed.\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed.\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed.\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa.\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed.\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play.\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires on the first time that playback has been started.\n   */\n  PLAYBACK_STARTED: 'playbackstarted',\n  /**\n   * Fires when the player has selected the source to play.\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed.\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress'\n};\n\nconst EventType: EventTypes = Utils.Object.merge([Html5EventType, CustomEventType]);\n\nexport {EventType, Html5EventType, CustomEventType};\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-type.js","//@flow\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nexport default class Track {\n  /**\n   * Comparing language strings.\n   * @param {string} inputLang - The configured language.\n   * @param {string} trackLang - The default track language.\n   * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n   */\n  static langComparer(inputLang: string, trackLang: string): boolean {\n    try {\n      inputLang = inputLang.toLowerCase();\n      trackLang = trackLang.toLowerCase();\n      return inputLang ? (inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang)) : false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * The id of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _id: ?string;\n  /**\n   * The active mode of the track.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _active: boolean;\n  /**\n   * The label of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _label: ?string;\n  /**\n   * The language of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _language: string;\n  /**\n   * The index of the track.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _index: number;\n\n  /**\n   * Getter for the track id.\n   * @public\n   * @returns {?string} - The track id.\n   */\n  get id(): ?string {\n    return this._id;\n  }\n\n  /**\n   * Getter for the active mode of the track.\n   * @public\n   * @returns {boolean} - The active mode of the track.\n   */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * Setter for the active mode of the track.\n   * @public\n   * @param {boolean} value - Whether the track is active or not.\n   */\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  /**\n   * Getter for the label of the track.\n   * @public\n   * @returns {string} - The label of the track.\n   */\n  get label(): ?string {\n    return this._label;\n  }\n\n  /**\n   * Getter for the language of the track.\n   * @public\n   * @returns {string} - The language of the track.\n   */\n  get language(): string {\n    return this._language;\n  }\n\n  /**\n   * Getter for the index of the track.\n   * @public\n   * @returns {number} - The index of the track.\n   */\n  get index(): number {\n    return this._index;\n  }\n\n  /**\n   * Setter for the label of the track.\n   * @public\n   * @param {string} value - The label of the track.\n   */\n  set label(value: string) {\n    this._label = value;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/track.js","//@flow\nimport MultiMap from '../utils/multi-map'\nimport FakeEvent from './fake-event'\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nclass EventManager {\n  _bindingMap: MultiMap<Binding_> | null;\n\n  constructor() {\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new MultiMap();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n  destroy() {\n    this.removeAll();\n    this._bindingMap = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Attaches an event listener to an event target for only one time.\n   * @param {EventTarget} target - The event target.\n   * @param {string} type - The event type.\n   * @param {EventManager.ListenerType} listener - The event listener.\n   * @returns {void}\n   */\n  listenOnce(target: any, type: string, listener: ListenerType): void {\n    let oneListener = (event) => {\n      this.unlisten(target, type, oneListener);\n      listener.call(this, event)\n    };\n    this.listen(target, type, oneListener);\n  }\n\n\n  /**\n   * Attaches an event listener to an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} listener The event listener.\n   * @returns {void}\n   */\n  listen(target: any, type: string, listener: ListenerType): void {\n    let binding = new Binding_(target, type, listener);\n    if (this._bindingMap) {\n      this._bindingMap.push(type, binding);\n    }\n  }\n\n\n  /**\n   * Detaches an event listener from an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n   * @returns {void}\n   */\n  unlisten(target: any, type: string, listener: ?ListenerType): void {\n    if (this._bindingMap) {\n      let list = this._bindingMap.get(type);\n\n      for (let i = 0; i < list.length; ++i) {\n        let binding = list[i];\n\n        if (binding.target === target && (binding.listener === listener || !listener)) {\n          binding.unlisten();\n          if (this._bindingMap) {\n            this._bindingMap.remove(type, binding);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Detaches all event listeners from all targets.\n   * @returns {void}\n   */\n  removeAll(): void {\n    if (this._bindingMap) {\n      let listeners = this._bindingMap.getAll();\n\n      for (let listener of listeners) {\n        listener.unlisten();\n      }\n      if (this._bindingMap) {\n        this._bindingMap.clear();\n      }\n    }\n  }\n}\n\n/**\n * @typedef {function(!Event)}\n */\ntype ListenerType = (event: FakeEvent) => any;\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nclass Binding_ {\n  target: any;\n  type: string;\n  listener: ?ListenerType;\n\n  constructor(target, type, listener) {\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    this.target.addEventListener(type, listener, false);\n  }\n\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n  unlisten(): void {\n    if (!this.target)\n      return;\n\n    this.target.removeEventListener(this.type, this.listener, false);\n\n    this.target = null;\n    this.listener = null;\n  }\n}\n\nexport default EventManager;\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-manager.js","//@flow\nimport Track from './track'\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nexport default class VideoTrack extends Track {\n  /**\n   * @member {number} _bandwidth - The bandwidth of the video track\n   * @type {number}\n   * @private\n   */\n  _bandwidth: number;\n\n  /**\n   * @member {number} _width - The width of the video track\n   * @type {number}\n   * @private\n   */\n  _width: number;\n\n  /**\n   * @member {number} _height - The height of the video track\n   * @type {number}\n   * @private\n   */\n  _height: number;\n\n  /**\n   * @public\n   * @returns {number} - The bandwidth of the video track\n   */\n  get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The width of the video track\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The height of the video track\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._bandwidth = settings.bandwidth;\n    this._width = settings.width;\n    this._height = settings.height;\n    this._label = this._height ? this._height + 'p' : undefined;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/video-track.js","//@flow\nimport Track from './track'\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nexport default class AudioTrack extends Track {}\n\n\n\n// WEBPACK FOOTER //\n// ./track/audio-track.js","//@flow\nimport Track from './track'\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nexport default class TextTrack extends Track {\n  /**\n   * The kind of the text track:\n   * subtitles/captions/metadata.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _kind: string;\n\n  /**\n   * Getter for the kind of the text track.\n   * @public\n   * @returns {string} - The kind of the text track.\n   */\n  get kind(): string {\n    return this._kind;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._kind = settings.kind;\n  }\n}\n\nexport {TextTrack};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track.js","//@flow\nimport Env from './utils/env'\nimport EventManager from './event/event-manager'\nimport PosterManager from './utils/poster-manager'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport type {EventTypes} from './event/event-type'\nimport {CustomEventType, EventType, Html5EventType} from './event/event-type'\nimport * as Utils from './utils/util'\nimport Locale from './utils/locale'\nimport type {LogLevels, LogLevelTypes} from './utils/logger'\nimport getLogger, {getLogLevel, LogLevel, LogLevelType, setLogLevel} from './utils/logger'\nimport Html5 from './engines/html5/html5'\nimport PluginManager from './plugin/plugin-manager'\nimport BasePlugin from './plugin/base-plugin'\nimport StateManager from './state/state-manager'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport {Cue} from './track/vtt-cue'\nimport {processCues} from './track/text-track-display'\nimport type {StateTypes} from './state/state-type'\nimport {StateType} from './state/state-type'\nimport type {TrackTypes} from './track/track-type'\nimport {TrackType} from './track/track-type'\nimport {LabelToTrackMap} from './track/label-to-track-map'\nimport type {StreamTypes} from './engines/stream-type'\nimport {StreamType} from './engines/stream-type'\nimport type {EngineTypes} from './engines/engine-type'\nimport {EngineType} from './engines/engine-type'\nimport type {MediaTypes} from './media-type'\nimport {MediaType} from './media-type'\nimport type {AbrModes} from './track/abr-mode-type'\nimport {AbrMode} from './track/abr-mode-type'\nimport PlaybackMiddleware from './middleware/playback-middleware'\nimport DefaultPlayerConfig from './player-config.json'\nimport './assets/style.css'\nimport PKError from './error/error'\n\n/**\n * The player playback rates.\n * @type {Array<number>}\n * @const\n */\nconst PLAYBACK_RATES = [0.5, 1, 2, 4];\n\n/**\n * The player default playback rate.\n * @type {number}\n * @const\n */\nconst DEFAULT_PLAYBACK_RATE = 1;\n/**\n * The black cover class name.\n * @type {string}\n * @const\n */\nconst BLACK_COVER_CLASS_NAME: string = 'playkit-black-cover';\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nconst CONTAINER_CLASS_NAME: string = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nconst POSTER_CLASS_NAME: string = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nconst ENGINE_CLASS_NAME: string = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nconst SUBTITLES_STYLE_ID_NAME: string = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_CLASS_NAME: string = 'playkit-subtitles';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nconst AUTO: string = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nconst OFF: string = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nconst DURATION_OFFSET: number = 0.1;\n\n/**\n * The toggle fullscreen rendering timeout value\n * @type {number}\n * @const\n */\nconst REPOSITION_CUES_TIMEOUT: number = 1000;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\nexport default class Player extends FakeEventTarget {\n  /**\n   * The player class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Player');\n  /**\n   * The available engines of the player.\n   * @type {Array<typeof IEngine>}\n   * @private\n   * @static\n   */\n  static _engines: Array<typeof IEngine> = [Html5];\n  /**\n   * The player capabilities result object.\n   * @type {Object}\n   * @private\n   * @static\n   */\n  static _playerCapabilities: Object;\n\n  /**\n   * Runs the engines capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Player._logger.debug(\"Running player capabilities\");\n    Player._engines.forEach(Engine => Engine.runCapabilities());\n  }\n\n  /**\n   * Gets the engines capabilities.\n   * @param {?string} engineType - The engine type.\n   * @return {Promise<Object>} - The engines capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(engineType: ?string): Promise<{ [name: string]: any }> {\n    const resolveCapabilities = (engineType: ?string): Promise<Object> => {\n      const result = (engineType ? Player._playerCapabilities[engineType] : Player._playerCapabilities);\n      return Utils.Object.copyDeep(result);\n    };\n    Player._logger.debug(\"Get player capabilities\", engineType);\n    if (Player._playerCapabilities) {\n      return Promise.resolve(resolveCapabilities(engineType));\n    }\n    const promises = [];\n    Player._engines.forEach(Engine => promises.push(Engine.getCapabilities()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        Player._playerCapabilities = {};\n        arrayOfResults.forEach(res => Object.assign(Player._playerCapabilities, res));\n        return Promise.resolve(resolveCapabilities(engineType));\n      });\n  }\n\n  /**\n   * Sets an engine capabilities.\n   * @param {string} engineType - The engine type.\n   * @param {Object} capabilities - The engine capabilities.\n   * @return {Promise<*>} - Empty promise which resolved when the operation ends.\n   * @public\n   * @static\n   */\n  static setCapabilities(engineType: string, capabilities: { [name: string]: any }): Promise<*> {\n    Player._logger.debug(\"Set player capabilities\", engineType, capabilities);\n    return new Promise((resolve, reject) => {\n      Player.getCapabilities().then(() => {\n        if (!Player._playerCapabilities[engineType]) {\n          Player._playerCapabilities[engineType] = {};\n        }\n        Utils.Object.mergeDeep(Player._playerCapabilities[engineType], capabilities);\n        resolve();\n      }).catch(e => {\n        reject(e)\n      });\n    });\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @private\n   * @static\n   */\n  static _prepareVideoElement(): void {\n    Player._engines.forEach((Engine: typeof IEngine) => {\n      Engine.prepareVideoElement();\n    });\n  }\n\n  /**\n   * The plugin manager of the player.\n   * @type {PluginManager}\n   * @private\n   */\n  _pluginManager: PluginManager;\n  /**\n   * The event manager of the player.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The poster manager of the player.\n   * @type {PosterManager}\n   * @private\n   */\n  _posterManager: PosterManager;\n  /**\n   * The runtime configuration of the player.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * The playback engine.\n   * @type {IEngine}\n   * @private\n   */\n  _engine: IEngine;\n  /**\n   * The state manager of the player.\n   * @type {StateManager}\n   * @private\n   */\n  _stateManager: StateManager;\n  /**\n   * The tracks of the player.\n   * @type {Array<Track>}\n   * @private\n   */\n  _tracks: Array<Track>;\n  /**\n   * The player ready promise\n   * @type {Promise<*>}\n   * @private\n   */\n  _readyPromise: ?Promise<*>;\n  /**\n   * Whether the play is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlay: boolean;\n  /**\n   * Whether the playback started for the first time\n   * @type {boolean}\n   * @private\n   */\n  _playbackStarted: boolean;\n  /**\n   * The player DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n  /**\n   * The player text DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _textDisplayEl: HTMLDivElement;\n  /**\n   * The player black cover div.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _blackCoverEl: HTMLDivElement;\n  /**\n   * The player DOM id.\n   * @type {string}\n   * @private\n   */\n  _playerId: string;\n  /**\n   * The player last updated text cues list\n   * @type {Array<any>}\n   * @private\n   */\n  _activeTextCues: Array<any> = [];\n  /**\n   * The player text disaply settings\n   * @type {Object}\n   * @private\n   */\n  _textDisplaySettings: Object = {};\n  /**\n   * The player text style settings\n   * @type {TextStyle}\n   * @private\n   */\n  _textStyle: TextStyle;\n  /**\n   * The playback middleware of the player.\n   * @type {PlaybackMiddleware}\n   * @private\n   */\n  _playbackMiddleware: PlaybackMiddleware;\n  /**\n   * The environment(os,device,browser) object of the player.\n   * @type {Object}\n   * @private\n   */\n  _env: Object;\n  /**\n   * The currently selected engine type\n   * @type {string}\n   * @private\n   */\n  _engineType: string;\n  /**\n   * The currently selected stream type\n   * @type {string}\n   * @private\n   */\n  _streamType: string;\n  /**\n   * Flag to indicate whether is the first play in the current session.\n   * @type {boolean}\n   * @private\n   */\n  _firstPlayInCurrentSession: boolean;\n  /**\n   * The current playback attributes state\n   * @type {Object}\n   * @private\n   */\n  _playbackAttributesState: { [attribute: string]: any } = {\n    muted: undefined,\n    volume: undefined,\n    rate: undefined,\n    audioLanguage: \"\",\n    textLanguage: \"\"\n  };\n  /**\n   * Fullscreen indicator flag\n   * @private\n   */\n  _fullscreen: boolean;\n  /**\n   * holds false or an id for the timeout the reposition the text cues after togelling full screen\n   * @type {any}\n   * @private\n   */\n  _repositionCuesTimeout: any;\n  /**\n   * Whether a load media request has sent, the player should wait to media.\n   * @type {boolean}\n   * @private\n   */\n  _loadingMedia: boolean;\n  /**\n   * Whether the player is loading a source.\n   * @type {boolean}\n   * @private\n   */\n  _loading: boolean;\n  /**\n   * Reset indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _reset: boolean;\n  /**\n   * Destroyed indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _destroyed: boolean;\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  constructor(config: Object = {}) {\n    super();\n    this._env = Env;\n    this._tracks = [];\n    this._firstPlay = true;\n    this._fullscreen = false;\n    this._firstPlayInCurrentSession = true;\n    this._repositionCuesTimeout = false;\n    this._loadingMedia = false;\n    this._loading = false;\n    this._playbackStarted = false;\n    this._reset = true;\n    this._destroyed = false;\n    this._config = Player._defaultConfig;\n    this._eventManager = new EventManager();\n    this._posterManager = new PosterManager();\n    this._stateManager = new StateManager(this);\n    this._pluginManager = new PluginManager();\n    this._playbackMiddleware = new PlaybackMiddleware();\n    this._textStyle = new TextStyle();\n    this._createReadyPromise();\n    this._createPlayerContainer();\n    this._appendDomElements();\n    this.configure(config);\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n  configure(config: Object = {}): void {\n    if (config.logLevel && LogLevel[config.logLevel]) {\n      setLogLevel(LogLevel[config.logLevel]);\n    }\n    if (this._hasSources(config.sources)) {\n      this._configureOrLoadPlugins(config.plugins);\n      const receivedSourcesWhenHasEngine: boolean = !!this._engine;\n      if (receivedSourcesWhenHasEngine) {\n        this.reset();\n        Player._logger.debug('Change source started');\n        this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_STARTED));\n      }\n      Utils.Object.mergeDeep(this._config, config);\n      this._reset = false;\n      if (this._selectEngineByPriority()) {\n        this._appendEngineEl();\n        this._attachMedia();\n        this._handlePlaybackOptions();\n        this._posterManager.setSrc(this._config.sources.poster);\n        this._handlePreload();\n        this._handleAutoPlay();\n        if (receivedSourcesWhenHasEngine) {\n          Player._logger.debug('Change source ended');\n          this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_ENDED));\n        }\n      }\n    } else {\n      Utils.Object.mergeDeep(this._config, config);\n      this._configureOrLoadPlugins(config.plugins);\n    }\n  }\n\n  /**\n   * The player readiness\n   * @public\n   * @returns {Promise<*>} - The ready promise\n   */\n  ready(): Promise<*> {\n    return this._readyPromise ? this._readyPromise : Promise.resolve();\n  }\n\n  /**\n   * Load media\n   * @public\n   * @returns {void}\n   */\n  load(): void {\n    const resetFlags = () => {\n      this._loading = false;\n      this._reset = false;\n    };\n    if (this._engine && !this.src && !this._loading) {\n      this._loading = true;\n      let startTime = this._config.playback.startTime;\n      this._engine.load(startTime).then((data) => {\n        this._updateTracks(data.tracks);\n        this._maybeSetTracksLabels();\n        this._setDefaultTracks();\n        this.dispatchEvent(new FakeEvent(CustomEventType.TRACKS_CHANGED, {tracks: this._tracks}));\n        resetFlags();\n      }).catch(error => {\n        this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n        resetFlags();\n      });\n    }\n  }\n\n  /**\n   * Checks for callbacks that should change the tracks, and call them on the\n   * respective track group (audio/text/video)\n   * @private\n   * @returns {void}\n   */\n  _maybeSetTracksLabels() {\n    const customLabels = this._config.customLabels;\n    if (customLabels) {\n      for (let callbackType in customLabels) {\n        this._setTracksCustomLabels(this._getTracksByType(LabelToTrackMap[callbackType]), customLabels[callbackType]);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {Array<Track>} tracks - tracks\n   * @param {Function} callback - application label callback, returns a string\n   * @private\n   * @returns {void}\n   */\n  _setTracksCustomLabels(tracks: Array<Track>, callback: Function) {\n    tracks.forEach(track => {\n      const result = callback(Utils.Object.copyDeep(track));\n      if (result) {\n        track.label = result;\n      }\n    })\n  }\n\n  /**\n   * Start/resume playback.\n   * @returns {void}\n   * @public\n   */\n  play(): void {\n    if (this._engine) {\n      this._playbackMiddleware.play(() => this._play());\n    } else if (this._loadingMedia) {\n      // load media requested but the response is delayed\n      Player._prepareVideoElement();\n      this._playbackMiddleware.play(() => this._playAfterAsyncMiddleware());\n    } else {\n      this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, new PKError(PKError.Severity.CRITICAL, PKError.Category.PLAYER, PKError.Code.NO_SOURCE_PROVIDED, \"No Source Provided\")));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @returns {void}\n   * @public\n   */\n  pause(): void {\n    if (this._engine) {\n      this._playbackMiddleware.pause(this._pause.bind(this));\n    }\n  }\n\n  /**\n   * Gets the view of the player (i.e the dom container object).\n   * @return {HTMLElement} - The dom container.\n   * @public\n   */\n  getView(): HTMLElement {\n    return this._el;\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): ?HTMLVideoElement {\n    if (this._engine) {\n      return this._engine.getVideoElement();\n    }\n  }\n\n  /**\n   * Resets the necessary components before change media.\n   * @private\n   * @returns {void}\n   */\n  reset(): void {\n    if (this._reset) return;\n    this.pause();\n    this._config.sources = {};\n    this._eventManager.removeAll();\n    this._createReadyPromise();\n    this._activeTextCues = [];\n    this._updateTextDisplay([]);\n    this._tracks = [];\n    this._resetStateFlags();\n    this._engineType = '';\n    this._streamType = '';\n    this._posterManager.reset();\n    this._stateManager.reset();\n    this._pluginManager.reset();\n    this._engine.reset();\n    this._showBlackCover();\n    this._reset = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_RESET));\n  }\n\n  /**\n   * Destroys the player.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    if (this._destroyed) return;\n    if (this._engine) {\n      this._engine.destroy();\n    }\n    this._posterManager.destroy();\n    this._eventManager.destroy();\n    this._pluginManager.destroy();\n    this._stateManager.destroy();\n    this._activeTextCues = [];\n    this._textDisplaySettings = {};\n    this._config = {};\n    this._tracks = [];\n    this._engineType = '';\n    this._streamType = '';\n    this._readyPromise = null;\n    this._resetStateFlags();\n    this._playbackAttributesState = {};\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._destroyed = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_DESTROY));\n  }\n\n  /**\n   * Get the first buffered range of the engine.\n   * @returns {TimeRanges} - First buffered range of the engine in seconds.\n   * @public\n   */\n  get buffered(): ?TimeRanges {\n    if (this._engine) {\n      return this._engine.buffered;\n    }\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   */\n  set currentTime(to: number): void {\n    if (this._engine) {\n      if (Utils.Number.isNumber(to)) {\n        let boundedTo = to;\n        if (to < 0) {\n          boundedTo = 0;\n        }\n        if (boundedTo > this._engine.duration - DURATION_OFFSET) {\n          boundedTo = this._engine.duration - DURATION_OFFSET;\n        }\n        this._engine.currentTime = boundedTo;\n      }\n    }\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {?Number} - The playback current time.\n   * @public\n   */\n  get currentTime(): ?number {\n    if (this._engine) {\n      return this._engine.currentTime;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {?Number} - The playback duration.\n   * @public\n   */\n  get duration(): ?number {\n    if (this._engine) {\n      return this._engine.duration;\n    }\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @returns {void}\n   * @public\n   */\n  set volume(vol: number): void {\n    if (this._engine) {\n      if (Utils.Number.isFloat(vol) || (vol === 0) || (vol === 1)) {\n        let boundedVol = vol;\n        if (boundedVol < 0) {\n          boundedVol = 0;\n        }\n        if (boundedVol > 1) {\n          boundedVol = 1;\n        }\n        this._engine.volume = boundedVol;\n      }\n    }\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {?Number} - The playback volume.\n   * @public\n   */\n  get volume(): ?number {\n    if (this._engine) {\n      return this._engine.volume;\n    }\n  }\n\n  /**\n   * Get paused state.\n   * @returns {?boolean} - Whether the video is paused or not.\n   * @public\n   */\n  get paused(): ?boolean {\n    if (this._engine) {\n      return this._engine.paused;\n    }\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {?boolean} - Whether the video is seeking or not.\n   * @public\n   */\n  get seeking(): ?boolean {\n    if (this._engine) {\n      return this._engine.seeking;\n    }\n  }\n\n  /**\n   * Set playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @param {boolean} playsinline - Whether the video should plays in line.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (this._engine) {\n      this._engine.playsinline = playsinline;\n    }\n  }\n\n  /**\n   * Get playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @returns {boolean} - Whether the video plays in line.\n   */\n  get playsinline(): ?boolean {\n    if (this._engine) {\n      return this._engine.playsinline;\n    }\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The mute value.\n   * @returns {void}\n   * @public\n   */\n  set muted(mute: boolean): void {\n    if (this._engine) {\n      this._engine.muted = mute;\n      this.dispatchEvent(new FakeEvent(CustomEventType.MUTE_CHANGE, {mute: mute}));\n    }\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {?boolean} - Whether the video is muted or not.\n   * @public\n   */\n  get muted(): ?boolean {\n    if (this._engine) {\n      return this._engine.muted;\n    }\n  }\n\n  /**\n   * Get the player source.\n   * @returns {?string} - The current source of the player.\n   * @public\n   */\n  get src(): ?string {\n    if (this._engine) {\n      return this._engine.src;\n    }\n  }\n\n  /**\n   * Get the dimensions of the player.\n   * @returns {{width: number, height: number}} - The dimensions of the player.\n   * @public\n   */\n  get dimensions(): Object {\n    return {\n      width: this._el.clientWidth,\n      height: this._el.clientHeight\n    };\n  }\n\n  /**\n   * Get the poster source URL\n   * @returns {string} - the poster image URL\n   */\n  get poster(): string {\n    return this._posterManager.src;\n  }\n\n  /**\n   * Sets the playbackRate property.\n   * @param {number} rate - The playback speed of the video.\n   */\n  set playbackRate(rate: number): void {\n    if (this._engine) {\n      this._engine.playbackRate = rate;\n    }\n  }\n\n  /**\n   * Gets the current playback speed of the video.\n   * @returns {number} - The current playback speed of the video.\n   */\n  get playbackRate(): ?number {\n    if (this._engine) {\n      return this._engine.playbackRate;\n    }\n  }\n\n  /**\n   * Gets the possible playback speeds of the video.\n   * @returns {Array<number>} - The possible playback speeds speed of the video.\n   */\n  get playbackRates(): Array<number> {\n    return PLAYBACK_RATES;\n  }\n\n  /**\n   * Gets the default playback speed of the video.\n   * @returns {number} - The default playback speed of the video.\n   */\n  get defaultPlaybackRate(): number {\n    return DEFAULT_PLAYBACK_RATE;\n  }\n\n  /**\n   * get the engine type\n   * @returns {string} - html5\n   */\n  get engineType(): ?string {\n    return this._engineType;\n  }\n\n  /**\n   * get the stream type\n   * @returns {string} - hls|dash|progressive\n   */\n  get streamType(): ?string {\n    return this._streamType;\n  }\n\n  /**\n   * Getter for the environment of the player instance.\n   * @return {Object} - The current environment object.\n   * @public\n   */\n  get env(): Object {\n    return this._env;\n  }\n\n  /**\n   * Get the player config.\n   * @returns {Object} - A copy of the player configuration.\n   * @public\n   */\n  get config(): Object {\n    return Utils.Object.mergeDeep({}, this._config);\n  }\n\n  /**\n   * Set player session id\n   * @param {string} sessionId - the player session id to set\n   * @returns {void}\n   * @public\n   */\n  set sessionId(sessionId: string): void {\n    this._config.session = this._config.session || {};\n    this._config.session.id = sessionId;\n  }\n\n  /**\n   * Set the _loadingMedia flag to inform the player that a load media request has sent.\n   * @param {boolean} loading - Whether a load media request has sent.\n   * @returns {void}\n   * @public\n   */\n  set loadingMedia(loading: boolean): void {\n    this._loadingMedia = loading;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Live API\">\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return !!(this._config.sources.type === MediaType.LIVE || (this._engine && this._engine.isLive()));\n  }\n\n  /**\n   * Checking if the current live playback has DVR window.\n   * @function isDvr\n   * @returns {boolean} - Whether live playback has DVR window.\n   * @public\n   */\n  isDvr(): boolean {\n    return this.isLive() && this._config.sources.dvr;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._engine && this.isLive()) {\n      this._engine.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._engine ? this._engine.getStartTimeOfDvrWindow() : 0;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks API\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function getTracks\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @public\n   */\n  getTracks(type?: string): Array<Track> {\n    return this._getTracksByType(type);\n  }\n\n  /**\n   * Get an object includes the active video/audio/text tracks\n   * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n   */\n  getActiveTracks(): Object {\n    return {\n      video: this._getTracksByType(TrackType.VIDEO).find(track => track.active),\n      audio: this._getTracksByType(TrackType.AUDIO).find(track => track.active),\n      text: this._getTracksByType(TrackType.TEXT).find(track => track.active),\n    };\n  }\n\n  /**\n   * Select a track\n   * @function selectTrack\n   * @param {?Track} track - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectTrack(track: ?Track): void {\n    if (this._engine) {\n      if (track instanceof VideoTrack) {\n        this._engine.selectVideoTrack(track);\n      } else if (track instanceof AudioTrack) {\n        this._engine.selectAudioTrack(track);\n      } else if (track instanceof TextTrack) {\n        if (track.language === OFF) {\n          this.hideTextTrack();\n          this._playbackAttributesState.textLanguage = OFF;\n        } else {\n          this._engine.selectTextTrack(track);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._engine) {\n      this._engine.hideTextTrack();\n      this._activeTextCues = [];\n      this._updateTextDisplay([]);\n      const textTracks = this._getTracksByType(TrackType.TEXT);\n      textTracks.map(track => track.active = false);\n      const textTrack = textTracks.find(track => track.language === OFF);\n      if (textTrack) {\n        textTrack.active = true;\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}))\n      }\n    }\n  }\n\n  /**\n   * Enables adaptive bitrate switching.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._engine) {\n      this._engine.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._engine) {\n      return this._engine.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * update the text display settings\n   * @param {Object} settings - text cue display settings\n   * @public\n   * @returns {void}\n   */\n  setTextDisplaySettings(settings: Object): void {\n    this._textDisplaySettings = settings;\n    this._updateCueDisplaySettings();\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  /**\n   * Sets style attributes for text tracks.\n   * @param {TextStyle} style - text styling settings\n   * @returns {void}\n   */\n  set textStyle(style: TextStyle): void {\n    if (!(style instanceof TextStyle)) {\n      throw new Error(\"Style must be instance of TextStyle\");\n    }\n    let element = Utils.Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n    if (!element) {\n      element = Utils.Dom.createElement('style');\n      Utils.Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n      Utils.Dom.appendChild(document.head, element);\n    }\n    let sheet = element.sheet;\n\n    while (sheet.cssRules.length) {\n      sheet.deleteRule(0);\n    }\n\n    try {\n      if (this._config.playback.useNativeTextTrack) {\n        sheet.insertRule(`video.${ENGINE_CLASS_NAME}::cue { ${style.toCSS()} }`, 0);\n      } else {\n        sheet.insertRule(`#${this._playerId} .${SUBTITLES_CLASS_NAME} > div > div > div { ${style.toCSS()} }`, 0);\n      }\n      this._textStyle = style;\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_STYLE_CHANGED));\n    } catch (e) {\n      Player._logger.error(e.message);\n    }\n  }\n\n  /**\n   * Gets style attributes for text tracks.\n   * @returns {?TextStyle} - the current style attribute\n   */\n  get textStyle(): ?TextStyle {\n    return this._textStyle.clone();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Ads API\">\n\n  /**\n   * Skip on an ad.\n   * @public\n   * @returns {void}\n   */\n  skipAd(): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n      adsPlugin.skipAd();\n    }\n  }\n\n  /**\n   * Start to play ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @public\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n      adsPlugin.playAdNow(adTagUrl);\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Fullscreen API\">\n\n  /**\n   * @returns {boolean} - Whether the player is in fullscreen mode.\n   * @public\n   */\n  isFullscreen(): boolean {\n    return this._fullscreen;\n  }\n\n  /**\n   * Notify the player that the ui application entered to fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyEnterFullscreen(): void {\n    if (!this._fullscreen) {\n      this._fullscreen = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Notify the player that the ui application exited from fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyExitFullscreen(): void {\n    if (this._fullscreen) {\n      this._fullscreen = false;\n      this.dispatchEvent(new FakeEvent(CustomEventType.EXIT_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Request the player to enter fullscreen.\n   * @public\n   * @returns {void}\n   */\n  enterFullscreen(): void {\n    if (!this._fullscreen) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.REQUESTED_ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Request the player to exit fullscreen.\n   * @public\n   * @returns {void}\n   */\n  exitFullscreen(): void {\n    if (this._fullscreen) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.REQUESTED_EXIT_FULLSCREEN));\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Logger API\">\n\n  /**\n   * get the log level\n   * @param {?string} name - the logger name\n   * @returns {Object} - the log level\n   */\n  getLogLevel(name?: string): Object {\n    return getLogLevel(name);\n  }\n\n  /**\n   * sets the logger level\n   * @param {Object} level - the log level\n   * @param {?string} name - the logger name\n   * @returns {void}\n   */\n  setLogLevel(level: Object, name?: string) {\n    setLogLevel(level, name);\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Private Methods\">\n\n  // <editor-fold desc=\"Playback\">\n\n  /**\n   * Check if sources has been received.\n   * @param {Object} sources - sources config object.\n   * @returns {boolean} - Whether sources has been received to the player.\n   * @private\n   */\n  _hasSources(sources: Object): boolean {\n    if (sources) {\n      return !!(Object.values(StreamType).find(type => (sources[type] && sources[type].length > 0)));\n    }\n    return false;\n  }\n\n  /**\n   * Creates the player container.\n   * @private\n   * @returns {void}\n   */\n  _createPlayerContainer(): void {\n    const el = this._el = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n    this._playerId = Utils.Generator.uniqueId(5);\n    Utils.Dom.setAttribute(el, \"id\", this._playerId);\n    Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n  }\n\n  /**\n   * Appends the engine's video element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendEngineEl(): void {\n    if (this._el && this._engine) {\n      let engineEl = this._engine.getVideoElement();\n      const classname = `${ENGINE_CLASS_NAME}`;\n      Utils.Dom.addClassName(engineEl, classname);\n      const classnameWithId = `${ENGINE_CLASS_NAME}-${this._engine.id}`;\n      Utils.Dom.addClassName(engineEl, classnameWithId);\n      Utils.Dom.prependTo(engineEl, this._el);\n    }\n  }\n\n  /**\n   * Appends DOM elements by the following priority:\n   * 1. poster (strongest)\n   * 2. black screen\n   * 3. subtitles (weakest)\n   * @private\n   * @returns {void}\n   */\n  _appendDomElements(): void {\n    // Append playkit-subtitles\n    this._textDisplayEl = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._textDisplayEl);\n    // Append playkit-black-cover\n    this._blackCoverEl = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(this._blackCoverEl, BLACK_COVER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._blackCoverEl);\n    // Append playkit-poster\n    const el = this._posterManager.getElement();\n    Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, el);\n  }\n\n  /**\n   * Configures or load the plugins defined in the configuration.\n   * @param {Object} plugins - The new received plugins configuration.\n   * @private\n   * @returns {void}\n   */\n  _configureOrLoadPlugins(plugins: Object = {}): void {\n    if (plugins) {\n      Object.keys(plugins).forEach((name) => {\n        // If the plugin is already exists in the registry we are updating his config\n        const plugin = this._pluginManager.get(name);\n        if (plugin) {\n          plugin.updateConfig(plugins[name]);\n          this._config.plugins[name] = plugin.getConfig();\n        } else {\n          // We allow to load plugins as long as the player has no engine\n          if (!this._engine) {\n            this._pluginManager.load(name, this, plugins[name]);\n            let plugin = this._pluginManager.get(name);\n            if (plugin) {\n              this._config.plugins[name] = plugin.getConfig();\n              if (typeof plugin.getMiddlewareImpl === \"function\") {\n                this._playbackMiddleware.use(plugin.getMiddlewareImpl());\n              }\n            }\n          } else {\n            delete this._config.plugins[name];\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Creates the ready promise.\n   * @private\n   * @returns {void}\n   */\n  _createReadyPromise(): void {\n    this._readyPromise = new Promise((resolve, reject) => {\n      this._eventManager.listenOnce(this, CustomEventType.TRACKS_CHANGED, () => {\n        this.dispatchEvent(new FakeEvent(CustomEventType.MEDIA_LOADED));\n        resolve();\n      });\n      this._eventManager.listen(this, Html5EventType.ERROR, reject);\n    }).catch(() => {\n      // silence the promise rejection, error is handled by the error event\n    });\n  }\n\n  /**\n   * Selects an engine to play a source according to a given stream priority.\n   * @return {boolean} - Whether a proper engine was found to play the given sources\n   * according to the priority.\n   * @private\n   */\n  _selectEngineByPriority(): boolean {\n    const streamPriority = this._config.playback.streamPriority;\n    const preferNative = this._config.playback.preferNative;\n    const sources = this._config.sources;\n    for (let priority of streamPriority) {\n      const engineId = (typeof priority.engine === 'string') ? priority.engine.toLowerCase() : '';\n      const format = (typeof priority.format === 'string') ? priority.format.toLowerCase() : '';\n      const Engine = Player._engines.find((Engine) => Engine.id === engineId);\n      if (Engine) {\n        const formatSources = sources[format];\n        if (formatSources && formatSources.length > 0) {\n          const source = formatSources[0];\n          if (Engine.canPlaySource(source, preferNative[format])) {\n            Player._logger.debug('Source selected: ', formatSources);\n            this._loadEngine(Engine, source);\n            this._engineType = engineId;\n            this._streamType = format;\n            this.dispatchEvent(new FakeEvent(CustomEventType.SOURCE_SELECTED, {selectedSource: formatSources}));\n            return true;\n          }\n        }\n      }\n    }\n    Player._logger.warn(\"No playable engines was found to play the given sources\");\n    return false;\n  }\n\n  /**\n   * Loads the selected engine.\n   * @param {IEngine} Engine - The selected engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadEngine(Engine: typeof IEngine, source: PKMediaSourceObject) {\n    if (this._engine) {\n      if (this._engine.id === Engine.id) {\n        this._engine.restore(source, this._config);\n      } else {\n        this._engine.destroy();\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    } else {\n      this._engine = Engine.createEngine(source, this._config);\n    }\n  }\n\n  /**\n   * Listen to all HTML5 defined events and trigger them on the player\n   * @private\n   * @returns {void}\n   */\n  _attachMedia(): void {\n    if (this._engine) {\n      Object.keys(Html5EventType).forEach((html5Event) => {\n        this._eventManager.listen(this._engine, Html5EventType[html5Event], (event: FakeEvent) => {\n          return this.dispatchEvent(event);\n        });\n      });\n      this._eventManager.listen(this._engine, Html5EventType.SEEKED, () => {\n        const browser = this._env.browser.name;\n        if (browser === 'Edge' || browser === 'IE') {\n          this._removeTextCuePatch();\n        }\n      });\n      this._eventManager.listen(this._engine, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedVideoTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => {\n        this.ready().then(() => this._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language);\n        this._markActiveTrack(event.payload.selectedAudioTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => {\n        this.ready().then(() => this._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language);\n        this._markActiveTrack(event.payload.selectedTextTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this._onTracksChanged(event));\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._engine, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.AUTOPLAY_FAILED, (event: FakeEvent) => {\n        this.pause();\n        this.dispatchEvent(event)\n      });\n      this._eventManager.listen(this, Html5EventType.PLAY, this._onPlay.bind(this));\n      this._eventManager.listen(this, Html5EventType.PLAYING, this._onPlaying.bind(this));\n      this._eventManager.listen(this, Html5EventType.ENDED, this._onEnded.bind(this));\n      this._eventManager.listen(this, CustomEventType.MUTE_CHANGE, () => {\n        this._playbackAttributesState.muted = this.muted;\n      });\n      this._eventManager.listen(this, Html5EventType.VOLUME_CHANGE, () => {\n        this._playbackAttributesState.volume = this.volume;\n      });\n      this._eventManager.listen(this, Html5EventType.RATE_CHANGE, () => {\n        this._playbackAttributesState.rate = this.playbackRate;\n      });\n      this._eventManager.listen(this, CustomEventType.ENTER_FULLSCREEN, () => {\n        this._resetTextCuesAndReposition();\n      });\n      this._eventManager.listen(this, CustomEventType.EXIT_FULLSCREEN, () => {\n        this._resetTextCuesAndReposition();\n      });\n    }\n  }\n\n  /**\n   * Reset the active cues hasBeenReset = true and then reposition it, timeout here is for the screen to\n   * finish render the fullscreen\n   * @returns {void}\n   * @private\n   */\n  _resetTextCuesAndReposition(): void {\n    this._updateTextDisplay([]);\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    // handling only the last reposition\n    if (this._repositionCuesTimeout) {\n      clearTimeout(this._repositionCuesTimeout);\n    }\n    this._repositionCuesTimeout = setTimeout(() => {\n      processCues(window, this._activeTextCues, this._textDisplayEl);\n      this._repositionCuesTimeout = false;\n    }, REPOSITION_CUES_TIMEOUT);\n  }\n\n  /**\n   * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n   * are not removed\n   * @returns {void}\n   * @private\n   */\n  _removeTextCuePatch(): void {\n    let filteredActiveTextCues = this._activeTextCues.filter((textCue) => {\n      const cueEndTime = textCue._endTime;\n      const cueStartTime = textCue._startTime;\n      const currTime = this.currentTime;\n      if (currTime < cueEndTime && currTime > cueStartTime) {\n        return textCue;\n      }\n    });\n    this._updateTextDisplay(filteredActiveTextCues);\n  }\n\n  /**\n   * Handles the playback options, from current state or config.\n   * @returns {void}\n   * @private\n   */\n  _handlePlaybackOptions(): void {\n    this._config.playback = this._config.playback || {};\n    if (typeof this._playbackAttributesState.muted === 'boolean') {\n      this.muted = this._playbackAttributesState.muted;\n    } else if (typeof this._config.playback.muted === 'boolean') {\n      this.muted = this._config.playback.muted;\n    }\n    if (typeof this._playbackAttributesState.volume === 'number') {\n      this.volume = this._playbackAttributesState.volume;\n    } else if (typeof this._config.playback.volume === 'number') {\n      this.volume = this._config.playback.volume;\n    }\n    if (typeof this._config.playback.playsinline === 'boolean') {\n      this.playsinline = this._config.playback.playsinline;\n    }\n  }\n\n  /**\n   * Handles preload.\n   * @returns {void}\n   * @private\n   */\n  _handlePreload(): void {\n    if (this._config.playback.preload === \"auto\" && !this._config.playback.autoplay && this._canPreload()) {\n      this.load();\n    }\n  }\n\n  /**\n   * If ads plugin enabled it's his responsibility to preload the content player.\n   * So to avoid loading the player twice which can cause errors on MSEs we are not\n   * calling load from the player.\n   * TODO: Change it to check the ads configuration when we will develop the ads manager.\n   * @returns {boolean} - Whether the player can perform preload.\n   * @private\n   */\n  _canPreload(): boolean {\n    return !this._config.plugins || (this._config.plugins && !this._config.plugins.ima);\n  }\n\n  /**\n   * Handles auto play.\n   * @returns {void}\n   * @private\n   */\n  _handleAutoPlay(): void {\n    if (this._config.playback.autoplay === true) {\n      if (!this._firstPlayInCurrentSession) {\n        this.play();\n      } else {\n        const allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n        Player.getCapabilities(this.engineType)\n          .then((capabilities) => {\n            if (capabilities.autoplay) {\n              Player._logger.debug(\"Start autoplay\");\n              this.play();\n            } else {\n              if (allowMutedAutoPlay && capabilities.mutedAutoPlay) {\n                Player._logger.debug(\"Fallback to muted autoplay\");\n                this.muted = true;\n                this.play();\n                this.dispatchEvent(new FakeEvent(CustomEventType.FALLBACK_TO_MUTED_AUTOPLAY));\n              } else {\n                Player._logger.warn(\"Autoplay failed, pause player\");\n                this._posterManager.show();\n                if (this._canPreload()) {\n                  this.load();\n                  this.ready().then(() => this.pause());\n                }\n                this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED));\n              }\n            }\n          });\n      }\n    } else {\n      this._posterManager.show();\n    }\n  }\n\n  /**\n   * Play after async ads\n   * @private\n   * @returns {void}\n   */\n  _playAfterAsyncMiddleware(): void {\n    if (this._engine) {\n      this._play();\n    } else {\n      this._eventManager.listenOnce(this, CustomEventType.SOURCE_SELECTED, () => this._play());\n    }\n  }\n\n  /**\n   * Start/resume the engine playback.\n   * @private\n   * @returns {void}\n   */\n  _play(): void {\n    if (this._engine.src) {\n      if (this.isLive() && !this.isDvr()) {\n        this.seekToLiveEdge();\n      }\n      this._engine.play();\n    } else {\n      this.load();\n      this.ready().then(() => {\n        this._engine.play();\n      }).catch((error) => {\n        this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n      });\n    }\n  }\n\n  /**\n   * Starts the engine pause.\n   * @private\n   * @returns {void}\n   */\n  _pause(): void {\n    this._engine.pause();\n  }\n\n  /**\n   * @function _onPlay\n   * @return {void}\n   * @private\n   */\n  _onPlay(): void {\n    if (this._firstPlay) {\n      this._firstPlay = false;\n      this.dispatchEvent(new FakeEvent(CustomEventType.FIRST_PLAY));\n      this._posterManager.hide();\n      this._hideBlackCover();\n      if (typeof this._playbackAttributesState.rate === 'number') {\n        this.playbackRate = this._playbackAttributesState.rate;\n      }\n    }\n  }\n\n  /**\n   * @function _onPlaying\n   * @return {void}\n   * @private\n   */\n  _onPlaying(): void {\n    if (!this._playbackStarted) {\n      this._playbackStarted = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.PLAYBACK_STARTED));\n    }\n  }\n\n  /**\n   * Hides the black cover div.\n   * @private\n   * @returns {void}\n   */\n  _hideBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'hidden';\n    }\n  }\n\n  /**\n   * Shows the black cover div.\n   * @private\n   * @returns {void}\n   */\n  _showBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'visible';\n    }\n  }\n\n  /**\n   * @function _onEnded\n   * @return {void}\n   * @private\n   */\n  _onEnded(): void {\n    if (!this.paused) {\n      this._pause();\n    }\n  }\n\n  /**\n   * Resets the state flags of the player.\n   * @returns {void}\n   * @private\n   */\n  _resetStateFlags(): void {\n    this._loading = false;\n    this._firstPlay = true;\n    this._firstPlayInCurrentSession = false;\n    this._loadingMedia = false;\n    this._playbackStarted = false;\n  }\n\n  /**\n   * @returns {Object} - The default configuration of the player.\n   * @private\n   * @static\n   */\n  static get _defaultConfig(): Object {\n    return Utils.Object.copyDeep(DefaultPlayerConfig);\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks\">\n\n  /**\n   * handle tracks change\n   * @param {FakeEvent} event - the tracks change event payload\n   * @private\n   * @returns {void}\n   */\n  _onTracksChanged(event: FakeEvent): void {\n    this._updateTracks(event.payload.tracks);\n    this.dispatchEvent(event);\n  }\n\n  /**\n   * update the player tracks\n   * @param {Array<Track>} tracks - the player tracks\n   * @private\n   * @returns {void}\n   */\n  _updateTracks(tracks: Array<Track>): void {\n    Player._logger.debug('Tracks changed', tracks);\n    this._tracks = tracks;\n    this._addTextTrackOffOption();\n  }\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function _getTracksByType\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @private\n   */\n  _getTracksByType(type?: string): Array<Track> {\n    return !type ? this._tracks : this._tracks.filter((track: Track) => {\n      if (type === TrackType.VIDEO) {\n        return track instanceof VideoTrack;\n      } else if (type === TrackType.AUDIO) {\n        return track instanceof AudioTrack;\n      } else if (type === TrackType.TEXT) {\n        return track instanceof TextTrack;\n      } else {\n        return true;\n      }\n    });\n  }\n\n  /**\n   * Mark the selected track as active\n   * @function _markActiveTrack\n   * @param {Track} track - the track to mark\n   * @returns {void}\n   * @private\n   */\n  _markActiveTrack(track: Track): void {\n    let type;\n    if (track instanceof VideoTrack) {\n      type = TrackType.VIDEO;\n    } else if (track instanceof AudioTrack) {\n      type = TrackType.AUDIO;\n    } else if (track instanceof TextTrack) {\n      type = TrackType.TEXT;\n    }\n    if (type) {\n      const tracks = this._getTracksByType(type);\n      for (let i = 0; i < tracks.length; i++) {\n        tracks[i].active = track.index === i;\n      }\n    }\n  }\n\n  /**\n   * handle text cue change\n   * @param {FakeEvent} event - the cue change event payload\n   * @private\n   * @returns {void}\n   */\n  _onCueChange(event: FakeEvent): void {\n    Player._logger.debug('Text cue changed', event.payload.cues);\n    this._activeTextCues = event.payload.cues;\n    this._updateCueDisplaySettings();\n    this._updateTextDisplay(this._activeTextCues)\n  }\n\n  /**\n   * update the text cue display settings\n   * @private\n   * @returns {void}\n   */\n  _updateCueDisplaySettings(): void {\n    const activeCues = this._activeTextCues;\n    const settings = this._textDisplaySettings;\n    for (let i = 0; i < activeCues.length; i++) {\n      let cue = activeCues[i];\n      for (let name in settings) {\n        cue[name] = settings[name];\n      }\n    }\n  }\n\n  /**\n   * update the text display\n   * @param {Array<Cue>} cues - list of cues\n   * @private\n   * @returns {void}\n   */\n  _updateTextDisplay(cues: Array<Cue>): void {\n    processCues(window, cues, this._textDisplayEl);\n  }\n\n  /**\n   * Add off text track if there are actual text tracks associated with media\n   * setting this track is the same as calling Player's hideTextTrack\n   * @private\n   * @returns {void}\n   */\n  _addTextTrackOffOption(): void {\n    const textTracks = this._getTracksByType(TrackType.TEXT);\n    if (textTracks && textTracks.length) {\n      this._tracks.push(new TextTrack({\n        active: false,\n        index: textTracks.length,\n        kind: \"subtitles\",\n        label: \"Off\",\n        language: OFF\n      }));\n    }\n  }\n\n  /**\n   * Sets the default tracks defined in the player config.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTracks(): void {\n    const activeTracks = this.getActiveTracks();\n    const playbackConfig = this.config.playback;\n    const offTextTrack: ?Track = this._getTracksByType(TrackType.TEXT).find(track => TextTrack.langComparer(OFF, track.language));\n\n    this.hideTextTrack();\n\n    let currentOrConfiguredTextLang = this._playbackAttributesState.textLanguage || this._getLanguage(playbackConfig.textLanguage, activeTracks.text, TrackType.TEXT);\n    let currentOrConfiguredAudioLang = this._playbackAttributesState.audioLanguage || playbackConfig.audioLanguage;\n    this._setDefaultTrack(TrackType.TEXT, currentOrConfiguredTextLang, offTextTrack);\n    this._setDefaultTrack(TrackType.AUDIO, currentOrConfiguredAudioLang, activeTracks.audio);\n  }\n\n  /**\n   * Gets the track language that should be set by default.\n   * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n   * @param {Track} defaultTrack - The default track.\n   * @param {string} type - The track type.\n   * @private\n   * @returns {string} - The track language to set by default.\n   */\n  _getLanguage(configuredLanguage: string, defaultTrack: ?Track, type: string): string {\n    let language = configuredLanguage;\n    if (language === AUTO) {\n      const tracks = this._getTracksByType(type);\n      const localeTrack: ?Track = tracks.find(track => Track.langComparer(Locale.language, track.language));\n      if (localeTrack) {\n        language = localeTrack.language;\n      } else if (defaultTrack && defaultTrack.language !== OFF) {\n        language = defaultTrack.language;\n      } else if (tracks && tracks.length > 0) {\n        language = tracks[0].language;\n      }\n    }\n    return language;\n  }\n\n  /**\n   * Sets a specific default track.\n   * @param {string} type - The track type.\n   * @param {string} language - The track language.\n   * @param {?Track} defaultTrack - The default track to set in case there is no language configured.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTrack(type: string, language: string, defaultTrack: ?Track): void {\n    const track: ?Track = this._getTracksByType(type).find(track => Track.langComparer(language, track.language));\n    if (track) {\n      this.selectTrack(track);\n    } else {\n      this.selectTrack(defaultTrack);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Enums\">\n\n  /**\n   * Gets the player event types.\n   * @returns {EventTypes} - The event types of the player.\n   * @public\n   */\n  get Event(): EventTypes {\n    return EventType;\n  }\n\n  /**\n   * Gets the player TextStyle.\n   * @returns {TextStyle} - The TextStyle class\n   * @public\n   */\n  get TextStyle(): typeof TextStyle {\n    return TextStyle;\n  }\n\n  /**\n   * Gets the player state types.\n   * @returns {StateTypes} - The state types of the player.\n   * @public\n   */\n  get State(): StateTypes {\n    return StateType;\n  }\n\n  /**\n   * Gets the player tracks types.\n   * @returns {TrackTypes} - The tracks types of the player.\n   * @public\n   */\n  get Track(): TrackTypes {\n    return TrackType;\n  }\n\n  /**\n   * Gets the player log level types.\n   * @returns {LogLevelTypes} - The log level types of the player.\n   * @public\n   */\n  get LogLevelType(): LogLevelTypes {\n    return LogLevelType;\n  }\n\n  /**\n   * Gets the player log level objects.\n   * @returns {LogLevels} - The log levels objects of the player.\n   * @public\n   */\n  get LogLevel(): LogLevels {\n    return LogLevel;\n  }\n\n  /**\n   * Gets the player abr modes.\n   * @returns {AbrModes} - The abr modes of the player.\n   * @public\n   */\n  get AbrMode(): AbrModes {\n    return AbrMode;\n  }\n\n  /**\n   * Gets the player media types.\n   * @returns {MediaTypes} - The media types of the player.\n   * @public\n   */\n  get MediaType(): MediaTypes {\n    return MediaType;\n  }\n\n  /**\n   * Gets the player stream types.\n   * @returns {StreamTypes} - The stream types of the player.\n   * @public\n   */\n  get StreamType(): StreamTypes {\n    return StreamType;\n  }\n\n  /**\n   * Gets the player engine types.\n   * @returns {EngineTypes} - The engine types of the player.\n   * @public\n   */\n  get EngineType(): EngineTypes {\n    return EngineType;\n  }\n\n  // </editor-fold>\n}\n\n\n\n// WEBPACK FOOTER //\n// ./player.js","// @flow\nimport UAParser from 'ua-parser-js'\nconst Env = new UAParser().getResult();\nexport default Env;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/env.js","//@flow\nimport FakeEvent from './fake-event'\nimport MultiMap from '../utils/multi-map'\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nclass FakeEventTarget {\n  _listeners: MultiMap<ListenerType>;\n  dispatchTarget: FakeEventTarget;\n\n  constructor() {\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new MultiMap();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  addEventListener(type: string, listener: ListenerType) {\n    this._listeners.push(type, listener);\n  }\n\n  /**\n   * Remove an event listener from this object.\n   *\n   * @param {string} type The event type for which you wish to remove a listener.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to remove.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  removeEventListener(type: string, listener: ListenerType) {\n    this._listeners.remove(type, listener);\n  }\n\n  /**\n   * Dispatch an event from this object.\n   *\n   * @param {!Event} event The event to be dispatched from this object.\n   * @return {boolean} True if the default action was prevented.\n   * @override\n   * @export\n   */\n  dispatchEvent(event: FakeEvent) {\n    // In many browsers, it is complex to overwrite properties of actual Events.\n    // Here we expect only to dispatch FakeEvents, which are simpler.\n    //goog.asserts.assert(event instanceof FakeEvent,\n    //    'FakeEventTarget can only dispatch FakeEvents!');\n\n    let list = this._listeners.get(event.type) || [];\n\n    for (let i = 0; i < list.length; ++i) {\n      // Do this every time, since events can be re-dispatched from handlers.\n      event.target = this.dispatchTarget;\n      event.currentTarget = this.dispatchTarget;\n\n      let listener = list[i];\n      try {\n        if (listener.handleEvent) {\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (exception) {\n        // Exceptions during event handlers should not affect the caller,\n        // but should appear on the console as uncaught, according to MDN:\n        // http://goo.gl/N6Ff27\n        // TODO: add log\n      }\n\n      if (event.stopped) {\n        break;\n      }\n    }\n\n    return event.defaultPrevented;\n  }\n}\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\ndeclare function ListenerType(event: FakeEvent): (boolean | void);\n\nexport default FakeEventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event-target.js","//@flow\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nclass MultiMap<T> {\n  _map: Map<string, T[]>;\n\n  constructor() {\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n  push(key: string, value: T): void {\n    if (this._map.has(key)) {\n      let list = this._map.get(key);\n      if (Array.isArray(list)) {\n        list.push(value);\n        this._map.set(key, list);\n      }\n    } else {\n      this._map.set(key, [value]);\n    }\n  }\n\n  /**\n   * Set an array of values for the key, overwriting any previous data.\n   * @param {string} key -\n   * @param {!Array.<T>} values -\n   * @returns {void}\n   */\n  set(key: string, values: T[]): void {\n    this._map.set(key, values);\n  }\n\n  /**\n   * Check for a key.\n   * @param {string} key -\n   * @return {boolean} true if the key exists.\n   */\n  has(key: string): boolean {\n    return this._map.has(key);\n  }\n\n  /**\n   * Get a list of values by key.\n   * @param {string} key -\n   * @return {Array.<T>} or null if no suZch key exists.\n   */\n  get(key: string): Array<T> {\n    let list = this._map.get(key);\n    // slice() clones the list so that it and the map can each be modified\n    // without affecting the other.\n    return list ? list.slice() : [];\n  }\n\n  /**\n   * Get a list of all values.\n   * @returns {!Array.<T>} -\n   */\n  getAll(): T[] {\n    let list: T[] = [];\n    for (var value of this._map.values()) {\n      list = list.concat(value);\n    }\n    return list;\n  }\n\n  /**\n   * Remove a specific value, if it exists.\n   * @param {string} key -\n   * @param {T} value -\n   * @returns {void}\n   */\n  remove(key: string, value: T): void {\n    if (!this._map.has(key)) return;\n    let list = this._map.get(key);\n    if (Array.isArray(list)) {\n      for (let i = 0; i < list.length; ++i) {\n        if (list[i] == value) {\n          list.splice(i, 1);\n          --i;\n        }\n      }\n    }\n  }\n\n  /**\n   * Get all keys from the multimap.\n   * @return {!Array.<string>}\n   */\n  // eslint-disable-next-line no-undef\n  keys(): Iterator<string> {\n    return this._map.keys();\n  }\n\n\n  /**\n   * Clear all keys and values from the multimap.\n   * @returns {void}\n   */\n  clear(): void {\n    this._map.clear();\n  }\n}\n\nexport default MultiMap;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/multi-map.js","//@flow\nimport Player from '../player'\nimport getLogger from '../utils/logger'\nimport * as Utils from '../utils/util'\nimport EventManager from '../event/event-manager'\nimport Error from '../error/error';\nimport FakeEvent from '../event/fake-event'\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nexport default class BasePlugin implements IPlugin {\n  /**\n   * The runtime configuration of the plugin.\n   * @member\n   */\n  config: Object;\n  /**\n   * The name of the plugin.\n   * @member\n   */\n  name: string;\n  /**\n   * The logger of the plugin.\n   * @member\n   */\n  logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   */\n  player: Player;\n  /**\n   * The event manager of the plugin.\n   * @member\n   */\n  eventManager: EventManager;\n  /**\n   * The default configuration of the plugin.\n   * Inherited plugins should override this property.\n   * @type {Object}\n   * @static\n   * @member\n   */\n  static defaultConfig: Object = {};\n\n  /**\n   * Factory method to create the actual plugin.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @returns {BasePlugin} - New runtime plugin instance\n   * @static\n   * @public\n   */\n  static createPlugin(name: string, player: Player, config: Object = {}): BasePlugin {\n    return new this(name, player, config);\n  }\n\n  /**\n   * Returns under what conditions the plugin is valid.\n   * Plugin must implement this method.\n   * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n   * @static\n   * @public\n   * @abstract\n   */\n  static isValid(): boolean {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'isValid()');\n  }\n\n  /**\n   * constructor\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @constructor\n   * @private\n   */\n  constructor(name: string, player: Player, config: Object) {\n    this.name = name;\n    this.player = player;\n    this.eventManager = new EventManager();\n    this.logger = getLogger(Utils.String.capitlize(this.name));\n    this.config = {};\n    Utils.Object.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n  getConfig(attr?: string): any {\n    if (attr) {\n      return Utils.Object.copyDeep(this.config[attr]);\n    }\n    return Utils.Object.copyDeep(this.config);\n  }\n\n  /**\n   * Updates the config of the plugin.\n   * @param {Object} update - The updated configuration.\n   * @public\n   * @returns {void}\n   */\n  updateConfig(update: Object): void {\n    Utils.Object.mergeDeep(this.config, update);\n  }\n\n  /**\n   * Runs the destroy logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  destroy(): void {\n  }\n\n  /**\n   * Runs the reset logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  reset(): void {\n  }\n\n  /**\n   * Getter for the plugin's name.\n   * @returns {string} - The name of the plugin.\n   * @public\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  /**\n   * Dispatch an event via the plugin.\n   * @param {string} name - The event name.\n   * @param {any} payload - The event payload.\n   * @returns {void}\n   */\n  dispatchEvent(name: string, payload: any): void {\n    this.logger.debug(\"Fire event: \" + name, payload);\n    this.player.dispatchEvent(new FakeEvent(name, payload));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/base-plugin.js","//@flow\nexport type StateTypes = { [state: string]: string };\n\nconst StateType: StateTypes = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\n\nexport {StateType};\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-type.js","//@flow\nexport type TrackTypes = { [track: string]: string };\n\nconst TrackType: TrackTypes = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\n\nexport {TrackType};\n\n\n\n// WEBPACK FOOTER //\n// ./track/track-type.js","// @flow\n\n/**\n * Base middleware.\n * @classdesc\n */\nexport default class BaseMiddleware {\n  /**\n   * Id of the middleware instance.\n   * @public\n   */\n  id: string;\n\n  /**\n   * Calls the next handler in the middleware chain.\n   * @param {Function} next - The next handler in the middleware chain.\n   * @returns {void}\n   */\n  callNext(next: Function): void {\n    if (next) {\n      next();\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/base-middleware.js","//@flow\nimport NativeAdapter from './adapters/native-adapter'\nimport getLogger from '../../../utils/logger'\n\n/**\n * Media source provider\n * @classdesc\n */\nexport default class MediaSourceProvider {\n  /**\n   * The logger of the media source provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('MediaSourceProvider');\n  /**\n   * The media source adapter registry.\n   * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n   * @static\n   * @private\n   */\n  static _mediaSourceAdapters: Array<typeof IMediaSourceAdapter> = [NativeAdapter];\n  /**\n   * The selected adapter for playback.\n   * @type {null|IMediaSourceAdapter}\n   * @static\n   * @private\n   */\n  static _selectedAdapter: ?(typeof IMediaSourceAdapter) = null;\n\n  /**\n   * Add a media source adapter to the registry.\n   * @function register\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n   * @static\n   * @returns {void}\n   */\n  static register(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    if (mediaSourceAdapter) {\n      if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> has been registered successfully`);\n        MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n      } else {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> is already registered, do not register again`);\n      }\n    }\n  }\n\n  /**\n   * Remove a media source adapter from the registry.\n   * @function unRegister\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    let index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n    if (index > -1) {\n      MediaSourceProvider._logger.debug(`Unregistered <${mediaSourceAdapter.id}> adapter`);\n      MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if the a media source adapter can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   *  @param {boolean} [preferNative=true] - prefer native flag\n   * @returns {boolean} - Whether a media source adapter can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean = true): boolean {\n    MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n    let mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n    if (source && source.mimetype) {\n      for (let i = 0; i < mediaSourceAdapters.length; i++) {\n        if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n          MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n          MediaSourceProvider._logger.debug(`Selected adapter is <${MediaSourceProvider._selectedAdapter.id}>`);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Orders the media source adapters array according to the preferNative value.\n   * @param {boolean} preferNative - Whether to prefer native playback.\n   * @private\n   * @returns {void}\n   */\n  static _orderMediaSourceAdapters(preferNative: boolean): void {\n    MediaSourceProvider._mediaSourceAdapters =\n      MediaSourceProvider._mediaSourceAdapters.filter(mse => mse.id !== 'NativeAdapter');\n    if (preferNative) {\n      MediaSourceProvider._mediaSourceAdapters.unshift(NativeAdapter);\n    } else {\n      MediaSourceProvider._mediaSourceAdapters.push(NativeAdapter);\n    }\n  }\n\n  /**\n   * Get the appropriate media source adapter to the video source.\n   * @function getMediaSourceAdapter\n   * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n   * @static\n   */\n  static getMediaSourceAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): ?IMediaSourceAdapter {\n    if (videoElement && source && config) {\n      if (!MediaSourceProvider._selectedAdapter) {\n        MediaSourceProvider.canPlaySource(source, true);\n      }\n      return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n    }\n    return null;\n  }\n\n  /**\n   * Destroys the media source adapter provider necessary props.\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    MediaSourceProvider._selectedAdapter = null;\n  }\n}\n\nconst registerMediaSourceAdapter = MediaSourceProvider.register;\nexport {registerMediaSourceAdapter};\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/media-source-provider.js","//@flow\n/* eslint-disable no-unused-vars */\nimport FakeEvent from '../../../event/fake-event'\nimport FakeEventTarget from '../../../event/fake-event-target'\nimport Error from '../../../error/error'\nimport {CustomEventType, Html5EventType} from '../../../event/event-type'\nimport getLogger from '../../../utils/logger'\nimport Track from '../../../track/track'\nimport VideoTrack from '../../../track/video-track'\nimport AudioTrack from '../../../track/audio-track'\nimport TextTrack from '../../../track/text-track'\n\nexport default class BaseMediaSourceAdapter extends FakeEventTarget implements IMediaSourceAdapter {\n  /**\n   * Passing the getLogger function to the actual media source adapter.\n   * @type {Function}\n   * @static\n   */\n  static getLogger: Function = getLogger;\n\n  /**\n   * The adapter config.\n   * @member {Object} _config\n   * @private\n   */\n  _config: ?Object;\n\n  /**\n   * The source object.\n   * @member {PKMediaSourceObject} _sourceObj\n   * @private\n   */\n  _sourceObj: ?PKMediaSourceObject;\n\n  /**\n   * The dom video element.\n   * @member {HTMLVideoElement} _videoElement\n   * @private\n   */\n  _videoElement: HTMLVideoElement;\n\n  /**\n   * Checks if the media source adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether the media source adapter is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n   * @param {PKMediaSourceObject} source - The source object.\n   * @param {Object} config - The media source adapter configuration.\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object = {}) {\n    super();\n    this._videoElement = videoElement;\n    this._sourceObj = source;\n    this._config = config;\n    this._handleLiveTimeUpdate();\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n  destroy(): Promise<*> {\n    this._sourceObj = null;\n    this._config = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Triggers the appropriate track changed event.\n   * @param {Track} track - The selected track.\n   * @private\n   * @returns {void}\n   */\n  _onTrackChanged(track: Track): void {\n    if (track instanceof VideoTrack) {\n      this._trigger(CustomEventType.VIDEO_TRACK_CHANGED, {selectedVideoTrack: track});\n    } else if (track instanceof AudioTrack) {\n      this._trigger(CustomEventType.AUDIO_TRACK_CHANGED, {selectedAudioTrack: track});\n    } else if (track instanceof TextTrack) {\n      this._trigger(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: track});\n    }\n  }\n\n  /**\n   * Dispatch an adapter event forward.\n   * @param {string} name - The name of the event.\n   * @param {?Object} payload - The event payload.\n   * @returns {void}\n   */\n  _trigger(name: string, payload?: Object): void {\n    this.dispatchEvent(new FakeEvent(name, payload));\n  }\n\n  /** Must implemented methods by the derived media source adapter **/\n\n  static canPlayType(mimeType: string, preferNative: boolean): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('static canPlayType');\n  }\n\n  load(): Promise<Object> {\n    return BaseMediaSourceAdapter._throwNotImplementedError('load');\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    return BaseMediaSourceAdapter._throwNotImplementedError('selectVideoTrack');\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectAudioTrack');\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectTextTrack');\n  }\n\n  hideTextTrack(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('hideTextTrack');\n  }\n\n  enableAdaptiveBitrate(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('enableAdaptiveBitrate');\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isAdaptiveBitrateEnabled');\n  }\n\n  _getLiveEdge(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('_getLiveEdge');\n  }\n\n  seekToLiveEdge(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('seekToLiveEdge');\n  }\n\n  isLive(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isLive');\n  }\n\n  /**\n   * Handling live time update (as is not triggered when video is paused, but the current time changed)\n   * @function _handleLiveTimeUpdate\n   * @returns {void}\n   * @private\n   */\n  _handleLiveTimeUpdate(): void {\n    this._videoElement.addEventListener(Html5EventType.DURATION_CHANGE, () => {\n      if (this.isLive() && this._videoElement.paused) {\n        this._trigger(Html5EventType.TIME_UPDATE);\n      }\n    });\n  }\n\n  getStartTimeOfDvrWindow(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('getStartTimeOfDvrWindow');\n  }\n\n  /**\n   * throw a run time error\n   * @param {string} name of the unimplemented function\n   * @returns {any} void/string/boolean\n   */\n  static _throwNotImplementedError(name: string): any {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, name);\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    if (this.isLive()) {\n      return this._videoElement.currentTime - this.getStartTimeOfDvrWindow();\n    } else {\n      return this._videoElement.currentTime;\n    }\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this.isLive()) {\n      to += this.getStartTimeOfDvrWindow();\n    }\n    this._videoElement.currentTime = to;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    if (this.isLive()) {\n      return this._getLiveEdge() - this.getStartTimeOfDvrWindow();\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * In case the adapter preformed a load it will return the manifest url.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    if (this._loadPromise && this._sourceObj) {\n      return this._sourceObj.url;\n    }\n    return \"\";\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/base-media-source-adapter.js","// @flow\n/* eslint-disable no-unused-vars */\nimport getLogger from '../utils/logger'\nimport Error from '../error/error'\nimport DrmSupport from './drm-support'\nimport {DrmScheme} from './drm-scheme'\n\nexport default class BaseDrmProtocol implements IDrmProtocol {\n  static getLogger = getLogger;\n  static DrmSupport = DrmSupport;\n  static DrmScheme = DrmScheme;\n\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static canPlayDrm');\n  }\n\n  static setDrmPlayback(...args): void {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static setDrmPlayback');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/base-drm-protocol.js","// @flow\nexport const DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-scheme.js","//@flow\nimport {convertCueToDOMTree} from './text-track-display'\n\nconst autoKeyword: string = \"auto\";\nconst directionSetting: { [string]: boolean } = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nconst alignSetting: { [string]: boolean } = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value: string): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\nclass VTTCue {\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n  hasBeenReset: boolean = false;\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  displayState: any = undefined;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n  _id: string = \"\";\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n  _pauseOnExit: boolean = false;\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _startTime: number;\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _endTime: number;\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n  _text: string;\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n  _region: ?string = null;\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n  _vertical: string = \"\";\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  _snapToLines: boolean = true;\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n  _line: string | number = \"auto\";\n  /**\n   * An alignment for the cue box’s line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n  _lineAlign: string = \"start\";\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n  _position: number = 50;\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n  _positionAlign: string = \"middle\";\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n  _size: number = 50;\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n  _align: string = \"middle\";\n\n  constructor(startTime: number, endTime: number, text: string) {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n\n  resetCue(): void {\n    this.hasBeenReset = true;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  set id(value: string) {\n    this._id = \"\" + value;\n  }\n\n  get pauseOnExit(): boolean {\n    return this._pauseOnExit;\n  }\n\n  set pauseOnExit(value: boolean) {\n    this._pauseOnExit = value;\n  }\n\n  get startTime(): number {\n    return this._endTime;\n  }\n\n  set startTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"Start time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set endTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"End time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    this._text = \"\" + value;\n    this.resetCue();\n  }\n\n  get region(): ?string {\n    return this._region;\n  }\n\n  set region(value: string) {\n    this._region = value;\n    this.resetCue();\n  }\n\n  get vertical(): string {\n    return this._vertical;\n  }\n\n  set vertical(value: string) {\n    const setting = findDirectionSetting(value);\n    // Have to check for false because the setting an be an empty string.\n    if (setting === false) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._vertical = setting;\n      this.resetCue();\n    }\n  }\n\n  get snapToLines(): boolean {\n    return this._snapToLines;\n  }\n\n  set snapToLines(value: boolean) {\n    this._snapToLines = value;\n    this.resetCue();\n  }\n\n  get line(): string | number {\n    return this._line;\n  }\n\n  set line(value: string | number) {\n    if (typeof value !== \"number\" && value !== autoKeyword) {\n      throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n    }\n    this._line = value;\n    this.resetCue();\n  }\n\n  get lineAlign(): string {\n    return this._lineAlign;\n  }\n\n  set lineAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._lineAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get position(): number {\n    return this._position;\n  }\n\n  set position(value: number) {\n    if (value < 0 || value > 100) {\n      throw new Error(\"Position must be between 0 and 100.\");\n    }\n    this._position = value;\n    this.resetCue();\n  }\n\n  get positionAlign(): string {\n    return this._positionAlign;\n  }\n\n  set positionAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._positionAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get size(): number | boolean {\n    return this._size;\n  }\n\n  set size(value: number): void {\n    if (value < 0 || value > 100\n    ) {\n      throw new Error(\"Size must be between 0 and 100.\");\n    }\n    this._size = value;\n    this.resetCue();\n  }\n\n  get align(): string {\n    return this._align;\n  }\n\n  set align(value: string): void {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._align = (setting: string);\n      this.resetCue();\n    }\n  }\n\n  getCueAsHTML() {\n    return convertCueToDOMTree(window, this.text);\n  }\n}\n\nlet Cue;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  Cue = window.VTTCue;\n} else {\n  Cue = VTTCue;\n}\n\nexport {Cue};\n\n\n\n// WEBPACK FOOTER //\n// ./track/vtt-cue.js","/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nconst fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  const m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nconst ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200e\",\n  \"&rlm;\": \"\\u200f\",\n  \"&nbsp;\": \"\\u00a0\"\n};\n\nconst TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nconst TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nconst NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    const m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    let m;\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n      NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    const tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    let element = window.document.createElement(tagName);\n    element.localName = tagName;\n    const name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  let rootDiv = window.document.createElement(\"div\"),\n    current = rootDiv,\n    t,\n    tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n          tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      let ts = parseTimeStamp(t.substr(1, t.length - 2));\n      let node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      const m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nconst strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n  [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n  [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n  [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n  [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n  [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n  [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n  [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n  [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n  [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n  [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n  [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n  [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n  [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n  [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n  [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n  [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n  [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n  [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n  [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n  [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n  [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n  [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n  [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n  [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (let i = 0; i < strongRTLRanges.length; i++) {\n    const currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  let nodeStack = [],\n    text = \"\",\n    charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (let i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    const node = nodeStack.pop(),\n      text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      const m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (let i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n    (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n    !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  const track = cue.track;\n  const trackList = track.textTrackList;\n  let count = 0;\n  for (let i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nclass StyleBox {\n\n  constructor() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  applyStyles(styles, div) {\n    div = div || this.div;\n    for (let prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  }\n\n  formatStyle(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  }\n}\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nclass CueStyleBox extends StyleBox {\n  constructor(window, cue, styleOptions) {\n    super();\n    const isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    let color = \"rgba(255, 255, 255, 1)\";\n    let backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    let textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    let styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    let textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - (cue.size / 2);\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left: this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n}\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nclass BoxPosition {\n  constructor(obj) {\n    let isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    let lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      let rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n        rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n        : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  move(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n      case \"+x\":\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case \"-x\":\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case \"+y\":\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case \"-y\":\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  }\n\n  // Check if this box overlaps another box, b2.\n  overlaps = function (b2) {\n    return this.left < b2.right &&\n      this.right > b2.left &&\n      this.top < b2.bottom &&\n      this.bottom > b2.top;\n  }\n\n  // Check if this box overlaps any other boxes in boxes.\n  overlapsAny(boxes) {\n    for (let i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Check if this box is within another box.\n  within(container) {\n    return this.top >= container.top &&\n      this.bottom <= container.bottom &&\n      this.left >= container.left &&\n      this.right <= container.right;\n  }\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  overlapsOppositeAxis(container, axis) {\n    switch (axis) {\n      case \"+x\":\n        return this.left < container.left;\n      case \"-x\":\n        return this.right > container.right;\n      case \"+y\":\n        return this.top < container.top;\n      case \"-y\":\n        return this.bottom > container.bottom;\n    }\n  }\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  intersectPercentage(b2) {\n    let x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  }\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  toCSSCompatValues(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  }\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  static getSimpleBoxPosition(obj) {\n    let height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    let width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    let top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n      obj.tagName ? obj.getBoundingClientRect() : obj;\n    return {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n  };\n}\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    let bestPosition,\n      specifiedPosition = new BoxPosition(b),\n      percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (let i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n      (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      let p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  let boxPosition = new BoxPosition(styleBox),\n    cue = styleBox.cue,\n    linePos = computeLinePos(cue),\n    axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    let step = boxPosition.lineHeight,\n      position = step * Math.round(linePos),\n      maxPosition = containerBox[size] + step,\n      initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    let calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  let bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nconst FONT_SIZE_PERCENT = 0.05;\nconst FONT_STYLE = \"sans-serif\";\nconst CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  let paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (let i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  let boxPositions = [],\n    containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n    fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  let styleOptions = {\n    font: (fontSize * fontScale) + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    let styleBox, cue;\n\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\n\nexport {processCues, convertCueToDOMTree};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track-display.js","//@flow\nimport BasePlugin from './base-plugin'\nimport Error from '../error/error'\nimport Player from '../player'\nimport getLogger from '../utils/logger'\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nconst logger = getLogger(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\nexport default class PluginManager {\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n  static _registry: Map<string, Function> = new Map();\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n  _plugins: Map<string, BasePlugin> = new Map();\n\n  /**\n   * Writes the plugin in the registry.\n   * Maps: plugin name -> plugin class.\n   * @param {string} name - The plugin name\n   * @param {Function} handler - The plugin class\n   * @returns {boolean} - If the registration request succeeded\n   * @static\n   * @public\n   */\n  static register(name: string, handler: Function): boolean {\n    if (typeof handler !== 'function' || handler.prototype instanceof BasePlugin === false) {\n      throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_NOT_VALID_HANDLER, name);\n    }\n    if (!PluginManager._registry.has(name)) {\n      PluginManager._registry.set(name, handler);\n      logger.debug(`Plugin <${name}> has been registered successfully`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> is already registered, do not register again`);\n    return false;\n  }\n\n  /**\n   * Removes the plugin from the registry.\n   * @param {string} name - The plugin name\n   * @static\n   * @public\n   * @returns {void}\n   */\n  static unRegister(name: string): void {\n    if (PluginManager._registry.has(name)) {\n      PluginManager._registry.delete(name);\n      logger.debug(`Unregistered <${name}> plugin.`);\n    }\n  }\n\n  /**\n   * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} [config={}] - The plugin configuration\n   * @returns {boolean} - Whether the plugin load was successful\n   * @public\n   */\n  load(name: string, player: Player, config: Object = {}): boolean {\n    if (!PluginManager._registry.has(name)) {\n      throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_NOT_REGISTERED_PLUGIN, name);\n    }\n    let pluginClass = PluginManager._registry.get(name);\n    if (pluginClass && pluginClass.isValid()) {\n      this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n      logger.debug(`Plugin <${name}> has been loaded`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> isn\\'t loaded, isValid()=false`);\n    return false;\n  }\n\n  /**\n   * Iterates over all the plugins and calls private _destroy.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._plugins.forEach(this._destroy.bind(this));\n  }\n\n  /**\n   * Iterates over all the plugins and calls reset() method of the plugin's impl.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._plugins.forEach((plugin: BasePlugin) => {\n      plugin.reset();\n    });\n  }\n\n  /**\n   * Calls destroy() method of the plugin's impl.\n   * @param {BasePlugin} plugin - The plugin instance\n   * @param {string} name - The plugin name\n   * @private\n   * @returns {void}\n   */\n  _destroy(plugin: BasePlugin, name: string): void {\n    plugin.destroy();\n    this._plugins.delete(name);\n  }\n\n  /**\n   * Returns the plugin's instance.\n   * @param {string} name - The plugin name\n   * @returns {BasePlugin} - The plugin instance\n   * @public\n   */\n  get(name: string): ?BasePlugin {\n    return this._plugins.get(name);\n  }\n}\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\nconst registerPlugin = PluginManager.register;\nexport {registerPlugin};\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/plugin-manager.js","// @flow\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nclass TextStyle {\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n  static FontFamily: {[string]: string} = {\n    \"ARIAL\": \"Arial\",\n    \"HELVETICA\": \"Helvetica\",\n    \"VERDANA\": \"Verdana\",\n    \"SANS_SERIF\": \"sans-serif\"\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n  static StandardColors: {[string]: Array<number>} = {\n    'WHITE': [255, 255, 255],\n    'BLACK': [0, 0, 0],\n    'RED': [255, 0, 0],\n    'GREEN': [0, 255, 0],\n    'BLUE': [0, 0, 255],\n    'YELLOW': [255, 255, 0],\n    'MAGENTA': [255, 0, 255],\n    'CYAN': [0, 255, 255]\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n  static StandardOpacities: {[string]: number} = {\n    'OPAQUE': 1,\n    'SEMI_HIGH': 0.75,\n    'SEMI_LOW': 0.25,\n    'TRANSPARENT': 0\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n  static EdgeStyles: { [string]: Array<Array<number>> } = {\n    'NONE': [],\n    'RAISED': [\n      [34, 34, 34, 1, 1, 0],\n      [34, 34, 34, 2, 2, 0],\n      [34, 34, 34, 3, 3, 0]],\n    'DEPRESSED': [\n      [204, 204, 204, 1, 1, 0],\n      [204, 204, 204, 0, 1, 0],\n      [34, 34, 34, -1, -1, 0],\n      [34, 34, 34, 0, -1, 0]],\n    'UNIFORM': [\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4]],\n    'DROP': [\n      [34, 34, 34, 2, 2, 3],\n      [34, 34, 34, 2, 2, 4],\n      [34, 34, 34, 2, 2, 5]]\n  };\n\n  static FontSizes: Array<string> = [\n    \"50%\",\n    \"75%\",\n    \"100%\",\n    \"200%\",\n    \"300%\",\n    \"400%\"\n  ];\n\n  /**\n   * Creates a CSS RGBA sctring for a given color and opacity values\n   * @param {TextStyle.StandardColors} color - color value in RGB\n   * @param {TextStyle.StandardOpacities} opacity - opacity value\n   * @return {string} - CSS rgba string\n   * @private\n   */\n  static _toRGBA(color: Array<number>, opacity: number): string {\n    // shaka.asserts.assert(color.length == 3);\n    return 'rgba(' + color.concat(opacity).join(',') + ')';\n  }\n\n  /**\n   * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n   * @type {string}\n   */\n  fontSize: string = '100%';\n\n  /**\n   * @type {TextStyle.FontFamily}\n   */\n  fontFamily: string = TextStyle.FontFamily.SANS_SERIF;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  fontColor: Array<number> = TextStyle.StandardColors.WHITE;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   * @expose\n   */\n  fontOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  backgroundColor: Array<number> = TextStyle.StandardColors.BLACK;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   */\n  backgroundOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.EdgeStyles}\n   * @expose\n   */\n  fontEdge: Array<Array<number>> = TextStyle.EdgeStyles.NONE;\n\n  /**\n   * Compute the CSS text necessary to represent this TextStyle.\n   * Output does not contain any selectors.\n   *\n   * @return {string} - ::CUE CSS string\n   */\n  toCSS(): string {\n    let attributes: Array<string> = [];\n\n    attributes.push('font-family: ' + this.fontFamily);\n    attributes.push('font-size: ' + this.fontSize);\n    attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n    attributes.push('background-color: ' +\n      TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n    // A given edge effect may be implemented with multiple shadows.\n    // Collect them all into an array, then combine into one attribute.\n    let shadows: Array<string> = [];\n    for (let i = 0; i < this.fontEdge.length; i++) {\n      // shaka.asserts.assert(this.fontEdge[i].length == 6);\n      const color: Array<number> = this.fontEdge[i].slice(0, 3);\n      let shadow: Array<number> = this.fontEdge[i].slice(3, 6);\n      shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' +\n        shadow.join('px ') + 'px');\n    }\n    attributes.push('text-shadow: ' + shadows.join(','));\n\n    return attributes.join('!important; ');\n  }\n\n  /**\n   * clones the textStyle object\n   * @returns {TextStyle} the cloned textStyle object\n   */\n  clone(): TextStyle{\n    let clonedTextStyle = new TextStyle();\n    clonedTextStyle.fontEdge = this.fontEdge;\n    clonedTextStyle.fontSize = this.fontSize;\n    clonedTextStyle.fontColor = this.fontColor;\n    clonedTextStyle.fontOpacity = this.fontOpacity;\n    clonedTextStyle.backgroundColor = this.backgroundColor;\n    clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n    return clonedTextStyle;\n  }\n}\n\nexport default TextStyle;\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-style.js","// @flow\nexport type StreamTypes = { [stream: string]: string };\n\nconst StreamType: StreamTypes = {\n  DASH: \"dash\",\n  HLS: \"hls\",\n  PROGRESSIVE: \"progressive\"\n};\n\nexport {StreamType};\n\n\n\n// WEBPACK FOOTER //\n// ./engines/stream-type.js","// @flow\nexport type EngineTypes = { [engine: string]: string };\n\nconst EngineType: EngineTypes = {\n  HTML5: \"html5\",\n  FLASH: \"flash\",\n  SILVERLIGHT: \"silverlight\"\n};\n\nexport {EngineType};\n\n\n\n// WEBPACK FOOTER //\n// ./engines/engine-type.js","// @flow\nexport type MediaTypes = { [media: string]: string };\n\nconst MediaType: MediaTypes = {\n  VOD: \"Vod\",\n  LIVE: \"Live\",\n  AUDIO: \"Audio\",\n  UNKNOWN: \"Unknown\"\n};\n\nexport {MediaType};\n\n\n\n// WEBPACK FOOTER //\n// ./media-type.js","// @flow\nexport type AbrModes = { [mode: string]: string };\n\nconst AbrMode: AbrModes = {\n  MANUAL: \"manual\",\n  AUTO: \"auto\"\n};\n\nexport {AbrMode};\n\n\n\n// WEBPACK FOOTER //\n// ./track/abr-mode-type.js","//@flow\nimport Player from './player'\nimport BaseMediaSourceAdapter from './engines/html5/media-source/base-media-source-adapter'\nimport {registerMediaSourceAdapter} from './engines/html5/media-source/media-source-provider'\nimport {registerPlugin} from './plugin/plugin-manager'\nimport BaseDrmProtocol from './drm/base-drm-protocol'\nimport BaseMiddleware from './middleware/base-middleware'\nimport BasePlugin from './plugin/base-plugin'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport Env from './utils/env'\nimport * as Utils from './utils/util'\nimport Error from './error/error'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport EventManager from './event/event-manager'\nimport {StateType} from './state/state-type'\nimport {TrackType} from './track/track-type'\nimport {StreamType} from './engines/stream-type'\nimport {EngineType} from './engines/engine-type'\nimport {MediaType} from './media-type'\nimport {EventType} from './event/event-type'\nimport {AbrMode} from './track/abr-mode-type'\nimport {LogLevelType} from './utils/logger'\n\nPlayer.runCapabilities();\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nexport function loadPlayer(config: ?Object) {\n  return new Player(config || {});\n}\n\n// Export the media source adapters necessary utils\nexport {registerMediaSourceAdapter, BaseMediaSourceAdapter};\n\n// Export the plugin framework\nexport {registerPlugin, BasePlugin, BaseMiddleware};\n\n// Export the tracks classes\nexport {Track, VideoTrack, AudioTrack, TextTrack, TextStyle};\n\n// Export utils library\nexport {Utils};\n\n// Export Error class\nexport {Error};\n\n// Export Event system\nexport {FakeEvent, FakeEventTarget, EventManager}\n\n// Export version\nexport {__VERSION__ as VERSION};\n\n// Export player name\nexport {__NAME__ as PLAYER_NAME};\n\n// Export environment data\nexport {Env};\n\n// Export base DRM protocol\nexport {BaseDrmProtocol};\n\n// Export the player capabilities\nconst getCapabilities = Player.getCapabilities;\nconst setCapabilities = Player.setCapabilities;\nexport {getCapabilities, setCapabilities};\n\n// Export enums\nexport {EventType, StateType, TrackType, EngineType, MediaType, StreamType, AbrMode, LogLevelType};\n\nexport default loadPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./playkit.js","/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/ua-parser-js/src/ua-parser.js\n// module id = 31\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/webpack/buildin/amd-options.js\n// module id = 32\n// module chunks = 0","// @flow\nimport * as Utils from './util'\n\nclass PosterManager {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  _posterUrl: string;\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n\n  constructor() {\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n  setSrc(posterUrl: ?string): void {\n    if (posterUrl) {\n      this._posterUrl = posterUrl;\n      Utils.Dom.setStyle(this._el, \"background-image\", `url(\"${this._posterUrl}\")`);\n      this.hide();\n    }\n  }\n\n  /**\n   * Get the poster source URL\n   * @public\n   * @returns {string} - the poster image URL\n   */\n  get src(): string {\n    return this._posterUrl;\n  }\n\n  /**\n   * Get the poster HTML Div element\n   * @public\n   * @returns {HTMLDivElement} - Poster HTML Dom element\n   */\n  getElement(): HTMLDivElement {\n    return this._el;\n  }\n\n  /**\n   * Create the HTML Div element of the poster\n   * @private\n   * @returns {void}\n   */\n  _createEl(): void {\n    if (!this._el) {\n      const el = this._el = Utils.Dom.createElement(\"div\");\n      Utils.Dom.setAttribute(el, \"id\", Utils.Generator.uniqueId(5));\n      Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n  }\n\n  /**\n   * Removes the poster element from the dom\n   * @private\n   * @returns {void}\n   */\n  _removeEl(): void {\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  /**\n   * Show the poster image\n   * @public\n   * @private\n   * @returns {void}\n   */\n  show(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"\");\n  }\n\n  /**\n   * Hide the poster image\n   * @public\n   * @returns {void}\n   */\n  hide(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"none\");\n  }\n\n  /**\n   * Resets the poster url and the background image\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._posterUrl = '';\n    Utils.Dom.setStyle(this._el, \"background-image\", '');\n  }\n\n  /**\n   * Destroys the poster element\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.reset();\n    this._removeEl();\n  }\n}\n\nexport default PosterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/poster-manager.js","// @flow\nimport Error from '../error/error'\n\nconst JSONP_TIMEOUT: number = 5000;\nconst CALLBACK_PREFIX: string = 'jsonpcallback';\nconst JSONP_FORMAT_STRING: string = 'responseFormat=jsonp&callback=';\n\n/**\n * JSONP utility.\n * @param {string} url - The url of the request.\n * @param {string} callback - Callback function to be called when the request returns.\n * @param {Object} options - Object contains configuration (currently only timeout).\n * @returns {Promise<*>} - A promise with the callback output.\n */\nfunction jsonp(url: string, callback: Function, options: Object): Promise<*> {\n  options = options || {};\n  const timeout = options.timeout ? options.timeout : JSONP_TIMEOUT;\n  const script = document.createElement(\"script\");\n  const callbackId = CALLBACK_PREFIX + Math.round(Date.now() + Math.random() * 1000001);\n  let scriptUri = url;\n  let timer;\n\n  /**\n   * function to clean the DOM from the script tag and from the function\n   * @returns {void}\n   */\n  const _cleanup = () => {\n    if (script && script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[callbackId] = () => {\n    };\n    if (timer) {\n      clearTimeout(timer);\n    }\n  };\n\n  return new Promise((resolve, reject) => {\n    if (timeout) {\n      timer = setTimeout(function () {\n        _cleanup();\n        reject(new Error(\n          Error.Severity.CRITICAL,\n          Error.Category.NETWORK,\n          Error.Code.TIMEOUT,\n          url\n        ));\n      }, timeout);\n    }\n\n    /**\n     * a wrapper to the callback function, to save a closure\n     * @param {Object} data - the data we get from the server, in response to the request\n     * @returns {void}\n     */\n    window[callbackId] = (data: Object) => {\n      const callbackResult = callback(data, url);\n      _cleanup();\n      resolve(callbackResult);\n    };\n\n    if (scriptUri.match(/\\?/)) {\n      scriptUri += \"&\" + JSONP_FORMAT_STRING + callbackId;\n    } else {\n      scriptUri += \"?\" + JSONP_FORMAT_STRING + callbackId;\n    }\n\n    script.type = 'text/javascript';\n    script.src = scriptUri;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n}\n\nexport {jsonp};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/jsonp.js","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.4.1\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Gets the current logging level for the logging instance\r\n\t\tgetLevel: function () {\r\n\t\t\treturn this.context.filterLevel;\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Gets the global logging filter level\r\n\tLogger.getLevel = function() {\r\n\t\treturn globalLogger.getLevel();\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t} else if (context.level === Logger.DEBUG && console.debug) {\r\n\t\t\t\t\thdlr = console.debug;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/js-logger/src/logger.js\n// module id = 35\n// module chunks = 0","//@flow\n\ntype SeverityType = { [severity: string]: number };\n\nconst Severity: SeverityType = {\n  /**\n   * An error occurred, but the Player is attempting to recover from the error.\n   *\n   * If the Player cannot ultimately recover, it still may not throw a CRITICAL\n   * error.  For example, retrying for a media segment will never result in\n   * a CRITICAL error (the Player will just retry forever).\n   */\n  'RECOVERABLE': 1,\n  /**\n   * A critical error that the library cannot recover from.  These usually cause\n   * the Player to stop loading or updating.  A new manifest must be loaded\n   * to reset the library.\n   */\n  'CRITICAL': 2\n};\n\nexport {Severity}\nexport type {SeverityType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/severity.js","//@flow\ntype CodeType = { [code: string]: number };\n\nconst Code: CodeType = {\n  /**\n   * A network request was made using an unsupported URI scheme.\n   */\n  'UNSUPPORTED_SCHEME': 1000,\n\n  /**\n   * An HTTP network request returned an HTTP status that indicated a failure.\n   */\n  'BAD_HTTP_STATUS': 1001,\n\n  /**\n   * An HTTP network request failed with an error, but not from the server.\n   */\n  'HTTP_ERROR': 1002,\n\n  /**\n   * A network request timed out.\n   */\n  'TIMEOUT': 1003,\n\n  /**\n   * A network request was made with a malformed data URI.\n   */\n  'MALFORMED_DATA_URI': 1004,\n\n  /**\n   * A network request was made with a data URI using an unknown encoding.\n   */\n  'UNKNOWN_DATA_URI_ENCODING': 1005,\n\n  /**\n   * A request filter threw an error.\n   */\n  'REQUEST_FILTER_ERROR': 1006,\n\n  /**\n   * A response filter threw an error.\n   */\n  'RESPONSE_FILTER_ERROR': 1007,\n\n  /** The text parser failed to parse a text stream due to an invalid header. */\n  'INVALID_TEXT_HEADER': 2000,\n\n  /** The text parser failed to parse a text stream due to an invalid cue. */\n  'INVALID_TEXT_CUE': 2001,\n\n  /**\n   * Was unable to detect the encoding of the response text.  Suggest adding\n   * byte-order-markings to the response data.\n   */\n  'UNABLE_TO_DETECT_ENCODING': 2003,\n\n  /** The response data contains invalid Unicode character encoding. */\n  'BAD_ENCODING': 2004,\n\n  /**\n   * The XML parser failed to parse an xml stream, or the XML lacks mandatory\n   * elements for TTML.\n   * in the data is the URI associated with the XML.\n   */\n  'INVALID_XML': 2005,\n\n  /**\n   * MP4 segment does not contain TTML.\n   */\n  'INVALID_MP4_TTML': 2007,\n\n  /**\n   * MP4 segment does not contain VTT.\n   */\n  'INVALID_MP4_VTT': 2008,\n\n  /**\n   *  VTT module issue, see the date for more details\n   */\n  \"UNABLE_TO_CREATE_TEXT_CUE\": 2009,\n  /**\n   * error parsing the dash adapter error (for instance, could not parse an error shaka raised)\n   */\n  \"DASH_ADAPTER_ERROR_PARSE_ISSUE\": 2010,\n\n\n  /**\n   * Some component tried to read past the end of a buffer.  The segment index,\n   * init segment, or PSSH may be malformed.\n   */\n  'BUFFER_READ_OUT_OF_BOUNDS': 3000,\n\n  /**\n   * Some component tried to parse an integer that was too large to fit in a\n   * JavaScript number without rounding error.  JavaScript can only natively\n   * represent integers up to 53 bits.\n   */\n  'JS_INTEGER_OVERFLOW': 3001,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered an integer,\n   * ID, or other field larger than the maximum supported by the parser.\n   */\n  'EBML_OVERFLOW': 3002,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered a floating-\n   * point field of a size not supported by the parser.\n   */\n  'EBML_BAD_FLOATING_POINT_SIZE': 3003,\n\n  /**\n   * The MP4 SIDX parser found the wrong box type.\n   * Either the segment index range is incorrect or the data is corrupt.\n   */\n  'MP4_SIDX_WRONG_BOX_TYPE': 3004,\n\n  /**\n   * The MP4 SIDX parser encountered an invalid timescale.\n   * The segment index data may be corrupt.\n   */\n  'MP4_SIDX_INVALID_TIMESCALE': 3005,\n\n  /** The MP4 SIDX parser encountered a type of SIDX that is not supported. */\n  'MP4_SIDX_TYPE_NOT_SUPPORTED': 3006,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cues element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUES_ELEMENT_MISSING': 3007,\n\n  /**\n   * The WebM header parser was unable to locate the Ebml element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_EBML_HEADER_ELEMENT_MISSING': 3008,\n\n  /**\n   * The WebM header parser was unable to locate the Segment element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_SEGMENT_ELEMENT_MISSING': 3009,\n\n  /**\n   * The WebM header parser was unable to locate the Info element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_INFO_ELEMENT_MISSING': 3010,\n\n  /**\n   * The WebM header parser was unable to locate the Duration element.\n   * The init segment data may be corrupt or may have been incorrectly encoded.\n   * Shaka requires a duration in WebM DASH content.\n   */\n  'WEBM_DURATION_ELEMENT_MISSING': 3011,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Track Positions element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING': 3012,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Time element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TIME_ELEMENT_MISSING': 3013,\n\n  /**\n   * A MediaSource operation failed.\n   * a MediaError code from the video element.\n   */\n  'MEDIA_SOURCE_OPERATION_FAILED': 3014,\n\n  /**\n   * A MediaSource operation threw an exception.\n   */\n  'MEDIA_SOURCE_OPERATION_THREW': 3015,\n\n  /**\n   * The video element reported an error.\n   * - error.data[0] is a MediaError code.js from the video element.\n   * - On Edge & IE, error.data[1] is a Microsoft extended error code.js in hex.\n   * - On Chrome, error.data[2] is a string with details on the error.\n   */\n  'VIDEO_ERROR': 3016,\n\n  /**\n   * A MediaSource operation threw QuotaExceededError and recovery failed. The\n   * content cannot be played correctly because the segments are too large for\n   * the browser/platform. This may occur when attempting to play very high\n   * quality, very high bitrate content on low-end devices.\n   */\n  'QUOTA_EXCEEDED_ERROR': 3017,\n\n  /**\n   * a media error from hlsjs adapter\n   */\n  'HLS_FATAL_MEDIA_ERROR': 3018,\n\n  /**\n   * HLSJS fragment parsing issue\n   */\n  'HLS_FRAG_PARSING_ERROR': 3019,\n\n  /**\n   * HLSJS buffer append issue\n   */\n  'HLS_BUFFER_APPEND_ISSUE': 3020,\n  /**\n   * HLSJS buffer appending error\n   */\n  'HLS_BUFFER_APPENDING_ISSUE': 3021,\n  /**\n   * Native adapter error, more info in the data part\n   */\n  'NATIVE_ADAPTER_LOAD_FAILED': 3022,\n  /**\n   * HLSjs buffer stalled issue\n   */\n  'HLS_BUFFER_STALLED_ERROR': 3023,\n  /**\n   * The Player was unable to guess the manifest type based on file extension\n   * or MIME type.  To fix, try one of the following:\n   * Rename the manifest so that the URI ends in a well-known extension.\n   * Configure the server to send a recognizable Content-Type header.\n   * Configure the server to accept a HEAD request for the manifest.\n   */\n  'UNABLE_TO_GUESS_MANIFEST_TYPE': 4000,\n\n  /** The DASH Manifest contained invalid XML markup. */\n  'DASH_INVALID_XML': 4001,\n\n  /**\n   * The DASH Manifest contained a Representation with insufficient segment\n   * information.\n   */\n  'DASH_NO_SEGMENT_INFO': 4002,\n\n  /** The DASH Manifest contained an AdaptationSet with no Representations. */\n  'DASH_EMPTY_ADAPTATION_SET': 4003,\n\n  /** The DASH Manifest contained an Period with no AdaptationSets. */\n  'DASH_EMPTY_PERIOD': 4004,\n\n  /**\n   * The DASH Manifest does not specify an init segment with a WebM container.\n   */\n  'DASH_WEBM_MISSING_INIT': 4005,\n\n  /** The DASH Manifest contained an unsupported container format. */\n  'DASH_UNSUPPORTED_CONTAINER': 4006,\n\n  /** The embedded PSSH data has invalid encoding. */\n  'DASH_PSSH_BAD_ENCODING': 4007,\n\n  /**\n   * There is an AdaptationSet whose Representations do not have any common\n   * key-systems.\n   */\n  'DASH_NO_COMMON_KEY_SYSTEM': 4008,\n\n  /** Having multiple key IDs per Representation is not supported. */\n  'DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED': 4009,\n\n  /** The DASH Manifest specifies conflicting key IDs. */\n  'DASH_CONFLICTING_KEY_IDS': 4010,\n\n  /**\n   * The manifest contains a period with no playable streams.\n   * Either the period was originally empty, or the streams within cannot be\n   * played on this browser or platform.\n   */\n  'UNPLAYABLE_PERIOD': 4011,\n\n  /**\n   * There exist some streams that could be decoded, but restrictions imposed\n   * by the application or the key system prevent us from playing.  This may\n   * happen under the following conditions:\n   * The application has given restrictions to the Player that restrict\n   * at least one content type completely (e.g. no playable audio),\n   * The key system has imposed output restrictions that cannot be met\n   * (such as HDCP) and there are no unrestricted alternatives.\n   */\n  'RESTRICTIONS_CANNOT_BE_MET': 4012,\n\n  /**\n   * No valid periods were found in the manifest.  Please check that your\n   * manifest is correct and free of typos.\n   */\n  'NO_PERIODS': 4014,\n\n  /**\n   * HLS playlist doesn't start with a mandory #EXTM3U tag.\n   */\n  'HLS_PLAYLIST_HEADER_MISSING': 4015,\n\n  /**\n   * HLS tag has an invalid name that doesn't start with '#EXT'\n   */\n  'INVALID_HLS_TAG': 4016,\n\n  /**\n   * HLS playlist has both Master and Media/Segment tags.\n   */\n  'HLS_INVALID_PLAYLIST_HIERARCHY': 4017,\n\n  /**\n   * A Representation has an id that is the same as another Representation in\n   * the same Period.  This makes manifest updates impossible since we cannot\n   * map the updated Representation to the old one.\n   */\n  'DASH_DUPLICATE_REPRESENTATION_ID': 4018,\n\n  /**\n   * HLS manifest has several #EXT-X-MAP tags. We can only\n   * support one at the moment.\n   */\n  'HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND': 4020,\n\n  /**\n   * HLS parser was unable to guess mime type of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_MIME_TYPE': 4021,\n\n  /**\n   * No Master Playlist has been provided. Master playlist provides\n   * vital information about the streams (like codecs) that is\n   * required for MediaSource. We don't support directly providing\n   * a Media Playlist.\n   */\n  'HLS_MASTER_PLAYLIST_NOT_PROVIDED': 4022,\n\n  /**\n   * One of the required attributes was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_ATTRIBUTE_MISSING': 4023,\n\n  /**\n   * One of the required tags was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_TAG_MISSING': 4024,\n\n  /**\n   * HLS parser was unable to guess codecs of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_CODECS': 4025,\n\n  /**\n   * HLS parser has encountered encrypted content with unsupported\n   * KEYFORMAT attributes.\n   */\n  'HLS_KEYFORMATS_NOT_SUPPORTED': 4026,\n\n  /**\n   * The manifest parser only supports xlink links with\n   * xlink:actuate=\"onLoad\".\n   */\n  'DASH_UNSUPPORTED_XLINK_ACTUATE': 4027,\n\n  /**\n   * The manifest parser has hit its depth limit on\n   * xlink link chains.\n   */\n  'DASH_XLINK_DEPTH_LIMIT': 4028,\n\n  /**\n   * HLS parser encountered a live playlist.\n   */\n  'HLS_LIVE_CONTENT_NOT_SUPPORTED': 4029,\n\n  /**\n   * HLSJS cannot parse error\n   */\n  'HLSJS_CANNOT_PARSE': 4030,\n\n  /**\n   * The StreamingEngine called onChooseStreams() but the callback receiver\n   * did not return the correct number or type of Streams.\n   *\n   * This can happen when there is multi-Period content where one Period is\n   * video+audio and another is video-only or audio-only.  We don't support this\n   * case because it is incompatible with MSE.  When the browser reaches the\n   * transition, it will pause, waiting for the audio stream.\n   */\n  'INVALID_STREAMS_CHOSEN': 5005,\n\n\n  /**\n   * The manifest indicated protected content, but the manifest parser was\n   * unable to determine what key systems should be used.\n   */\n  'NO_RECOGNIZED_KEY_SYSTEMS': 6000,\n\n  /**\n   * None of the requested key system configurations are available.  This may\n   * happen under the following conditions:\n   *  The key system is not supported,\n   *  The key system does not support the features requested (e.g.\n   *        persistent state),\n   *  A user prompt was shown and the user denied access,\n   *   The key system is not available from unsecure contexts. (ie.\n   * requires HTTPS) See https://goo.gl/EEhZqT.\n   */\n  'REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE': 6001,\n\n  /**\n   * The browser found one of the requested key systems, but it failed to\n   * create an instance of the CDM for some unknown reason.\n   */\n  'FAILED_TO_CREATE_CDM': 6002,\n\n  /**\n   * The browser found one of the requested key systems and created an instance\n   * of the CDM, but it failed to attach the CDM to the video for some unknown\n   * reason.\n   */\n  'FAILED_TO_ATTACH_TO_VIDEO': 6003,\n\n  /**\n   * The CDM rejected the server certificate supplied by the application.\n   * The certificate may be malformed or in an unsupported format.\n   */\n  'INVALID_SERVER_CERTIFICATE': 6004,\n\n  /**\n   * The CDM refused to create a session for some unknown reason.\n   */\n  'FAILED_TO_CREATE_SESSION': 6005,\n\n  /**\n   * The CDM was unable to generate a license request for the init data it was\n   * given.  The init data may be malformed or in an unsupported format.\n   */\n  'FAILED_TO_GENERATE_LICENSE_REQUEST': 6006,\n\n  /**\n   * The license request failed.  This could be a timeout, a network failure, or\n   * a rejection by the server.\n   */\n  'LICENSE_REQUEST_FAILED': 6007,\n\n  /**\n   * The license response was rejected by the CDM.  The server's response may be\n   * invalid or malformed for this CDM.\n   */\n  'LICENSE_RESPONSE_REJECTED': 6008,\n\n  /**\n   * The manifest does not specify any DRM info, but the content is encrypted.\n   * Either the manifest or the manifest parser are broken.\n   */\n  'ENCRYPTED_CONTENT_WITHOUT_DRM_INFO': 6010,\n\n  /**\n   * No license server was given for the key system signaled by the manifest.\n   * A license server URI is required for every key system.\n   */\n  'NO_LICENSE_SERVER_GIVEN': 6012,\n\n  /**\n   * A required offline session was removed.  The content is not playable.\n   */\n  'OFFLINE_SESSION_REMOVED': 6013,\n\n  /**\n   * The license has expired.  This is triggered when playback is stalled on a\n   * 'waitingforkeys' event and there are any expired keys in the key status map\n   * of any active session.\n   */\n  'EXPIRED': 6014,\n  /**\n   * DRM\n   */\n  \"BAD_FAIRPLAY_RESPONSE\": 6015,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_MEDIA_KEYS\": 6016,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_KEY_SESSION\": 6017,\n\n  /**\n   * The call to Player.load() was interrupted by a call to Player.unload()\n   * or another call to Player.load().\n   */\n  'LOAD_INTERRUPTED': 7000,\n  /**\n   * HLSJS levelSwitchError - bitrate switch issue\n   */\n  'BITRATE_SWITCH_ISSUE': 7001,\n  /**\n   * The call to Player.load() failed. see other data for more details.\n   */\n  'LOAD_FAILED': 7002,\n  /**\n   * Build error. unregistered plugin\n   */\n  'RUNTIME_ERROR_NOT_REGISTERED_PLUGIN': 7003,\n  /**\n   * Build error. Unimplemnted method\n   */\n  'RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED': 7004,\n  /**\n   * Build error. not a valid handler\n   */\n  'RUNTIME_ERROR_NOT_VALID_HANDLER': 7005,\n  /**\n   * When the play API called without any source\n   */\n  'NO_SOURCE_PROVIDED': 7006,\n\n  /**\n   * The Cast API is unavailable.  This may be because of one of the following:\n   * - The browser may not have Cast support\n   * - The browser may be missing a necessary Cast extension\n   * - The Cast sender library may not be loaded in your app\n   */\n  'CAST_API_UNAVAILABLE': 8000,\n\n  /**\n   * No cast receivers are available at this time.\n   */\n  'NO_CAST_RECEIVERS': 8001,\n\n  /**\n   * The library is already casting.\n   */\n  'ALREADY_CASTING': 8002,\n\n  /**\n   * A Cast SDK error that we did not explicitly plan for has occurred.\n   * Check data[0] and refer to the Cast SDK documentation for details.\n   */\n  'UNEXPECTED_CAST_ERROR': 8003,\n\n  /**\n   * The cast operation was canceled by the user.\n   */\n  'CAST_CANCELED_BY_USER': 8004,\n\n  /**\n   * The cast connection timed out.\n   */\n  'CAST_CONNECTION_TIMED_OUT': 8005,\n\n  /**\n   * The requested receiver app ID does not exist or is unavailable.\n   * Check the requested app ID for typos.\n   */\n  'CAST_RECEIVER_APP_UNAVAILABLE': 8006,\n\n\n  /**\n   * Offline storage is not supported on this browser; it is required for\n   * offline support.\n   */\n  'STORAGE_NOT_SUPPORTED': 9000,\n\n  /**\n   * An unknown error occurred in the IndexedDB.\n   * On Firefox, one common source for UnknownError calls is reverting\n   * Firefox to an old version. This makes the indexedDB storage inaccessible\n   * for older versions. The only way to fix this is to delete the storage\n   * data in your profile. See https://goo.gl/eKVPPe.\n   */\n  'INDEXED_DB_ERROR': 9001,\n\n  /**\n   * The operation was aborted.  For example, by a call to destroy().\n   */\n  'OPERATION_ABORTED': 9002,\n\n  /**\n   * The specified item was not found in the IndexedDB.\n   */\n  'REQUESTED_ITEM_NOT_FOUND': 9003,\n\n  /**\n   * A network request was made with a malformed offline URI.\n   */\n  'MALFORMED_OFFLINE_URI': 9004,\n\n  /**\n   * The specified content is live or in-progress.\n   */\n  'CANNOT_STORE_LIVE_OFFLINE': 9005,\n\n  /**\n   * There is already a store operation in-progress, wait until it completes\n   * before starting another.\n   */\n  'STORE_ALREADY_IN_PROGRESS': 9006,\n\n  /**\n   * The specified manifest is encrypted but does not specify any init data.\n   * Without init data specified in the manifest, the content will not be\n   * playable offline.\n   */\n  'NO_INIT_DATA_FOR_OFFLINE': 9007,\n\n  /**\n   * shaka.offline.Storage was constructed with a Player proxy instead of a\n   * local player instance.  To fix this, use Player directly with Storage\n   * instead of the results of CastProxy.prototype.getPlayer().\n   */\n  'LOCAL_PLAYER_INSTANCE_REQUIRED': 9008,\n\n  /**\n   * When the manifest contains no period playable streams, it means the\n   * manifest is unsupported by the browser.\n   */\n  'CONTENT_UNSUPPORTED_BY_BROWSER': 9009\n\n};\n\nexport {Code}\nexport type {CodeType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/code.js","//@flow\n\ntype CategoryType = { [category: string]: number };\n\nconst Category: CategoryType = {\n  /** Errors from the network stack. */\n  'NETWORK': 1,\n\n  /** Errors parsing text streams. */\n  'TEXT': 2,\n\n  /** Errors parsing or processing audio or video streams. */\n  'MEDIA': 3,\n\n  /** Errors parsing the Manifest. */\n  'MANIFEST': 4,\n\n  /** Errors related to streaming. */\n  'STREAMING': 5,\n\n  /** Errors related to DRM. */\n  'DRM': 6,\n\n  /** Miscellaneous errors from the player. */\n  'PLAYER': 7,\n\n  /** Errors related to Ads. */\n  'ADS': 8,\n\n  /** Errors in the database storage (offline). */\n  'STORAGE': 9\n};\n\nexport {Category}\nexport type {CategoryType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/category.js","//@flow\n/**\n * Locale class\n * @class\n *\n */\nexport default class Locale {\n\n  /**\n   * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n   * @returns {string} - the IOS-693-1 language string\n   * @static\n   */\n  static get language(): string {\n    let lang: string;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0]\n    } else if (navigator.userLanguage) {\n      // IE only\n      //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n      lang = (navigator.userLanguage: string);\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language\n    }\n\n    if (lang && lang.match(\"-\")) {\n      lang = lang.split(\"-\")[0];\n    }\n\n    return lang\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/locale.js","//@flow\nimport FakeEventTarget from '../../event/fake-event-target'\nimport FakeEvent from '../../event/fake-event'\nimport EventManager from '../../event/event-manager'\nimport {CustomEventType, Html5EventType} from '../../event/event-type'\nimport MediaSourceProvider from './media-source/media-source-provider'\nimport VideoTrack from '../../track/video-track'\nimport AudioTrack from '../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../track/text-track'\nimport {Cue} from '../../track/vtt-cue'\nimport * as Utils from '../../utils/util'\nimport Html5AutoPlayCapability from './capabilities/html5-autoplay'\nimport Html5IsSupportedCapability from './capabilities/html5-is-supported'\nimport Error from \"../../error/error\";\nimport getLogger from '../../utils/logger'\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nexport default class Html5 extends FakeEventTarget implements IEngine {\n  /**\n   * The video element.\n   * @type {HTMLVideoElement}\n   * @private\n   */\n  _el: HTMLVideoElement;\n  /**\n   * The event manager of the engine.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The selected media source adapter of the engine.\n   * @type {?IMediaSourceAdapter}\n   * @private\n   */\n  _mediaSourceAdapter: ?IMediaSourceAdapter;\n  /**\n   * The player config object.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * Flag to indicate first time text track cue change.\n   * @type {Object<number, boolean>}\n   * @private\n   */\n  _showTextTrackFirstTime: { [number]: boolean } = {};\n  /**\n   * Promise to indicate when a media source adapter can be loaded.\n   * @type {Promise<*>}\n   * @private\n   */\n  _canLoadMediaSourceAdapterPromise: Promise<*>;\n\n  /**\n   * The html5 class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Html5');\n\n  /**\n   * The html5 capabilities handlers.\n   * @private\n   * @static\n   */\n  static _capabilities: Array<typeof ICapability> = [Html5AutoPlayCapability, Html5IsSupportedCapability];\n\n  /**\n   * @type {string} - The engine id.\n   * @public\n   * @static\n   */\n  static id: string = \"html5\";\n\n  /**\n   * A video element for browsers which block auto play.\n   * @type {HTMLVideoElement}\n   * @private\n   * @static\n   */\n  static _el: HTMLVideoElement;\n\n  /**\n   * Factory method to create an engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IEngine} - New instance of the run time engine.\n   * @public\n   * @static\n   */\n  static createEngine(source: PKMediaSourceObject, config: Object): IEngine {\n    return new this(source, config);\n  }\n\n  /**\n   * Checks if the engine can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   * @param {boolean} preferNative - prefer native flag\n   * @returns {boolean} - Whether the engine can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean): boolean {\n    return MediaSourceProvider.canPlaySource(source, preferNative);\n  }\n\n  /**\n   * Runs the html5 capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Html5._capabilities.forEach(capability => capability.runCapability());\n  }\n\n  /**\n   * Gets the html5 capabilities.\n   * @return {Promise<Object>} - The html5 capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(): Promise<Object> {\n    let promises = [];\n    Html5._capabilities.forEach(capability => promises.push(capability.getCapability()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        const mergedResults = {};\n        arrayOfResults.forEach(res => Object.assign(mergedResults, res));\n        return {[Html5.id]: mergedResults};\n      });\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @private\n   * @public\n   */\n  static prepareVideoElement(): void {\n    Html5._logger.debug('Prepare the video element for playing');\n    Html5._el = Utils.Dom.createElement(\"video\");\n    Html5._el.load();\n  }\n\n  /**\n   * @constructor\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   */\n  constructor(source: PKMediaSourceObject, config: Object) {\n    super();\n    this._eventManager = new EventManager();\n    this._canLoadMediaSourceAdapterPromise = Promise.resolve();\n    this._createVideoElement();\n    this._init(source, config);\n  }\n\n  /**\n   * Restores the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n  restore(source: PKMediaSourceObject, config: Object): void {\n    this.reset();\n    this._init(source, config);\n  }\n\n  /**\n   * Resets the engine.\n   * @returns {void}\n   */\n  reset(): void {\n    this.detach();\n    this._eventManager.removeAll();\n    if (this._mediaSourceAdapter) {\n      this._canLoadMediaSourceAdapterPromise = this._mediaSourceAdapter.destroy();\n      this._mediaSourceAdapter = null;\n    }\n    if (this._el && this._el.src) {\n      Utils.Dom.setAttribute(this._el, 'src', '');\n      Utils.Dom.removeAttribute(this._el, 'src');\n    }\n  }\n\n  /**\n   * Destroys the engine.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.detach();\n    if (this._el) {\n      this.pause();\n      Utils.Dom.removeAttribute(this._el, 'src');\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._showTextTrackFirstTime = {};\n    this._eventManager.destroy();\n    MediaSourceProvider.destroy();\n    this._mediaSourceAdapter = null;\n  }\n\n  /**\n   * Get the engine's id\n   * @public\n   * @returns {string} the engine's id\n   */\n  get id(): string {\n    return Html5.id;\n  }\n\n  /**\n   * Listen to the video element events and triggers them from the engine.\n   * @public\n   * @returns {void}\n   */\n  attach(): void {\n    Object.keys(Html5EventType).forEach((html5Event) => {\n      this._eventManager.listen(this._el, Html5EventType[html5Event], () => {\n        if (Html5EventType[html5Event] === Html5EventType.ERROR) {\n          this._handleVideoError();\n        } else {\n          this.dispatchEvent(new FakeEvent(Html5EventType[html5Event]));\n        }\n      });\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.ERROR, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.TIME_UPDATE, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.PLAYING, (event: FakeEvent) => this.dispatchEvent(event));\n    }\n  }\n\n  /**\n   * Handles errors from the video element\n   * @returns {void}\n   * @private\n   */\n  _handleVideoError(): void {\n    if (!this._el.error) return;\n    const code = this._el.error.code;\n    if (code == 1 /* MEDIA_ERR_ABORTED */) {\n      // Ignore this error code.js, which should only occur when navigating away or\n      // deliberately stopping playback of HTTP content.\n      return;\n    }\n\n    // Extra error information from MS Edge and IE11:\n    let extended = this._getMsExtendedError();\n\n    // Extra error information from Chrome:\n    // $FlowFixMe\n    const message = this._el.error.message;\n\n    const error = new Error(\n      Error.Severity.CRITICAL,\n      Error.Category.MEDIA,\n      Error.Code.VIDEO_ERROR, {\n        code: code,\n        extended: extended,\n        message: message\n      });\n    this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n  }\n\n  /**\n   * more info about the error\n   * @returns {string} info about the video element error\n   * @private\n   */\n  _getMsExtendedError(): string {\n    // $FlowFixMe\n    let extended = this._el.error.msExtendedCode;\n    if (extended) {\n      // Convert to unsigned:\n      if (extended < 0) {\n        extended += Math.pow(2, 32);\n      }\n      // Format as hex:\n      extended = extended.toString(16);\n    }\n    return extended;\n  }\n\n  /**\n   * Remove the listeners of the video element events.\n   * @public\n   * @returns {void}\n   */\n  detach(): void {\n    Object.keys(Html5EventType).forEach((html5Event) => {\n      this._eventManager.unlisten(this._el, Html5EventType[html5Event]);\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED);\n    }\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  /**\n   * Select a new video track.\n   * @param {VideoTrack} videoTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a new audio track.\n   * @param {AudioTrack} audioTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n    }\n  }\n\n  /**\n   * Select a new text track.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    this._removeCueChangeListener();\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectTextTrack(textTrack);\n    }\n    this._addCueChangeListener(textTrack);\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.hideTextTrack();\n    }\n    this._removeCueChangeListener();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to the media source extension logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.getStartTimeOfDvrWindow() : 0;\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n  }\n\n  /**\n   * Start/resume playback.\n   * @public\n   * @returns {void}\n   */\n  play(): void {\n    let playPromise = this._el.play();\n    if (playPromise) {\n      playPromise.catch(() => this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED)));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @public\n   * @returns {void}\n   */\n  pause(): void {\n    return this._el.pause();\n  }\n\n  /**\n   * Load media.\n   * @param {number} startTime - Optional time to start the video from.\n   * @public\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._el.load();\n    return this._canLoadMediaSourceAdapterPromise.then(() => {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.load(startTime).catch((error) => {\n          return Promise.reject(error);\n        });\n      }\n      return Promise.resolve({});\n    }).catch((error) => {\n      return Promise.reject(error);\n    });\n  }\n\n  /**\n   * Set a source.\n   * @param {string} source - Source to set.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    this._el.src = source;\n  }\n\n  /**\n   * Get the source url.\n   * @returns {string} - The source url.\n   * @public\n   */\n  get src(): string {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.src;\n    }\n    return \"\";\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.currentTime = to;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @public\n   * @returns {void}\n   */\n  set volume(vol: number): void {\n    this._el.volume = vol;\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {Number} - The volume value of the video element.\n   * @public\n   */\n  get volume(): number {\n    return this._el.volume;\n  }\n\n  ready() {\n  }\n\n  /**\n   * Get paused state.\n   * @returns {boolean} - The paused value of the video element.\n   * @public\n   */\n  get paused(): boolean {\n    return this._el.paused;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {boolean} - The seeking value of the video element.\n   * @public\n   */\n  get seeking(): boolean {\n    return this._el.seeking;\n  }\n\n  /**\n   * Get the first seekable range (part) of the video in seconds.\n   * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n   * @public\n   */\n  get seekable(): TimeRanges {\n    return this._el.seekable;\n  }\n\n  /**\n   * Get the first played range (part) of the video in seconds.\n   * @returns {TimeRanges} - First played range (part) of the video in seconds.\n   * @public\n   */\n  get played(): TimeRanges {\n    return this._el.played;\n  }\n\n  /**\n   * Get the first buffered range (part) of the video in seconds.\n   * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n   * @public\n   */\n  get buffered(): TimeRanges {\n    return this._el.buffered;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The new mute value.\n   * @public\n   * @returns {void}\n   */\n  set muted(mute: boolean): void {\n    this._el.muted = mute;\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {boolean} - The muted value of the video element.\n   * @public\n   */\n  get muted(): boolean {\n    return this._el.muted;\n  }\n\n  /**\n   * Get the default mute value.\n   * @returns {boolean} - The defaultMuted of the video element.\n   * @public\n   */\n  get defaultMuted(): boolean {\n    return this._el.defaultMuted;\n  }\n\n  /**\n   * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @param {string} poster - The image url to be shown.\n   * @returns {void}\n   * @public\n   */\n  set poster(poster: string): void {\n    this._el.poster = poster;\n  }\n\n  /**\n   * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @returns {poster} - The image url.\n   * @public\n   */\n  get poster(): string {\n    return this._el.poster;\n  }\n\n  /**\n   * Specifies if and how the author thinks that the video should be loaded when the page loads.\n   * @param {string} preload - The preload value.\n   * @public\n   * @returns {void}\n   */\n  set preload(preload: string): void {\n    this._el.preload = preload;\n  }\n\n  /**\n   * Gets the preload value of the video element.\n   * @returns {string} - The preload value.\n   * @public\n   */\n  get preload(): string {\n    return this._el.preload;\n  }\n\n  /**\n   * Set if the video will automatically start playing as soon as it can do so without stopping.\n   * @param {boolean} autoplay - The autoplay value.\n   * @public\n   * @returns {void}\n   */\n  set autoplay(autoplay: boolean): void {\n    this._el.autoplay = autoplay;\n  }\n\n  /**\n   * Gets the autoplay value of the video element.\n   * @returns {boolean} - The autoplay value.\n   * @public\n   */\n  get autoplay(): boolean {\n    return this._el.autoplay;\n  }\n\n  /**\n   * Set to specifies that the video will start over again, every time it is finished.\n   * @param {boolean} loop - the loop value.\n   * @public\n   * @returns {void}\n   */\n  set loop(loop: boolean) {\n    this._el.loop = loop;\n  }\n\n  /**\n   * Gets the loop value of the video element.\n   * @returns {boolean} - The loop value.\n   * @public\n   */\n  get loop(): boolean {\n    return this._el.loop;\n  }\n\n  /**\n   * Set to specifies that video controls should be displayed.\n   * @param {boolean} controls - the controls value.\n   * @public\n   * @returns {void}\n   */\n  set controls(controls: boolean): void {\n    this._el.controls = controls;\n  }\n\n  /**\n   * Gets the controls value of the video element.\n   * @returns {boolean} - The controls value.\n   * @public\n   */\n  get controls(): boolean {\n    return this._el.controls;\n  }\n\n  /**\n   * Sets the current playback speed of the audio/video.\n   * @param {Number} playbackRate - The playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set playbackRate(playbackRate: number): void {\n    this._el.playbackRate = playbackRate;\n  }\n\n  /**\n   * Gets the current playback speed of the audio/video.\n   * @returns {Number} - The current playback speed value.\n   * @public\n   */\n  get playbackRate(): number {\n    return this._el.playbackRate;\n  }\n\n  /**\n   * Sets the default playback speed of the audio/video.\n   * @param {Number} defaultPlaybackRate - The default playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set defaultPlaybackRate(defaultPlaybackRate: number) {\n    this._el.defaultPlaybackRate = defaultPlaybackRate;\n  }\n\n  /**\n   * Gets the default playback speed of the audio/video.\n   * @returns {Number} - The default playback speed value.\n   * @public\n   */\n  get defaultPlaybackRate(): number {\n    return this._el.defaultPlaybackRate;\n  }\n\n  /**\n   * The ended property returns whether the playback of the audio/video has ended.\n   * @returns {boolean} - The ended value.\n   * @public\n   */\n  get ended(): boolean {\n    return this._el.ended;\n  }\n\n  /**\n   * The error property returns a MediaError object.\n   * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n   * @public\n   */\n  get error(): ?MediaError {\n    return this._el.error;\n  }\n\n  /**\n   * @returns {Number} - The current network state (activity) of the audio/video.\n   * @public\n   */\n  get networkState(): number {\n    return this._el.networkState;\n  }\n\n  /**\n   * Indicates if the audio/video is ready to play or not.\n   * @returns {Number} - The current ready state of the audio/video.\n   * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n   * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n   * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n   * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n   * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n   */\n  get readyState(): number {\n    return this._el.readyState;\n  }\n\n  /**\n   * @returns {Number} - The height of the video player, in pixels.\n   * @public\n   */\n  get videoHeight(): number {\n    return this._el.videoHeight;\n  }\n\n  /**\n   * @returns {Number} - The width of the video player, in pixels.\n   * @public\n   */\n  get videoWidth(): number {\n    return this._el.videoWidth;\n  }\n\n  /**\n   * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (playsinline) {\n      this._el.setAttribute('playsinline', '');\n    } else {\n      this._el.removeAttribute('playsinline');\n    }\n  }\n\n  /**\n   * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n   */\n  get playsinline(): boolean {\n    return this._el.getAttribute('playsinline') === '';\n  }\n\n  /**\n   * Initializes the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @private\n   * @returns {void}\n   */\n  _init(source: PKMediaSourceObject, config: Object): void {\n    this._config = config;\n    this._loadMediaSourceAdapter(source);\n    this.attach();\n  }\n\n  /**\n   * Creates a video element dom object.\n   * @private\n   * @returns {void}\n   */\n  _createVideoElement(): void {\n    this._el = Html5._el || Utils.Dom.createElement(\"video\");\n    this._el.id = Utils.Generator.uniqueId(5);\n    this._el.controls = false;\n  }\n\n  /**\n   * Loads the appropriate media source extension adapter.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadMediaSourceAdapter(source: PKMediaSourceObject): void {\n    this._mediaSourceAdapter = MediaSourceProvider.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(textTrack: PKTextTrack): void {\n    let textTrackEl = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      /*\n       There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n       didn't have it's mode set to showing for at least until a single cue has been change.\n       After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n       is set to hidden\n       This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n       track mode is set only to hidden and was never set to showing\n       */\n      if (this._config.playback.useNativeTextTrack) {\n        textTrackEl.mode = \"showing\";\n      } else {\n        textTrackEl.oncuechange = (e) => this._onCueChange(e);\n        textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n        this._showTextTrackFirstTime[textTrack.index] = true;\n      }\n    }\n  }\n\n  /**\n   * Remove cuechange listener to active textTrack\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListener(): void {\n    let textTrackEl: TextTrack = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      textTrackEl.oncuechange = null;\n    }\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let textTrack: TextTrack = e.currentTarget;\n    let activeCues: Array<Cue> = [];\n    textTrack.mode = 'hidden';\n    for (let cue of textTrack.activeCues) {\n      //Normalize cues to be of type of VTT model\n      if (window.VTTCue && cue instanceof window.VTTCue) {\n        activeCues.push(cue);\n      } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n        try {\n          activeCues.push(new Cue(cue.startTime, cue.endTime, cue.text))\n        } catch (error) {\n          new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNABLE_TO_CREATE_TEXT_CUE, error);\n        }\n      }\n    }\n    this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: activeCues}));\n  }\n\n  /**\n   * Get currently selected text track\n   * @returns {?TextTrack} - returns the active text track element if available\n   * @private\n   */\n  _getSelectedTextTrackElement(): ?TextTrack {\n    const textTracks = this._el.textTracks;\n    for (let track in textTracks) {\n      if (textTracks.hasOwnProperty(track)) {\n        const textTrack = textTracks[parseInt(track)];\n        if (textTrack && textTrack.mode !== \"disabled\") {\n          return textTrack;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/html5.js","//@flow\nimport EventManager from '../../../../event/event-manager'\nimport {CustomEventType, Html5EventType} from '../../../../event/event-type'\nimport Track from '../../../../track/track'\nimport VideoTrack from '../../../../track/video-track'\nimport AudioTrack from '../../../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../../../track/text-track'\nimport BaseMediaSourceAdapter from '../base-media-source-adapter'\nimport {getSuitableSourceForResolution} from '../../../../utils/resolution'\nimport * as Utils from '../../../../utils/util'\nimport FairPlay from '../../../../drm/fairplay'\nimport Env from '../../../../utils/env'\nimport FakeEvent from '../../../../event/fake-event'\nimport Error from '../../../../error/error'\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nexport default class NativeAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  static id: string = 'NativeAdapter';\n\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(NativeAdapter.id);\n  /**\n   * static video element for canPlayType testing\n   * @member {} TEST_VIDEO\n   * @type {HTMLVideoElement}\n   * @static\n   */\n  static TEST_VIDEO: HTMLVideoElement = Utils.Dom.createElement(\"video\");\n  /**\n   * The DRM protocols implementations for native adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  static _drmProtocols: Array<Function> = [FairPlay];\n  /**\n   * The DRM protocol for the current playback.\n   * @type {?Function}\n   * @private\n   * @static\n   */\n  static _drmProtocol: ?Function = null;\n  /**\n   * The event manager of the class.\n   * @member {EventManager} - _eventManager\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The load promise\n   * @member {Promise<Object>} - _loadPromise\n   * @type {Promise<Object>}\n   * @private\n   */\n  _loadPromise: ?Promise<Object>;\n  /**\n   * The original progressive sources\n   * @member {Array<PKMediaSourceObject>} - _progressiveSources\n   * @private\n   */\n  _progressiveSources: Array<PKMediaSourceObject>;\n  /**\n   * The player tracks.\n   * @member {Array<Track>} - _playerTracks\n   * @private\n   */\n  _playerTracks: Array<Track>;\n  /**\n   * The id of _liveDurationChangeInterval\n   * @member {?number} - _liveDurationChangeInterval\n   * @private\n   */\n  _liveDurationChangeInterval: ?number;\n  /**\n   * The live edge value\n   * @member {number} - _liveEdge\n   * @private\n   */\n  _liveEdge: number;\n\n  /**\n   * Checks if NativeAdapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the native adapter can play a specific mime type\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canPlayType = false;\n    if (typeof mimeType === 'string') {\n      canPlayType = !!(NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase()));\n    }\n    NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * Checks if NativeAdapter can play a given drm data.\n   * @function canPlayDrm\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @returns {boolean} - Whether the native adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    let canPlayDrm = false;\n    for (let drmProtocol of NativeAdapter._drmProtocols) {\n      if (drmProtocol.canPlayDrm(drmData)) {\n        NativeAdapter._drmProtocol = drmProtocol;\n        canPlayDrm = true;\n        break;\n      }\n    }\n    NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n    return canPlayDrm;\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {PKMediaSourceObject} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): IMediaSourceAdapter {\n    return new this(videoElement, source, config);\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n   * @param {PKMediaSourceObject} source - The source object\n   * @param {Object} config - The player configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object) {\n    NativeAdapter._logger.debug('Creating adapter');\n    super(videoElement, source);\n    this._eventManager = new EventManager();\n    this._maybeSetDrmPlayback();\n    this._progressiveSources = config.sources.progressive;\n    this._liveEdge = 0;\n  }\n\n  /**\n   * dispatches an error (is given to a class the cannot dispatch, like static fair play class)\n   * @private\n   * @param {any} error - the error to dispatch\n   * @returns {void}\n   */\n  _dispatchErrorCallback(error: any): void {\n    this._trigger(Html5EventType.ERROR, error);\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n  _maybeSetDrmPlayback(): void {\n    if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n      NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData, (error) => this._dispatchErrorCallback(error));\n    }\n  }\n\n  /**\n   * Set the suitable progressive source according the current resolution\n   * @function _setProgressiveSource\n   * @returns {void}\n   * @private\n   */\n  _setProgressiveSource(): void {\n    let suitableTrack = getSuitableSourceForResolution(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n    if (suitableTrack) {\n      this._sourceObj = suitableTrack;\n    }\n  }\n\n  /**\n   * Checks if the playback source is progressive\n   * @function _isProgressivePlayback\n   * @returns {boolean} - is progressive source\n   * @private\n   */\n  _isProgressivePlayback(): boolean {\n    return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve, reject) => {\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, this._onLoadedData.bind(this, resolve));\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.ERROR, this._onError.bind(this, reject));\n        if (this._isProgressivePlayback()) {\n          this._setProgressiveSource();\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._videoElement.src = this._sourceObj.url;\n          this._trigger(CustomEventType.ABR_MODE_CHANGED, {mode: this._isProgressivePlayback() ? 'manual' : 'auto'});\n        }\n        if (startTime) {\n          this._videoElement.currentTime = startTime;\n        }\n        this._videoElement.load();\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Loaded data event handler.\n   * @param {Function} resolve - The resolve promise function.\n   * @private\n   * @returns {void}\n   */\n  _onLoadedData(resolve: Function): void {\n    const parseTracksAndResolve = () => {\n      this._playerTracks = this._getParsedTracks();\n      this._addNativeAudioTrackChangeListener();\n      this._addNativeTextTrackChangeListener();\n      this._addNativeTextTrackAddedListener();\n      NativeAdapter._logger.debug('The source has been loaded successfully');\n      resolve({tracks: this._playerTracks});\n      if (this.isLive()) {\n        this._handleLiveDurationChange();\n      }\n    };\n    if (this._videoElement.textTracks.length > 0) {\n      parseTracksAndResolve();\n    } else {\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.CAN_PLAY, parseTracksAndResolve.bind(this));\n    }\n  }\n\n  /**\n   * error event handler.\n   * @param {Function} reject - The reject promise function.\n   * @param {FakeEvent} error - The error fake event.\n   * @private\n   * @returns {void}\n   */\n  _onError(reject: Function, error: FakeEvent): void {\n    reject(new Error(Error.Severity.CRITICAL, Error.Category.MEDIA, Error.Code.NATIVE_ADAPTER_LOAD_FAILED, error.payload));\n  }\n\n  /**\n   * Destroys the native adapter.\n   * @function destroy\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    NativeAdapter._logger.debug('destroy');\n    return super.destroy().then(() => {\n      this._eventManager.destroy();\n      this._progressiveSources = [];\n      this._loadPromise = null;\n      this._liveEdge = 0;\n      if (this._liveDurationChangeInterval) {\n        clearInterval(this._liveDurationChangeInterval);\n        this._liveDurationChangeInterval = null;\n      }\n    });\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  _getParsedTracks(): Array<Track> {\n    const videoTracks = this._getParsedVideoTracks();\n    const audioTracks = this._getParsedAudioTracks();\n    const textTracks = this._getParsedTextTracks();\n    return videoTracks.concat(audioTracks).concat(textTracks);\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<Track>} - The parsed video tracks\n   * @private\n   */\n  _getParsedVideoTracks(): Array<Track> {\n    if (this._isProgressivePlayback()) {\n      return this._getParsedProgressiveVideoTracks();\n    } else {\n      return this._getParsedAdaptiveVideoTracks();\n    }\n  }\n\n  /**\n   * Get the parsed progressive video tracks\n   * @function _getParsedProgressiveVideoTracks\n   * @returns {Array<Track>} - The parsed progressive video tracks\n   * @private\n   */\n  _getParsedProgressiveVideoTracks(): Array<Track> {\n    const videoTracks = this._progressiveSources;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed adaptive video tracks\n   * @function _getParsedAdaptiveVideoTracks\n   * @returns {Array<Track>} - The parsed adaptive video tracks\n   * @private\n   */\n  _getParsedAdaptiveVideoTracks(): Array<Track> {\n    //TODO check adaptation in safari hls\n    const videoTracks = this._videoElement.videoTracks;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          //TODO calculate width/height/bandwidth\n          id: videoTracks[i].id,\n          active: videoTracks[i].selected,\n          label: videoTracks[i].label,\n          language: videoTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<AudioTrack>} - The parsed audio tracks\n   * @private\n   */\n  _getParsedAudioTracks(): Array<AudioTrack> {\n    const audioTracks = this._videoElement.audioTracks;\n    const parsedTracks = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        const settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].enabled,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<PKTextTrack>} - The parsed text tracks\n   * @private\n   */\n  _getParsedTextTracks(): Array<PKTextTrack> {\n    const textTracks = this._videoElement.textTracks;\n    const parsedTracks = [];\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        const settings = {\n          kind: textTracks[i].kind,\n          active: textTracks[i].mode === 'showing',\n          label: textTracks[i].label,\n          language: textTracks[i].language,\n          index: i\n        };\n        if (settings.language || settings.label) {\n          parsedTracks.push(new PKTextTrack(settings));\n        }\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._isProgressivePlayback()) {\n      this._selectProgressiveVideoTrack(videoTrack);\n    } else {\n      this.selectAdaptiveVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a progressive video track\n   * @function _selectProgressiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  _selectProgressiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._progressiveSources;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      let currentTime = this._videoElement.currentTime;\n      let paused = this._videoElement.paused;\n      this._sourceObj = videoTracks[videoTrack.index];\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, () => {\n        if (Env.browser.name === 'Android Browser') {\n          // In android browser we have to seek only after some playback.\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.DURATION_CHANGE, () => {\n            this._videoElement.currentTime = currentTime;\n          });\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n            if (paused) {\n              this._videoElement.pause();\n            }\n          });\n          this._videoElement.play();\n        } else {\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n          });\n          this._videoElement.currentTime = currentTime;\n          if (!paused) {\n            this._videoElement.play();\n          }\n        }\n      });\n      this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n    }\n  }\n\n  /**\n   * Select a native video track\n   * @function selectAdaptiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectAdaptiveVideoTrack(videoTrack: VideoTrack): void {\n    const videoTracks = this._videoElement.videoTracks;\n    if ((videoTrack instanceof VideoTrack)\n      && videoTracks\n      && videoTracks[videoTrack.index]) {\n      this._disableVideoTracks();\n      videoTracks[videoTrack.index].selected = true;\n      this._onTrackChanged(videoTrack);\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the  audio track to select\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    const audioTracks = this._videoElement.audioTracks;\n    if ((audioTrack instanceof AudioTrack)\n      && audioTracks\n      && audioTracks[audioTrack.index]) {\n      this._removeNativeAudioTrackChangeListener();\n      this._disableAudioTracks();\n      audioTracks[audioTrack.index].enabled = true;\n      this._onTrackChanged(audioTrack);\n      this._addNativeAudioTrackChangeListener();\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.unlisten(this._videoElement.audioTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.listen(this._videoElement.audioTracks, 'change', () => this._onNativeAudioTrackChange());\n    }\n  }\n\n  /**\n   * Handler of the video element AudioTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeAudioTrackChange(): void {\n    const pkAudioTracks = this._playerTracks.filter(track => track instanceof AudioTrack);\n    const getActivePKAudioTrackIndex = () => {\n      const activeAudioTrack = pkAudioTracks.find(track => track.active === true);\n      return (activeAudioTrack ? activeAudioTrack.index : -1);\n    };\n    const getActiveVidAudioTrackIndex = () => {\n      for (let i = 0; i < this._videoElement.audioTracks.length; i++) {\n        const audioTrack = this._videoElement.audioTracks[i];\n        if (audioTrack.enabled) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    NativeAdapter._logger.debug('Video element audio track change');\n    const vidIndex = getActiveVidAudioTrackIndex();\n    const pkIndex = getActivePKAudioTrackIndex();\n    if (vidIndex !== pkIndex) {\n      const pkAudioTrack = pkAudioTracks.find(track => track.index === vidIndex);\n      if (pkAudioTrack) {\n        NativeAdapter._logger.debug('Native selection of track, update the player audio track (' + pkIndex + ' -> ' + vidIndex + ')');\n        this._onTrackChanged(pkAudioTrack);\n      }\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {PKTextTrack} textTrack - The playkit text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    const textTracks = this._videoElement.textTracks;\n    if ((textTrack instanceof PKTextTrack)\n      && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions')\n      && textTracks && textTracks[textTrack.index]) {\n      this._removeNativeTextTrackChangeListener();\n      this._disableTextTracks();\n      textTracks[textTrack.index].mode = 'hidden';\n      NativeAdapter._logger.debug('Text track changed', textTrack);\n      this._onTrackChanged(textTrack);\n      this._addNativeTextTrackChangeListener();\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.unlisten(this._videoElement.textTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'change', () => this._onNativeTextTrackChange());\n    }\n  }\n\n  /**\n   * Handler of the video element TextTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackChange(): void {\n    const pkTextTracks = this._playerTracks.filter(track => track instanceof PKTextTrack);\n    const pkOffTrack = pkTextTracks.find(track => track.language === 'off');\n    const getActivePKTextTrackIndex = () => {\n      const activeTextTrack = pkTextTracks.find(track => track.active === true);\n      return (activeTextTrack ? activeTextTrack.index : -1);\n    };\n    const getActiveVidTextTrackIndex = () => {\n      for (let i = 0; i < this._videoElement.textTracks.length; i++) {\n        const textTrack = this._videoElement.textTracks[i];\n        if (textTrack.mode === 'showing') {\n          return i;\n        }\n      }\n      return -1;\n    };\n    NativeAdapter._logger.debug('Video element text track change');\n    const vidIndex = getActiveVidTextTrackIndex();\n    const pkIndex = getActivePKTextTrackIndex();\n    if (vidIndex !== pkIndex) {\n      // In case no text track with 'showing' mode\n      // we need to set the off track\n      if (vidIndex == -1) {\n        if (pkOffTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> off)');\n          this._onTrackChanged(pkOffTrack);\n        }\n      } else {\n        // In case the text track on the video element is\n        // different then the text track of the player\n        // we need to set the correct one\n        const pkTextTrack = pkTextTracks.find(track => track.index === vidIndex);\n        if (pkTextTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> ' + vidIndex + ')');\n          this._onTrackChanged(pkTextTrack);\n        }\n      }\n    }\n  }\n\n  /**\n   * Add the onaddtrack listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackAddedListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'addtrack', () => this._onNativeTextTrackAdded());\n    }\n  }\n\n  /**\n   * Handler of the video element TextTrackList onaddtrack event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackAdded(): void {\n    this._playerTracks = this._getParsedTracks();\n    this._trigger(CustomEventType.TRACKS_CHANGED, {tracks: this._playerTracks});\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this._disableTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * For progressive playback will always returns false.\n   * For adaptive playback will always returns true.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return !this._isProgressivePlayback();\n  }\n\n  /**\n   * Disables all the existing video tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableVideoTracks(): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        videoTracks[i].selected = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing audio tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableAudioTracks(): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        audioTracks[i].enabled = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing text tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableTextTracks(): void {\n    let textTracks = this._videoElement.textTracks;\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        textTracks[i].mode = 'disabled';\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    if (this._videoElement.seekable.length) {\n      return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n    } else if (this._videoElement.buffered.length) {\n      return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch\n      (e) {\n      return;\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._videoElement.duration === Infinity;\n  }\n\n  /**\n   * Handling live duration change (as safari doesn't trigger durationchange event on live playback)\n   * @function _handleLiveDurationChange\n   * @returns {void}\n   * @private\n   */\n  _handleLiveDurationChange(): void {\n    this._liveDurationChangeInterval = setInterval(() => {\n      const liveEdge = this._getLiveEdge();\n      if (this._liveEdge !== liveEdge) {\n        this._liveEdge = liveEdge;\n        this._videoElement.dispatchEvent(new window.Event(Html5EventType.DURATION_CHANGE));\n      }\n    }, 2000);\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    if (this.isLive() && this._videoElement.seekable.length) {\n      return this._videoElement.seekable.start(0);\n    } else {\n      return 0;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/adapters/native-adapter.js","//@flow\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks: Array<Object>, width: number, height: number): ?Object {\n  let mostSuitableWidth = null;\n  if (height && tracks) {\n    let mostSuitableWidthTracks = [];\n    let minWidthDiff = Infinity;\n    for (let track of tracks) { // first filter the most width suitable\n      let widthDiff = Math.abs(track.width - width);\n      if (widthDiff < minWidthDiff) {\n        minWidthDiff = widthDiff;\n        mostSuitableWidthTracks = [track];\n      } else if (widthDiff === minWidthDiff) {\n        mostSuitableWidthTracks.push(track);\n      }\n    }\n    let videoRatio = width / height;\n    let mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    let minRatioDiff = Infinity;\n    for (let track of mostSuitableWidthTracks) {  // filter the most ratio suitable from the width filter results\n      if (track.height) {\n        let ratioDiff = Math.abs(track.width / track.height - videoRatio);\n        if (ratioDiff < minRatioDiff) {\n          minRatioDiff = ratioDiff;\n          mostSuitableWidthAndRatioTracks = [track];\n        } else if (ratioDiff === minRatioDiff) {\n          mostSuitableWidthAndRatioTracks.push(track);\n        }\n      }\n    }\n    let maxBandwidth = 0;\n    for (let track of mostSuitableWidthAndRatioTracks) { // select the top bitrate from the ratio filter results\n      if (track.bandwidth > maxBandwidth || !track.bandwidth) {\n        maxBandwidth = track.bandwidth || maxBandwidth;\n        mostSuitableWidth = track;\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexport {getSuitableSourceForResolution}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/resolution.js","// @flow\nimport BaseDrmProtocol from './base-drm-protocol'\nimport Error from '../error/error'\n\nexport default class FairPlay extends BaseDrmProtocol {\n  static _logger = BaseDrmProtocol.getLogger('FairPlay');\n  static _keySession: any;\n  static _KeySystem: string = \"com.apple.fps.1_0\";\n  static _WebkitEvents = {\n    NEED_KEY: 'webkitneedkey',\n    KEY_MESSAGE: 'webkitkeymessage',\n    KEY_ADDED: 'webkitkeyadded',\n    KEY_ERROR: 'webkitkeyerror'\n  };\n  static _errorCallback: Function;\n\n  /**\n   * FairPlay playback supports in case 2 conditions are met:\n   * 1. The environment supports FairPlay playback.\n   * 2. The drm data of the source object contains entry with FairPlay scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether FairPlay can be play on the current environment.\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    FairPlay._logger.debug(\"Can play DRM scheme of: \" + BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    return BaseDrmProtocol.DrmSupport.isProtocolSupported(BaseDrmProtocol.DrmScheme.FAIRPLAY, drmData);\n  }\n\n  /**\n   * Sets the FairPlay playback.\n   * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n   * @param {Array<Object>} drmData - The drm data.\n   * @param {any} errorCallback - player error object\n   * @returns {void}\n   */\n  static setDrmPlayback(videoElement: HTMLVideoElement, drmData: Array<Object> = [], errorCallback: Function): void {\n    FairPlay._logger.debug(\"Sets DRM playback\");\n    videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n    FairPlay._errorCallback = errorCallback;\n  }\n\n  static _onWebkitNeedKey(drmData: Array<Object>, event: any): void {\n    FairPlay._logger.debug(\"Webkit need key triggered\");\n    let fpDrmData = drmData.find((drmEntry) => drmEntry.scheme === BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    if (!fpDrmData || FairPlay._keySession) {\n      return;\n    }\n    let fpCertificate = fpDrmData.certificate;\n    let videoElement = event.target;\n    let initData = event.initData;\n    let contentId = FairPlay._extractContentId(initData);\n    let aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n    initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n    if (!videoElement.webkitKeys) {\n      let keySystem = FairPlay._selectKeySystem();\n      FairPlay._logger.debug(\"Sets media keys\");\n      videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n    }\n    if (!videoElement.webkitKeys) {\n      FairPlay._onError(Error.Code.COULD_NOT_CREATE_MEDIA_KEYS);\n    }\n    FairPlay._logger.debug(\"Creates session\");\n    FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n    if (!FairPlay._keySession) {\n      FairPlay._onError(Error.Code.COULD_NOT_CREATE_KEY_SESSION);\n    }\n    FairPlay._keySession.contentId = contentId;\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n  }\n\n  static destroy(): void {\n    FairPlay._keySession = null;\n  }\n\n  static _onWebkitKeyMessage(drmData: Object, event: any): void {\n    FairPlay._logger.debug(\"Webkit key message triggered\");\n    let message = event.message;\n    let request = new XMLHttpRequest();\n    request.responseType = \"text\";\n    request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n    request.addEventListener(\"error\", () => FairPlay._onError(Error.Code.LICENSE_REQUEST_FAILED), false);\n    let params = FairPlay._base64EncodeUint8Array(message);\n    request.open('POST', drmData.licenseUrl, true);\n    request.setRequestHeader(\"Content-type\", \"application/json\");\n    FairPlay._logger.debug(\"Ready for license request\");\n    request.send(params);\n  }\n\n  static _onWebkitKeyAdded(): void {\n    FairPlay._logger.debug(\"Decryption key was added to session\");\n  }\n\n  static _onWebkitKeyError(): void {\n    FairPlay._logger.error(\"A decryption key error was encountered\");\n  }\n\n  static _licenseRequestLoaded(event: any): void {\n    FairPlay._logger.debug(\"License request loaded\");\n    let request = event.target;\n    let keyText = request.responseText.trim();\n    let responseObj = {};\n    try {\n      responseObj = JSON.parse(keyText);\n    } catch (error) {\n      FairPlay._onError(Error.Code.BAD_FAIRPLAY_RESPONSE, error);\n    }\n    let isValidResponse = FairPlay._validateResponse(responseObj);\n    if (isValidResponse.valid) {\n      let key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n      FairPlay._keySession.update(key);\n    } else {\n      FairPlay._onError(Error.Code.BAD_FAIRPLAY_RESPONSE, isValidResponse);\n    }\n  }\n\n  static _onError(code: number, data?: Object): void {\n    FairPlay._errorCallback(new Error(Error.Severity.CRITICAL, Error.Category.DRM, code, data));\n  }\n\n  static _validateResponse(responseObj: Object): Object {\n    if ((responseObj.message && responseObj.message.indexOf(\"error\") > 0)\n      || responseObj.reference === null\n      || responseObj.status_code === 500) {\n      return { //todo: create & edit an error object\n        valid: false,\n        details: \"internal server error\" // would be ERROR.INTERNAL or something like that\n      };\n    } else if (responseObj.ckc === \"\") {\n      return {\n        valid: false,\n        details: \"ckc is missing\" // would be ERROR.MISSING_CKC or something like that\n      };\n    } else {\n      return {\n        valid: true\n      };\n    }\n  }\n\n  static _extractContentId(initData: Uint8Array): string {\n    let link = document.createElement('a');\n    link.href = FairPlay._arrayToString(initData);\n    return link.hostname;\n  }\n\n  static _selectKeySystem(): ?string {\n    let keySystem = null;\n    if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n      keySystem = FairPlay._KeySystem;\n    } else {\n      FairPlay._logger.warn(\"Key System not supported\");\n    }\n    return keySystem;\n  }\n\n  static _arrayToString(array: Uint8Array): string {\n    return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n  }\n\n  static _base64DecodeUint8Array(input: string): Uint8Array {\n    let raw = window.atob(input);\n    let rawLength = raw.length;\n    let array = new Uint8Array(new ArrayBuffer(rawLength));\n    for (let i = 0; i < rawLength; i++) {\n      array[i] = raw.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _concatInitDataIdAndCertificate(initData: Uint8Array, id: string | Uint16Array, cert: Uint8Array): Uint8Array {\n    if (typeof id === \"string\") {\n      id = FairPlay._stringToArray(id);\n    }\n    let offset = 0;\n    let buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n    let dataView = new DataView(buffer);\n\n    let initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initData.byteLength;\n\n    dataView.setUint32(offset, id.byteLength, true);\n    offset += 4;\n\n    let idArray = new Uint8Array(buffer, offset, id.byteLength);\n    idArray.set(id);\n    offset += idArray.byteLength;\n\n    dataView.setUint32(offset, cert.byteLength, true);\n    offset += 4;\n\n    let certArray = new Uint8Array(buffer, offset, cert.byteLength);\n    certArray.set(cert);\n\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n  }\n\n  static _stringToArray(string: string): Uint16Array {\n    let buffer = new ArrayBuffer(string.length * 2);\n    let array = new Uint16Array(buffer);\n    for (let i = 0, strLen = string.length; i < strLen; i++) {\n      array[i] = string.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _base64EncodeUint8Array(input: Uint8Array): string {\n    let keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let output = \"\";\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    while (i < input.length) {\n      chr1 = input[i++];\n      chr2 = i < input.length ? input[i++] : Number.NaN;\n      chr3 = i < input.length ? input[i++] : Number.NaN;\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output += keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n        keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/fairplay.js","// @flow\nimport Env from '../utils/env'\nimport getLogger from '../utils/logger'\nimport {DrmScheme} from './drm-scheme'\n\nconst NOT_SUPPORTED: string = 'not_supported_drm_playback';\n\nexport default class DrmSupport {\n  static _logger = getLogger('DrmSupport');\n  static _Browsers: Object = {\n    Safari: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      if (!device && os === 'Mac OS') {\n        return DrmScheme.FAIRPLAY;\n      }\n      return NOT_SUPPORTED;\n    },\n    Chrome: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      if (!device || os === 'Android') {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Firefox: () => {\n      let device = Env.device.type;\n      if (!device) {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Edge: () => {\n      let device = Env.device.type;\n      if (!device) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    },\n    IE: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      let osVersion = Env.os.version;\n      if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    }\n  };\n\n  /**\n   * Checks if a certain DRM scheme is supported in the current environment.\n   * @param {string} scheme - The drm scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether scheme can be play on the current environment.\n   */\n  static isProtocolSupported(scheme: string, drmData: Array<Object>): boolean {\n    let browser = Env.browser.name;\n    if (typeof DrmSupport._Browsers[browser] === 'function') {\n      let drmScheme = DrmSupport._Browsers[browser]();\n      DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n      return (drmScheme === scheme && !!(drmData.find((drmEntry) => drmEntry.scheme === scheme)));\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-support.js","// @flow\nimport * as Utils from '../../../utils/util'\nimport * as EncodingSources from '../../../assets/encoding-sources.json'\nimport {Html5EventType} from '../../../event/event-type'\n\nconst WAIT_TIME: number = 500;\n\nconst testVideoElement: HTMLVideoElement = Utils.Dom.createElement('video');\ntestVideoElement.src = EncodingSources.Base64Mp4Source;\n// For iOS devices needs to turn the playsinline attribute on\ntestVideoElement.setAttribute('playsinline', '');\n\nexport default class Html5AutoPlayCapability implements ICapability {\n  static _playPromiseResult: Promise<*>;\n\n  /**\n   * Runs the test for autoplay capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    Html5AutoPlayCapability._playPromiseResult = new Promise((resolve) => {\n      if (Html5AutoPlayCapability._isDataSaverMode()) {\n        resolve({autoplay: false, mutedAutoPlay: false});\n      } else {\n        Html5AutoPlayCapability._getPlayPromise()\n          .then(() => resolve({autoplay: true, mutedAutoPlay: true}))\n          .catch(() => {\n            testVideoElement.muted = true;\n            // For iOS devices needs to use the setAttribute API\n            testVideoElement.setAttribute('muted', '');\n            Html5AutoPlayCapability._getPlayPromise()\n              .then(() => resolve({autoplay: false, mutedAutoPlay: true}))\n              .catch(() => resolve({autoplay: false, mutedAutoPlay: false}));\n          });\n      }\n    });\n  }\n\n  /**\n   * Gets the test result for autoplay capability.\n   * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Html5AutoPlayCapability._playPromiseResult;\n  }\n\n  /**\n   * Checks if the device is in data saver mode.\n   * @returns {boolean} - If the device is in data saver mode.\n   * @private\n   */\n  static _isDataSaverMode(): boolean {\n    if (\"connection\" in navigator) { // $FlowFixMe\n      return (navigator.connection.saveData === true);\n    }\n    return false;\n  }\n\n  /**\n   * Gets the play promise.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   */\n  static _getPlayPromise(): Promise<*> {\n    return testVideoElement.play() || Html5AutoPlayCapability._forcePromiseReturnValue();\n  }\n\n  /**\n   * For browsers which are not supported promise return value from play()\n   * request we are simulate the same behaviour.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   * @static\n   */\n  static _forcePromiseReturnValue(): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const supported = setTimeout(() => {\n        reject();\n      }, WAIT_TIME);\n      testVideoElement.addEventListener(Html5EventType.PLAYING, () => {\n        clearTimeout(supported);\n        resolve();\n      });\n      testVideoElement.addEventListener(Html5EventType.ERROR, () => {\n        clearTimeout(supported);\n        reject();\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-autoplay.js","module.exports = {\n\t\"Base64Mp4Source\": \"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/encoding-sources.json\n// module id = 46\n// module chunks = 0","// @flow\nimport * as Utils from '../../../utils/util'\n\nexport default class Html5IsSupportedCapability implements ICapability {\n  static _vid: HTMLVideoElement = Utils.Dom.createElement('video');\n  static _result: boolean;\n\n  /***\n   * Runs the test for isSupported capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    try {\n      Html5IsSupportedCapability._vid.volume = 0.5;\n      Html5IsSupportedCapability._result = !!Html5IsSupportedCapability._vid.canPlayType;\n    } catch (e) {\n      Html5IsSupportedCapability._result = false;\n    }\n  }\n\n  /**\n   * Gets the test result for isSupported capability.\n   * @returns {Promise<CapabilityResult>} - The result object for isSupported capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Promise.resolve({isSupported: Html5IsSupportedCapability._result});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-is-supported.js","//@flow\nimport Player from '../player'\nimport EventManager from '../event/event-manager'\nimport State from './state'\nimport {StateType} from './state-type'\nimport {Html5EventType, CustomEventType} from '../event/event-type'\nimport FakeEvent from '../event/fake-event'\nimport getLogger from '../utils/logger'\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nexport default class StateManager {\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  _logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n  _curState: State;\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n  _prevState: State | null;\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n  _history: Array<State>;\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n  _transitions: Transition = {\n    [StateType.IDLE]: {\n      [Html5EventType.LOAD_START]: () => {\n        this._updateState(StateType.LOADING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PLAY]: () => {\n        this._updateState(StateType.BUFFERING);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.LOADING]: {\n      [Html5EventType.LOADED_METADATA]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ERROR]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.PAUSED]: {\n      [Html5EventType.PLAY]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PLAYING]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ENDED]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.PLAYING]: {\n      [Html5EventType.PAUSE]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.WAITING]: () => {\n        this._updateState(StateType.BUFFERING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ENDED]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ERROR]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.BUFFERING]: {\n      [Html5EventType.PLAYING]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PAUSE]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.SEEKED]: () => {\n        if (this._prevState && this._prevState.type === StateType.PLAYING) {\n          this._updateState(StateType.PLAYING);\n          this._dispatchEvent();\n        }\n      }\n    }\n  };\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n  constructor(player: Player) {\n    this._player = player;\n    this._logger = getLogger(\"StateManager\");\n    this._eventManager = new EventManager();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new State(StateType.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n  _attachListeners(): void {\n    this._eventManager.listen(this._player, Html5EventType.ERROR, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.ENDED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAY, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOAD_START, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAYING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOADED_METADATA, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PAUSE, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.WAITING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.SEEKED, this._doTransition.bind(this));\n  }\n\n  /**\n   * Performs a state transition depends on the event which occurs in the player system.\n   * @param {FakeEvent} event - The event occurs in the player system.\n   * @private\n   * @returns {void}\n   */\n  _doTransition(event: FakeEvent): void {\n    this._logger.debug('Do transition request', event.type);\n    let transition = this._transitions[this._curState.type];\n    if (typeof transition[event.type] === 'function') {\n      transition[event.type]();\n    }\n  }\n\n  /**\n   * Updates the player's state.\n   * @param {string} type - The type of the new state.\n   * @private\n   * @returns {void}\n   */\n  _updateState(type: string): void {\n    if (this._curState.type !== type) {\n      this._curState.duration = Date.now() / 1000;\n      this._history.push(this._curState);\n      this._prevState = this._curState;\n      this._curState = new State(type);\n      this._logger.debug(`Switch player state: from ${this._prevState.type} to ${this._curState.type}`)\n    }\n  }\n\n  /**\n   * Fires the playerStateChanged event after state has been changed.\n   * @private\n   * @returns {void}\n   */\n  _dispatchEvent(): void {\n    let event = new FakeEvent(CustomEventType.PLAYER_STATE_CHANGED, ({\n      'oldState': this._prevState,\n      'newState': this._curState\n    }: StateChanged));\n    this._player.dispatchEvent(event);\n  }\n\n  /**\n   * Destroys the state manager.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._history = [];\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Resets the state manager.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._history = [];\n  }\n\n  /**\n   * Getter to the current state of the player.\n   * @public\n   * @returns {State} - The current state object\n   */\n  get currentState(): State {\n    return this._curState;\n  }\n\n  /**\n   * Getter to the previous state of the player.\n   * @public\n   * @returns {State|null} - The previous state object, or null if such doesn't exists\n   */\n  get previousState(): State | null {\n    return this._prevState;\n  }\n\n  /**\n   * Getter to the state history of the player.\n   * @public\n   * @returns {Array.<State>} - The full states history objects\n   */\n  get history(): Array<State> {\n    return this._history;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-manager.js","//@flow\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nexport default class State {\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n  type: string;\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _duration: number;\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _timestamp: number;\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n  constructor(type: string) {\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n  get duration(): number {\n    return this._duration;\n  }\n\n  /**\n   * Setter for the duration of the state.\n   * @param {number} endTime - The timestamp of the next state.\n   */\n  set duration(endTime: number): void {\n    this._duration = endTime - this._timestamp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state.js","// @flow\nimport {TrackType} from './track-type'\nimport {LabelOptions} from './label-options'\n\nconst LabelToTrackMap = {\n  [LabelOptions.AUDIO]: TrackType.AUDIO,\n  [LabelOptions.CAPTIONS]: TrackType.TEXT,\n  [LabelOptions.QUALITIES]: TrackType.VIDEO\n};\n\nexport {LabelToTrackMap};\n\n\n\n// WEBPACK FOOTER //\n// ./track/label-to-track-map.js","// @flow\n\nconst LabelOptions = {\n  AUDIO: 'audio',\n  CAPTIONS: 'captions',\n  QUALITIES: 'qualities'\n};\n\nexport {LabelOptions};\n\n\n\n// WEBPACK FOOTER //\n// ./track/label-options.js","// @flow\nimport Middleware from './middleware'\nimport BaseMiddleware from './base-middleware'\n\n/**\n * The playback middleware.\n */\nexport default class PlaybackMiddleware {\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n  static Actions: { [action: string]: string } = {\n    PLAY: 'play',\n    PAUSE: 'pause'\n  };\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  _middleware: Middleware;\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._middleware = new Middleware(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    this._middleware.use(middlewareInstance);\n  }\n\n  /**\n   * Runs a play chain.\n   * @param {Function} callback - The last play handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  play(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n  }\n\n  /**\n   * Runs a pause chain.\n   * @param {Function} callback - The last pause handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  pause(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/playback-middleware.js","// @flow\nimport MultiMap from '../utils/multi-map'\nimport BaseMiddleware from './base-middleware'\nimport getLogger from '../utils/logger'\n\n/**\n * Generic middleware implementation.\n */\nexport default class Middleware {\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n  _middlewares: MultiMap<*>;\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  _actions: { [action: string]: string };\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n  _logger: any;\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n  constructor(actions: { [action: string]: string }) {\n    this._actions = actions;\n    this._middlewares = new MultiMap();\n    this._logger = getLogger(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    for (let action in this._actions) {\n      let apiAction = this._actions[action];\n      // $FlowFixMe\n      if (typeof middlewareInstance[apiAction] === 'function') {\n        this._logger.debug(`Register <${middlewareInstance.id}> for action ${apiAction}`);\n        // $FlowFixMe\n        this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n      }\n    }\n  }\n\n  /**\n   * Runs a middleware chain for a specific action.\n   * @param {string} action - The action to run.\n   * @param {Function} callback - The callback function.\n   * @public\n   * @returns {void}\n   */\n  run(action: string, callback: Function): void {\n    this._logger.debug(\"Start middleware chain for action \" + action);\n    let middlewares = this._middlewares.get(action);\n    this._executeMiddleware(middlewares, () => {\n      this._logger.debug(\"Finish middleware chain for action \" + action);\n      callback();\n    });\n  }\n\n  /**\n   * Executes all the middlewares one by one.\n   * @param {Array<Function>} middlewares - The middlewares for a specific action.\n   * @param {Function} callback - The callback function.\n   * @private\n   * @returns {void}\n   */\n  _executeMiddleware(middlewares: Array<Function>, callback: Function): void {\n    // eslint-disable-next-line no-unused-vars\n    const composition = middlewares.reduceRight((next, fn) => v => {\n      fn(next);\n    }, callback);\n    composition();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/middleware.js","module.exports = {\n\t\"logLevel\": \"ERROR\",\n\t\"sources\": {\n\t\t\"options\": {\n\t\t\t\"forceRedirectExternalStreams\": false\n\t\t},\n\t\t\"metadata\": {}\n\t},\n\t\"plugins\": {},\n\t\"playback\": {\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"startTime\": 0,\n\t\t\"playsinline\": true,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"allowMutedAutoPlay\": true,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./player-config.json\n// module id = 54\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/style.css\n// module id = 55\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-color: #000;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n.playkit-black-cover {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  background-color: black;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!./assets/style.css\n// module id = 56\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader/lib/css-base.js\n// module id = 57\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/addStyles.js\n// module id = 58\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/urls.js\n// module id = 59\n// module chunks = 0"],"sourceRoot":""}