{"version":3,"sources":["./core/webpack/universalModuleDefinition","./core/webpack/bootstrap b2ca59875df32863b182","./core/./utils/index.js","./core/./track/track.js","./core/./event/fake-event.js","./core/./track/audio-track.js","./core/./track/text-track.js","./core/./track/video-track.js","./core/./event/event-manager.js","./core/./event/events.js","./core/./player.js","./core/./utils/multi-map.js","./core/./middleware/base-middleware.js","./core/./plugin/base-plugin.js","./core/./event/fake-event-target.js","./core/./drm/base-drm-protocol.js","./core/./engines/html5/media-source/base-media-source-adapter.js","./core/./engines/html5/media-source/media-source-provider.js","./core/./plugin/plugin-manager.js","./core/./track/text-style.js","./core/./drm/drm-scheme.js","./core/./state/state-types.js","./core/./track/text-track-display.js","./core/./track/vtt-cue.js","./core/./drm/drm-support.js","./core/./drm/fairplay.js","./core/./engines/html5/html5.js","./core/./engines/html5/media-source/adapters/native-adapter.js","./core/./middleware/middleware.js","./core/./middleware/playback-middleware.js","./core/./playkit.js","./core/./state/state-manager.js","./core/./state/state.js","./core/./track/track-types.js","./core/./utils/dom.js","./core/./utils/env.js","./core/./utils/generator.js","./core/./utils/locale.js","./core/./utils/logger.js","./core/./utils/number.js","./core/./utils/object.js","./core/./utils/player-error.js","./core/./utils/poster-manager.js","./core/./utils/string.js","./core/./assets/style.css","./core/../~/css-loader/lib/css-base.js","./core/../~/js-logger/src/logger.js","webpack:///./assets/style.css?460c","./core/../~/style-loader/lib/addStyles.js","./core/../~/style-loader/lib/urls.js","./core/../~/ua-parser-js/src/ua-parser.js","./core/../~/webpack/buildin/amd-options.js","./core/./player-config.json"],"names":["Obj","Num","Str","Generator","Dom","Env","Locale","LoggerFactory","MultiMap","PosterManager","PlayerError","Track","_id","_active","value","_label","_language","_index","inputLang","trackLang","toLowerCase","startsWith","e","settings","id","active","label","language","index","FakeEvent","type","payload","bubbles","cancelable","defaultPrevented","timeStamp","window","performance","now","Date","isTrusted","currentTarget","target","stopped","AudioTrack","TextTrack","_kind","kind","VideoTrack","_bandwidth","_width","_height","tracks","width","height","mostSuitableWidth","mostSuitableWidthTracks","minWidthDiff","Infinity","track","widthDiff","Math","abs","push","videoRatio","mostSuitableWidthAndRatioTracks","minRatioDiff","ratioDiff","maxBandwidth","bandwidth","EventManager","_bindingMap","removeAll","Promise","resolve","listener","oneListener","event","unlisten","call","listen","binding","Binding_","list","get","i","length","remove","listeners","getAll","clear","addEventListener","removeEventListener","HTML5_EVENTS","ABORT","CAN_PLAY","CAN_PLAY_THROUGH","DURATION_CHANGE","EMPTIED","ENDED","ERROR","LOADED_DATA","LOADED_METADATA","LOAD_START","PAUSE","PLAY","PLAYING","PROGRESS","RATE_CHANGE","SEEKED","SEEKING","STALLED","SUSPEND","TIME_UPDATE","VOLUME_CHANGE","WAITING","CUSTOM_EVENTS","CHANGE_SOURCE_STARTED","CHANGE_SOURCE_ENDED","MUTE_CHANGE","VIDEO_TRACK_CHANGED","AUDIO_TRACK_CHANGED","TEXT_TRACK_CHANGED","TEXT_CUE_CHANGED","TRACKS_CHANGED","ABR_MODE_CHANGED","PLAYER_STATE_CHANGED","FIRST_PLAY","SOURCE_SELECTED","AD_LOADED","AD_STARTED","AD_RESUMED","AD_PAUSED","AD_CLICKED","AD_SKIPPED","AD_COMPLETED","AD_ERROR","ALL_ADS_COMPLETED","AD_BREAK_START","AD_BREAK_END","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_PROGRESS","PLAYER_EVENTS","merge","CONTAINER_CLASS_NAME","POSTER_CLASS_NAME","ENGINE_CLASS_NAME","SUBTITLES_STYLE_ID_NAME","SUBTITLES_CLASS_NAME","LIVE","AUTO","OFF","Player","config","_activeTextCues","_textDisplaySettings","_env","_tracks","_firstPlay","_config","_defaultConfig","_eventManager","_posterManager","_stateManager","_pluginManager","_playbackMiddleware","_textStyle","_createReadyPromise","_createPlayerContainer","_appendPosterEl","configure","mergeDeep","_configureOrLoadPlugins","plugins","isEmptyObject","sources","receivedSourcesWhenHasEngine","_engine","_reset","_logger","debug","dispatchEvent","_selectEngineByPriority","_appendEngineEl","setSrc","metadata","poster","show","_attachMedia","_handlePlaybackConfig","_readyPromise","startTime","playback","load","then","data","_addTextTrackOffOption","_setDefaultTracks","catch","error","play","_play","bind","pause","_pause","_el","getVideoElement","destroy","_engineType","_streamType","removeChild","parentNode","isLive","dvr","seekToLiveEdge","_getTracksByType","video","VIDEO","find","audio","AUDIO","text","TEXT","selectVideoTrack","selectAudioTrack","hideTextTrack","selectTextTrack","_updateTextDisplay","textTracks","map","textTrack","selectedTextTrack","enableAdaptiveBitrate","isAdaptiveBitrateEnabled","_updateCueDisplaySettings","hasBeenReset","adsPlugin","skipAd","adTagUrl","playAdNow","el","createElement","addClassName","_playerId","uniqueId","setAttribute","getElement","appendChild","engineEl","classname","classnameWithId","prependTo","Object","keys","forEach","name","plugin","updateConfig","getConfig","getMiddlewareImpl","use","reject","streamPriority","preferNative","priority","engineId","engine","format","Engine","_engines","formatSources","source","canPlaySource","_loadEngine","selectedSource","warn","restore","createEngine","html5Event","_markActiveTrack","selectedVideoTrack","selectedAudioTrack","_onCueChange","_onPlay","_onEnded","volume","muted","playsinline","preload","ima","_canAutoPlay","autoplay","device","os","src","isDvr","ready","hide","paused","reset","filter","getTracks","cues","activeCues","cue","_textDisplayEl","undefined","activeTracks","getActiveTracks","playbackConfig","offTextTrack","langComparer","_setDefaultTrack","_getLanguage","textLanguage","audioLanguage","configuredLanguage","defaultTrack","localeTrack","selectTrack","to","isNumber","boundedTo","duration","currentTime","vol","isFloat","boundedVol","seeking","mute","clientWidth","clientHeight","rate","playbackRate","sessionId","session","style","Error","element","getElementById","document","head","sheet","cssRules","deleteRule","useNativeTextTrack","insertRule","toCSS","message","clone","copyDeep","getLogger","_map","Map","key","has","Array","isArray","set","values","slice","concat","splice","BaseMiddleware","next","BasePlugin","player","TYPE","NOT_IMPLEMENTED_METHOD","getError","eventManager","logger","capitlize","constructor","defaultConfig","attr","update","FakeEventTarget","_listeners","dispatchTarget","handleEvent","exception","BaseDrmProtocol","drmData","DrmSupport","DrmScheme","BaseMediaSourceAdapter","videoElement","_videoElement","_sourceObj","_trigger","CustomEvents","videoTrack","audioTrack","mimeType","MediaSourceProvider","mediaSourceAdapter","_mediaSourceAdapters","includes","indexOf","_orderMediaSourceAdapters","mediaSourceAdapters","mimetype","canPlayType","canPlayDrm","_selectedAdapter","mse","unshift","createAdapter","registerMediaSourceAdapter","register","PluginManager","_plugins","_registry","NOT_REGISTERED_PLUGIN","pluginClass","isValid","createPlugin","_destroy","delete","handler","prototype","NOT_VALID_HANDLER","registerPlugin","TextStyle","fontSize","fontFamily","FontFamily","SANS_SERIF","fontColor","StandardColors","WHITE","fontOpacity","StandardOpacities","OPAQUE","backgroundColor","BLACK","backgroundOpacity","fontEdge","EdgeStyles","NONE","attributes","_toRGBA","shadows","color","shadow","join","clonedTextStyle","opacity","FontSizes","WIDEVINE","PLAYREADY","FAIRPLAY","PLAYER_STATE_TYPES","IDLE","LOADING","PAUSED","BUFFERING","fontScale","parseTimeStamp","input","computeSeconds","h","m","s","f","match","replace","ESCAPE","TAG_NAME","c","b","u","ruby","rt","v","lang","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","consume","result","substr","unescape1","unescape","shouldAdd","current","localName","annotation","tagName","trim","rootDiv","t","tagStack","pop","ts","node","createProcessingInstruction","className","createTextNode","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","childNodes","pushNodes","nextTextNode","textContent","innerText","charCodeAt","computeLinePos","line","snapToLines","textTrackList","mediaElement","trackList","count","mode","StyleBox","styles","div","prop","hasOwnProperty","val","unit","CueStyleBox","styleOptions","isIE8","navigator","test","userAgent","textShadow","WebVTTSet","fontSet","backgroundSet","edgeSet","position","left","right","top","bottom","display","writingMode","vertical","unicodeBidi","applyStyles","textAlign","align","font","whiteSpace","direction","stylesunicodeBidi","textPos","positionAlign","size","formatStyle","move","box","BoxPosition","obj","overlaps","b2","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","max","lineHeight","axis","toMove","boxes","container","x","min","y","intersectArea","reference","moveBoxToLinePosition","styleBox","containerBox","boxPositions","findBestPosition","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","p","intersectPercentage","boxPosition","linePos","step","round","maxPosition","initialAxis","ceil","reverse","calculatedPercentage","lineAlign","toCSSCompatValues","convertCueToDOMTree","cuetext","FONT_SIZE_PERCENT","FONT_STYLE","CUE_BACKGROUND_PADDING","processCues","overlay","firstChild","paddedOverlay","margin","shouldCompute","displayState","getSimpleBoxPosition","autoKeyword","directionSetting","alignSetting","findDirectionSetting","dir","findAlignSetting","VTTCue","endTime","_pauseOnExit","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","_startTime","_endTime","_text","TypeError","resetCue","setting","SyntaxError","Cue","NOT_SUPPORTED","scheme","browser","_Browsers","drmScheme","drmEntry","Safari","Chrome","Firefox","Edge","IE","osVersion","version","Number","parseFloat","FairPlay","isProtocolSupported","_WebkitEvents","NEED_KEY","_onWebkitNeedKey","fpDrmData","_keySession","fpCertificate","certificate","initData","contentId","_extractContentId","aCertificate","_base64DecodeUint8Array","_concatInitDataIdAndCertificate","webkitKeys","keySystem","_selectKeySystem","webkitSetMediaKeys","WebKitMediaKeys","createSession","KEY_MESSAGE","_onWebkitKeyMessage","KEY_ADDED","_onWebkitKeyAdded","KEY_ERROR","_onWebkitKeyError","request","XMLHttpRequest","responseType","_licenseRequestLoaded","_licenseRequestFailed","params","_base64EncodeUint8Array","open","licenseUrl","setRequestHeader","send","keyText","responseText","responseObj","JSON","parse","ckc","link","href","_arrayToString","hostname","isTypeSupported","_KeySystem","array","String","fromCharCode","apply","Uint16Array","buffer","raw","atob","rawLength","Uint8Array","ArrayBuffer","cert","_stringToArray","offset","byteLength","dataView","DataView","initDataArray","setUint32","idArray","certArray","string","strLen","keyStr","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","NaN","isNaN","charAt","Html5","_showTextTrackFirstTime","_createVideoElement","_init","detach","removeAttribute","_mediaSourceAdapter","_removeCueChangeListener","_addCueChangeListener","_canLoadMediaSourceAdapterPromise","_loadMediaSourceAdapter","attach","controls","getMediaSourceAdapter","textTrackEl","_getSelectedTextTrackElement","oncuechange","TextTrackCue","parseInt","seekable","played","buffered","defaultMuted","loop","defaultPlaybackRate","ended","networkState","readyState","videoHeight","videoWidth","getAttribute","TEST_VID","NativeAdapter","TEST_VIDEO","toString","_drmProtocols","drmProtocol","_drmProtocol","_maybeSetDrmPlayback","_progressiveSources","progressive","setDrmPlayback","suitableTrack","getSuitableSourceForResolution","_loadPromise","listenOnce","_getParsedTracks","_isProgressivePlayback","_setProgressiveSource","url","videoTracks","_getParsedVideoTracks","audioTracks","_getParsedAudioTracks","_getParsedTextTracks","_getParsedProgressiveVideoTracks","_getParsedAdaptiveVideoTracks","parsedTracks","selected","enabled","_selectProgressiveVideoTrack","selectAdaptiveVideoTrack","_onTrackChanged","_disableVideoTracks","_disableAudioTracks","_disableTextTracks","end","_getLiveEdge","Middleware","actions","_actions","_middlewares","middlewareInstance","action","apiAction","callback","middlewares","_executeMiddleware","composition","reduceRight","fn","PlaybackMiddleware","_middleware","Actions","run","loadPlayer","Utils","log","VERSION","PLAYER_NAME","StateManager","_transitions","_updateState","_dispatchEvent","_player","_prevState","_history","_curState","_attachListeners","_doTransition","transition","State","_duration","_timestamp","TRACK_TYPES","classList","add","hasClassName","RegExp","getPropertyValue","setProperty","parent","child","insertBefore","r","getElementsByTagName","async","onload","onreadystatechange","onerror","onabort","getResult","from","random","S4","substring","languages","userLanguage","split","JsLogger","LOG_LEVEL","DEBUG","INFO","TIME","WARN","options","useDefaults","lf","defaultLevel","n","thisObj","arguments","objects","assign","item","shift","isObject","propertyPath","reduce","o","properties","res","rej","promise","param","method","_createEl","posterUrl","_posterUrl","setStyle","_removeEl","toUpperCase","searchString"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AChEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;QAGEA,G;QACAC,G;QACAC,G;QACAC,S;QACAC,G;QACAC,G;QACAC,M;QACAC,a;QACAC,Q;QACAC,a;QACAC,W;;;;;;;;;;;;;;;;;ACrBF;;;;IAIqBC,K;;;;;AAqDnB;;;;;wBAKkB;AAChB,aAAO,KAAKC,GAAZ;AACD;;AAED;;;;;;;;wBAKsB;AACpB,aAAO,KAAKC,OAAZ;AACD;;AAED;;;;;;sBAKWC,K,EAAgB;AACzB,WAAKD,OAAL,GAAeC,KAAf;AACD;;AAED;;;;;;;;wBAKqB;AACnB,aAAO,KAAKC,MAAZ;AACD;;AAED;;;;;;;;wBAKwB;AACtB,aAAO,KAAKC,SAAZ;AACD;;AAED;;;;;;;;wBAKoB;AAClB,aAAO,KAAKC,MAAZ;AACD;;AAED;;;;;;;;AA1GA;;;;;;iCAMoBC,S,EAAmBC,S,EAA4B;AACjE,UAAI;AACFD,oBAAYA,UAAUE,WAAV,EAAZ;AACAD,oBAAYA,UAAUC,WAAV,EAAZ;AACA,eAAOF,UAAUG,UAAV,CAAqBF,SAArB,KAAmCA,UAAUE,UAAV,CAAqBH,SAArB,CAA1C;AACD,OAJD,CAIE,OAAOI,CAAP,EAAU;AACV,eAAO,KAAP;AACD;AACF;;AAED;;;;;;;AAOA;;;;;;;AAOA;;;;;;;AAOA;;;;;;;AAOA;;;;;;;;;AAkEA,iBAAYC,QAAZ,EAAqC;AAAA;;AACnC,SAAKX,GAAL,GAAWW,SAASC,EAApB;AACA,SAAKX,OAAL,GAAeU,SAASE,MAAxB;AACA,SAAKV,MAAL,GAAcQ,SAASG,KAAvB;AACA,SAAKV,SAAL,GAAiBO,SAASI,QAA1B;AACA,SAAKV,MAAL,GAAcM,SAASK,KAAvB;AACD;;;;;kBArHkBjB,K;;;;;;;;;;;;;;;;;ACLrB;;;;;;;;IAQMkB,S;;AA+BJ;;;;;;AANA;;;AANA;;;AAZA;;AANA;AAsCA,qBAAYC,IAAZ,EAA0BC,OAA1B,EAAwC;AAAA;;AACtC;AACA;;AAEA;AACA,SAAKC,OAAL,GAAe,KAAf;;AAEA;AACA,SAAKC,UAAL,GAAkB,KAAlB;;AAEA;AACA,SAAKC,gBAAL,GAAwB,KAAxB;;AAEA;;;;;;;AAOA,SAAKC,SAAL,GAAiBC,OAAOC,WAAP,GAAqBD,OAAOC,WAAP,CAAmBC,GAAnB,EAArB,GAAgDC,KAAKD,GAAL,EAAjE;;AAEA;AACA,SAAKR,IAAL,GAAYA,IAAZ;;AAEA;AACA,SAAKU,SAAL,GAAiB,KAAjB;;AAEA;AACA,SAAKC,aAAL,GAAqB,IAArB;;AAEA;AACA,SAAKC,MAAL,GAAc,IAAd;;AAGA;;;;AAIA,SAAKC,OAAL,GAAe,KAAf;;AAEA,SAAKZ,OAAL,GAAeA,OAAf;AACD;;AAED;;;;;;;AAvDA;;;AANA;;;AAZA;;;;;;;;;AANA;;;;;qCAoFiB,CAChB;;AAED;;;;;;;;+CAK2B;AACzB,WAAKY,OAAL,GAAe,IAAf;AACD;;AAED;;;;;;;;sCAKkB,CACjB;;;;;;kBAGYd,S;;;;;;;;;;;;;ACrHf;;;;;;;;;;;;AAEA;;;;IAIqBe,U;;;;;;;;;;;;kBAAAA,U;;;;;;;;;;;;;;;;ACNrB;;;;;;;;;;;;AAEA;;;;IAIqBC,S;;;;;;;AAUnB;;;;;wBAKmB;AACjB,aAAO,KAAKC,KAAZ;AACD;;AAED;;;;;AAlBA;;;;;;;;;;AAsBA,qBAAYvB,QAAZ,EAAyC;AAAA;;AAAA,sHACjCA,QADiC;;AAEvC,UAAKuB,KAAL,GAAavB,SAASwB,IAAtB;AAFuC;AAGxC;;;;;kBA1BkBF,S;QA6BbA,S,GAAAA,S;;;;;;;;;;;;;;;ACnCR;;;;;;;;;;;;AAEA;;;;IAIqBG,U;;;;;;;AAyEnB;;;;wBAIwB;AACtB,aAAO,KAAKC,UAAZ;AACD;;AAED;;;;;;;wBAIoB;AAClB,aAAO,KAAKC,MAAZ;AACD;;AAED;;;;;;;wBAIqB;AACnB,aAAO,KAAKC,OAAZ;AACD;;AAED;;;;;;;;AAhGA;;;;;;;;mDAQsCC,M,EAAuBC,K,EAAeC,M,EAAyB;AACnG,UAAIC,oBAAoB,IAAxB;AACA,UAAID,UAAUF,MAAd,EAAsB;AACpB,YAAII,0BAA0B,EAA9B;AACA,YAAIC,eAAeC,QAAnB;AAFoB;AAAA;AAAA;;AAAA;AAGpB,+BAAkBN,MAAlB,8HAA0B;AAAA,gBAAjBO,KAAiB;AAAE;AAC1B,gBAAI,OAAOA,MAAMN,KAAb,KAAuB,QAA3B,EAAqC;AACnC,kBAAIO,YAAYC,KAAKC,GAAL,CAASH,MAAMN,KAAN,GAAcA,KAAvB,CAAhB;AACA,kBAAIO,YAAYH,YAAhB,EAA8B;AAC5BA,+BAAeG,SAAf;AACAJ,0CAA0B,CAACG,KAAD,CAA1B;AACD,eAHD,MAGO,IAAIC,cAAcH,YAAlB,EAAgC;AACrCD,wCAAwBO,IAAxB,CAA6BJ,KAA7B;AACD;AACF;AACF;AAbmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcpB,YAAIK,aAAaX,QAAQC,MAAzB;AACA,YAAIW,kCAAkCT,uBAAtC;AACA,YAAIU,eAAeR,QAAnB;AAhBoB;AAAA;AAAA;;AAAA;AAiBpB,gCAAkBF,uBAAlB,mIAA2C;AAAA,gBAAlCG,MAAkC;AAAG;AAC5C,gBAAI,OAAOA,OAAMN,KAAb,KAAuB,QAAvB,IAAmC,OAAOM,OAAML,MAAb,KAAwB,QAA/D,EAAyE;AACvE,kBAAIa,YAAYN,KAAKC,GAAL,CAASH,OAAMN,KAAN,GAAcM,OAAML,MAApB,GAA6BU,UAAtC,CAAhB;AACA,kBAAIG,YAAYD,YAAhB,EAA8B;AAC5BA,+BAAeC,SAAf;AACAF,kDAAkC,CAACN,MAAD,CAAlC;AACD,eAHD,MAGO,IAAIQ,cAAcD,YAAlB,EAAgC;AACrCD,gDAAgCF,IAAhC,CAAqCJ,MAArC;AACD;AACF;AACF;AA3BmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA4BpB,YAAIS,eAAe,CAAnB;AA5BoB;AAAA;AAAA;;AAAA;AA6BpB,gCAAkBH,+BAAlB,mIAAmD;AAAA,gBAA1CN,OAA0C;AAAE;AACnD,gBAAI,OAAOA,QAAMU,SAAb,KAA2B,QAA/B,EAAyC;AACvC,kBAAIV,QAAMU,SAAN,GAAkBD,YAAlB,IAAkC,CAACT,QAAMU,SAA7C,EAAwD;AACtDD,+BAAeT,QAAMU,SAAN,IAAmBD,YAAlC;AACAb,oCAAoBI,OAApB;AACD;AACF;AACF;AApCmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqCrB;AACD,aAAOJ,iBAAP;AACD;;AAED;;;;;;;AAOA;;;;;;;AAOA;;;;;;;;AAmCA,sBAAYhC,QAAZ,EAA0C;AAAA;;AAAA,wHAClCA,QADkC;;AAExC,UAAK0B,UAAL,GAAkB1B,SAAS8C,SAA3B;AACA,UAAKnB,MAAL,GAAc3B,SAAS8B,KAAvB;AACA,UAAKF,OAAL,GAAe5B,SAAS+B,MAAxB;AAJwC;AAKzC;;;;;kBA1GkBN,U;;;;;;;;;;;;;;;ACNrB;;;;AACA;;;;;;;;AAEA;;;;;;;;IAQMsB,Y;AAGJ,0BAAc;AAAA;;AACZ;;;;AAIA,SAAKC,WAAL,GAAmB,wBAAnB;AACD;;AAED;;;;;;;;8BAIU;AACR,WAAKC,SAAL;AACA,WAAKD,WAAL,GAAmB,IAAnB;AACA,aAAOE,QAAQC,OAAR,EAAP;AACD;;AAED;;;;;;;;;;+BAOWhC,M,EAAaZ,I,EAAc6C,Q,EAA8B;AAAA;;AAClE,UAAIC,cAAc,SAAdA,WAAc,CAACC,KAAD,EAAW;AAC3B,cAAKC,QAAL,CAAcpC,MAAd,EAAsBZ,IAAtB,EAA4B8C,WAA5B;AACAD,iBAASI,IAAT,QAAoBF,KAApB;AACD,OAHD;AAIA,WAAKG,MAAL,CAAYtC,MAAZ,EAAoBZ,IAApB,EAA0B8C,WAA1B;AACD;;AAGD;;;;;;;;;;2BAOOlC,M,EAAaZ,I,EAAc6C,Q,EAA8B;AAC9D,UAAIM,UAAU,IAAIC,QAAJ,CAAaxC,MAAb,EAAqBZ,IAArB,EAA2B6C,QAA3B,CAAd;AACA,UAAI,KAAKJ,WAAT,EAAsB;AACpB,aAAKA,WAAL,CAAiBR,IAAjB,CAAsBjC,IAAtB,EAA4BmD,OAA5B;AACD;AACF;;AAGD;;;;;;;;;;6BAOSvC,M,EAAaZ,I,EAAc6C,Q,EAA+B;AACjE,UAAI,KAAKJ,WAAT,EAAsB;AACpB,YAAIY,OAAO,KAAKZ,WAAL,CAAiBa,GAAjB,CAAqBtD,IAArB,CAAX;;AAEA,aAAK,IAAIuD,IAAI,CAAb,EAAgBA,IAAIF,KAAKG,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpC,cAAIJ,UAAUE,KAAKE,CAAL,CAAd;;AAEA,cAAIJ,QAAQvC,MAAR,KAAmBA,MAAnB,KAA8BuC,QAAQN,QAAR,KAAqBA,QAArB,IAAiC,CAACA,QAAhE,CAAJ,EAA+E;AAC7EM,oBAAQH,QAAR;AACA,gBAAI,KAAKP,WAAT,EAAsB;AACpB,mBAAKA,WAAL,CAAiBgB,MAAjB,CAAwBzD,IAAxB,EAA8BmD,OAA9B;AACD;AACF;AACF;AACF;AACF;;AAED;;;;;;;gCAIkB;AAChB,UAAI,KAAKV,WAAT,EAAsB;AACpB,YAAIiB,YAAY,KAAKjB,WAAL,CAAiBkB,MAAjB,EAAhB;;AADoB;AAAA;AAAA;;AAAA;AAGpB,+BAAqBD,SAArB,8HAAgC;AAAA,gBAAvBb,QAAuB;;AAC9BA,qBAASG,QAAT;AACD;AALmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMpB,YAAI,KAAKP,WAAT,EAAsB;AACpB,eAAKA,WAAL,CAAiBmB,KAAjB;AACD;AACF;AACF;;;;;;AAGH;;;;;AAKA;;;;;;;;IAQMR,Q;AAKJ,oBAAYxC,MAAZ,EAAoBZ,IAApB,EAA0B6C,QAA1B,EAAoC;AAAA;;AAClC;AACA,SAAKjC,MAAL,GAAcA,MAAd;;AAEA;AACA,SAAKZ,IAAL,GAAYA,IAAZ;;AAEA;AACA,SAAK6C,QAAL,GAAgBA,QAAhB;;AAEA,SAAKjC,MAAL,CAAYiD,gBAAZ,CAA6B7D,IAA7B,EAAmC6C,QAAnC,EAA6C,KAA7C;AACD;;AAGD;;;;;;;;;+BAKiB;AACf,UAAI,CAAC,KAAKjC,MAAV,EACE;;AAEF,WAAKA,MAAL,CAAYkD,mBAAZ,CAAgC,KAAK9D,IAArC,EAA2C,KAAK6C,QAAhD,EAA0D,KAA1D;;AAEA,WAAKjC,MAAL,GAAc,IAAd;AACA,WAAKiC,QAAL,GAAgB,IAAhB;AACD;;;;;;kBAGYL,Y;;;;;;;;;;;;;;ACzJf;;AAEA,IAAMuB,eAA4C;AAChD;;;AAGAC,SAAO,OAJyC;AAKhD;;;AAGAC,YAAU,SARsC;AAShD;;;AAGAC,oBAAkB,gBAZ8B;AAahD;;;AAGAC,mBAAiB,gBAhB+B;AAiBhD;;;AAGAC,WAAS,SApBuC;AAqBhD;;;AAGAC,SAAO,OAxByC;AAyBhD;;;AAGAC,SAAO,OA5ByC;AA6BhD;;;AAGAC,eAAa,YAhCmC;AAiChD;;;AAGAC,mBAAiB,gBApC+B;AAqChD;;;AAGAC,cAAY,WAxCoC;AAyChD;;;AAGAC,SAAO,OA5CyC;AA6ChD;;;AAGAC,QAAM,MAhD0C;AAiDhD;;;AAGAC,WAAS,SApDuC;AAqDhD;;;AAGAC,YAAU,UAxDsC;AAyDhD;;;AAGAC,eAAa,YA5DmC;AA6DhD;;;AAGAC,UAAQ,QAhEwC;AAiEhD;;;AAGAC,WAAS,SApEuC;AAqEhD;;;AAGAC,WAAS,SAxEuC;AAyEhD;;;AAGAC,WAAS,SA5EuC;AA6EhD;;;AAGAC,eAAa,YAhFmC;AAiFhD;;;AAGAC,iBAAe,cApFiC;AAqFhD;;;AAGAC,WAAS;AAxFuC,CAAlD;;;AA2FA,IAAMC,gBAA6C;AACjD;;;AAGAC,yBAAuB,qBAJ0B;AAKjD;;;AAGAC,uBAAqB,mBAR4B;AASjD;;;AAGAC,eAAa,YAZoC;AAajD;;;AAGAC,uBAAqB,mBAhB4B;AAiBjD;;;AAGAC,uBAAqB,mBApB4B;AAqBjD;;;AAGAC,sBAAoB,kBAxB6B;AAyBjD;;;AAGAC,oBAAkB,gBA5B+B;AA6BjD;;;AAGAC,kBAAgB,eAhCiC;AAiCjD;;;AAGAC,oBAAkB,gBApC+B;AAqCjD;;;AAGAC,wBAAsB,oBAxC2B;AAyCjD;;;AAGAC,cAAY,WA5CqC;AA6CjD;;;AAGAC,mBAAiB,gBAhDgC;AAiDjD;;;AAGAC,aAAW,UApDsC;AAqDjD;;;AAGAC,cAAY,WAxDqC;AAyDjD;;;AAGAC,cAAY,WA5DqC;AA6DjD;;;AAGAC,aAAW,UAhEsC;AAiEjD;;;AAGAC,cAAY,WApEqC;AAqEjD;;;AAGAC,cAAY,WAxEqC;AAyEjD;;;AAGAC,gBAAc,aA5EmC;AA6EjD;;;AAGAC,YAAU,SAhFuC;AAiFjD;;;AAGAC,qBAAmB,iBApF8B;AAqFjD;;;AAGAC,kBAAgB,cAxFiC;AAyFjD;;;AAGAC,gBAAc,YA5FmC;AA6FjD;;;AAGAC,qBAAmB,iBAhG8B;AAiGjD;;;AAGAC,eAAa,YApGoC;AAqGjD;;;AAGAC,qBAAmB,iBAxG8B;AAyGjD;;;AAGAC,kBAAgB,cA5GiC;AA6GjD;;;AAGAC,qBAAmB,iBAhH8B;AAiHjD;;;AAGAC,YAAU,SApHuC;AAqHjD;;;AAGAC,eAAa;AAxHoC,CAAnD;;AA2HA,IAAMC,gBAA6C,WAAIC,KAAJ,CAAU,CAACvD,YAAD,EAAeuB,aAAf,CAAV,CAAnD;;QAEQ+B,a,GAAAA,a;QAAetD,Y,GAAAA,Y;QAAcuB,a,GAAAA,a;;;;;;;;;;;;;;;;;AC1NrC;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA;;;;;AAKA,IAAMiC,uBAA+B,mBAArC;;AAEA;;;;;;AAMA,IAAMC,oBAA4B,gBAAlC;;AAEA;;;;;AAKA,IAAMC,oBAA4B,gBAAlC;;AAEA;;;;;AAKA,IAAMC,0BAAkC,yBAAxC;;AAEA;;;;;AAKA,IAAMC,uBAA+B,mBAArC;;AAEA;;;;;AAKA,IAAMC,OAAe,MAArB;;AAGA;;;;;AAKA,IAAMC,OAAe,MAArB;;AAGA;;;;;AAKA,IAAMC,MAAc,KAApB;;AAGA;;;;;IAIqBC,M;;;AAkInB;;;;;AA/BA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AApCA;;;;;;AAxEA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAMA;;;;;;AAhFA;;;;;;AAqIA,oBAAiC;AAAA,QAArBC,MAAqB,uEAAJ,EAAI;;AAAA;;AAAA;;AAAA,UA1CjCC,eA0CiC,GA1CH,EA0CG;AAAA,UApCjCC,oBAoCiC,GApCF,EAoCE;;AAE/B,UAAKC,IAAL;AACA,UAAKC,OAAL,GAAe,EAAf;AACA,UAAKC,UAAL,GAAkB,IAAlB;AACA,UAAKC,OAAL,GAAeP,OAAOQ,cAAtB;AACA,UAAKC,aAAL,GAAqB,4BAArB;AACA,UAAKC,cAAL,GAAsB,0BAAtB;AACA,UAAKC,aAAL,GAAqB,iCAArB;AACA,UAAKC,cAAL,GAAsB,6BAAtB;AACA,UAAKC,mBAAL,GAA2B,kCAA3B;AACA,UAAKC,UAAL,GAAkB,yBAAlB;AACA,UAAKC,mBAAL;AACA,UAAKC,sBAAL;AACA,UAAKC,eAAL;AACA,UAAKC,SAAL,CAAejB,MAAf;AAf+B;AAgBhC;;AAED;;AAEA;;AAEA;;;;;;AA/DA;;;;;;AArFA;;;;;;;;;;8BAyJUA,M,EAA4B;AACpC,iBAAIkB,SAAJ,CAAc,KAAKZ,OAAnB,EAA4BN,MAA5B;AACA,WAAKmB,uBAAL,CAA6BnB,OAAOoB,OAApC;AACA,UAAI,CAAC,WAAIC,aAAJ,CAAkBrB,OAAOsB,OAAzB,CAAL,EAAwC;AACtC,YAAMC,+BAAwC,CAAC,CAAC,KAAKC,OAArD;AACA,YAAID,4BAAJ,EAAkC;AAChC,eAAKE,MAAL;AACA1B,iBAAO2B,OAAP,CAAeC,KAAf,CAAqB,uBAArB;AACA,eAAKC,aAAL,CAAmB,wBAAc,sBAAarE,qBAA3B,CAAnB;AACD;AACD,YAAI,KAAKsE,uBAAL,EAAJ,EAAoC;AAClC,eAAKC,eAAL;AACA,eAAKrB,cAAL,CAAoBsB,MAApB,CAA2B,KAAKzB,OAAL,CAAa0B,QAAb,CAAsBC,MAAjD;AACA,eAAKxB,cAAL,CAAoByB,IAApB;AACA,eAAKC,YAAL;AACA,eAAKC,qBAAL;AACA,cAAIb,4BAAJ,EAAkC;AAChCxB,mBAAO2B,OAAP,CAAeC,KAAf,CAAqB,qBAArB;AACA,iBAAKC,aAAL,CAAmB,wBAAc,sBAAapE,mBAA3B,CAAnB;AACD;AACF;AACF;AACF;;AAED;;;;;;;;4BAKoB;AAClB,aAAO,KAAK6E,aAAL,GAAqB,KAAKA,aAA1B,GAA0C1H,QAAQC,OAAR,EAAjD;AACD;;AAED;;;;;;;;2BAKa;AAAA;;AACX,UAAI,KAAK4G,OAAT,EAAkB;AAChB,YAAIc,YAAY,KAAKhC,OAAL,CAAaiC,QAAb,CAAsBD,SAAtC;AACA,aAAKd,OAAL,CAAagB,IAAb,CAAkBF,SAAlB,EAA6BG,IAA7B,CAAkC,UAACC,IAAD,EAAU;AAC1C,iBAAKtC,OAAL,GAAesC,KAAKpJ,MAApB;AACA,iBAAKqJ,sBAAL;AACA,iBAAKC,iBAAL;AACA,iBAAKhB,aAAL,CAAmB,wBAAc,sBAAa9D,cAA3B,EAA2C,EAACxE,QAAQ,OAAK8G,OAAd,EAA3C,CAAnB;AACD,SALD,EAKGyC,KALH,CAKS,UAACC,KAAD,EAAW;AAClB,iBAAKlB,aAAL,CAAmB,wBAAc,qBAAYtF,KAA1B,EAAiCwG,KAAjC,CAAnB;AACD,SAPD;AAQD;AACF;;AAED;;;;;;;;2BAKa;AACX,UAAI,KAAKtB,OAAT,EAAkB;AAChB,aAAKZ,mBAAL,CAAyBmC,IAAzB,CAA8B,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAA9B;AACD;AACF;;AAED;;;;;;;;4BAKc;AACZ,UAAI,KAAKzB,OAAT,EAAkB;AAChB,aAAKZ,mBAAL,CAAyBsC,KAAzB,CAA+B,KAAKC,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAA/B;AACD;AACF;;AAED;;;;;;;;8BAKuB;AACrB,aAAO,KAAKG,GAAZ;AACD;;AAED;;;;;;;sCAIqC;AACnC,UAAI,KAAK5B,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAa6B,eAAb,EAAP;AACD;AACF;;AAED;;;;;;;;8BAKgB;AACd,UAAI,KAAK7B,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa8B,OAAb;AACD;AACD,WAAK7C,cAAL,CAAoB6C,OAApB;AACA,WAAK9C,aAAL,CAAmB8C,OAAnB;AACA,WAAK3C,cAAL,CAAoB2C,OAApB;AACA,WAAK5C,aAAL,CAAmB4C,OAAnB;AACA,WAAKrD,eAAL,GAAuB,EAAvB;AACA,WAAKC,oBAAL,GAA4B,EAA5B;AACA,WAAKI,OAAL;AACA,WAAKF,OAAL,GAAe,EAAf;AACA,WAAKmD,WAAL,GAAmB,EAAnB;AACA,WAAKC,WAAL,GAAmB,EAAnB;AACA,WAAKnB,aAAL,GAAqB,IAArB;AACA,WAAKhC,UAAL,GAAkB,IAAlB;AACA,UAAI,KAAK+C,GAAT,EAAc;AACZ,mBAAIK,WAAJ,CAAgB,KAAKL,GAAL,CAASM,UAAzB,EAAqC,KAAKN,GAA1C;AACD;AACF;;;+BAEgB,CAChB;;AAED;;;;;;;;;;AAgPA;;AAEA;;AAEA;;;;;;6BAMkB;AAChB,aAAO,CAAC,EAAE,KAAK9C,OAAL,CAAatI,IAAb,KAAsB4H,IAAtB,IAA+B,KAAK4B,OAAL,IAAgB,KAAKA,OAAL,CAAamC,MAAb,EAAjD,CAAR;AACD;;AAED;;;;;;;;;4BAMiB;AACf,aAAO,KAAKA,MAAL,MAAiB,KAAKrD,OAAL,CAAasD,GAArC;AACD;;AAED;;;;;;;;;qCAMuB;AACrB,UAAI,KAAKpC,OAAL,IAAgB,KAAKmC,MAAL,EAApB,EAAmC;AACjC,aAAKnC,OAAL,CAAaqC,cAAb;AACD;AACF;;AAED;;AAEA;;AAEA;;;;;;;;;;8BAOU7L,I,EAA6B;AACrC,aAAO,KAAK8L,gBAAL,CAAsB9L,IAAtB,CAAP;AACD;;AAED;;;;;;;sCAIgC;AAC9B,aAAO;AACL+L,eAAO,KAAKD,gBAAL,CAAsB,qBAAWE,KAAjC,EAAwCC,IAAxC,CAA6C;AAAA,iBAASpK,MAAMlC,MAAf;AAAA,SAA7C,CADF;AAELuM,eAAO,KAAKJ,gBAAL,CAAsB,qBAAWK,KAAjC,EAAwCF,IAAxC,CAA6C;AAAA,iBAASpK,MAAMlC,MAAf;AAAA,SAA7C,CAFF;AAGLyM,cAAM,KAAKN,gBAAL,CAAsB,qBAAWO,IAAjC,EAAuCJ,IAAvC,CAA4C;AAAA,iBAASpK,MAAMlC,MAAf;AAAA,SAA5C;AAHD,OAAP;AAKD;;AAED;;;;;;;;;;gCAOYkC,K,EAAoB;AAC9B,UAAI,KAAK2H,OAAT,EAAkB;AAChB,YAAI3H,qCAAJ,EAAiC;AAC/B,eAAK2H,OAAL,CAAa8C,gBAAb,CAA8BzK,KAA9B;AACD,SAFD,MAEO,IAAIA,qCAAJ,EAAiC;AACtC,eAAK2H,OAAL,CAAa+C,gBAAb,CAA8B1K,KAA9B;AACD,SAFM,MAEA,IAAIA,oCAAJ,EAAgC;AACrC,cAAIA,MAAMhC,QAAN,KAAmB,KAAvB,EAA8B;AAC5B,iBAAK2M,aAAL;AACD,WAFD,MAEO;AACL,iBAAKhD,OAAL,CAAaiD,eAAb,CAA6B5K,KAA7B;AACD;AACF;AACF;AACF;;AAED;;;;;;;;;oCAMsB;AACpB,UAAI,KAAK2H,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAagD,aAAb;AACA,aAAKE,kBAAL,CAAwB,EAAxB;AACA,YAAMC,aAAa,KAAKb,gBAAL,CAAsB,qBAAWO,IAAjC,CAAnB;AACAM,mBAAWC,GAAX,CAAe;AAAA,iBAAS/K,MAAMlC,MAAN,GAAe,KAAxB;AAAA,SAAf;AACA,YAAMkN,YAAYF,WAAWV,IAAX,CAAgB;AAAA,iBAASpK,MAAMhC,QAAN,KAAmB,KAA5B;AAAA,SAAhB,CAAlB;AACA,YAAIgN,SAAJ,EAAe;AACbA,oBAAUlN,MAAV,GAAmB,IAAnB;AACA,eAAKiK,aAAL,CAAmB,wBAAc,sBAAahE,kBAA3B,EAA+C,EAACkH,mBAAmBD,SAApB,EAA/C,CAAnB;AACD;AACF;AACF;;AAED;;;;;;;;;4CAM8B;AAC5B,UAAI,KAAKrD,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAauD,qBAAb;AACD;AACF;;AAED;;;;;;;;;+CAMoC;AAClC,UAAI,KAAKvD,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAawD,wBAAb,EAAP;AACD;AACD,aAAO,KAAP;AACD;;AAED;;;;;;;;;2CAMuBvN,Q,EAAwB;AAC7C,WAAKyI,oBAAL,GAA4BzI,QAA5B;AACA,WAAKwN,yBAAL;AACA,WAAK,IAAI1J,IAAI,CAAb,EAAgBA,IAAI,KAAK0E,eAAL,CAAqBzE,MAAzC,EAAiDD,GAAjD,EAAsD;AACpD,aAAK0E,eAAL,CAAqB1E,CAArB,EAAwB2J,YAAxB,GAAuC,IAAvC;AACD;AACD,WAAKR,kBAAL,CAAwB,KAAKzE,eAA7B;AACD;;AAED;;;;;;;;;;AAyCA;;AAEA;;AAEA;;;;;6BAKe;AACb,UAAIkF,YAAyB,KAAKxE,cAAL,CAAoBrF,GAApB,CAAwB,KAAxB,CAA7B;AACA,UAAI6J,aAAa,OAAOA,UAAUC,MAAjB,KAA4B,UAA7C,EAAyD;AACvDD,kBAAUC,MAAV;AACD;AACF;;AAED;;;;;;;;;8BAMUC,Q,EAAwB;AAChC,UAAIF,YAAyB,KAAKxE,cAAL,CAAoBrF,GAApB,CAAwB,KAAxB,CAA7B;AACA,UAAI6J,aAAa,OAAOA,UAAUG,SAAjB,KAA+B,UAAhD,EAA4D;AAC1DH,kBAAUG,SAAV,CAAoBD,QAApB;AACD;AACF;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;;6CAK+B;AAC7B,UAAME,KAAK,KAAKnC,GAAL,GAAW,WAAIoC,aAAJ,CAAkB,KAAlB,CAAtB;AACA,iBAAIC,YAAJ,CAAiBF,EAAjB,EAAqBhG,oBAArB;AACA,WAAKmG,SAAL,GAAiB,iBAAUC,QAAV,CAAmB,CAAnB,CAAjB;AACA,iBAAIC,YAAJ,CAAiBL,EAAjB,EAAqB,IAArB,EAA2B,KAAKG,SAAhC;AACA,iBAAIE,YAAJ,CAAiBL,EAAjB,EAAqB,UAArB,EAAiC,IAAjC;AACD;;AAED;;;;;;;;sCAKwB;AACtB,UAAI,KAAKnC,GAAT,EAAc;AACZ,YAAImC,KAAqB,KAAK9E,cAAL,CAAoBoF,UAApB,EAAzB;AACA,mBAAIJ,YAAJ,CAAiBF,EAAjB,EAAqB/F,iBAArB;AACA,mBAAIsG,WAAJ,CAAgB,KAAK1C,GAArB,EAA0BmC,EAA1B;AACD;AACF;;AAED;;;;;;;;sCAKwB;AACtB,UAAI,KAAKnC,GAAL,IAAY,KAAK5B,OAArB,EAA8B;AAC5B,YAAIuE,WAAW,KAAKvE,OAAL,CAAa6B,eAAb,EAAf;AACA,YAAM2C,iBAAevG,iBAArB;AACA,mBAAIgG,YAAJ,CAAiBM,QAAjB,EAA2BC,SAA3B;AACA,YAAMC,kBAAqBxG,iBAArB,SAA0C,KAAK+B,OAAL,CAAa9J,EAA7D;AACA,mBAAI+N,YAAJ,CAAiBM,QAAjB,EAA2BE,eAA3B;AACA,mBAAIC,SAAJ,CAAcH,QAAd,EAAwB,KAAK3C,GAA7B;AACD;AACF;;AAED;;;;;;;;;8CAMoD;AAAA;;AAAA,UAA5BhC,OAA4B,uEAAV,EAAU;;AAClD,UAAIA,OAAJ,EAAa;AACX+E,eAAOC,IAAP,CAAYhF,OAAZ,EAAqBiF,OAArB,CAA6B,UAACC,IAAD,EAAU;AACrC;AACA,cAAMC,SAAS,OAAK5F,cAAL,CAAoBrF,GAApB,CAAwBgL,IAAxB,CAAf;AACA,cAAIC,MAAJ,EAAY;AACVA,mBAAOC,YAAP,CAAoBpF,QAAQkF,IAAR,CAApB;AACA,mBAAKhG,OAAL,CAAac,OAAb,CAAqBkF,IAArB,IAA6BC,OAAOE,SAAP,EAA7B;AACD,WAHD,MAGO;AACL;AACA,gBAAI,CAAC,OAAKjF,OAAV,EAAmB;AACjB,qBAAKb,cAAL,CAAoB6B,IAApB,CAAyB8D,IAAzB,UAAqClF,QAAQkF,IAAR,CAArC;AACA,kBAAIC,UAAS,OAAK5F,cAAL,CAAoBrF,GAApB,CAAwBgL,IAAxB,CAAb;AACA,kBAAIC,OAAJ,EAAY;AACV,uBAAKjG,OAAL,CAAac,OAAb,CAAqBkF,IAArB,IAA6BC,QAAOE,SAAP,EAA7B;AACA,oBAAI,OAAOF,QAAOG,iBAAd,KAAoC,UAAxC,EAAoD;AAClD,yBAAK9F,mBAAL,CAAyB+F,GAAzB,CAA6BJ,QAAOG,iBAAP,EAA7B;AACD;AACF;AACF,aATD,MASO;AACL,qBAAO,OAAKpG,OAAL,CAAac,OAAb,CAAqBkF,IAArB,CAAP;AACD;AACF;AACF,SArBD;AAsBD;AACF;;AAED;;;;;;;;0CAK4B;AAAA;;AAC1B,WAAKjE,aAAL,GAAqB,IAAI1H,OAAJ,CAAY,UAACC,OAAD,EAAUgM,MAAV,EAAqB;AACpD,eAAKpG,aAAL,CAAmBtF,MAAnB,SAAgC,sBAAa4C,cAA7C,EAA6DlD,OAA7D;AACA,eAAK4F,aAAL,CAAmBtF,MAAnB,SAAgC,qBAAYoB,KAA5C,EAAmDsK,MAAnD;AACD,OAHoB,CAArB;AAID;;AAED;;;;;;;;;8CAMmC;AAAA;;AACjC,UAAMC,iBAAiB,KAAKvG,OAAL,CAAaiC,QAAb,CAAsBsE,cAA7C;AACA,UAAMC,eAAe,KAAKxG,OAAL,CAAaiC,QAAb,CAAsBuE,YAA3C;AACA,UAAMxF,UAAU,KAAKhB,OAAL,CAAagB,OAA7B;AAHiC;AAAA;AAAA;;AAAA;AAAA;AAAA,cAIxByF,QAJwB;;AAK/B,cAAMC,WAAY,OAAOD,SAASE,MAAhB,KAA2B,QAA5B,GAAwCF,SAASE,MAAT,CAAgB3P,WAAhB,EAAxC,GAAwE,EAAzF;AACA,cAAM4P,SAAU,OAAOH,SAASG,MAAhB,KAA2B,QAA5B,GAAwCH,SAASG,MAAT,CAAgB5P,WAAhB,EAAxC,GAAwE,EAAvF;AACA,cAAM6P,SAASpH,OAAOqH,QAAP,CAAgBnD,IAAhB,CAAqB,UAACkD,MAAD;AAAA,mBAAYA,OAAOzP,EAAP,KAAcsP,QAA1B;AAAA,WAArB,CAAf;AACA,cAAIG,MAAJ,EAAY;AACV,gBAAME,gBAAgB/F,QAAQ4F,MAAR,CAAtB;AACA,gBAAIG,iBAAiBA,cAAc7L,MAAd,GAAuB,CAA5C,EAA+C;AAC7C,kBAAM8L,SAASD,cAAc,CAAd,CAAf;AACA,kBAAIF,OAAOI,aAAP,CAAqBD,MAArB,EAA6BR,aAAaI,MAAb,CAA7B,CAAJ,EAAwD;AACtDnH,uBAAO2B,OAAP,CAAeC,KAAf,CAAqB,mBAArB,EAA0C0F,aAA1C;AACA,uBAAKG,WAAL,CAAiBL,MAAjB,EAAyBG,MAAzB;AACA,uBAAK/D,WAAL,GAAmByD,QAAnB;AACA,uBAAKxD,WAAL,GAAmB0D,MAAnB;AACA,uBAAKtF,aAAL,CAAmB,wBAAc,sBAAa1D,eAA3B,EAA4C,EAACuJ,gBAAgBJ,aAAjB,EAA5C,CAAnB;AACA;AAAA,qBAAO;AAAP;AACD;AACF;AACF;AArB8B;;AAIjC,6BAAqBR,cAArB,8HAAqC;AAAA;;AAAA;AAkBpC;AAtBgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBjC9G,aAAO2B,OAAP,CAAegG,IAAf,CAAoB,yDAApB;AACA,aAAO,KAAP;AACD;;AAED;;;;;;;;;;gCAOYP,M,EAAwBG,M,EAAgB;AAClD,UAAI,KAAK9F,OAAT,EAAkB;AAChB,YAAI,KAAKA,OAAL,CAAa9J,EAAb,KAAoByP,OAAOzP,EAA/B,EAAmC;AACjC,eAAK8J,OAAL,CAAamG,OAAb,CAAqBL,MAArB,EAA6B,KAAKhH,OAAlC;AACD,SAFD,MAEO;AACL,eAAKkB,OAAL,CAAa8B,OAAb;AACA,eAAK9B,OAAL,GAAe2F,OAAOS,YAAP,CAAoBN,MAApB,EAA4B,KAAKhH,OAAjC,CAAf;AACD;AACF,OAPD,MAOO;AACL,aAAKkB,OAAL,GAAe2F,OAAOS,YAAP,CAAoBN,MAApB,EAA4B,KAAKhH,OAAjC,CAAf;AACD;AACF;;AAED;;;;;;;;mCAKqB;AAAA;;AACnB,UAAI,KAAKkB,OAAT,EAAkB;AAChB2E,eAAOC,IAAP,uBAAyBC,OAAzB,CAAiC,UAACwB,UAAD,EAAgB;AAC/C,iBAAKrH,aAAL,CAAmBtF,MAAnB,CAA0B,OAAKsG,OAA/B,EAAwC,qBAAYqG,UAAZ,CAAxC,EAAiE,UAAC9M,KAAD,EAAsB;AACrF,mBAAO,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAP;AACD,WAFD;AAGD,SAJD;AAKA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsG,OAA/B,EAAwC,sBAAa9D,mBAArD,EAA0E,UAAC3C,KAAD,EAAsB;AAC9F,iBAAK+M,gBAAL,CAAsB/M,MAAM9C,OAAN,CAAc8P,kBAApC;AACA,iBAAO,OAAKnG,aAAL,CAAmB7G,KAAnB,CAAP;AACD,SAHD;AAIA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsG,OAA/B,EAAwC,sBAAa7D,mBAArD,EAA0E,UAAC5C,KAAD,EAAsB;AAC9F,iBAAK+M,gBAAL,CAAsB/M,MAAM9C,OAAN,CAAc+P,kBAApC;AACA,iBAAO,OAAKpG,aAAL,CAAmB7G,KAAnB,CAAP;AACD,SAHD;AAIA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsG,OAA/B,EAAwC,sBAAa5D,kBAArD,EAAyE,UAAC7C,KAAD,EAAsB;AAC7F,iBAAK+M,gBAAL,CAAsB/M,MAAM9C,OAAN,CAAc6M,iBAApC;AACA,iBAAO,OAAKlD,aAAL,CAAmB7G,KAAnB,CAAP;AACD,SAHD;AAIA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsG,OAA/B,EAAwC,sBAAa3D,gBAArD,EAAuE,UAAC9C,KAAD;AAAA,iBAAsB,OAAKkN,YAAL,CAAkBlN,KAAlB,CAAtB;AAAA,SAAvE;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsG,OAA/B,EAAwC,sBAAazD,gBAArD,EAAuE,UAAChD,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAAvE;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,IAA1B,EAAgC,qBAAYyB,IAA5C,EAAkD,KAAKuL,OAAL,CAAajF,IAAb,CAAkB,IAAlB,CAAlD;AACA,aAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,IAA1B,EAAgC,qBAAYmB,KAA5C,EAAmD,KAAK8L,QAAL,CAAclF,IAAd,CAAmB,IAAnB,CAAnD;AACD;AACF;;AAED;;;;;;;;4CAK8B;AAC5B,UAAI,KAAK3C,OAAL,CAAaiC,QAAjB,EAA2B;AACzB,YAAI,OAAO,KAAKjC,OAAL,CAAaiC,QAAb,CAAsB6F,MAA7B,KAAwC,QAA5C,EAAsD;AACpD,eAAKA,MAAL,GAAc,KAAK9H,OAAL,CAAaiC,QAAb,CAAsB6F,MAApC;AACD;AACD,YAAI,OAAO,KAAK9H,OAAL,CAAaiC,QAAb,CAAsB8F,KAA7B,KAAuC,SAA3C,EAAsD;AACpD,eAAKA,KAAL,GAAa,KAAK/H,OAAL,CAAaiC,QAAb,CAAsB8F,KAAnC;AACD;AACD,YAAI,OAAO,KAAK/H,OAAL,CAAaiC,QAAb,CAAsB+F,WAA7B,KAA6C,SAAjD,EAA4D;AAC1D,eAAKA,WAAL,GAAmB,KAAKhI,OAAL,CAAaiC,QAAb,CAAsB+F,WAAzC;AACD;AACD,YAAI,KAAKhI,OAAL,CAAaiC,QAAb,CAAsBgG,OAAtB,KAAkC,MAAtC,EAA8C;AAC5C;;;;;;AAMA,cAAI,CAAC,KAAKjI,OAAL,CAAac,OAAb,CAAqBoH,GAA1B,EAA+B;AAC7B,iBAAKhG,IAAL;AACD;AACF;AACD,YAAI,KAAKiG,YAAL,EAAJ,EAAyB;AACvB,eAAK1F,IAAL;AACD;AACF;AACF;;AAED;;;;;;;;mCAKyB;AACvB,UAAI,CAAC,KAAKzC,OAAL,CAAaiC,QAAb,CAAsBmG,QAA3B,EAAqC;AACnC,eAAO,KAAP;AACD;AACD,UAAIC,SAAS,KAAKxI,IAAL,CAAUwI,MAAV,CAAiB3Q,IAA9B;AACA,UAAI4Q,KAAK,KAAKzI,IAAL,CAAUyI,EAAV,CAAatC,IAAtB;AACA,UAAIqC,MAAJ,EAAY;AACV,eAAQC,OAAO,KAAR,GAAiB,KAAKP,KAAL,IAAc,KAAKC,WAApC,GAAkD,KAAKD,KAA9D;AACD;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;;4BAKc;AAAA;;AACZ,UAAI,KAAK7G,OAAL,CAAaqH,GAAjB,EAAsB;AACpB,YAAI,KAAKlF,MAAL,MAAiB,CAAC,KAAKmF,KAAL,EAAtB,EAAoC;AAClC,eAAKjF,cAAL;AACD;AACD,aAAKrC,OAAL,CAAauB,IAAb;AACD,OALD,MAKO;AACL,aAAKP,IAAL;AACA,aAAKuG,KAAL,GAAatG,IAAb,CAAkB,YAAM;AACtB,iBAAKjB,OAAL,CAAauB,IAAb;AACD,SAFD;AAGD;AACF;;AAED;;;;;;;;6BAKe;AACb,WAAKvB,OAAL,CAAa0B,KAAb;AACD;;AAED;;;;;;;;8BAKgB;AACd,UAAI,KAAK7C,UAAT,EAAqB;AACnB,aAAKA,UAAL,GAAkB,KAAlB;AACA,aAAKuB,aAAL,CAAmB,wBAAc,sBAAa3D,UAA3B,CAAnB;AACA,aAAKwC,cAAL,CAAoBuI,IAApB;AACD;AACF;;AAED;;;;;;;;+BAKiB;AACf,UAAI,CAAC,KAAKC,MAAV,EAAkB;AAChB,aAAK9F,MAAL;AACD;AACF;;AAED;;;;;;;;6BAKe;AACb,WAAKD,KAAL;AACA,WAAKzC,cAAL,CAAoByI,KAApB;AACA,WAAKxI,aAAL,CAAmBwI,KAAnB;AACA,WAAKvI,cAAL,CAAoBuI,KAApB;AACA,WAAK1I,aAAL,CAAmB9F,SAAnB;AACA,WAAKuF,eAAL,GAAuB,EAAvB;AACA,WAAKG,OAAL,GAAe,EAAf;AACA,WAAKC,UAAL,GAAkB,IAAlB;AACA,WAAKkD,WAAL,GAAmB,EAAnB;AACA,WAAKC,WAAL,GAAmB,EAAnB;AACA,WAAK1C,mBAAL;AACD;;AAED;;;;;;;;;;AASA;;AAEA;;AAEA;;;;;;;qCAOiB9I,I,EAA6B;AAC5C,aAAO,CAACA,IAAD,GAAQ,KAAKoI,OAAb,GAAuB,KAAKA,OAAL,CAAa+I,MAAb,CAAoB,UAACtP,KAAD,EAAkB;AAClE,YAAI7B,SAAS,qBAAWgM,KAAxB,EAA+B;AAC7B,iBAAOnK,qCAAP;AACD,SAFD,MAEO,IAAI7B,SAAS,qBAAWmM,KAAxB,EAA+B;AACpC,iBAAOtK,qCAAP;AACD,SAFM,MAEA,IAAI7B,SAAS,qBAAWqM,IAAxB,EAA8B;AACnC,iBAAOxK,oCAAP;AACD,SAFM,MAEA;AACL,iBAAO,IAAP;AACD;AACF,OAV6B,CAA9B;AAWD;;AAED;;;;;;;;;;qCAOiBA,K,EAAoB;AACnC,UAAI7B,aAAJ;AACA,UAAI6B,qCAAJ,EAAiC;AAC/B7B,eAAO,qBAAWgM,KAAlB;AACD,OAFD,MAEO,IAAInK,qCAAJ,EAAiC;AACtC7B,eAAO,qBAAWmM,KAAlB;AACD,OAFM,MAEA,IAAItK,oCAAJ,EAAgC;AACrC7B,eAAO,qBAAWqM,IAAlB;AACD;AACD,UAAIrM,IAAJ,EAAU;AACR,YAAIsB,SAAS,KAAK8P,SAAL,CAAepR,IAAf,CAAb;AACA,aAAK,IAAIuD,IAAI,CAAb,EAAgBA,IAAIjC,OAAOkC,MAA3B,EAAmCD,GAAnC,EAAwC;AACtCjC,iBAAOiC,CAAP,EAAU5D,MAAV,GAAmBkC,MAAM/B,KAAN,KAAgByD,CAAnC;AACD;AACF;AACF;;AAED;;;;;;;;;iCAMaR,K,EAAwB;AACnCgF,aAAO2B,OAAP,CAAeC,KAAf,CAAqB,kBAArB,EAAyC5G,MAAM9C,OAAN,CAAcoR,IAAvD;AACA,WAAKpJ,eAAL,GAAuBlF,MAAM9C,OAAN,CAAcoR,IAArC;AACA,WAAKpE,yBAAL;AACA,WAAKP,kBAAL,CAAwB,KAAKzE,eAA7B;AACD;;AAED;;;;;;;;gDAKkC;AAChC,UAAMqJ,aAAa,KAAKrJ,eAAxB;AACA,UAAMxI,WAAW,KAAKyI,oBAAtB;AACA,WAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAI+N,WAAW9N,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,YAAIgO,MAAMD,WAAW/N,CAAX,CAAV;AACA,aAAK,IAAI+K,IAAT,IAAiB7O,QAAjB,EAA2B;AACzB8R,cAAIjD,IAAJ,IAAY7O,SAAS6O,IAAT,CAAZ;AACD;AACF;AACF;;AAED;;;;;;;;;uCAMmB+C,I,EAAwB;AACzC,UAAI,KAAKG,cAAL,KAAwBC,SAA5B,EAAuC;AACrC,aAAKD,cAAL,GAAsB,WAAIhE,aAAJ,CAAkB,KAAlB,CAAtB;AACA,mBAAIC,YAAJ,CAAiB,KAAK+D,cAAtB,EAAsC7J,oBAAtC;AACA,mBAAImG,WAAJ,CAAgB,KAAK1C,GAArB,EAA0B,KAAKoG,cAA/B;AACD;AACD,yCAAYlR,MAAZ,EAAoB+Q,IAApB,EAA0B,KAAKG,cAA/B;AACD;;AAED;;;;;;;;;6CAM+B;AAC7B,UAAM7E,aAAa,KAAKyE,SAAL,CAAe,qBAAW/E,IAA1B,CAAnB;AACA,UAAIM,cAAcA,WAAWnJ,MAA7B,EAAqC;AACnC,aAAK4E,OAAL,CAAanG,IAAb,CAAkB,wBAAc;AAC9BtC,kBAAQ,KADsB;AAE9BG,iBAAO6M,WAAWnJ,MAFY;AAG9BvC,gBAAM,WAHwB;AAI9BrB,iBAAO,KAJuB;AAK9BC,oBAAUiI;AALoB,SAAd,CAAlB;AAOD;AACF;;AAED;;;;;;;;wCAK0B;AACxB,UAAM4J,eAAe,KAAKC,eAAL,EAArB;AACA,UAAMC,iBAAiB,KAAK5J,MAAL,CAAYuC,QAAnC;AACA,UAAMsH,eAAuB,KAAK/F,gBAAL,CAAsB,qBAAWO,IAAjC,EAAuCJ,IAAvC,CAA4C;AAAA,eAAS,oBAAU6F,YAAV,CAAuBhK,GAAvB,EAA4BjG,MAAMhC,QAAlC,CAAT;AAAA,OAA5C,CAA7B;;AAEA,WAAK2M,aAAL;;AAEA,WAAKuF,gBAAL,CAAsB,qBAAW1F,IAAjC,EAAuC,KAAK2F,YAAL,CAAkBJ,eAAeK,YAAjC,EAA+CP,aAAatF,IAA5D,EAAkE,qBAAWC,IAA7E,CAAvC,EAA2HwF,YAA3H;AACA,WAAKE,gBAAL,CAAsB,qBAAW5F,KAAjC,EAAwCyF,eAAeM,aAAvD,EAAsER,aAAaxF,KAAnF;AACD;;AAED;;;;;;;;;;;iCAQaiG,kB,EAA4BC,Y,EAAsBpS,I,EAAsB;AACnF,UAAIH,WAAWsS,kBAAf;AACA,UAAItS,aAAagI,IAAjB,EAAuB;AACrB,YAAMvG,SAAS,KAAKwK,gBAAL,CAAsB9L,IAAtB,CAAf;AACA,YAAMqS,cAAsB/Q,OAAO2K,IAAP,CAAY;AAAA,iBAAS,gBAAM6F,YAAN,CAAmB,cAAOjS,QAA1B,EAAoCgC,MAAMhC,QAA1C,CAAT;AAAA,SAAZ,CAA5B;AACA,YAAIwS,WAAJ,EAAiB;AACfxS,qBAAWwS,YAAYxS,QAAvB;AACD,SAFD,MAEO,IAAIuS,gBAAgBA,aAAavS,QAAb,KAA0BiI,GAA9C,EAAmD;AACxDjI,qBAAWuS,aAAavS,QAAxB;AACD,SAFM,MAEA,IAAIyB,UAAUA,OAAOkC,MAAP,GAAgB,CAA9B,EAAiC;AACtC3D,qBAAWyB,OAAO,CAAP,EAAUzB,QAArB;AACD;AACF;AACD,aAAOA,QAAP;AACD;;AAED;;;;;;;;;;;qCAQiBG,I,EAAcH,Q,EAAkBuS,Y,EAA4B;AAC3E,UAAIvS,QAAJ,EAAc;AACZ,YAAMgC,SAAgB,KAAKiK,gBAAL,CAAsB9L,IAAtB,EAA4BiM,IAA5B,CAAiC;AAAA,iBAAS,gBAAM6F,YAAN,CAAmBjS,QAAnB,EAA6BgC,MAAMhC,QAAnC,CAAT;AAAA,SAAjC,CAAtB;AACA,YAAIgC,MAAJ,EAAW;AACT,eAAKyQ,WAAL,CAAiBzQ,MAAjB;AACD;AACF,OALD,MAKO,IAAIuQ,YAAJ,EAAkB;AACvB,aAAKE,WAAL,CAAiBF,YAAjB;AACD;AACF;;AAED;;AAEA;;AAEA;;AAEA;;;;;;;;sBAz6BgBG,E,EAAkB;AAChC,UAAI,KAAK/I,OAAT,EAAkB;AAChB,YAAI,WAAIgJ,QAAJ,CAAaD,EAAb,CAAJ,EAAsB;AACpB,cAAIE,YAAYF,EAAhB;AACA,cAAIA,KAAK,CAAT,EAAY;AACVE,wBAAY,CAAZ;AACD;AACD,cAAIA,YAAY,KAAKjJ,OAAL,CAAakJ,QAA7B,EAAuC;AACrCD,wBAAY,KAAKjJ,OAAL,CAAakJ,QAAzB;AACD;AACD,eAAKlJ,OAAL,CAAamJ,WAAb,GAA2BF,SAA3B;AACD;AACF;AACF;;AAED;;;;;;wBAK2B;AACzB,UAAI,KAAKjJ,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAamJ,WAApB;AACD;AACF;;AAED;;;;;;;;wBAKwB;AACtB,UAAI,KAAKnJ,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAakJ,QAApB;AACD;AACF;;AAED;;;;;;;;;sBAMWE,G,EAAmB;AAC5B,UAAI,KAAKpJ,OAAT,EAAkB;AAChB,YAAI,WAAIqJ,OAAJ,CAAYD,GAAZ,KAAqBA,QAAQ,CAA7B,IAAoCA,QAAQ,CAAhD,EAAoD;AAClD,cAAIE,aAAaF,GAAjB;AACA,cAAIE,aAAa,CAAjB,EAAoB;AAClBA,yBAAa,CAAb;AACD;AACD,cAAIA,aAAa,CAAjB,EAAoB;AAClBA,yBAAa,CAAb;AACD;AACD,eAAKtJ,OAAL,CAAa4G,MAAb,GAAsB0C,UAAtB;AACD;AACF;AACF;;AAED;;;;;;wBAKsB;AACpB,UAAI,KAAKtJ,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAa4G,MAApB;AACD;AACF;;AAED;;;;;;;;wBAKuB;AACrB,UAAI,KAAK5G,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAayH,MAApB;AACD;AACF;;AAED;;;;;;;;wBAKwB;AACtB,UAAI,KAAKzH,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAauJ,OAApB;AACD;AACF;;AAED;;;;;;;;;sBAMgBzC,W,EAA4B;AAC1C,UAAI,KAAK9G,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa8G,WAAb,GAA2BA,WAA3B;AACD;AACF;;AAED;;;;;;;wBAM4B;AAC1B,UAAI,KAAK9G,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAa8G,WAApB;AACD;AACF;;AAED;;;;;;;;;sBAMU0C,I,EAAqB;AAC7B,UAAI,KAAKxJ,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa6G,KAAb,GAAqB2C,IAArB;AACA,aAAKpJ,aAAL,CAAmB,wBAAc,sBAAanE,WAA3B,EAAwC,EAACuN,MAAMA,IAAP,EAAxC,CAAnB;AACD;AACF;;AAED;;;;;;wBAKsB;AACpB,UAAI,KAAKxJ,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAa6G,KAApB;AACD;AACF;;AAED;;;;;;;;wBAKmB;AACjB,UAAI,KAAK7G,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAaqH,GAApB;AACD;AACF;;AAED;;;;;;;;wBAKmC;AACjC,aAAO;AACLtP,eAAO,KAAK6J,GAAL,CAAS6H,WADX;AAELzR,gBAAQ,KAAK4J,GAAL,CAAS8H;AAFZ,OAAP;AAID;;AAED;;;;;;;wBAIqB;AACnB,aAAO,KAAKzK,cAAL,CAAoBoI,GAA3B;AACD;;AAED;;;;;;;sBAIiBsC,I,EAAoB;AACnC,UAAI,KAAK3J,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa4J,YAAb,GAA4BD,IAA5B;AACD;AACF;;AAED;;;;;wBAI4B;AAC1B,UAAI,KAAK3J,OAAT,EAAkB;AAChB,eAAO,KAAKA,OAAL,CAAa4J,YAApB;AACD;AACF;;AAED;;;;;;;wBAI0B;AACxB,aAAO,KAAK7H,WAAZ;AACD;;AAED;;;;;;;wBAI0B;AACxB,aAAO,KAAKC,WAAZ;AACD;;AAED;;;;;;;;wBAKmB;AACjB,aAAO,KAAKrD,IAAZ;AACD;;AAED;;;;;;;;wBAK2B;AACzB,aAAO,WAAIe,SAAJ,CAAc,EAAd,EAAkB,KAAKZ,OAAvB,CAAP;AACD;;AAED;;;;;;;;;sBAMc+K,S,EAAyB;AACrC,WAAK/K,OAAL,CAAagL,OAAb,GAAuB,KAAKhL,OAAL,CAAagL,OAAb,IAAwB,EAAC5T,IAAI,EAAL,EAA/C;AACA,WAAK4I,OAAL,CAAagL,OAAb,CAAqB5T,EAArB,GAA0B2T,SAA1B;AACD;;;sBAyJaE,K,EAAwB;AACpC,UAAI,EAAEA,oCAAF,CAAJ,EAAmC;AACjC,cAAM,IAAIC,KAAJ,CAAU,qCAAV,CAAN;AACD;AACD,UAAIC,UAAU,WAAIC,cAAJ,CAAmBhM,uBAAnB,CAAd;AACA,UAAI,CAAC+L,OAAL,EAAc;AACZA,kBAAU,WAAIjG,aAAJ,CAAkB,OAAlB,CAAV;AACA,mBAAII,YAAJ,CAAiB6F,OAAjB,EAA0B,IAA1B,EAAgC/L,uBAAhC;AACA,mBAAIoG,WAAJ,CAAgB6F,SAASC,IAAzB,EAA+BH,OAA/B;AACD;AACD,UAAII,QAAQJ,QAAQI,KAApB;;AAEA,aAAOA,MAAMC,QAAN,CAAetQ,MAAtB,EAA8B;AAC5BqQ,cAAME,UAAN,CAAiB,CAAjB;AACD;;AAED,UAAI;AACF,YAAI,KAAKzL,OAAL,CAAaiC,QAAb,CAAsByJ,kBAA1B,EAA8C;AAC5CH,gBAAMI,UAAN,YAA0BxM,iBAA1B,gBAAsD8L,MAAMW,KAAN,EAAtD,SAAyE,CAAzE;AACD,SAFD,MAEO;AACLL,gBAAMI,UAAN,OAAqB,KAAKvG,SAA1B,UAAwC/F,oBAAxC,6BAAoF4L,MAAMW,KAAN,EAApF,SAAuG,CAAvG;AACD;AACD,aAAKrL,UAAL,GAAkB0K,KAAlB;AACD,OAPD,CAOE,OAAO/T,CAAP,EAAU;AACVuI,eAAO2B,OAAP,CAAeoB,KAAf,CAAqBtL,EAAE2U,OAAvB;AACD;AACF;;AAED;;;;;wBAI4B;AAC1B,aAAO,KAAKtL,UAAL,CAAgBuL,KAAhB,EAAP;AACD;;;wBA0gBwC;AACvC;AACD;;AAED;;;;;;;;wBAKkC;AAChC;AACD;;AAED;;;;;;;;wBAKyC;AACvC;AACD;;AAED;;;;;;;;wBAKyC;AACvC;AACD;;AAED;;;;wBAzNoC;AAClC,aAAO,WAAIC,QAAJ,wBAAP;AACD;;;;;;AAthCkBtM,M,CAOZ2B,O,GAAe,qBAAc4K,SAAd,CAAwB,QAAxB,C;AAPHvM,M,CAcZqH,Q,GAAkC,gB;kBAdtBrH,M;;;;;;;;;;;;;;;;;ACrFrB;;;;;;IAMMrJ,Q;AAGJ,sBAAc;AAAA;;AACZ;AACA,SAAK6V,IAAL,GAAY,IAAIC,GAAJ,EAAZ;AACD;;AAED;;;;;;;;;;yBAMKC,G,EAAazV,K,EAAgB;AAChC,UAAI,KAAKuV,IAAL,CAAUG,GAAV,CAAcD,GAAd,CAAJ,EAAwB;AACtB,YAAIpR,OAAO,KAAKkR,IAAL,CAAUjR,GAAV,CAAcmR,GAAd,CAAX;AACA,YAAIE,MAAMC,OAAN,CAAcvR,IAAd,CAAJ,EAAyB;AACvBA,eAAKpB,IAAL,CAAUjD,KAAV;AACA,eAAKuV,IAAL,CAAUM,GAAV,CAAcJ,GAAd,EAAmBpR,IAAnB;AACD;AACF,OAND,MAMO;AACL,aAAKkR,IAAL,CAAUM,GAAV,CAAcJ,GAAd,EAAmB,CAACzV,KAAD,CAAnB;AACD;AACF;;AAED;;;;;;;;;wBAMIyV,G,EAAaK,M,EAAmB;AAClC,WAAKP,IAAL,CAAUM,GAAV,CAAcJ,GAAd,EAAmBK,MAAnB;AACD;;AAED;;;;;;;;wBAKIL,G,EAAsB;AACxB,aAAO,KAAKF,IAAL,CAAUG,GAAV,CAAcD,GAAd,CAAP;AACD;;AAED;;;;;;;;wBAKIA,G,EAAuB;AACzB,UAAIpR,OAAO,KAAKkR,IAAL,CAAUjR,GAAV,CAAcmR,GAAd,CAAX;AACA;AACA;AACA,aAAOpR,OAAOA,KAAK0R,KAAL,EAAP,GAAsB,EAA7B;AACD;;AAED;;;;;;;6BAIc;AACZ,UAAI1R,OAAY,EAAhB;AADY;AAAA;AAAA;;AAAA;AAEZ,6BAAkB,KAAKkR,IAAL,CAAUO,MAAV,EAAlB,8HAAsC;AAAA,cAA7B9V,KAA6B;;AACpCqE,iBAAOA,KAAK2R,MAAL,CAAYhW,KAAZ,CAAP;AACD;AAJW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKZ,aAAOqE,IAAP;AACD;;AAED;;;;;;;;;2BAMOoR,G,EAAazV,K,EAAgB;AAClC,UAAI,CAAC,KAAKuV,IAAL,CAAUG,GAAV,CAAcD,GAAd,CAAL,EAAyB;AACzB,UAAIpR,OAAO,KAAKkR,IAAL,CAAUjR,GAAV,CAAcmR,GAAd,CAAX;AACA,UAAIE,MAAMC,OAAN,CAAcvR,IAAd,CAAJ,EAAyB;AACvB,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIF,KAAKG,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpC,cAAIF,KAAKE,CAAL,KAAWvE,KAAf,EAAsB;AACpBqE,iBAAK4R,MAAL,CAAY1R,CAAZ,EAAe,CAAf;AACA,cAAEA,CAAF;AACD;AACF;AACF;AACF;;AAED;;;;AAIA;;;;2BACyB;AACvB,aAAO,KAAKgR,IAAL,CAAUnG,IAAV,EAAP;AACD;;AAGD;;;;;;;4BAIc;AACZ,WAAKmG,IAAL,CAAU3Q,KAAV;AACD;;;;;;kBAGYlF,Q;;;;;;;;;;;;;;;;;ACjHf;;;;IAIqBwW,c;;;;;;;;;AAOnB;;;;;6BAKSC,I,EAAsB;AAC7B,UAAIA,IAAJ,EAAU;AACRA;AACD;AACF;AAfD;;;;;;;;;;kBADmBD,c;;;;;;;;;;;;;;;ACLrB;;;;AACA;;AACA;;;;AACA;;;;;;;;AAEA;;;;;IAKqBE,U;;;;;AAmCnB;;;;;;;;;;AAdA;;;;;AAVA;;;;;AAVA;;;;iCA2CoB9G,I,EAAc+G,M,EAAiD;AAAA,UAAjCrN,MAAiC,uEAAhB,EAAgB;;AACjF,aAAO,IAAI,IAAJ,CAASsG,IAAT,EAAe+G,MAAf,EAAuBrN,MAAvB,CAAP;AACD;;AAED;;;;;;;;;AAtBA;;;;;;;;AAVA;;;;;AAVA;;;;;;;8BAkD0B;AACxB,YAAM,uBAAgB,mBAAYsN,IAAZ,CAAiBC,sBAAjC,EAAyD,WAAzD,EAAsEC,QAAtE,EAAN;AACD;;AAED;;;;;;;;;;;AAQA,sBAAYlH,IAAZ,EAA0B+G,MAA1B,EAA0CrN,MAA1C,EAA0D;AAAA;;AACxD,SAAKsG,IAAL,GAAYA,IAAZ;AACA,SAAK+G,MAAL,GAAcA,MAAd;AACA,SAAKI,YAAL,GAAoB,4BAApB;AACA,SAAKC,MAAL,GAAc,qBAAcpB,SAAd,CAAwB,WAAIqB,SAAJ,CAAc,KAAKrH,IAAnB,CAAxB,CAAd;AACA,SAAKtG,MAAL,GAAc,EAAd;AACA,eAAIkB,SAAJ,CAAc,KAAKlB,MAAnB,EAA2B,KAAK4N,WAAL,CAAiBC,aAA5C,EAA2D7N,MAA3D;AACD;;AAED;;;;;;;;;;8BAMU8N,I,EAAoB;AAC5B,UAAIA,IAAJ,EAAU;AACR,eAAO,WAAIzB,QAAJ,CAAa,KAAKrM,MAAL,CAAY8N,IAAZ,CAAb,CAAP;AACD;AACD,aAAO,WAAIzB,QAAJ,CAAa,KAAKrM,MAAlB,CAAP;AACD;;AAED;;;;;;;;;iCAMa+N,M,EAAsB;AACjC,iBAAI7M,SAAJ,CAAc,KAAKlB,MAAnB,EAA2B+N,MAA3B;AACD;;AAED;;;;;;;;;;8BAOgB,CACf;;AAED;;;;;;;;;;4BAOc,CACb;;AAED;;;;;;;;8BAKkB;AAChB,aAAO,KAAKzH,IAAZ;AACD;;AAED;;;;;;;;;kCAMcA,I,EAAcrO,O,EAAoB;AAC9C,WAAKyV,MAAL,CAAY/L,KAAZ,CAAkB,iBAAiB2E,IAAnC,EAAyCrO,OAAzC;AACA,WAAKoV,MAAL,CAAYzL,aAAZ,CAA0B,wBAAc0E,IAAd,EAAoBrO,OAApB,CAA1B;AACD;;;;;;AA1IkBmV,U,CAiCZS,a,GAAwB,E;kBAjCZT,U;;;;;;;;;;;;;;;ACVrB;;;;AACA;;;;;;;;AAEA;;;;;;;;;;IAUMY,e;AAIJ,6BAAc;AAAA;;AACZ;;;AAGA,SAAKC,UAAL,GAAkB,wBAAlB;;AAEA;;;;AAIA,SAAKC,cAAL,GAAsB,IAAtB;AACD;;AAED;;;;;;;;;;;;;;;qCAWiBlW,I,EAAc6C,Q,EAAwB;AACrD,WAAKoT,UAAL,CAAgBhU,IAAhB,CAAqBjC,IAArB,EAA2B6C,QAA3B;AACD;;AAED;;;;;;;;;;;;;;wCAWoB7C,I,EAAc6C,Q,EAAwB;AACxD,WAAKoT,UAAL,CAAgBxS,MAAhB,CAAuBzD,IAAvB,EAA6B6C,QAA7B;AACD;;AAED;;;;;;;;;;;kCAQcE,K,EAAkB;AAC9B;AACA;AACA;AACA;;AAEA,UAAIM,OAAO,KAAK4S,UAAL,CAAgB3S,GAAhB,CAAoBP,MAAM/C,IAA1B,KAAmC,EAA9C;;AAEA,WAAK,IAAIuD,IAAI,CAAb,EAAgBA,IAAIF,KAAKG,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpC;AACAR,cAAMnC,MAAN,GAAe,KAAKsV,cAApB;AACAnT,cAAMpC,aAAN,GAAsB,KAAKuV,cAA3B;;AAEA,YAAIrT,WAAWQ,KAAKE,CAAL,CAAf;AACA,YAAI;AACF,cAAIV,SAASsT,WAAb,EAA0B;AACxBtT,qBAASsT,WAAT,CAAqBpT,KAArB;AACD,WAFD,MAEO;AACLF,qBAASI,IAAT,CAAc,IAAd,EAAoBF,KAApB;AACD;AACF,SAND,CAME,OAAOqT,SAAP,EAAkB;AAClB;AACA;AACA;AACA;AACD;;AAED,YAAIrT,MAAMlC,OAAV,EAAmB;AACjB;AACD;AACF;;AAED,aAAOkC,MAAM3C,gBAAb;AACD;;;;;;AAGH;;;;;;kBAMe4V,e;;;;;;;;;;;;;;AC9Gf;;;AACA;;AACA;;;;AACA;;;;;;IAEqBK,e;;;;;;;+BAKDC,O,EAAkC;AAClD,YAAM,uBAAgB,mBAAYhB,IAAZ,CAAiBC,sBAAjC,EAAyD,mBAAzD,EAA8EC,QAA9E,EAAN;AACD;;;qCAEoC;AACnC,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,uBAAzD,EAAkFC,QAAlF,EAAN;AACD;;;8BAEsB,CACtB;;;;;;AAdkBa,e,CACZ/B,S,GAAiB,qBAAcA,S;AADnB+B,e,CAEZE,U;AAFYF,e,CAGZG,S;kBAHYH,e;;;;;;;;;;;;;;;ACJrB;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;AARA;;;IAUqBI,sB;;;;;;;AAmCnB;;;;;;;;AArBA;;;;;;;AAOA;;;;;;;AAOA;;;;;;AA3BA;;;;kCAwC8B;AAC5B,aAAO,IAAP;AACD;;AAED;;;;;;;;AAtCA;;;;;;;;AA4CA,kCAAYC,YAAZ,EAA4CpH,MAA5C,EAAiF;AAAA,QAArBtH,MAAqB,uEAAJ,EAAI;;AAAA;;AAAA;;AAE/E,UAAK2O,aAAL,GAAqBD,YAArB;AACA,UAAKE,UAAL,GAAkBtH,MAAlB;AACA,UAAKhH,OAAL,GAAeN,MAAf;AAJ+E;AAKhF;;AAED;;;;;;;;;8BAKsB;AACpB,WAAK4O,UAAL,GAAkB,IAAlB;AACA,WAAKtO,OAAL,GAAe,IAAf;AACA,aAAO3F,QAAQC,OAAR,EAAP;AACD;;AAED;;;;;;;;;oCAMgBf,K,EAAoB;AAClC,UAAIA,qCAAJ,EAAiC;AAC/B,aAAKgV,QAAL,CAAcJ,uBAAuBK,YAAvB,CAAoCpR,mBAAlD,EAAuE,EAACqK,oBAAoBlO,KAArB,EAAvE;AACD,OAFD,MAEO,IAAIA,qCAAJ,EAAiC;AACtC,aAAKgV,QAAL,CAAcJ,uBAAuBK,YAAvB,CAAoCnR,mBAAlD,EAAuE,EAACqK,oBAAoBnO,KAArB,EAAvE;AACD,OAFM,MAEA,IAAIA,oCAAJ,EAAgC;AACrC,aAAKgV,QAAL,CAAcJ,uBAAuBK,YAAvB,CAAoClR,kBAAlD,EAAsE,EAACkH,mBAAmBjL,KAApB,EAAtE;AACD;AACF;;AAED;;;;;;;;;6BAMSyM,I,EAAcrO,O,EAAuB;AAC5C,WAAK2J,aAAL,CAAmB,wBAAc0E,IAAd,EAAoBrO,OAApB,CAAnB;AACD;;AAED;;;;2BAMwB;AACtB,YAAM,uBAAgB,mBAAYqV,IAAZ,CAAiBC,sBAAjC,EAAyD,MAAzD,EAAiEC,QAAjE,EAAN;AACD;;;qCAEgBuB,U,EAA8B;AAC7C,YAAM,uBAAgB,mBAAYzB,IAAZ,CAAiBC,sBAAjC,EAAyD,kBAAzD,EAA6EC,QAA7E,EAAN;AACD;;;qCAEgBwB,U,EAA8B;AAC7C,YAAM,uBAAgB,mBAAY1B,IAAZ,CAAiBC,sBAAjC,EAAyD,kBAAzD,EAA6EC,QAA7E,EAAN;AACD;;;oCAEe3I,S,EAA4B;AAC1C,YAAM,uBAAgB,mBAAYyI,IAAZ,CAAiBC,sBAAjC,EAAyD,iBAAzD,EAA4EC,QAA5E,EAAN;AACD;;;oCAEqB;AACpB,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,eAAzD,EAA0EC,QAA1E,EAAN;AACD;;;4CAE6B;AAC5B,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,uBAAzD,EAAkFC,QAAlF,EAAN;AACD;;;+CAEmC;AAClC,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,0BAAzD,EAAqFC,QAArF,EAAN;AACD;;;qCAEsB;AACrB,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,gBAAzD,EAA2EC,QAA3E,EAAN;AACD;;;6BAEiB;AAChB,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,QAAzD,EAAmEC,QAAnE,EAAN;AACD;;;wBAEiB;AAChB,YAAM,uBAAgB,mBAAYF,IAAZ,CAAiBC,sBAAjC,EAAyD,SAAzD,EAAoEC,QAApE,EAAN;AACD;;AAED;;;;;;;;wBAK0B;AACxB,aAAO,KAAKmB,aAAL,CAAmBhE,WAA1B;AACD;;AAED;;;;;;;sBAMgBJ,E,EAAkB;AAChC,WAAKoE,aAAL,CAAmBhE,WAAnB,GAAiCJ,EAAjC;AACD;;AAED;;;;;;;;wBAKuB;AACrB,aAAO,KAAKoE,aAAL,CAAmBjE,QAA1B;AACD;;;gCAtEkBuE,Q,EAAkBnI,Y,EAAgC;AACnE,YAAM,uBAAgB,mBAAYwG,IAAZ,CAAiBC,sBAAjC,EAAyD,oBAAzD,EAA+EC,QAA/E,EAAN;AACD;;;;;;AAnGkBiB,sB,CAKZK,Y;AALYL,sB,CAYZnC,S,GAAsB,qBAAcA,S;kBAZxBmC,sB;;;;;;;;;;;;;;;;ACVrB;;;;AACA;;;;;;AAEA;;;;IAIqBS,mB;;;;;;;;;AAuBnB;;;;;;;;AAfA;;;;;;6BAsBgBC,kB,EAAsD;AACpE,UAAIA,kBAAJ,EAAwB;AACtB,YAAI,CAACD,oBAAoBE,oBAApB,CAAyCC,QAAzC,CAAkDF,kBAAlD,CAAL,EAA4E;AAC1ED,8BAAoBxN,OAApB,CAA4BC,KAA5B,eAA8CwN,mBAAmBzX,EAAjE;AACAwX,8BAAoBE,oBAApB,CAAyCnV,IAAzC,CAA8CkV,kBAA9C;AACD,SAHD,MAGO;AACLD,8BAAoBxN,OAApB,CAA4BC,KAA5B,eAA8CwN,mBAAmBzX,EAAjE;AACD;AACF;AACF;;AAED;;;;;;;;AA1BA;;;;;;;AAdA;;;;;;;;;+BA+CkByX,kB,EAAsD;AACtE,UAAIrX,QAAQoX,oBAAoBE,oBAApB,CAAyCE,OAAzC,CAAiDH,kBAAjD,CAAZ;AACA,UAAIrX,QAAQ,CAAC,CAAb,EAAgB;AACdoX,4BAAoBxN,OAApB,CAA4BC,KAA5B,oBAAmDwN,mBAAmBzX,EAAtE;AACAwX,4BAAoBE,oBAApB,CAAyCnC,MAAzC,CAAgDnV,KAAhD,EAAuD,CAAvD;AACD;AACF;;AAED;;;;;;;;;;;kCAQqBwP,M,EAAuD;AAAA,UAAvCR,YAAuC,uEAAf,IAAe;;AAC1EoI,0BAAoBK,yBAApB,CAA8CzI,YAA9C;AACA,UAAI0I,sBAAsBN,oBAAoBE,oBAA9C;AACA,UAAI9H,UAAUA,OAAOmI,QAArB,EAA+B;AAC7B,aAAK,IAAIlU,IAAI,CAAb,EAAgBA,IAAIiU,oBAAoBhU,MAAxC,EAAgDD,GAAhD,EAAqD;AACnD,cAAIiU,oBAAoBjU,CAApB,EAAuBmU,WAAvB,CAAmCpI,OAAOmI,QAA1C,MAAwD,CAACnI,OAAOgH,OAAR,IAAmBkB,oBAAoBjU,CAApB,EAAuBoU,UAAvB,CAAkCrI,OAAOgH,OAAzC,CAA3E,CAAJ,EAAmI;AACjIY,gCAAoBU,gBAApB,GAAuCJ,oBAAoBjU,CAApB,CAAvC;AACA2T,gCAAoBxN,OAApB,CAA4BC,KAA5B,2BAA0DuN,oBAAoBU,gBAApB,CAAqClY,EAA/F;AACA,mBAAO,IAAP;AACD;AACF;AACF;AACD,aAAO,KAAP;AACD;;AAED;;;;;;;;;8CAMiCoP,Y,EAA6B;AAC5DoI,0BAAoBE,oBAApB,GACEF,oBAAoBE,oBAApB,CAAyCjG,MAAzC,CAAgD;AAAA,eAAO0G,IAAInY,EAAJ,KAAW,eAAlB;AAAA,OAAhD,CADF;AAEA,UAAIoP,YAAJ,EAAkB;AAChBoI,4BAAoBE,oBAApB,CAAyCU,OAAzC;AACD,OAFD,MAEO;AACLZ,4BAAoBE,oBAApB,CAAyCnV,IAAzC;AACD;AACF;;AAED;;;;;;;;;;;;0CAS6ByU,Y,EAAgCpH,M,EAAgBtH,M,EAA4C;AACvH,UAAI0O,gBAAgBpH,MAAhB,IAA0BtH,MAA9B,EAAsC;AACpC,YAAI,CAACkP,oBAAoBU,gBAAzB,EAA2C;AACzCV,8BAAoB3H,aAApB,CAAkCD,MAAlC,EAA0C,IAA1C;AACD;AACD,eAAO4H,oBAAoBU,gBAApB,GAAuCV,oBAAoBU,gBAApB,CAAqCG,aAArC,CAAmDrB,YAAnD,EAAiEpH,MAAjE,EAAyEtH,MAAzE,CAAvC,GAA0H,IAAjI;AACD;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;;8BAKuB;AACrBkP,0BAAoBU,gBAApB,GAAuC,IAAvC;AACD;;;;;;AAzHkBV,mB,CAOZxN,O,GAAe,qBAAc4K,SAAd,CAAwB,qBAAxB,C;AAPH4C,mB,CAcZE,oB,GAA0D,yB;AAd9CF,mB,CAqBZU,gB,GAAkD,I;kBArBtCV,mB;;;AA4HrB,IAAMc,6BAA6Bd,oBAAoBe,QAAvD;QACQD,0B,GAAAA,0B;;;;;;;;;;;;;;;;ACpIR;;;;AACA;;AACA;;;;;;;;AAEA;;;;;AAKA,IAAMtC,SAAS,qBAAcpB,SAAd,CAAwB,eAAxB,CAAf;;AAEA;;;;IAGqB4D,a;;;;SAenBC,Q,GAAoC,IAAI3D,GAAJ,E;;AAdpC;;;;;;;;AAQA;;;;;;;;;;;;AA4CA;;;;;;;;yBAQKlG,I,EAAc+G,M,EAA8C;AAAA,UAA9BrN,MAA8B,uEAAb,EAAa;;AAC/D,UAAI,CAACkQ,cAAcE,SAAd,CAAwB1D,GAAxB,CAA4BpG,IAA5B,CAAL,EAAwC;AACtC,cAAM,uBAAgB,mBAAYgH,IAAZ,CAAiB+C,qBAAjC,EAAwD/J,IAAxD,EAA8DkH,QAA9D,EAAN;AACD;AACD,UAAI8C,cAAcJ,cAAcE,SAAd,CAAwB9U,GAAxB,CAA4BgL,IAA5B,CAAlB;AACA,UAAIgK,eAAeA,YAAYC,OAAZ,EAAnB,EAA0C;AACxC,aAAKJ,QAAL,CAActD,GAAd,CAAkBvG,IAAlB,EAAwBgK,YAAYE,YAAZ,CAAyBlK,IAAzB,EAA+B+G,MAA/B,EAAuCrN,MAAvC,CAAxB;AACA0N,eAAO/L,KAAP,cAAwB2E,IAAxB;AACA,eAAO,IAAP;AACD;AACDoH,aAAO/L,KAAP,cAAwB2E,IAAxB;AACA,aAAO,KAAP;AACD;;AAED;;;;;;;;8BAKgB;AACd,WAAK6J,QAAL,CAAc9J,OAAd,CAAsB,KAAKoK,QAAL,CAAcxN,IAAd,CAAmB,IAAnB,CAAtB;AACD;;AAED;;;;;;;;4BAKc;AACZ,WAAKkN,QAAL,CAAc9J,OAAd,CAAsB,UAACE,MAAD,EAAwB;AAC5CA,eAAO2C,KAAP;AACD,OAFD;AAGD;;AAED;;;;;;;;;;6BAOS3C,M,EAAoBD,I,EAAoB;AAC/CC,aAAOjD,OAAP;AACA,WAAK6M,QAAL,CAAcO,MAAd,CAAqBpK,IAArB;AACD;;AAED;;;;;;;;;wBAMIA,I,EAA2B;AAC7B,aAAO,KAAK6J,QAAL,CAAc7U,GAAd,CAAkBgL,IAAlB,CAAP;AACD;;;;;AAlGD;;;;;;;;;6BASgBA,I,EAAcqK,O,EAA4B;AACxD,UAAI,OAAOA,OAAP,KAAmB,UAAnB,IAAiCA,QAAQC,SAAR,qCAA4C,KAAjF,EAAwF;AACtF,cAAM,uBAAgB,mBAAYtD,IAAZ,CAAiBuD,iBAAjC,EAAoDrD,QAApD,EAAN;AACD;AACD,UAAI,CAAC0C,cAAcE,SAAd,CAAwB1D,GAAxB,CAA4BpG,IAA5B,CAAL,EAAwC;AACtC4J,sBAAcE,SAAd,CAAwBvD,GAAxB,CAA4BvG,IAA5B,EAAkCqK,OAAlC;AACAjD,eAAO/L,KAAP,cAAwB2E,IAAxB;AACA,eAAO,IAAP;AACD;AACDoH,aAAO/L,KAAP,cAAwB2E,IAAxB;AACA,aAAO,KAAP;AACD;;AAED;;;;;;;;;;+BAOkBA,I,EAAoB;AACpC,UAAI4J,cAAcE,SAAd,CAAwB1D,GAAxB,CAA4BpG,IAA5B,CAAJ,EAAuC;AACrC4J,sBAAcE,SAAd,CAAwBM,MAAxB,CAA+BpK,IAA/B;AACAoH,eAAO/L,KAAP,oBAA8B2E,IAA9B;AACD;AACF;;;;;;AAmEH;;;;;;;AAtHqB4J,a,CAQZE,S,GAAmC,IAAI5D,GAAJ,E;kBARvB0D,a;AA2HrB,IAAMY,iBAAiBZ,cAAcD,QAArC;QACQa,c,GAAAA,c;;;;;;;;;;;;;;;;;ACzIR;;;;;;;;;;;;IAYMC,S;;;;SAoGJC,Q,GAAmB,M;SAKnBC,U,GAAqBF,UAAUG,UAAV,CAAqBC,U;SAK1CC,S,GAA2BL,UAAUM,cAAV,CAAyBC,K;SAMpDC,W,GAAsBR,UAAUS,iBAAV,CAA4BC,M;SAKlDC,e,GAAiCX,UAAUM,cAAV,CAAyBM,K;SAK1DC,iB,GAA4Bb,UAAUS,iBAAV,CAA4BC,M;SAMxDI,Q,GAAiCd,UAAUe,UAAV,CAAqBC,I;;;AAlItD;;;;;;;AAYA;;;;;;;;AAiBA;;;;;;;AAYA;;;;;;;;;;;;;;;;AA2FA;;;;;;4BAMgB;AACd,UAAIC,aAA4B,EAAhC;;AAEAA,iBAAW/X,IAAX,CAAgB,kBAAkB,KAAKgX,UAAvC;AACAe,iBAAW/X,IAAX,CAAgB,gBAAgB,KAAK+W,QAArC;AACAgB,iBAAW/X,IAAX,CAAgB,YAAY8W,UAAUkB,OAAV,CAAkB,KAAKb,SAAvB,EAAkC,KAAKG,WAAvC,CAA5B;AACAS,iBAAW/X,IAAX,CAAgB,uBACd8W,UAAUkB,OAAV,CAAkB,KAAKP,eAAvB,EAAwC,KAAKE,iBAA7C,CADF;;AAGA;AACA;AACA,UAAIM,UAAyB,EAA7B;AACA,WAAK,IAAI3W,IAAI,CAAb,EAAgBA,IAAI,KAAKsW,QAAL,CAAcrW,MAAlC,EAA0CD,GAA1C,EAA+C;AAC7C;AACA,YAAM4W,QAAuB,KAAKN,QAAL,CAActW,CAAd,EAAiBwR,KAAjB,CAAuB,CAAvB,EAA0B,CAA1B,CAA7B;AACA,YAAIqF,SAAwB,KAAKP,QAAL,CAActW,CAAd,EAAiBwR,KAAjB,CAAuB,CAAvB,EAA0B,CAA1B,CAA5B;AACAmF,gBAAQjY,IAAR,CAAa8W,UAAUkB,OAAV,CAAkBE,KAAlB,EAAyB,KAAKZ,WAA9B,IAA6C,GAA7C,GACXa,OAAOC,IAAP,CAAY,KAAZ,CADW,GACU,IADvB;AAED;AACDL,iBAAW/X,IAAX,CAAgB,kBAAkBiY,QAAQG,IAAR,CAAa,GAAb,CAAlC;;AAEA,aAAOL,WAAWK,IAAX,CAAgB,cAAhB,CAAP;AACD;;AAED;;;;;;;4BAImB;AACjB,UAAIC,kBAAkB,IAAIvB,SAAJ,EAAtB;AACAuB,sBAAgBT,QAAhB,GAA2B,KAAKA,QAAhC;AACAS,sBAAgBtB,QAAhB,GAA2B,KAAKA,QAAhC;AACAsB,sBAAgBlB,SAAhB,GAA4B,KAAKA,SAAjC;AACAkB,sBAAgBf,WAAhB,GAA8B,KAAKA,WAAnC;AACAe,sBAAgBZ,eAAhB,GAAkC,KAAKA,eAAvC;AACAY,sBAAgBV,iBAAhB,GAAoC,KAAKA,iBAAzC;AACA,aAAOU,eAAP;AACD;;;;;AA7FD;;;;;;;4BAOeH,K,EAAsBI,O,EAAyB;AAC5D;AACA,aAAO,UAAUJ,MAAMnF,MAAN,CAAauF,OAAb,EAAsBF,IAAtB,CAA2B,GAA3B,CAAV,GAA4C,GAAnD;AACD;;AAED;;;;;;AAMA;;;;;AAKA;;;;;AAKA;;;;;;AAMA;;;;;AAKA;;;;;AAKA;;;;;;;;;;AAhIItB,S,CAOGG,U,GAAmC;AACxC,WAAS,OAD+B;AAExC,eAAa,WAF2B;AAGxC,aAAW,SAH6B;AAIxC,gBAAc;AAJ0B,C;AAPtCH,S,CAoBGM,c,GAA8C;AACnD,WAAS,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAD0C;AAEnD,WAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAF0C;AAGnD,SAAO,CAAC,GAAD,EAAM,CAAN,EAAS,CAAT,CAH4C;AAInD,WAAS,CAAC,CAAD,EAAI,GAAJ,EAAS,CAAT,CAJ0C;AAKnD,UAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,GAAP,CAL2C;AAMnD,YAAU,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,CANyC;AAOnD,aAAW,CAAC,GAAD,EAAM,CAAN,EAAS,GAAT,CAPwC;AAQnD,UAAQ,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT;AAR2C,C;AApBjDN,S,CAoCGS,iB,GAA0C;AAC/C,YAAU,CADqC;AAE/C,eAAa,IAFkC;AAG/C,cAAY,IAHmC;AAI/C,iBAAe;AAJgC,C;AApC7CT,S,CAqDGe,U,GAAiD;AACtD,UAAQ,EAD8C;AAEtD,YAAU,CACR,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADQ,EAER,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFQ,EAGR,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAHQ,CAF4C;AAMtD,eAAa,CACX,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CADW,EAEX,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAFW,EAGX,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAC,CAAd,EAAiB,CAAC,CAAlB,EAAqB,CAArB,CAHW,EAIX,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAC,CAAjB,EAAoB,CAApB,CAJW,CANyC;AAWtD,aAAW,CACT,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADS,EAET,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFS,EAGT,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAHS,EAIT,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAJS,CAX2C;AAgBtD,UAAQ,CACN,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADM,EAEN,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFM,EAGN,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAHM;AAhB8C,C;AArDpDf,S,CA2EGyB,S,GAA2B,CAChC,KADgC,EAEhC,KAFgC,EAGhC,MAHgC,EAIhC,MAJgC,EAKhC,MALgC,EAMhC,MANgC,C;kBAyGrBzB,S;;;;;;;;;;;;ACjMR,IAAMvC,gCAA0C;AACrDiE,YAAU,oBAD2C;AAErDC,aAAW,yBAF0C;AAGrDC,YAAU;AAH2C,CAAhD,C;;;;;;;;;;;;ACKP,IAAMC,qBAAkD;AACtDC,QAAM,MADgD;AAEtDC,WAAS,SAF6C;AAGtDlW,WAAS,SAH6C;AAItDmW,UAAQ,QAJ8C;AAKtDC,aAAW;AAL2C,CAAxD;;kBAQeJ,kB;;;;;;;;;;;;;;;;;;;;;ACdf;AACA;;;;;;;;;;;;;;;;AAgBA;;AAEA;;AAEA,IAAMK,YAAY,CAAlB;;AAEA;AACA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;;AAE7B,WAASC,cAAT,CAAwBC,CAAxB,EAA2BC,CAA3B,EAA8BC,CAA9B,EAAiCC,CAAjC,EAAoC;AAClC,WAAO,CAACH,IAAI,CAAL,IAAU,IAAV,GAAiB,CAACC,IAAI,CAAL,IAAU,EAA3B,IAAiCC,IAAI,CAArC,IAA0C,CAACC,IAAI,CAAL,IAAU,IAA3D;AACD;;AAED,MAAMF,IAAIH,MAAMM,KAAN,CAAY,kCAAZ,CAAV;AACA,MAAI,CAACH,CAAL,EAAQ;AACN,WAAO,IAAP;AACD;;AAED,MAAIA,EAAE,CAAF,CAAJ,EAAU;AACR;AACA,WAAOF,eAAeE,EAAE,CAAF,CAAf,EAAqBA,EAAE,CAAF,CAArB,EAA2BA,EAAE,CAAF,EAAKI,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAA3B,EAAkDJ,EAAE,CAAF,CAAlD,CAAP;AACD,GAHD,MAGO,IAAIA,EAAE,CAAF,IAAO,EAAX,EAAe;AACpB;AACA;AACA,WAAOF,eAAeE,EAAE,CAAF,CAAf,EAAqBA,EAAE,CAAF,CAArB,EAA2B,CAA3B,EAA8BA,EAAE,CAAF,CAA9B,CAAP;AACD,GAJM,MAIA;AACL;AACA,WAAOF,eAAe,CAAf,EAAkBE,EAAE,CAAF,CAAlB,EAAwBA,EAAE,CAAF,CAAxB,EAA8BA,EAAE,CAAF,CAA9B,CAAP;AACD;AACF;;AAED,IAAMK,SAAS;AACb,WAAS,GADI;AAEb,UAAQ,GAFK;AAGb,UAAQ,GAHK;AAIb,WAAS,QAJI;AAKb,WAAS,QALI;AAMb,YAAU;AANG,CAAf;;AASA,IAAMC,WAAW;AACfC,KAAG,MADY;AAEftY,KAAG,GAFY;AAGfuY,KAAG,GAHY;AAIfC,KAAG,GAJY;AAKfC,QAAM,MALS;AAMfC,MAAI,IANW;AAOfC,KAAG,MAPY;AAQfC,QAAM;AARS,CAAjB;;AAWA,IAAMC,iBAAiB;AACrBF,KAAG,OADkB;AAErBC,QAAM;AAFe,CAAvB;;AAKA,IAAME,eAAe;AACnBJ,MAAI;AADe,CAArB;;AAIA;AACA,SAASK,YAAT,CAAsBhc,MAAtB,EAA8B6a,KAA9B,EAAqC;AACnC,WAASoB,SAAT,GAAqB;AACnB;AACA,QAAI,CAACpB,KAAL,EAAY;AACV,aAAO,IAAP;AACD;;AAED;AACA,aAASqB,OAAT,CAAiBC,MAAjB,EAAyB;AACvBtB,cAAQA,MAAMuB,MAAN,CAAaD,OAAOjZ,MAApB,CAAR;AACA,aAAOiZ,MAAP;AACD;;AAED,QAAMnB,IAAIH,MAAMM,KAAN,CAAY,qBAAZ,CAAV;AACA;AACA;AACA,WAAOe,QAAQlB,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,CAAtB,CAAP;AACD;;AAED;AACA,WAASqB,SAAT,CAAmBnd,CAAnB,EAAsB;AACpB,WAAOmc,OAAOnc,CAAP,CAAP;AACD;;AAED,WAASod,QAAT,CAAkBrB,CAAlB,EAAqB;AACnB,QAAID,UAAJ;AACA,WAAQA,IAAIC,EAAEE,KAAF,CAAQ,4BAAR,CAAZ,EAAoD;AAClDF,UAAIA,EAAEG,OAAF,CAAUJ,EAAE,CAAF,CAAV,EAAgBqB,SAAhB,CAAJ;AACD;AACD,WAAOpB,CAAP;AACD;;AAED,WAASsB,SAAT,CAAmBC,OAAnB,EAA4BrJ,OAA5B,EAAqC;AACnC,WAAO,CAAC4I,aAAa5I,QAAQsJ,SAArB,CAAD,IACLV,aAAa5I,QAAQsJ,SAArB,MAAoCD,QAAQC,SAD9C;AAED;;AAED;AACA,WAASvP,aAAT,CAAuBxN,IAAvB,EAA6Bgd,UAA7B,EAAyC;AACvC,QAAMC,UAAUrB,SAAS5b,IAAT,CAAhB;AACA,QAAI,CAACid,OAAL,EAAc;AACZ,aAAO,IAAP;AACD;AACD,QAAIxJ,UAAUnT,OAAOqT,QAAP,CAAgBnG,aAAhB,CAA8ByP,OAA9B,CAAd;AACAxJ,YAAQsJ,SAAR,GAAoBE,OAApB;AACA,QAAM3O,OAAO8N,eAAepc,IAAf,CAAb;AACA,QAAIsO,QAAQ0O,UAAZ,EAAwB;AACtBvJ,cAAQnF,IAAR,IAAgB0O,WAAWE,IAAX,EAAhB;AACD;AACD,WAAOzJ,OAAP;AACD;;AAED,MAAI0J,UAAU7c,OAAOqT,QAAP,CAAgBnG,aAAhB,CAA8B,KAA9B,CAAd;AAAA,MACEsP,UAAUK,OADZ;AAAA,MAEEC,UAFF;AAAA,MAGEC,WAAW,EAHb;;AAKA,SAAO,CAACD,IAAIb,WAAL,MAAsB,IAA7B,EAAmC;AACjC,QAAIa,EAAE,CAAF,MAAS,GAAb,EAAkB;AAChB,UAAIA,EAAE,CAAF,MAAS,GAAb,EAAkB;AAChB;AACA,YAAIC,SAAS7Z,MAAT,IACF6Z,SAASA,SAAS7Z,MAAT,GAAkB,CAA3B,MAAkC4Z,EAAEV,MAAF,CAAS,CAAT,EAAYhB,OAAZ,CAAoB,GAApB,EAAyB,EAAzB,CADpC,EACkE;AAChE2B,mBAASC,GAAT;AACAR,oBAAUA,QAAQpR,UAAlB;AACD;AACD;AACA;AACD;AACD,UAAI6R,KAAKrC,eAAekC,EAAEV,MAAF,CAAS,CAAT,EAAYU,EAAE5Z,MAAF,GAAW,CAAvB,CAAf,CAAT;AACA,UAAIga,aAAJ;AACA,UAAID,EAAJ,EAAQ;AACN;AACAC,eAAOld,OAAOqT,QAAP,CAAgB8J,2BAAhB,CAA4C,WAA5C,EAAyDF,EAAzD,CAAP;AACAT,gBAAQhP,WAAR,CAAoB0P,IAApB;AACA;AACD;AACD,UAAMlC,IAAI8B,EAAE3B,KAAF,CAAQ,kDAAR,CAAV;AACA;AACA,UAAI,CAACH,CAAL,EAAQ;AACN;AACD;AACD;AACAkC,aAAOhQ,cAAc8N,EAAE,CAAF,CAAd,EAAoBA,EAAE,CAAF,CAApB,CAAP;AACA,UAAI,CAACkC,IAAL,EAAW;AACT;AACD;AACD;AACA;AACA,UAAI,CAACX,UAAUC,OAAV,EAAmBU,IAAnB,CAAL,EAA+B;AAC7B;AACD;AACD;AACA,UAAIlC,EAAE,CAAF,CAAJ,EAAU;AACRkC,aAAKE,SAAL,GAAiBpC,EAAE,CAAF,EAAKoB,MAAL,CAAY,CAAZ,EAAehB,OAAf,CAAuB,GAAvB,EAA4B,GAA5B,CAAjB;AACD;AACD;AACA;AACA2B,eAASpb,IAAT,CAAcqZ,EAAE,CAAF,CAAd;AACAwB,cAAQhP,WAAR,CAAoB0P,IAApB;AACAV,gBAAUU,IAAV;AACA;AACD;;AAED;AACAV,YAAQhP,WAAR,CAAoBxN,OAAOqT,QAAP,CAAgBgK,cAAhB,CAA+Bf,SAASQ,CAAT,CAA/B,CAApB;AACD;;AAED,SAAOD,OAAP;AACD;;AAED;AACA;AACA;AACA;AACA;AACA,IAAMS,kBAAkB,CAAC,CAAC,KAAD,EAAQ,KAAR,CAAD,EAAiB,CAAC,KAAD,EAAQ,KAAR,CAAjB,EAAiC,CAAC,KAAD,EAAQ,KAAR,CAAjC,EAAiD,CAAC,KAAD,EAAQ,KAAR,CAAjD,EACtB,CAAC,KAAD,EAAQ,KAAR,CADsB,EACN,CAAC,KAAD,EAAQ,KAAR,CADM,EACU,CAAC,KAAD,EAAQ,KAAR,CADV,EAC0B,CAAC,KAAD,EAAQ,KAAR,CAD1B,EAC0C,CAAC,KAAD,EAAQ,KAAR,CAD1C,EAEtB,CAAC,KAAD,EAAQ,KAAR,CAFsB,EAEN,CAAC,KAAD,EAAQ,KAAR,CAFM,EAEU,CAAC,KAAD,EAAQ,KAAR,CAFV,EAE0B,CAAC,KAAD,EAAQ,KAAR,CAF1B,EAE0C,CAAC,KAAD,EAAQ,KAAR,CAF1C,EAGtB,CAAC,KAAD,EAAQ,KAAR,CAHsB,EAGN,CAAC,KAAD,EAAQ,KAAR,CAHM,EAGU,CAAC,KAAD,EAAQ,KAAR,CAHV,EAG0B,CAAC,KAAD,EAAQ,KAAR,CAH1B,EAG0C,CAAC,KAAD,EAAQ,KAAR,CAH1C,EAItB,CAAC,KAAD,EAAQ,KAAR,CAJsB,EAIN,CAAC,KAAD,EAAQ,KAAR,CAJM,EAIU,CAAC,KAAD,EAAQ,KAAR,CAJV,EAI0B,CAAC,KAAD,EAAQ,KAAR,CAJ1B,EAI0C,CAAC,KAAD,EAAQ,KAAR,CAJ1C,EAKtB,CAAC,KAAD,EAAQ,KAAR,CALsB,EAKN,CAAC,KAAD,EAAQ,KAAR,CALM,EAKU,CAAC,KAAD,EAAQ,KAAR,CALV,EAK0B,CAAC,KAAD,EAAQ,KAAR,CAL1B,EAK0C,CAAC,KAAD,EAAQ,KAAR,CAL1C,EAMtB,CAAC,KAAD,EAAQ,KAAR,CANsB,EAMN,CAAC,KAAD,EAAQ,KAAR,CANM,EAMU,CAAC,KAAD,EAAQ,KAAR,CANV,EAM0B,CAAC,MAAD,EAAS,MAAT,CAN1B,EAOtB,CAAC,MAAD,EAAS,MAAT,CAPsB,EAOJ,CAAC,MAAD,EAAS,MAAT,CAPI,EAOc,CAAC,MAAD,EAAS,MAAT,CAPd,EAOgC,CAAC,MAAD,EAAS,MAAT,CAPhC,EAQtB,CAAC,MAAD,EAAS,MAAT,CARsB,EAQJ,CAAC,MAAD,EAAS,MAAT,CARI,EAQc,CAAC,MAAD,EAAS,MAAT,CARd,EAQgC,CAAC,MAAD,EAAS,MAAT,CARhC,EAStB,CAAC,MAAD,EAAS,MAAT,CATsB,EASJ,CAAC,MAAD,EAAS,MAAT,CATI,EASc,CAAC,MAAD,EAAS,MAAT,CATd,EASgC,CAAC,MAAD,EAAS,MAAT,CAThC,EAUtB,CAAC,MAAD,EAAS,MAAT,CAVsB,EAUJ,CAAC,MAAD,EAAS,MAAT,CAVI,EAUc,CAAC,OAAD,EAAU,OAAV,CAVd,EAUkC,CAAC,OAAD,EAAU,OAAV,CAVlC,EAWtB,CAAC,OAAD,EAAU,OAAV,CAXsB,EAWF,CAAC,OAAD,EAAU,OAAV,CAXE,EAWkB,CAAC,OAAD,EAAU,OAAV,CAXlB,EAWsC,CAAC,OAAD,EAAU,OAAV,CAXtC,EAYtB,CAAC,OAAD,EAAU,OAAV,CAZsB,EAYF,CAAC,OAAD,EAAU,OAAV,CAZE,EAYkB,CAAC,OAAD,EAAU,OAAV,CAZlB,EAYsC,CAAC,OAAD,EAAU,OAAV,CAZtC,EAatB,CAAC,OAAD,EAAU,OAAV,CAbsB,EAaF,CAAC,OAAD,EAAU,OAAV,CAbE,EAakB,CAAC,OAAD,EAAU,OAAV,CAblB,EAasC,CAAC,OAAD,EAAU,OAAV,CAbtC,EActB,CAAC,OAAD,EAAU,OAAV,CAdsB,EAcF,CAAC,OAAD,EAAU,OAAV,CAdE,EAckB,CAAC,OAAD,EAAU,OAAV,CAdlB,EAcsC,CAAC,OAAD,EAAU,OAAV,CAdtC,EAetB,CAAC,OAAD,EAAU,OAAV,CAfsB,EAeF,CAAC,OAAD,EAAU,OAAV,CAfE,EAekB,CAAC,OAAD,EAAU,OAAV,CAflB,EAesC,CAAC,OAAD,EAAU,OAAV,CAftC,EAgBtB,CAAC,OAAD,EAAU,OAAV,CAhBsB,EAgBF,CAAC,OAAD,EAAU,OAAV,CAhBE,EAgBkB,CAAC,OAAD,EAAU,OAAV,CAhBlB,EAgBsC,CAAC,OAAD,EAAU,OAAV,CAhBtC,EAiBtB,CAAC,OAAD,EAAU,OAAV,CAjBsB,EAiBF,CAAC,OAAD,EAAU,OAAV,CAjBE,EAiBkB,CAAC,OAAD,EAAU,OAAV,CAjBlB,EAiBsC,CAAC,OAAD,EAAU,OAAV,CAjBtC,EAkBtB,CAAC,OAAD,EAAU,OAAV,CAlBsB,EAkBF,CAAC,OAAD,EAAU,OAAV,CAlBE,EAkBkB,CAAC,OAAD,EAAU,OAAV,CAlBlB,EAkBsC,CAAC,OAAD,EAAU,OAAV,CAlBtC,EAmBtB,CAAC,OAAD,EAAU,OAAV,CAnBsB,EAmBF,CAAC,OAAD,EAAU,OAAV,CAnBE,EAmBkB,CAAC,OAAD,EAAU,OAAV,CAnBlB,EAmBsC,CAAC,OAAD,EAAU,OAAV,CAnBtC,EAoBtB,CAAC,OAAD,EAAU,OAAV,CApBsB,EAoBF,CAAC,OAAD,EAAU,OAAV,CApBE,EAoBkB,CAAC,OAAD,EAAU,OAAV,CApBlB,EAoBsC,CAAC,OAAD,EAAU,OAAV,CApBtC,EAqBtB,CAAC,OAAD,EAAU,OAAV,CArBsB,EAqBF,CAAC,OAAD,EAAU,OAAV,CArBE,EAqBkB,CAAC,OAAD,EAAU,OAAV,CArBlB,EAqBsC,CAAC,OAAD,EAAU,OAAV,CArBtC,EAsBtB,CAAC,OAAD,EAAU,OAAV,CAtBsB,EAsBF,CAAC,OAAD,EAAU,OAAV,CAtBE,EAsBkB,CAAC,OAAD,EAAU,OAAV,CAtBlB,EAsBsC,CAAC,OAAD,EAAU,OAAV,CAtBtC,EAuBtB,CAAC,OAAD,EAAU,OAAV,CAvBsB,EAuBF,CAAC,OAAD,EAAU,OAAV,CAvBE,EAuBkB,CAAC,OAAD,EAAU,OAAV,CAvBlB,EAuBsC,CAAC,OAAD,EAAU,OAAV,CAvBtC,EAwBtB,CAAC,OAAD,EAAU,OAAV,CAxBsB,EAwBF,CAAC,OAAD,EAAU,OAAV,CAxBE,EAwBkB,CAAC,OAAD,EAAU,OAAV,CAxBlB,EAwBsC,CAAC,QAAD,EAAW,QAAX,CAxBtC,CAAxB;;AA0BA,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,OAAK,IAAIva,IAAI,CAAb,EAAgBA,IAAIqa,gBAAgBpa,MAApC,EAA4CD,GAA5C,EAAiD;AAC/C,QAAMwa,eAAeH,gBAAgBra,CAAhB,CAArB;AACA,QAAIua,YAAYC,aAAa,CAAb,CAAZ,IAA+BD,YAAYC,aAAa,CAAb,CAA/C,EAAgE;AAC9D,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC7B,MAAIC,YAAY,EAAhB;AAAA,MACE9R,OAAO,EADT;AAAA,MAEE0R,iBAFF;;AAIA,MAAI,CAACG,MAAD,IAAW,CAACA,OAAOE,UAAvB,EAAmC;AACjC,WAAO,KAAP;AACD;;AAED,WAASC,SAAT,CAAmBF,SAAnB,EAA8BV,IAA9B,EAAoC;AAClC,SAAK,IAAIja,IAAIia,KAAKW,UAAL,CAAgB3a,MAAhB,GAAyB,CAAtC,EAAyCD,KAAK,CAA9C,EAAiDA,GAAjD,EAAsD;AACpD2a,gBAAUjc,IAAV,CAAeub,KAAKW,UAAL,CAAgB5a,CAAhB,CAAf;AACD;AACF;;AAED,WAAS8a,YAAT,CAAsBH,SAAtB,EAAiC;AAC/B,QAAI,CAACA,SAAD,IAAc,CAACA,UAAU1a,MAA7B,EAAqC;AACnC,aAAO,IAAP;AACD;;AAED,QAAMga,OAAOU,UAAUZ,GAAV,EAAb;AAAA,QACElR,OAAOoR,KAAKc,WAAL,IAAoBd,KAAKe,SADlC;AAEA,QAAInS,IAAJ,EAAU;AACR;AACA;AACA,UAAMkP,IAAIlP,KAAKqP,KAAL,CAAW,YAAX,CAAV;AACA,UAAIH,CAAJ,EAAO;AACL4C,kBAAU1a,MAAV,GAAmB,CAAnB;AACA,eAAO8X,EAAE,CAAF,CAAP;AACD;AACD,aAAOlP,IAAP;AACD;AACD,QAAIoR,KAAKP,OAAL,KAAiB,MAArB,EAA6B;AAC3B,aAAOoB,aAAaH,SAAb,CAAP;AACD;AACD,QAAIV,KAAKW,UAAT,EAAqB;AACnBC,gBAAUF,SAAV,EAAqBV,IAArB;AACA,aAAOa,aAAaH,SAAb,CAAP;AACD;AACF;;AAEDE,YAAUF,SAAV,EAAqBD,MAArB;AACA,SAAQ7R,OAAOiS,aAAaH,SAAb,CAAf,EAAyC;AACvC,SAAK,IAAI3a,IAAI,CAAb,EAAgBA,IAAI6I,KAAK5I,MAAzB,EAAiCD,GAAjC,EAAsC;AACpCua,iBAAW1R,KAAKoS,UAAL,CAAgBjb,CAAhB,CAAX;AACA,UAAIsa,gBAAgBC,QAAhB,CAAJ,EAA+B;AAC7B,eAAO,KAAP;AACD;AACF;AACF;AACD,SAAO,KAAP;AACD;;AAED,SAASW,cAAT,CAAwBlN,GAAxB,EAA6B;AAC3B,MAAI,OAAOA,IAAImN,IAAX,KAAoB,QAApB,KACDnN,IAAIoN,WAAJ,IAAoBpN,IAAImN,IAAJ,IAAY,CAAZ,IAAiBnN,IAAImN,IAAJ,IAAY,GADhD,CAAJ,EAC2D;AACzD,WAAOnN,IAAImN,IAAX;AACD;AACD,MAAI,CAACnN,IAAI1P,KAAL,IAAc,CAAC0P,IAAI1P,KAAJ,CAAU+c,aAAzB,IACF,CAACrN,IAAI1P,KAAJ,CAAU+c,aAAV,CAAwBC,YAD3B,EACyC;AACvC,WAAO,CAAC,CAAR;AACD;AACD,MAAMhd,QAAQ0P,IAAI1P,KAAlB;AACA,MAAMid,YAAYjd,MAAM+c,aAAxB;AACA,MAAIG,QAAQ,CAAZ;AACA,OAAK,IAAIxb,IAAI,CAAb,EAAgBA,IAAIub,UAAUtb,MAAd,IAAwBsb,UAAUvb,CAAV,MAAiB1B,KAAzD,EAAgE0B,GAAhE,EAAqE;AACnE,QAAIub,UAAUvb,CAAV,EAAayb,IAAb,KAAsB,SAA1B,EAAqC;AACnCD;AACD;AACF;AACD,SAAO,EAAEA,KAAF,GAAU,CAAC,CAAlB;AACD;;IAEKE,Q;AAEJ,sBAAc;AAAA;AACb;;AAED;AACA;;;;;gCACYC,M,EAAQC,G,EAAK;AACvBA,YAAMA,OAAO,KAAKA,GAAlB;AACA,WAAK,IAAIC,IAAT,IAAiBF,MAAjB,EAAyB;AACvB,YAAIA,OAAOG,cAAP,CAAsBD,IAAtB,CAAJ,EAAiC;AAC/BD,cAAI5L,KAAJ,CAAU6L,IAAV,IAAkBF,OAAOE,IAAP,CAAlB;AACD;AACF;AACF;;;gCAEWE,G,EAAKC,I,EAAM;AACrB,aAAOD,QAAQ,CAAR,GAAY,CAAZ,GAAgBA,MAAMC,IAA7B;AACD;;;;;;AAGH;AACA;;;IACMC,W;;;AACJ,uBAAYlf,MAAZ,EAAoBiR,GAApB,EAAyBkO,YAAzB,EAAuC;AAAA;;AAAA;;AAErC,QAAMC,QAAS,OAAOC,SAAP,KAAqB,WAAtB,IACX,YAAD,CAAeC,IAAf,CAAoBD,UAAUE,SAA9B,CADF;AAEA,QAAI1F,QAAQ,wBAAZ;AACA,QAAIT,kBAAkB,oBAAtB;AACA,QAAIoG,aAAa,EAAjB;;AAEA,QAAI,OAAOC,SAAP,KAAqB,WAAzB,EAAsC;AACpC5F,cAAQ4F,UAAUC,OAAlB;AACAtG,wBAAkBqG,UAAUE,aAA5B;AACAH,mBAAaC,UAAUG,OAAvB;AACD;;AAED,QAAIR,KAAJ,EAAW;AACTvF,cAAQ,oBAAR;AACAT,wBAAkB,cAAlB;AACD;;AAED,UAAKnI,GAAL,GAAWA,GAAX;;AAEA;AACA;AACA,UAAK0M,MAAL,GAAc3B,aAAahc,MAAb,EAAqBiR,IAAInF,IAAzB,CAAd;AACA,QAAI8S,SAAS;AACX/E,aAAOA,KADI;AAEXT,uBAAiBA,eAFN;AAGXoG,kBAAYA,UAHD;AAIXK,gBAAU,UAJC;AAKXC,YAAM,CALK;AAMXC,aAAO,CANI;AAOXC,WAAK,CAPM;AAQXC,cAAQ,CARG;AASXC,eAAS;AATE,KAAb;;AAYA,QAAI,CAACd,KAAL,EAAY;AACVR,aAAOuB,WAAP,GAAqBlP,IAAImP,QAAJ,KAAiB,EAAjB,GAAsB,eAAtB,GACjBnP,IAAImP,QAAJ,KAAiB,IAAjB,GAAwB,aAAxB,GACE,aAFN;AAGAxB,aAAOyB,WAAP,GAAqB,WAArB;AACD;AACD,UAAKC,WAAL,CAAiB1B,MAAjB,EAAyB,MAAKjB,MAA9B;;AAEA;AACA;AACA;AACA,UAAKkB,GAAL,GAAW7e,OAAOqT,QAAP,CAAgBnG,aAAhB,CAA8B,KAA9B,CAAX;AACA0R,aAAS;AACP2B,iBAAWtP,IAAIuP,KAAJ,KAAc,QAAd,GAAyB,QAAzB,GAAoCvP,IAAIuP,KAD5C;AAEPC,YAAMtB,aAAasB,IAFZ;AAGPC,kBAAY,UAHL;AAIPb,gBAAU;AAJH,KAAT;;AAOA,QAAI,CAACT,KAAL,EAAY;AACVR,aAAO+B,SAAP,GAAmBjD,cAAc,MAAKC,MAAnB,CAAnB;AACAiB,aAAOuB,WAAP,GAAqBlP,IAAImP,QAAJ,KAAiB,EAAjB,GAAsB,eAAtB,GACjBnP,IAAImP,QAAJ,KAAiB,IAAjB,GAAwB,aAAxB,GACE,cAAcQ,iBAAd,GAAkC,WAFxC;AAGD;;AAED,UAAKN,WAAL,CAAiB1B,MAAjB;;AAEA,UAAKC,GAAL,CAASrR,WAAT,CAAqB,MAAKmQ,MAA1B;;AAEA;AACA;AACA;AACA,QAAIkD,UAAU,CAAd;AACA,YAAQ5P,IAAI6P,aAAZ;AACE,WAAK,OAAL;AACED,kBAAU5P,IAAI4O,QAAd;AACA;AACF,WAAK,QAAL;AACEgB,kBAAU5P,IAAI4O,QAAJ,GAAgB5O,IAAI8P,IAAJ,GAAW,CAArC;AACA;AACF,WAAK,KAAL;AACEF,kBAAU5P,IAAI4O,QAAJ,GAAe5O,IAAI8P,IAA7B;AACA;AATJ;;AAYA;AACA;AACA;AACA,QAAI9P,IAAImP,QAAJ,KAAiB,EAArB,EAAyB;AACvB,YAAKE,WAAL,CAAiB;AACfR,cAAM,MAAKkB,WAAL,CAAiBH,OAAjB,EAA0B,GAA1B,CADS;AAEf5f,eAAO,MAAK+f,WAAL,CAAiB/P,IAAI8P,IAArB,EAA2B,GAA3B;AAFQ,OAAjB;AAIA;AACA;AACA;AACD,KARD,MAQO;AACL,YAAKT,WAAL,CAAiB;AACfN,aAAK,MAAKgB,WAAL,CAAiBH,OAAjB,EAA0B,GAA1B,CADU;AAEf3f,gBAAQ,MAAK8f,WAAL,CAAiB/P,IAAI8P,IAArB,EAA2B,GAA3B;AAFO,OAAjB;AAID;;AAED,UAAKE,IAAL,GAAY,UAAUC,GAAV,EAAe;AACzB,WAAKZ,WAAL,CAAiB;AACfN,aAAK,KAAKgB,WAAL,CAAiBE,IAAIlB,GAArB,EAA0B,IAA1B,CADU;AAEfC,gBAAQ,KAAKe,WAAL,CAAiBE,IAAIjB,MAArB,EAA6B,IAA7B,CAFO;AAGfH,cAAM,KAAKkB,WAAL,CAAiBE,IAAIpB,IAArB,EAA2B,IAA3B,CAHS;AAIfC,eAAO,KAAKiB,WAAL,CAAiBE,IAAInB,KAArB,EAA4B,IAA5B,CAJQ;AAKf7e,gBAAQ,KAAK8f,WAAL,CAAiBE,IAAIhgB,MAArB,EAA6B,IAA7B,CALO;AAMfD,eAAO,KAAK+f,WAAL,CAAiBE,IAAIjgB,KAArB,EAA4B,IAA5B;AANQ,OAAjB;AAQD,KATD;AApGqC;AA8GtC;;;EA/GuB0d,Q;;AAkH1B;AACA;AACA;;;IACMwC,W;AACJ,uBAAYC,GAAZ,EAAiB;AAAA;;AAAA,SAgEjBC,QAhEiB,GAgEN,UAAUC,EAAV,EAAc;AACvB,aAAO,KAAKxB,IAAL,GAAYwB,GAAGvB,KAAf,IACL,KAAKA,KAAL,GAAauB,GAAGxB,IADX,IAEL,KAAKE,GAAL,GAAWsB,GAAGrB,MAFT,IAGL,KAAKA,MAAL,GAAcqB,GAAGtB,GAHnB;AAID,KArEgB;;AACf,QAAIZ,QAAS,OAAOC,SAAP,KAAqB,WAAtB,IACT,YAAD,CAAeC,IAAf,CAAoBD,UAAUE,SAA9B,CADF;;AAGA;AACA;AACA;AACA;AACA,QAAIgC,WAAJ;AAAA,QAAQrgB,eAAR;AAAA,QAAgBD,cAAhB;AAAA,QAAuB+e,YAAvB;AACA,QAAIoB,IAAIvC,GAAR,EAAa;AACX3d,eAASkgB,IAAIvC,GAAJ,CAAQ2C,YAAjB;AACAvgB,cAAQmgB,IAAIvC,GAAJ,CAAQ4C,WAAhB;AACAzB,YAAMoB,IAAIvC,GAAJ,CAAQ6C,SAAd;;AAEA,UAAIC,QAAQ,CAACA,QAAQP,IAAIvC,GAAJ,CAAQhB,UAAjB,MAAiC8D,QAAQA,MAAM,CAAN,CAAzC,KACVA,MAAMC,cADI,IACcD,MAAMC,cAAN,EAD1B;AAEAR,YAAMA,IAAIvC,GAAJ,CAAQgD,qBAAR,EAAN;AACA;AACA;AACA;AACA;AACAN,WAAKI,QAAQlgB,KAAKqgB,GAAL,CAAUH,MAAM,CAAN,KAAYA,MAAM,CAAN,EAASzgB,MAAtB,IAAiC,CAA1C,EAA6CkgB,IAAIlgB,MAAJ,GAAaygB,MAAMze,MAAhE,CAAR,GACD,CADJ;AAGD;AACD,SAAK4c,IAAL,GAAYsB,IAAItB,IAAhB;AACA,SAAKC,KAAL,GAAaqB,IAAIrB,KAAjB;AACA,SAAKC,GAAL,GAAWoB,IAAIpB,GAAJ,IAAWA,GAAtB;AACA,SAAK9e,MAAL,GAAckgB,IAAIlgB,MAAJ,IAAcA,MAA5B;AACA,SAAK+e,MAAL,GAAcmB,IAAInB,MAAJ,IAAeD,OAAOoB,IAAIlgB,MAAJ,IAAcA,MAArB,CAA7B;AACA,SAAKD,KAAL,GAAamgB,IAAIngB,KAAJ,IAAaA,KAA1B;AACA,SAAK8gB,UAAL,GAAkBR,OAAOpQ,SAAP,GAAmBoQ,EAAnB,GAAwBH,IAAIW,UAA9C;;AAEA,QAAI3C,SAAS,CAAC,KAAK2C,UAAnB,EAA+B;AAC7B,WAAKA,UAAL,GAAkB,EAAlB;AACD;AACF;;AAED;AACA;AACA;;;;;yBACKC,I,EAAMC,M,EAAQ;AACjBA,eAASA,WAAW9Q,SAAX,GAAuB8Q,MAAvB,GAAgC,KAAKF,UAA9C;AACA,cAAQC,IAAR;AACE,aAAK,IAAL;AACE,eAAKlC,IAAL,IAAamC,MAAb;AACA,eAAKlC,KAAL,IAAckC,MAAd;AACA;AACF,aAAK,IAAL;AACE,eAAKnC,IAAL,IAAamC,MAAb;AACA,eAAKlC,KAAL,IAAckC,MAAd;AACA;AACF,aAAK,IAAL;AACE,eAAKjC,GAAL,IAAYiC,MAAZ;AACA,eAAKhC,MAAL,IAAegC,MAAf;AACA;AACF,aAAK,IAAL;AACE,eAAKjC,GAAL,IAAYiC,MAAZ;AACA,eAAKhC,MAAL,IAAegC,MAAf;AACA;AAhBJ;AAkBD;;AAED;;;;;;AAQA;gCACYC,K,EAAO;AACjB,WAAK,IAAIjf,IAAI,CAAb,EAAgBA,IAAIif,MAAMhf,MAA1B,EAAkCD,GAAlC,EAAuC;AACrC,YAAI,KAAKoe,QAAL,CAAca,MAAMjf,CAAN,CAAd,CAAJ,EAA6B;AAC3B,iBAAO,IAAP;AACD;AACF;AACD,aAAO,KAAP;AACD;;AAED;;;;2BACOkf,S,EAAW;AAChB,aAAO,KAAKnC,GAAL,IAAYmC,UAAUnC,GAAtB,IACL,KAAKC,MAAL,IAAekC,UAAUlC,MADpB,IAEL,KAAKH,IAAL,IAAaqC,UAAUrC,IAFlB,IAGL,KAAKC,KAAL,IAAcoC,UAAUpC,KAH1B;AAID;;AAED;AACA;AACA;AACA;;;;yCACqBoC,S,EAAWH,I,EAAM;AACpC,cAAQA,IAAR;AACE,aAAK,IAAL;AACE,iBAAO,KAAKlC,IAAL,GAAYqC,UAAUrC,IAA7B;AACF,aAAK,IAAL;AACE,iBAAO,KAAKC,KAAL,GAAaoC,UAAUpC,KAA9B;AACF,aAAK,IAAL;AACE,iBAAO,KAAKC,GAAL,GAAWmC,UAAUnC,GAA5B;AACF,aAAK,IAAL;AACE,iBAAO,KAAKC,MAAL,GAAckC,UAAUlC,MAA/B;AARJ;AAUD;;AAED;AACA;;;;wCACoBqB,E,EAAI;AACtB,UAAIc,IAAI3gB,KAAKqgB,GAAL,CAAS,CAAT,EAAYrgB,KAAK4gB,GAAL,CAAS,KAAKtC,KAAd,EAAqBuB,GAAGvB,KAAxB,IAAiCte,KAAKqgB,GAAL,CAAS,KAAKhC,IAAd,EAAoBwB,GAAGxB,IAAvB,CAA7C,CAAR;AAAA,UACEwC,IAAI7gB,KAAKqgB,GAAL,CAAS,CAAT,EAAYrgB,KAAK4gB,GAAL,CAAS,KAAKpC,MAAd,EAAsBqB,GAAGrB,MAAzB,IAAmCxe,KAAKqgB,GAAL,CAAS,KAAK9B,GAAd,EAAmBsB,GAAGtB,GAAtB,CAA/C,CADN;AAAA,UAEEuC,gBAAgBH,IAAIE,CAFtB;AAGA,aAAOC,iBAAiB,KAAKrhB,MAAL,GAAc,KAAKD,KAApC,CAAP;AACD;;AAED;AACA;AACA;AACA;;;;sCACkBuhB,S,EAAW;AAC3B,aAAO;AACLxC,aAAK,KAAKA,GAAL,GAAWwC,UAAUxC,GADrB;AAELC,gBAAQuC,UAAUvC,MAAV,GAAmB,KAAKA,MAF3B;AAGLH,cAAM,KAAKA,IAAL,GAAY0C,UAAU1C,IAHvB;AAILC,eAAOyC,UAAUzC,KAAV,GAAkB,KAAKA,KAJzB;AAKL7e,gBAAQ,KAAKA,MALR;AAMLD,eAAO,KAAKA;AANP,OAAP;AAQD;;AAED;AACA;;;;yCAC4BmgB,G,EAAK;AAC/B,UAAIlgB,SAASkgB,IAAIvC,GAAJ,GAAUuC,IAAIvC,GAAJ,CAAQ2C,YAAlB,GAAiCJ,IAAIzE,OAAJ,GAAcyE,IAAII,YAAlB,GAAiC,CAA/E;AACA,UAAIvgB,QAAQmgB,IAAIvC,GAAJ,GAAUuC,IAAIvC,GAAJ,CAAQ4C,WAAlB,GAAgCL,IAAIzE,OAAJ,GAAcyE,IAAIK,WAAlB,GAAgC,CAA5E;AACA,UAAIzB,MAAMoB,IAAIvC,GAAJ,GAAUuC,IAAIvC,GAAJ,CAAQ6C,SAAlB,GAA8BN,IAAIzE,OAAJ,GAAcyE,IAAIM,SAAlB,GAA8B,CAAtE;;AAEAN,YAAMA,IAAIvC,GAAJ,GAAUuC,IAAIvC,GAAJ,CAAQgD,qBAAR,EAAV,GACJT,IAAIzE,OAAJ,GAAcyE,IAAIS,qBAAJ,EAAd,GAA4CT,GAD9C;AAEA,aAAO;AACLtB,cAAMsB,IAAItB,IADL;AAELC,eAAOqB,IAAIrB,KAFN;AAGLC,aAAKoB,IAAIpB,GAAJ,IAAWA,GAHX;AAIL9e,gBAAQkgB,IAAIlgB,MAAJ,IAAcA,MAJjB;AAKL+e,gBAAQmB,IAAInB,MAAJ,IAAeD,OAAOoB,IAAIlgB,MAAJ,IAAcA,MAArB,CALlB;AAMLD,eAAOmgB,IAAIngB,KAAJ,IAAaA;AANf,OAAP;AAQD;;;;;;AAGH;AACA;AACA;;;AACA,SAASwhB,qBAAT,CAA+BC,QAA/B,EAAyCC,YAAzC,EAAuDC,YAAvD,EAAqE;;AAEnE;AACA;AACA;AACA;AACA;AACA,WAASC,gBAAT,CAA0BrH,CAA1B,EAA6BwG,IAA7B,EAAmC;AACjC,QAAIc,qBAAJ;AAAA,QACEC,oBAAoB,IAAI5B,WAAJ,CAAgB3F,CAAhB,CADtB;AAAA,QAEEwH,aAAa,CAFf,CADiC,CAGf;;AAElB,SAAK,IAAI/f,IAAI,CAAb,EAAgBA,IAAI+e,KAAK9e,MAAzB,EAAiCD,GAAjC,EAAsC;AACpC,aAAOuY,EAAEyH,oBAAF,CAAuBN,YAAvB,EAAqCX,KAAK/e,CAAL,CAArC,KACNuY,EAAE0H,MAAF,CAASP,YAAT,KAA0BnH,EAAE2H,WAAF,CAAcP,YAAd,CAD3B,EACyD;AACvDpH,UAAEyF,IAAF,CAAOe,KAAK/e,CAAL,CAAP;AACD;AACD;AACA;AACA,UAAIuY,EAAE0H,MAAF,CAASP,YAAT,CAAJ,EAA4B;AAC1B,eAAOnH,CAAP;AACD;AACD,UAAI4H,IAAI5H,EAAE6H,mBAAF,CAAsBV,YAAtB,CAAR;AACA;AACA;AACA,UAAIK,aAAaI,CAAjB,EAAoB;AAClBN,uBAAe,IAAI3B,WAAJ,CAAgB3F,CAAhB,CAAf;AACAwH,qBAAaI,CAAb;AACD;AACD;AACA5H,UAAI,IAAI2F,WAAJ,CAAgB4B,iBAAhB,CAAJ;AACD;AACD,WAAOD,gBAAgBC,iBAAvB;AACD;;AAED,MAAIO,cAAc,IAAInC,WAAJ,CAAgBuB,QAAhB,CAAlB;AAAA,MACEzR,MAAMyR,SAASzR,GADjB;AAAA,MAEEsS,UAAUpF,eAAelN,GAAf,CAFZ;AAAA,MAGE+Q,OAAO,EAHT;;AAKA;AACA,MAAI/Q,IAAIoN,WAAR,EAAqB;AACnB,QAAI0C,aAAJ;AACA,YAAQ9P,IAAImP,QAAZ;AACE,WAAK,EAAL;AACE4B,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP;AACAjB,eAAO,QAAP;AACA;AACF,WAAK,IAAL;AACEiB,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP;AACAjB,eAAO,OAAP;AACA;AACF,WAAK,IAAL;AACEiB,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP;AACAjB,eAAO,OAAP;AACA;AAZJ;;AAeA,QAAIyC,OAAOF,YAAYvB,UAAvB;AAAA,QACElC,WAAW2D,OAAO/hB,KAAKgiB,KAAL,CAAWF,OAAX,CADpB;AAAA,QAEEG,cAAcf,aAAa5B,IAAb,IAAqByC,IAFrC;AAAA,QAGEG,cAAc3B,KAAK,CAAL,CAHhB;;AAKA;AACA;AACA;AACA,QAAIvgB,KAAKC,GAAL,CAASme,QAAT,IAAqB6D,WAAzB,EAAsC;AACpC7D,iBAAWA,WAAW,CAAX,GAAe,CAAC,CAAhB,GAAoB,CAA/B;AACAA,kBAAYpe,KAAKmiB,IAAL,CAAUF,cAAcF,IAAxB,IAAgCA,IAA5C;AACD;;AAED;AACA;AACA;AACA;AACA,QAAID,UAAU,CAAd,EAAiB;AACf1D,kBAAY5O,IAAImP,QAAJ,KAAiB,EAAjB,GAAsBuC,aAAazhB,MAAnC,GAA4CyhB,aAAa1hB,KAArE;AACA+gB,aAAOA,KAAK6B,OAAL,EAAP;AACD;;AAED;AACA;AACAP,gBAAYrC,IAAZ,CAAiB0C,WAAjB,EAA8B9D,QAA9B;AAED,GA3CD,MA2CO;AACL;AACA,QAAIiE,uBAAwBR,YAAYvB,UAAZ,GAAyBY,aAAazhB,MAAvC,GAAiD,GAA5E;;AAEA,YAAQ+P,IAAI8S,SAAZ;AACE,WAAK,QAAL;AACER,mBAAYO,uBAAuB,CAAnC;AACA;AACF,WAAK,KAAL;AACEP,mBAAWO,oBAAX;AACA;AANJ;;AASA;AACA,YAAQ7S,IAAImP,QAAZ;AACE,WAAK,EAAL;AACEsC,iBAASpC,WAAT,CAAqB;AACnBN,eAAK0C,SAAS1B,WAAT,CAAqBuC,OAArB,EAA8B,GAA9B;AADc,SAArB;AAGA;AACF,WAAK,IAAL;AACEb,iBAASpC,WAAT,CAAqB;AACnBR,gBAAM4C,SAAS1B,WAAT,CAAqBuC,OAArB,EAA8B,GAA9B;AADa,SAArB;AAGA;AACF,WAAK,IAAL;AACEb,iBAASpC,WAAT,CAAqB;AACnBP,iBAAO2C,SAAS1B,WAAT,CAAqBuC,OAArB,EAA8B,GAA9B;AADY,SAArB;AAGA;AAfJ;;AAkBAvB,WAAO,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAP;;AAEA;AACA;AACAsB,kBAAc,IAAInC,WAAJ,CAAgBuB,QAAhB,CAAd;AACD;;AAED,MAAII,eAAeD,iBAAiBS,WAAjB,EAA8BtB,IAA9B,CAAnB;AACAU,WAASzB,IAAT,CAAc6B,aAAakB,iBAAb,CAA+BrB,YAA/B,CAAd;AACD;;AAED,SAASsB,mBAAT,CAA6BjkB,MAA7B,EAAqCkkB,OAArC,EAA8C;AAC5C,MAAI,CAAClkB,MAAD,IAAW,CAACkkB,OAAhB,EAAyB;AACvB,WAAO,IAAP;AACD;AACD,SAAOlI,aAAahc,MAAb,EAAqBkkB,OAArB,CAAP;AACD;;AAED,IAAMC,oBAAoB,IAA1B;AACA,IAAMC,aAAa,YAAnB;AACA,IAAMC,yBAAyB,MAA/B;;AAEA;AACA;AACA;AACA,SAASC,WAAT,CAAqBtkB,MAArB,EAA6B+Q,IAA7B,EAAmCwT,OAAnC,EAA4C;AAC1C,MAAI,CAACvkB,MAAD,IAAW,CAAC+Q,IAAZ,IAAoB,CAACwT,OAAzB,EAAkC;AAChC,WAAO,IAAP;AACD;;AAED;AACA,SAAOA,QAAQC,UAAf,EAA2B;AACzBD,YAAQpZ,WAAR,CAAoBoZ,QAAQC,UAA5B;AACD;;AAED,MAAIC,gBAAgBzkB,OAAOqT,QAAP,CAAgBnG,aAAhB,CAA8B,KAA9B,CAApB;AACAuX,gBAAcxR,KAAd,CAAoB4M,QAApB,GAA+B,UAA/B;AACA4E,gBAAcxR,KAAd,CAAoB6M,IAApB,GAA2B,GAA3B;AACA2E,gBAAcxR,KAAd,CAAoB8M,KAApB,GAA4B,GAA5B;AACA0E,gBAAcxR,KAAd,CAAoB+M,GAApB,GAA0B,GAA1B;AACAyE,gBAAcxR,KAAd,CAAoBgN,MAApB,GAA6B,GAA7B;AACAwE,gBAAcxR,KAAd,CAAoByR,MAApB,GAA6BL,sBAA7B;AACAE,UAAQ/W,WAAR,CAAoBiX,aAApB;;AAEA;AACA;AACA;AACA,WAASE,aAAT,CAAuB5T,IAAvB,EAA6B;AAC3B,SAAK,IAAI9N,IAAI,CAAb,EAAgBA,IAAI8N,KAAK7N,MAAzB,EAAiCD,GAAjC,EAAsC;AACpC,UAAI8N,KAAK9N,CAAL,EAAQ2J,YAAR,IAAwB,CAACmE,KAAK9N,CAAL,EAAQ2hB,YAArC,EAAmD;AACjD,eAAO,IAAP;AACD;AACF;AACD,WAAO,KAAP;AACD;;AAED;AACA,MAAI,CAACD,cAAc5T,IAAd,CAAL,EAA0B;AACxB,SAAK,IAAI9N,IAAI,CAAb,EAAgBA,IAAI8N,KAAK7N,MAAzB,EAAiCD,GAAjC,EAAsC;AACpCwhB,oBAAcjX,WAAd,CAA0BuD,KAAK9N,CAAL,EAAQ2hB,YAAlC;AACD;AACD;AACD;;AAED,MAAIhC,eAAe,EAAnB;AAAA,MACED,eAAexB,YAAY0D,oBAAZ,CAAiCJ,aAAjC,CADjB;AAAA,MAEE/L,WAAWjX,KAAKgiB,KAAL,CAAWd,aAAazhB,MAAb,GAAsBijB,iBAAtB,GAA0C,GAArD,IAA4D,GAFzE;AAGA,MAAIhF,eAAe;AACjBsB,UAAO/H,WAAWiC,SAAZ,GAAyB,KAAzB,GAAiCyJ;AADtB,GAAnB;;AAIA,GAAC,YAAY;AACX,QAAI1B,iBAAJ;AAAA,QAAczR,YAAd;;AAEA,SAAK,IAAIhO,KAAI,CAAb,EAAgBA,KAAI8N,KAAK7N,MAAzB,EAAiCD,IAAjC,EAAsC;AACpCgO,YAAMF,KAAK9N,EAAL,CAAN;;AAEA;AACAyf,iBAAW,IAAIxD,WAAJ,CAAgBlf,MAAhB,EAAwBiR,GAAxB,EAA6BkO,YAA7B,CAAX;AACAsF,oBAAcjX,WAAd,CAA0BkV,SAAS7D,GAAnC;;AAEA;AACA4D,4BAAsBC,QAAtB,EAAgCC,YAAhC,EAA8CC,YAA9C;;AAEA;AACA;AACA3R,UAAI2T,YAAJ,GAAmBlC,SAAS7D,GAA5B;;AAEA+D,mBAAajhB,IAAb,CAAkBwf,YAAY0D,oBAAZ,CAAiCnC,QAAjC,CAAlB;AACD;AACF,GAnBD;AAoBD;;QAGO4B,W,GAAAA,W;QAAaL,mB,GAAAA,mB;;;;;;;;;;;;;;;;ACvyBrB;;;;AAEA,IAAMa,cAAsB,MAA5B;AACA,IAAMC,mBAA0C;AAC9C,MAAI,IAD0C;AAE9C,QAAM,IAFwC;AAG9C,QAAM;AAHwC,CAAhD;AAKA,IAAMC,eAAsC;AAC1C,WAAS,IADiC;AAE1C,YAAU,IAFgC;AAG1C,SAAO,IAHmC;AAI1C,UAAQ,IAJkC;AAK1C,WAAS;AALiC,CAA5C;;AAQA;;;;;AAKA,SAASC,oBAAT,CAA8BvmB,KAA9B,EAAuD;AACrD,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,WAAO,KAAP;AACD;AACD,MAAMwmB,MAAMH,iBAAiBrmB,MAAMM,WAAN,EAAjB,CAAZ;AACA,SAAOkmB,MAAMxmB,MAAMM,WAAN,EAAN,GAA4B,KAAnC;AACD;;AAED;;;;;AAKA,SAASmmB,gBAAT,CAA0BzmB,KAA1B,EAA2D;AACzD,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,WAAO,KAAP;AACD;AACD,MAAM8hB,QAAQwE,aAAatmB,MAAMM,WAAN,EAAb,CAAd;AACA,SAAOwhB,QAAQ9hB,MAAMM,WAAN,EAAR,GAA8B,KAArC;AACD;;AAED;;;;;;IAKMomB,M;AAoGJ;;;;;;;AAbA;;;;;;AAZA;;;;;;AAfA;;;;;;;AAnCA;;;;;;;;AAhBA;;;;;AAyGA,kBAAYpb,SAAZ,EAA+Bqb,OAA/B,EAAgDvZ,IAAhD,EAA8D;AAAA;;AAAA,SA3G9Dc,YA2G8D,GA3GtC,KA2GsC;AAAA,SApG9DgY,YAoG8D,GApG1CzT,SAoG0C;AAAA,SA1F9D3S,GA0F8D,GA1FhD,EA0FgD;AAAA,SAnF9D8mB,YAmF8D,GAnFtC,KAmFsC;AAAA,SAvD9DC,OAuD8D,GAvD3C,IAuD2C;AAAA,SAhD9DC,SAgD8D,GAhD1C,EAgD0C;AAAA,SAxC9DC,YAwC8D,GAxCtC,IAwCsC;AAAA,SAlC9DC,KAkC8D,GAlCrC,MAkCqC;AAAA,SA5B9DC,UA4B8D,GA5BzC,OA4ByC;AAAA,SAtB9DC,SAsB8D,GAtB1C,EAsB0C;AAAA,SAf9DC,cAe8D,GAfrC,QAeqC;AAAA,SAR9DC,KAQ8D,GAR9C,EAQ8C;AAAA,SAF9DC,MAE8D,GAF7C,QAE6C;;AAC5D,SAAKC,UAAL,GAAkBhc,SAAlB;AACA,SAAKic,QAAL,GAAgBZ,OAAhB;AACA,SAAKa,KAAL,GAAapa,IAAb;AACA;;;AAGD;AAdD;;;;;;AAdA;;;;;;;AAZA;;;;;;AAdA;;;;;;;;AAdA;;;;;;;AArBA;;;;;;;AAOA;;;;;;;AAOA;;;;;;;AA/BA;;;;AAIA;;;;;;;AAjBA;;;;;;;;;+BAyHiB;AACf,WAAKc,YAAL,GAAoB,IAApB;AACD;;;mCAoKc;AACb,aAAO,2CAAoB5M,MAApB,EAA4B,KAAK8L,IAAjC,CAAP;AACD;;;wBApKgB;AACf,aAAO,KAAKtN,GAAZ;AACD,K;sBAEME,K,EAAe;AACpB,WAAKF,GAAL,GAAW,KAAKE,KAAhB;AACD;;;wBAE0B;AACzB,aAAO,KAAK4mB,YAAZ;AACD,K;sBAEe5mB,K,EAAgB;AAC9B,WAAK4mB,YAAL,GAAoB5mB,KAApB;AACD;;;wBAEuB;AACtB,aAAO,KAAKunB,QAAZ;AACD,K;sBAEavnB,K,EAAe;AAC3B,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAM,IAAIynB,SAAJ,CAAc,qCAAd,CAAN;AACD;AACD,WAAKF,QAAL,GAAgBvnB,KAAhB;AACA,WAAK0nB,QAAL;AAED;;;wBAEqB;AACpB,aAAO,KAAKH,QAAZ;AACD,K;sBAEWvnB,K,EAAe;AACzB,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAM,IAAIynB,SAAJ,CAAc,mCAAd,CAAN;AACD;AACD,WAAKF,QAAL,GAAgBvnB,KAAhB;AACA,WAAK0nB,QAAL;AACD;;;wBAEkB;AACjB,aAAO,KAAKF,KAAZ;AACD,K;sBAEQxnB,K,EAAe;AACtB,WAAKwnB,KAAL,GAAa,KAAKxnB,KAAlB;AACA,WAAK0nB,QAAL;AACD;;;wBAEqB;AACpB,aAAO,KAAKb,OAAZ;AACD,K;sBAEU7mB,K,EAAe;AACxB,WAAK6mB,OAAL,GAAe7mB,KAAf;AACA,WAAK0nB,QAAL;AACD;;;wBAEsB;AACrB,aAAO,KAAKZ,SAAZ;AACD,K;sBAEY9mB,K,EAAe;AAC1B,UAAM2nB,UAAUpB,qBAAqBvmB,KAArB,CAAhB;AACA;AACA,UAAI2nB,YAAY,KAAhB,EAAuB;AACrB,cAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACD,OAFD,MAEO,IAAI,OAAOD,OAAP,KAAoB,QAAxB,EAAkC;AACvC,aAAKb,SAAL,GAAiBa,OAAjB;AACA,aAAKD,QAAL;AACD;AACF;;;wBAE0B;AACzB,aAAO,KAAKX,YAAZ;AACD,K;sBAEe/mB,K,EAAgB;AAC9B,WAAK+mB,YAAL,GAAoB/mB,KAApB;AACA,WAAK0nB,QAAL;AACD;;;wBAE2B;AAC1B,aAAO,KAAKV,KAAZ;AACD,K;sBAEQhnB,K,EAAwB;AAC/B,UAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,UAAUomB,WAA3C,EAAwD;AACtD,cAAM,IAAIwB,WAAJ,CAAgB,oDAAhB,CAAN;AACD;AACD,WAAKZ,KAAL,GAAahnB,KAAb;AACA,WAAK0nB,QAAL;AACD;;;wBAEuB;AACtB,aAAO,KAAKT,UAAZ;AACD,K;sBAEajnB,K,EAAe;AAC3B,UAAM2nB,UAAUlB,iBAAiBzmB,KAAjB,CAAhB;AACA,UAAI,CAAC2nB,OAAL,EAAc;AACZ,cAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACD,OAFD,MAEO,IAAI,OAAOD,OAAP,KAAoB,QAAxB,EAAkC;AACvC,aAAKV,UAAL,GAAkBU,OAAlB;AACA,aAAKD,QAAL;AACD;AACF;;;wBAEsB;AACrB,aAAO,KAAKR,SAAZ;AACD,K;sBAEYlnB,K,EAAe;AAC1B,UAAIA,QAAQ,CAAR,IAAaA,QAAQ,GAAzB,EAA8B;AAC5B,cAAM,IAAIwU,KAAJ,CAAU,qCAAV,CAAN;AACD;AACD,WAAK0S,SAAL,GAAiBlnB,KAAjB;AACA,WAAK0nB,QAAL;AACD;;;wBAE2B;AAC1B,aAAO,KAAKP,cAAZ;AACD,K;sBAEiBnnB,K,EAAe;AAC/B,UAAM2nB,UAAUlB,iBAAiBzmB,KAAjB,CAAhB;AACA,UAAI,CAAC2nB,OAAL,EAAc;AACZ,cAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACD,OAFD,MAEO,IAAI,OAAOD,OAAP,KAAoB,QAAxB,EAAkC;AACvC,aAAKR,cAAL,GAAsBQ,OAAtB;AACA,aAAKD,QAAL;AACD;AACF;;;wBAE4B;AAC3B,aAAO,KAAKN,KAAZ;AACD,K;sBAEQpnB,K,EAAqB;AAC5B,UAAIA,QAAQ,CAAR,IAAaA,QAAQ,GAAzB,EACE;AACA,cAAM,IAAIwU,KAAJ,CAAU,iCAAV,CAAN;AACD;AACD,WAAK4S,KAAL,GAAapnB,KAAb;AACA,WAAK0nB,QAAL;AACD;;;wBAEmB;AAClB,aAAO,KAAKL,MAAZ;AACD,K;sBAESrnB,K,EAAqB;AAC7B,UAAM2nB,UAAUlB,iBAAiBzmB,KAAjB,CAAhB;AACA,UAAI,CAAC2nB,OAAL,EAAc;AACZ,cAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACD,OAFD,MAEO,IAAI,OAAOD,OAAP,KAAoB,QAAxB,EAAkC;AACvC,aAAKN,MAAL,GAAeM,OAAf;AACA,aAAKD,QAAL;AACD;AACF;;;;;;AAOH,IAAIG,YAAJ;AACA,IAAI,OAAOvmB,MAAP,KAAkB,WAAlB,IAAiCA,OAAOolB,MAA5C,EAAoD;AAClD,UAKMmB,GALN,SAAMvmB,OAAOolB,MAAb;AACD,CAFD,MAEO;AACL,UAGMmB,GAHN,SAAMnB,MAAN;AACD;;QAEOmB,G,GAAAA,G;;;;;;;;;;;;;;;AC5VR;;AACA;;;;AAEA,IAAMC,gBAAwB,4BAA9B;;IAEqBvQ,U;;;;;;;;;AA4CnB;;;;;;wCAM2BwQ,M,EAAgBzQ,O,EAAkC;AAC3E,UAAM0Q,UAAU,WAAIA,OAAJ,CAAY1Y,IAA5B;AACA,UAAI,OAAOiI,WAAW0Q,SAAX,CAAqBD,OAArB,CAAP,KAAyC,UAA7C,EAAyD;AACvD,YAAME,YAAY3Q,WAAW0Q,SAAX,CAAqBD,OAArB,GAAlB;AACAzQ,mBAAW7M,OAAX,CAAmBC,KAAnB,CAAyB,sDAAsDud,SAA/E;AACA,eAAQA,cAAcH,MAAd,IAAwB,CAAC,CAAEzQ,QAAQrK,IAAR,CAAa,UAACkb,QAAD;AAAA,iBAAcA,SAASJ,MAAT,KAAoBA,MAAlC;AAAA,SAAb,CAAnC;AACD;AACD,aAAO,KAAP;AACD;;;;;;AA1DkBxQ,U,CACZ7M,O,GAAe,qBAAc4K,SAAd,CAAwB,YAAxB,C;AADHiC,U,CAEZ0Q,S,GAA6B;AAClCG,UAAQ,kBAAM;AACZ,QAAMzW,SAAS,WAAIA,MAAJ,CAAW3Q,IAA1B;AACA,QAAM4Q,KAAK,WAAIA,EAAJ,CAAOtC,IAAlB;AACA,QAAI,CAACqC,MAAD,IAAWC,OAAO,QAAtB,EAAgC;AAC9B,aAAO,qBAAU+J,QAAjB;AACD;AACD,WAAOmM,aAAP;AACD,GARiC;AASlCO,UAAQ,kBAAM;AACZ,QAAM1W,SAAS,WAAIA,MAAJ,CAAW3Q,IAA1B;AACA,QAAM4Q,KAAK,WAAIA,EAAJ,CAAOtC,IAAlB;AACA,QAAI,CAACqC,MAAD,IAAWC,OAAO,SAAtB,EAAiC;AAC/B,aAAO,qBAAU6J,QAAjB;AACD;AACD,WAAOqM,aAAP;AACD,GAhBiC;AAiBlCQ,WAAS,mBAAM;AACb,QAAM3W,SAAS,WAAIA,MAAJ,CAAW3Q,IAA1B;AACA,QAAI,CAAC2Q,MAAL,EAAa;AACX,aAAO,qBAAU8J,QAAjB;AACD;AACD,WAAOqM,aAAP;AACD,GAvBiC;AAwBlCS,QAAM,gBAAM;AACV,QAAM5W,SAAS,WAAIA,MAAJ,CAAW3Q,IAA1B;AACA,QAAI,CAAC2Q,MAAL,EAAa;AACX,aAAO,qBAAU+J,SAAjB;AACD;AACD,WAAOoM,aAAP;AACD,GA9BiC;AA+BlCU,MAAI,cAAM;AACR,QAAM7W,SAAS,WAAIA,MAAJ,CAAW3Q,IAA1B;AACA,QAAM4Q,KAAK,WAAIA,EAAJ,CAAOtC,IAAlB;AACA,QAAMmZ,YAAY,WAAI7W,EAAJ,CAAO8W,OAAzB;AACA,QAAI,CAAC/W,MAAD,IAAWC,OAAO,SAAlB,IAA+B+W,OAAOC,UAAP,CAAkBH,SAAlB,KAAgC,GAAnE,EAAwE;AACtE,aAAO,qBAAU/M,SAAjB;AACD;AACD,WAAOoM,aAAP;AACD;AAvCiC,C;kBAFjBvQ,U;;;;;;;;;;;;;;;ACLrB;;;;;;;;;;;;IAEqBsR,Q;;;;;;;;;;;;;AAWnB;;;;;;;+BAOkBvR,O,EAAkC;AAClDuR,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,6BAA6B,0BAAgB6M,SAAhB,CAA0BmE,QAA9E;AACA,aAAO,0BAAgBpE,UAAhB,CAA2BuR,mBAA3B,CAA+C,0BAAgBtR,SAAhB,CAA0BmE,QAAzE,EAAmFrE,OAAnF,CAAP;AACD;;AAED;;;;;;;;;mCAMsBI,Y,EAAoE;AAAA,UAApCJ,OAAoC,uEAAV,EAAU;;AACxFuR,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,mBAAvB;AACA+M,mBAAa7S,gBAAb,CAA8BgkB,SAASE,aAAT,CAAuBC,QAArD,EAA+DH,SAASI,gBAAT,CAA0Bhd,IAA1B,CAA+B,IAA/B,EAAqCqL,OAArC,CAA/D,EAA8G,KAA9G;AACD;;;qCAEuBA,O,EAAyBvT,K,EAAkB;AACjE8kB,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,2BAAvB;AACA,UAAIue,YAAY5R,QAAQrK,IAAR,CAAa,UAACkb,QAAD;AAAA,eAAcA,SAASJ,MAAT,KAAoB,0BAAgBvQ,SAAhB,CAA0BmE,QAA5D;AAAA,OAAb,CAAhB;AACA,UAAI,CAACuN,SAAD,IAAcL,SAASM,WAA3B,EAAwC;AACtC;AACD;;AAED,UAAIC,gBAAgBF,UAAUG,WAA9B;AACA,UAAI3R,eAAe3T,MAAMnC,MAAzB;AACA,UAAI0nB,WAAWvlB,MAAMulB,QAArB;AACA,UAAIC,YAAYV,SAASW,iBAAT,CAA2BF,QAA3B,CAAhB;AACA,UAAIG,eAAeZ,SAASa,uBAAT,CAAiCN,aAAjC,CAAnB;;AAEAE,iBAAWT,SAASc,+BAAT,CAAyCL,QAAzC,EAAmDC,SAAnD,EAA8DE,YAA9D,CAAX;;AAEA,UAAI,CAAC/R,aAAakS,UAAlB,EAA8B;AAC5B,YAAIC,YAAYhB,SAASiB,gBAAT,EAAhB;AACAjB,iBAASne,OAAT,CAAiBC,KAAjB,CAAuB,iBAAvB;AACA+M,qBAAaqS,kBAAb,CAAgC,IAAIzoB,OAAO0oB,eAAX,CAA2BH,SAA3B,CAAhC;AACD;AACD,UAAI,CAACnS,aAAakS,UAAlB,EAA8B;AAC5B,cAAM,IAAIpV,KAAJ,CAAU,4BAAV,CAAN;AACD;AACDqU,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,iBAAvB;AACAke,eAASM,WAAT,GAAuBzR,aAAakS,UAAb,CAAwBK,aAAxB,CAAsC,WAAtC,EAAmDX,QAAnD,CAAvB;AACA,UAAI,CAACT,SAASM,WAAd,EAA2B;AACzB,cAAM,IAAI3U,KAAJ,CAAU,8BAAV,CAAN;AACD;AACDqU,eAASM,WAAT,CAAqBI,SAArB,GAAiCA,SAAjC;AACAV,eAASM,WAAT,CAAqBtkB,gBAArB,CAAsCgkB,SAASE,aAAT,CAAuBmB,WAA7D,EAA0ErB,SAASsB,mBAAT,CAA6Ble,IAA7B,CAAkC,IAAlC,EAAwCid,SAAxC,CAA1E,EAA8H,KAA9H;AACAL,eAASM,WAAT,CAAqBtkB,gBAArB,CAAsCgkB,SAASE,aAAT,CAAuBqB,SAA7D,EAAwEvB,SAASwB,iBAAjF,EAAoG,KAApG;AACAxB,eAASM,WAAT,CAAqBtkB,gBAArB,CAAsCgkB,SAASE,aAAT,CAAuBuB,SAA7D,EAAwEzB,SAAS0B,iBAAjF,EAAoG,KAApG;AACD;;;8BAEsB;AACrB1B,eAASM,WAAT,GAAuB,IAAvB;AACD;;;wCAE0B7R,O,EAAiBvT,K,EAAkB;AAC5D8kB,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,8BAAvB;AACA,UAAIwK,UAAUpR,MAAMoR,OAApB;AACA,UAAIqV,UAAU,IAAIC,cAAJ,EAAd;AACAD,cAAQE,YAAR,GAAuB,MAAvB;AACAF,cAAQ3lB,gBAAR,CAAyB,MAAzB,EAAiCgkB,SAAS8B,qBAA1C,EAAiE,KAAjE;AACAH,cAAQ3lB,gBAAR,CAAyB,OAAzB,EAAkCgkB,SAAS+B,qBAA3C,EAAkE,KAAlE;AACA,UAAIC,SAAShC,SAASiC,uBAAT,CAAiC3V,OAAjC,CAAb;AACAqV,cAAQO,IAAR,CAAa,MAAb,EAAqBzT,QAAQ0T,UAA7B,EAAyC,IAAzC;AACAR,cAAQS,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC;AACApC,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,2BAAvB;AACA6f,cAAQU,IAAR,CAAaL,MAAb;AACD;;;wCAEgC;AAC/BhC,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,qCAAvB;AACD;;;wCAEgC;AAC/Bke,eAASne,OAAT,CAAiBoB,KAAjB,CAAuB,wCAAvB;AACD;;;0CAE4B/H,K,EAAkB;AAC7C8kB,eAASne,OAAT,CAAiBC,KAAjB,CAAuB,wBAAvB;AACA,UAAI6f,UAAUzmB,MAAMnC,MAApB;AACA,UAAIupB,UAAUX,QAAQY,YAAR,CAAqBlN,IAArB,EAAd;AACA,UAAImN,cAAcC,KAAKC,KAAL,CAAWJ,OAAX,CAAlB;AACA,UAAI1V,MAAMoT,SAASa,uBAAT,CAAiC2B,YAAYG,GAA7C,CAAV;AACA3C,eAASM,WAAT,CAAqBpS,MAArB,CAA4BtB,GAA5B;AACD;;;4CAEoC;AACnC,YAAM,IAAIjB,KAAJ,CAAU,wBAAV,CAAN;AACD;;;sCAEwB8U,Q,EAA8B;AACrD,UAAImC,OAAO9W,SAASnG,aAAT,CAAuB,GAAvB,CAAX;AACAid,WAAKC,IAAL,GAAY7C,SAAS8C,cAAT,CAAwBrC,QAAxB,CAAZ;AACA,aAAOmC,KAAKG,QAAZ;AACD;;;uCAEkC;AACjC,UAAI/B,YAAY,IAAhB;AACA,UAAIvoB,OAAO0oB,eAAP,CAAuB6B,eAAvB,CAAuChD,SAASiD,UAAhD,EAA4D,WAA5D,CAAJ,EAA8E;AAC5EjC,oBAAYhB,SAASiD,UAArB;AACD,OAFD,MAEO;AACLjD,iBAASne,OAAT,CAAiBgG,IAAjB,CAAsB,0BAAtB;AACD;AACD,aAAOmZ,SAAP;AACD;;;mCAEqBkC,K,EAA2B;AAC/C,aAAOC,OAAOC,YAAP,CAAoBC,KAApB,CAA0B,IAA1B,EAAgC,IAAIC,WAAJ,CAAgBJ,MAAMK,MAAtB,CAAhC,CAAP;AACD;;;4CAE8BjQ,K,EAA2B;AACxD,UAAIkQ,MAAM/qB,OAAOgrB,IAAP,CAAYnQ,KAAZ,CAAV;AACA,UAAIoQ,YAAYF,IAAI7nB,MAApB;AACA,UAAIunB,QAAQ,IAAIS,UAAJ,CAAe,IAAIC,WAAJ,CAAgBF,SAAhB,CAAf,CAAZ;AACA,WAAK,IAAIhoB,IAAI,CAAb,EAAgBA,IAAIgoB,SAApB,EAA+BhoB,GAA/B,EAAoC;AAClCwnB,cAAMxnB,CAAN,IAAW8nB,IAAI7M,UAAJ,CAAejb,CAAf,CAAX;AACD;AACD,aAAOwnB,KAAP;AACD;;;oDAEsCzC,Q,EAAsB5oB,E,EAA0BgsB,I,EAA8B;AACnH,UAAI,OAAOhsB,EAAP,KAAc,QAAlB,EAA4B;AAC1BA,aAAKmoB,SAAS8D,cAAT,CAAwBjsB,EAAxB,CAAL;AACD;AACD,UAAIksB,SAAS,CAAb;AACA,UAAIR,SAAS,IAAIK,WAAJ,CAAgBnD,SAASuD,UAAT,GAAsB,CAAtB,GAA0BnsB,GAAGmsB,UAA7B,GAA0C,CAA1C,GAA8CH,KAAKG,UAAnE,CAAb;AACA,UAAIC,WAAW,IAAIC,QAAJ,CAAaX,MAAb,CAAf;;AAEA,UAAIY,gBAAgB,IAAIR,UAAJ,CAAeJ,MAAf,EAAuBQ,MAAvB,EAA+BtD,SAASuD,UAAxC,CAApB;AACAG,oBAAcnX,GAAd,CAAkByT,QAAlB;AACAsD,gBAAUtD,SAASuD,UAAnB;;AAEAC,eAASG,SAAT,CAAmBL,MAAnB,EAA2BlsB,GAAGmsB,UAA9B,EAA0C,IAA1C;AACAD,gBAAU,CAAV;;AAEA,UAAIM,UAAU,IAAIV,UAAJ,CAAeJ,MAAf,EAAuBQ,MAAvB,EAA+BlsB,GAAGmsB,UAAlC,CAAd;AACAK,cAAQrX,GAAR,CAAYnV,EAAZ;AACAksB,gBAAUM,QAAQL,UAAlB;;AAEAC,eAASG,SAAT,CAAmBL,MAAnB,EAA2BF,KAAKG,UAAhC,EAA4C,IAA5C;AACAD,gBAAU,CAAV;;AAEA,UAAIO,YAAY,IAAIX,UAAJ,CAAeJ,MAAf,EAAuBQ,MAAvB,EAA+BF,KAAKG,UAApC,CAAhB;AACAM,gBAAUtX,GAAV,CAAc6W,IAAd;;AAEA,aAAO,IAAIF,UAAJ,CAAeJ,MAAf,EAAuB,CAAvB,EAA0BA,OAAOS,UAAjC,CAAP;AACD;;;mCAEqBO,M,EAA6B;AACjD,UAAIhB,SAAS,IAAIK,WAAJ,CAAgBW,OAAO5oB,MAAP,GAAgB,CAAhC,CAAb;AACA,UAAIunB,QAAQ,IAAII,WAAJ,CAAgBC,MAAhB,CAAZ;AACA,WAAK,IAAI7nB,IAAI,CAAR,EAAW8oB,SAASD,OAAO5oB,MAAhC,EAAwCD,IAAI8oB,MAA5C,EAAoD9oB,GAApD,EAAyD;AACvDwnB,cAAMxnB,CAAN,IAAW6oB,OAAO5N,UAAP,CAAkBjb,CAAlB,CAAX;AACD;AACD,aAAOwnB,KAAP;AACD;;;4CAE8B5P,K,EAA2B;AACxD,UAAImR,SAAS,mEAAb;AACA,UAAIC,SAAS,EAAb;AACA,UAAIC,aAAJ;AAAA,UAAUC,aAAV;AAAA,UAAgBC,aAAhB;AAAA,UAAsBC,aAAtB;AAAA,UAA4BC,aAA5B;AAAA,UAAkCC,aAAlC;AAAA,UAAwCC,aAAxC;AACA,UAAIvpB,IAAI,CAAR;AACA,aAAOA,IAAI4X,MAAM3X,MAAjB,EAAyB;AACvBgpB,eAAOrR,MAAM5X,GAAN,CAAP;AACAkpB,eAAOlpB,IAAI4X,MAAM3X,MAAV,GAAmB2X,MAAM5X,GAAN,CAAnB,GAAgCokB,OAAOoF,GAA9C;AACAL,eAAOnpB,IAAI4X,MAAM3X,MAAV,GAAmB2X,MAAM5X,GAAN,CAAnB,GAAgCokB,OAAOoF,GAA9C;;AAEAJ,eAAOH,QAAQ,CAAf;AACAI,eAAQ,CAACJ,OAAO,CAAR,KAAc,CAAf,GAAqBC,QAAQ,CAApC;AACAI,eAAQ,CAACJ,OAAO,EAAR,KAAe,CAAhB,GAAsBC,QAAQ,CAArC;AACAI,eAAOJ,OAAO,EAAd;;AAEA,YAAIM,MAAMP,IAAN,CAAJ,EAAiB;AACfI,iBAAOC,OAAO,EAAd;AACD,SAFD,MAEO,IAAIE,MAAMN,IAAN,CAAJ,EAAiB;AACtBI,iBAAO,EAAP;AACD;AACDP,kBAAUD,OAAOW,MAAP,CAAcN,IAAd,IAAsBL,OAAOW,MAAP,CAAcL,IAAd,CAAtB,GACRN,OAAOW,MAAP,CAAcJ,IAAd,CADQ,GACcP,OAAOW,MAAP,CAAcH,IAAd,CADxB;AAED;AACD,aAAOP,MAAP;AACD;;;;;;AAtMkB1E,Q,CACZne,O,GAAU,0BAAgB4K,SAAhB,CAA0B,UAA1B,C;AADEuT,Q,CAGZiD,U,GAAqB,mB;AAHTjD,Q,CAIZE,a,GAAkD;AACvDC,YAAU,eAD6C;AAEvDkB,eAAa,kBAF0C;AAGvDE,aAAW,gBAH4C;AAIvDE,aAAW;AAJ4C,C;kBAJtCzB,Q;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;;;;;;;;;AAEA;;;;IAIqBqF,K;;;;;;;AA2CnB;;;;;;;;;AAlBA;;;;;;AAZA;;;;;;AAZA;;;;;iCAkDoB5d,M,EAAgBtH,M,EAA+B;AACjE,aAAO,IAAI,IAAJ,CAASsH,MAAT,EAAiBtH,MAAjB,CAAP;AACD;;AAED;;;;;;;;;;AAjBA;;;;AAPA;;;;;;AAZA;;;;;;AAZA;;;;;;;;kCAwDqBsH,M,EAAgBR,Y,EAAgC;AACnE,aAAO,8BAAoBS,aAApB,CAAkCD,MAAlC,EAA0CR,YAA1C,CAAP;AACD;;AAED;;;;;;;;AAKA,iBAAYQ,MAAZ,EAA4BtH,MAA5B,EAAkD;AAAA;;AAAA;;AAAA,UA1ClDmlB,uBA0CkD,GA1CD,EA0CC;;AAEhD,UAAK3kB,aAAL,GAAqB,4BAArB;AACA,UAAK4kB,mBAAL;AACA,UAAKC,KAAL,CAAW/d,MAAX,EAAmBtH,MAAnB;AAJgD;AAKjD;;AAED;;;;;;;;;;4BAMQsH,M,EAAgBtH,M,EAA4B;AAClD,WAAKslB,MAAL;AACA,WAAK9kB,aAAL,CAAmB9F,SAAnB;AACA,UAAI,KAAK0I,GAAT,EAAc;AACZ,mBAAImiB,eAAJ,CAAoB,KAAKniB,GAAzB,EAA8B,KAA9B;AACD;AACD,WAAKiiB,KAAL,CAAW/d,MAAX,EAAmBtH,MAAnB;AACD;;AAED;;;;;;;;8BAKgB;AACd,WAAKslB,MAAL;AACA,UAAI,KAAKliB,GAAT,EAAc;AACZ,aAAKF,KAAL;AACA,mBAAIqiB,eAAJ,CAAoB,KAAKniB,GAAzB,EAA8B,KAA9B;AACA,mBAAIK,WAAJ,CAAgB,KAAKL,GAAL,CAASM,UAAzB,EAAqC,KAAKN,GAA1C;AACD;AACD,WAAK+hB,uBAAL,GAA+B,EAA/B;AACA,WAAK3kB,aAAL,CAAmB8C,OAAnB;AACA,oCAAoBA,OAApB;AACA,WAAKkiB,mBAAL,GAA2B,IAA3B;AACD;;AAED;;;;;;;;;;AASA;;;;;6BAKe;AAAA;;AACbrf,aAAOC,IAAP,uBAAyBC,OAAzB,CAAiC,UAACwB,UAAD,EAAgB;AAC/C,eAAKrH,aAAL,CAAmBtF,MAAnB,CAA0B,OAAKkI,GAA/B,EAAoC,qBAAYyE,UAAZ,CAApC,EAA6D,YAAM;AACjE,iBAAKjG,aAAL,CAAmB,wBAAc,qBAAYiG,UAAZ,CAAd,CAAnB;AACD,SAFD;AAGD,OAJD;AAKA,UAAI,KAAK2d,mBAAT,EAA8B;AAC5B,aAAKhlB,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsqB,mBAA/B,EAAoD,sBAAa9nB,mBAAjE,EAAsF,UAAC3C,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAAtF;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsqB,mBAA/B,EAAoD,sBAAa7nB,mBAAjE,EAAsF,UAAC5C,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAAtF;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsqB,mBAA/B,EAAoD,sBAAa5nB,kBAAjE,EAAqF,UAAC7C,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAArF;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsqB,mBAA/B,EAAoD,sBAAaznB,gBAAjE,EAAmF,UAAChD,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAAnF;AACA,aAAKyF,aAAL,CAAmBtF,MAAnB,CAA0B,KAAKsqB,mBAA/B,EAAoD,sBAAa3nB,gBAAjE,EAAmF,UAAC9C,KAAD;AAAA,iBAAsB,OAAK6G,aAAL,CAAmB7G,KAAnB,CAAtB;AAAA,SAAnF;AACD;AACF;;AAED;;;;;;;;6BAKe;AAAA;;AACboL,aAAOC,IAAP,uBAAyBC,OAAzB,CAAiC,UAACwB,UAAD,EAAgB;AAC/C,eAAKrH,aAAL,CAAmBxF,QAAnB,CAA4B,OAAKoI,GAAjC,EAAsC,qBAAYyE,UAAZ,CAAtC;AACD,OAFD;AAGA,UAAI,KAAK2d,mBAAT,EAA8B;AAC5B,aAAKhlB,aAAL,CAAmBxF,QAAnB,CAA4B,KAAKwqB,mBAAjC,EAAsD,sBAAa9nB,mBAAnE;AACA,aAAK8C,aAAL,CAAmBxF,QAAnB,CAA4B,KAAKwqB,mBAAjC,EAAsD,sBAAa7nB,mBAAnE;AACA,aAAK6C,aAAL,CAAmBxF,QAAnB,CAA4B,KAAKwqB,mBAAjC,EAAsD,sBAAa5nB,kBAAnE;AACA,aAAK4C,aAAL,CAAmBxF,QAAnB,CAA4B,KAAKwqB,mBAAjC,EAAsD,sBAAa3nB,gBAAnE;AACD;AACF;;AAED;;;;;;;sCAIoC;AAClC,aAAO,KAAKuF,GAAZ;AACD;;AAED;;;;;;;;qCAKiB2L,U,EAA8B;AAC7C,UAAI,KAAKyW,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyBlhB,gBAAzB,CAA0CyK,UAA1C;AACD;AACF;;AAED;;;;;;;;qCAKiBC,U,EAA8B;AAC7C,UAAI,KAAKwW,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyBjhB,gBAAzB,CAA0CyK,UAA1C;AACD;AACF;;AAED;;;;;;;;oCAKgBnK,S,EAA8B;AAC5C,WAAK4gB,wBAAL;AACA,UAAI,KAAKD,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyB/gB,eAAzB,CAAyCI,SAAzC;AACD;AACD,WAAK6gB,qBAAL,CAA2B7gB,SAA3B;AACD;;AAED;;;;;;;;;oCAMsB;AACpB,UAAI,KAAK2gB,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyBhhB,aAAzB;AACD;AACD,WAAKihB,wBAAL;AACD;;AAED;;;;;;;;;4CAM8B;AAC5B,UAAI,KAAKD,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyBzgB,qBAAzB;AACD;AACF;;AAED;;;;;;;;;+CAMoC;AAClC,UAAI,KAAKygB,mBAAT,EAA8B;AAC5B,eAAO,KAAKA,mBAAL,CAAyBxgB,wBAAzB,EAAP;AACD;AACD,aAAO,KAAP;AACD;;AAED;;;;;;;;;qCAMuB;AACrB,UAAI,KAAKwgB,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyB3hB,cAAzB;AACD;AACF;;AAED;;;;;;;;;6BAMkB;AAChB,aAAO,KAAK2hB,mBAAL,GAA2B,KAAKA,mBAAL,CAAyB7hB,MAAzB,EAA3B,GAA+D,KAAtE;AACD;;AAED;;;;;;;;2BAKa;AACX,WAAKP,GAAL,CAASL,IAAT;AACD;;AAED;;;;;;;;4BAKc;AACZ,aAAO,KAAKK,GAAL,CAASF,KAAT,EAAP;AACD;;AAED;;;;;;;;;yBAMKZ,S,EAAqC;AAAA;;AACxC,WAAKc,GAAL,CAASZ,IAAT;AACA,aAAO,KAAKmjB,iCAAL,CAAuCljB,IAAvC,CAA4C,YAAM;AACvD,YAAI,OAAK+iB,mBAAT,EAA8B;AAC5B,iBAAO,OAAKA,mBAAL,CAAyBhjB,IAAzB,CAA8BF,SAA9B,CAAP;AACD;AACD,eAAO3H,QAAQC,OAAR,CAAgB,EAAhB,CAAP;AACD,OALM,CAAP;AAMD;;AAED;;;;;;;;;4BAuEc,CACb;;AAED;;;;;;;;;;AA4SA;;;;;;;0BAOM0M,M,EAAgBtH,M,EAA4B;AAChD,WAAKM,OAAL,GAAeN,MAAf;AACA,WAAK2lB,iCAAL,GAA0C,KAAKH,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBliB,OAAzB,EAA3B,GAAgE3I,QAAQC,OAAR,EAA1G;AACA,WAAK4qB,mBAAL,GAA2B,IAA3B;AACA,WAAKI,uBAAL,CAA6Bte,MAA7B;AACA,WAAKue,MAAL;AACD;;AAED;;;;;;;;0CAK4B;AAC1B,WAAKziB,GAAL,GAAW,WAAIoC,aAAJ,CAAkB,OAAlB,CAAX;AACA,WAAKpC,GAAL,CAAS1L,EAAT,GAAc,iBAAUiO,QAAV,CAAmB,CAAnB,CAAd;AACA,WAAKvC,GAAL,CAAS0iB,QAAT,GAAoB,KAApB;AACD;;AAED;;;;;;;;;4CAMwBxe,M,EAAsB;AAC5C,WAAKke,mBAAL,GAA2B,8BAAoBO,qBAApB,CAA0C,KAAK1iB,eAAL,EAA1C,EAAkEiE,MAAlE,EAA0E,KAAKhH,OAA/E,CAA3B;AACD;;AAED;;;;;;;;;0CAMsBuE,S,EAA8B;AAAA;;AAClD,UAAImhB,cAAc,KAAKC,4BAAL,EAAlB;AACA,UAAID,WAAJ,EAAiB;AACf;;;;;;;;AAQA,YAAI,KAAK1lB,OAAL,CAAaiC,QAAb,CAAsByJ,kBAA1B,EAA8C;AAC5Cga,sBAAYhP,IAAZ,GAAmB,SAAnB;AACD,SAFD,MAEO;AACLgP,sBAAYhP,IAAZ,GAAmB,KAAKmO,uBAAL,CAA6BtgB,UAAU/M,KAAvC,IAAgD,QAAhD,GAA2D,SAA9E;AACA,eAAKqtB,uBAAL,CAA6BtgB,UAAU/M,KAAvC,IAAgD,IAAhD;AACAkuB,sBAAYE,WAAZ,GAA0B,UAAC1uB,CAAD;AAAA,mBAAO,OAAKyQ,YAAL,CAAkBzQ,CAAlB,CAAP;AAAA,WAA1B;AACD;AACF;AACF;;AAED;;;;;;;;+CAKiC;AAC/B,UAAIwuB,cAAyB,KAAKC,4BAAL,EAA7B;AACA,UAAID,WAAJ,EAAiB;AACfA,oBAAYE,WAAZ,GAA0B,IAA1B;AACD;AACF;;AAED;;;;;;;;;iCAMa1uB,C,EAAoB;AAC/B,UAAIqN,YAAuBrN,EAAEmB,aAA7B;AACA,UAAI2Q,aAAyB,EAA7B;AACAzE,gBAAUmS,IAAV,GAAiB,QAAjB;AAH+B;AAAA;AAAA;;AAAA;AAI/B,6BAAgBnS,UAAUyE,UAA1B,8HAAsC;AAAA,cAA7BC,GAA6B;;AACpC;AACA,cAAIA,eAAejR,OAAOolB,MAA1B,EAAkC;AAChCpU,uBAAWrP,IAAX,CAAgBsP,GAAhB;AACD,WAFD,MAEO,IAAIA,eAAejR,OAAO6tB,YAA1B,EAAwC;AAC7C7c,uBAAWrP,IAAX,CAAgB,gBAAQsP,IAAIjH,SAAZ,EAAuBiH,IAAIoU,OAA3B,EAAoCpU,IAAInF,IAAxC,CAAhB;AACD;AACF;AAX8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAY/B,WAAKxC,aAAL,CAAmB,wBAAc,sBAAa/D,gBAA3B,EAA6C,EAACwL,MAAMC,UAAP,EAA7C,CAAnB;AACD;;AAED;;;;;;;;mDAK2C;AACzC,UAAM3E,aAAa,KAAKvB,GAAL,CAASuB,UAA5B;AACA,WAAK,IAAI9K,KAAT,IAAkB8K,UAAlB,EAA8B;AAC5B,YAAIA,WAAW0S,cAAX,CAA0Bxd,KAA1B,CAAJ,EAAsC;AACpC,cAAMgL,YAAYF,WAAWyhB,SAASvsB,KAAT,CAAX,CAAlB;AACA,cAAIgL,aAAaA,UAAUmS,IAAV,KAAmB,UAApC,EAAgD;AAC9C,mBAAOnS,SAAP;AACD;AACF;AACF;AACD,aAAO,IAAP;AACD;;;wBAxpBgB;AACf,aAAOqgB,MAAMxtB,EAAb;AACD;;;sBAsLO4P,M,EAAsB;AAC5B,WAAKlE,GAAL,CAASyF,GAAT,GAAevB,MAAf;AACD;;AAED;;;;;;wBAKkB;AAChB,UAAI,KAAKke,mBAAT,EAA8B;AAC5B,eAAO,KAAKA,mBAAL,CAAyB3c,GAAhC;AACD;AACD,aAAO,EAAP;AACD;;AAED;;;;;;;;wBAK0B;AACxB,aAAO,KAAK2c,mBAAL,GAA2B,KAAKA,mBAAL,CAAyB7a,WAApD,GAAkE,CAAzE;AACD;;AAED;;;;;;;sBAMgBJ,E,EAAkB;AAChC,UAAI,KAAKib,mBAAT,EAA8B;AAC5B,aAAKA,mBAAL,CAAyB7a,WAAzB,GAAuCJ,EAAvC;AACD;AACF;;AAED;;;;;;;;wBAKuB;AACrB,aAAO,KAAKib,mBAAL,GAA2B,KAAKA,mBAAL,CAAyB9a,QAApD,GAA+Dqa,GAAtE;AACD;;AAED;;;;;;;;;sBAMWna,G,EAAmB;AAC5B,WAAKxH,GAAL,CAASgF,MAAT,GAAkBwC,GAAlB;AACD;;AAED;;;;;;wBAKqB;AACnB,aAAO,KAAKxH,GAAL,CAASgF,MAAhB;AACD;;;wBAUqB;AACpB,aAAO,KAAKhF,GAAL,CAAS6F,MAAhB;AACD;;AAED;;;;;;;;wBAKuB;AACrB,aAAO,KAAK7F,GAAL,CAAS2H,OAAhB;AACD;;AAED;;;;;;;;wBAK2B;AACzB,aAAO,KAAK3H,GAAL,CAASijB,QAAhB;AACD;;AAED;;;;;;;;wBAKyB;AACvB,aAAO,KAAKjjB,GAAL,CAASkjB,MAAhB;AACD;;AAED;;;;;;;;wBAK2B;AACzB,aAAO,KAAKljB,GAAL,CAASmjB,QAAhB;AACD;;AAED;;;;;;;;;sBAMUvb,I,EAAqB;AAC7B,WAAK5H,GAAL,CAASiF,KAAT,GAAiB2C,IAAjB;AACD;;AAED;;;;;;wBAKqB;AACnB,aAAO,KAAK5H,GAAL,CAASiF,KAAhB;AACD;;AAED;;;;;;;;wBAK4B;AAC1B,aAAO,KAAKjF,GAAL,CAASojB,YAAhB;AACD;;AAED;;;;;;;;;sBAMWvkB,M,EAAsB;AAC/B,WAAKmB,GAAL,CAASnB,MAAT,GAAkBA,MAAlB;AACD;;AAED;;;;;;wBAKqB;AACnB,aAAO,KAAKmB,GAAL,CAASnB,MAAhB;AACD;;AAED;;;;;;;;;sBAMYsG,O,EAAuB;AACjC,WAAKnF,GAAL,CAASmF,OAAT,GAAmBA,OAAnB;AACD;;AAED;;;;;;wBAKsB;AACpB,aAAO,KAAKnF,GAAL,CAASmF,OAAhB;AACD;;AAED;;;;;;;;;sBAMaG,Q,EAAyB;AACpC,WAAKtF,GAAL,CAASsF,QAAT,GAAoBA,QAApB;AACD;;AAED;;;;;;wBAKwB;AACtB,aAAO,KAAKtF,GAAL,CAASsF,QAAhB;AACD;;AAED;;;;;;;;;sBAMS+d,I,EAAe;AACtB,WAAKrjB,GAAL,CAASqjB,IAAT,GAAgBA,IAAhB;AACD;;AAED;;;;;;wBAKoB;AAClB,aAAO,KAAKrjB,GAAL,CAASqjB,IAAhB;AACD;;AAED;;;;;;;;;sBAMaX,Q,EAAyB;AACpC,WAAK1iB,GAAL,CAAS0iB,QAAT,GAAoBA,QAApB;AACD;;AAED;;;;;;wBAKwB;AACtB,aAAO,KAAK1iB,GAAL,CAAS0iB,QAAhB;AACD;;AAED;;;;;;;;;sBAMiB1a,Y,EAA4B;AAC3C,WAAKhI,GAAL,CAASgI,YAAT,GAAwBA,YAAxB;AACD;;AAED;;;;;;wBAK2B;AACzB,aAAO,KAAKhI,GAAL,CAASgI,YAAhB;AACD;;AAED;;;;;;;;;sBAMwBsb,mB,EAA6B;AACnD,WAAKtjB,GAAL,CAASsjB,mBAAT,GAA+BA,mBAA/B;AACD;;AAED;;;;;;wBAKkC;AAChC,aAAO,KAAKtjB,GAAL,CAASsjB,mBAAhB;AACD;;AAED;;;;;;;;wBAKqB;AACnB,aAAO,KAAKtjB,GAAL,CAASujB,KAAhB;AACD;;AAED;;;;;;;;wBAKyB;AACvB,aAAO,KAAKvjB,GAAL,CAASN,KAAhB;AACD;;AAED;;;;;;;wBAI2B;AACzB,aAAO,KAAKM,GAAL,CAASwjB,YAAhB;AACD;;AAED;;;;;;;;;;;;wBASyB;AACvB,aAAO,KAAKxjB,GAAL,CAASyjB,UAAhB;AACD;;AAED;;;;;;;wBAI0B;AACxB,aAAO,KAAKzjB,GAAL,CAAS0jB,WAAhB;AACD;;AAED;;;;;;;wBAIyB;AACvB,aAAO,KAAK1jB,GAAL,CAAS2jB,UAAhB;AACD;;AAED;;;;;;sBAGgBze,W,EAA4B;AAC1C,UAAIA,WAAJ,EAAiB;AACf,aAAKlF,GAAL,CAASwC,YAAT,CAAsB,aAAtB,EAAqC,EAArC;AACD,OAFD,MAEO;AACL,aAAKxC,GAAL,CAASmiB,eAAT,CAAyB,aAAzB;AACD;AACF;;AAED;;;;wBAG2B;AACzB,aAAO,KAAKniB,GAAL,CAAS4jB,YAAT,CAAsB,aAAtB,MAAyC,EAAhD;AACD;;AAED;;;;;;;;AAKA;;;;;;kCAMqB;AACnB,UAAI;AACF9B,cAAM+B,QAAN,GAAiB,WAAIzhB,aAAJ,CAAkB,OAAlB,CAAjB;AACA0f,cAAM+B,QAAN,CAAe7e,MAAf,GAAwB,GAAxB;AACD,OAHD,CAGE,OAAO5Q,CAAP,EAAU;AACV,eAAO,KAAP;AACD;AACD,aAAO,CAAC,CAAC0tB,MAAM+B,QAAN,CAAevX,WAAxB;AACD;;;;;;AA3pBkBwV,K,CAyCZxtB,E,GAAa,O;kBAzCDwtB,K;;;;;;;;;;;;;;;;;ACfrB;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA;;;;;IAKqBgC,a;;;;;;;AA0DnB;;;;;;;;AArBA;;;;;;;AAOA;;;;;;;AAOA;;;;;;AA5BA;;;;;;;;AAdA;;;;;;gCAwDmBjY,Q,EAA2B;AAC5C,UAAIS,cAAc,KAAlB;AACA,UAAI,OAAOT,QAAP,KAAoB,QAAxB,EAAkC;AAChCS,sBAAc,CAAC,CAAEwX,cAAcC,UAAd,CAAyBzX,WAAzB,CAAqCT,SAAS3X,WAAT,EAArC,CAAjB;AACD;AACD4vB,oBAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,qCAAqCsN,QAArC,GAAgD,MAAhD,GAAyDS,YAAY0X,QAAZ,EAArF;AACA,aAAO1X,WAAP;AACD;;AAED;;;;;;;;AA5CA;;;;;;;AAdA;;;;;;;AAfA;;;;;;;;;+BAgFkBpB,O,EAAkC;AAClD,UAAIqB,aAAa,KAAjB;AADkD;AAAA;AAAA;;AAAA;AAElD,6BAAwBuX,cAAcG,aAAtC,8HAAqD;AAAA,cAA5CC,WAA4C;;AACnD,cAAIA,YAAY3X,UAAZ,CAAuBrB,OAAvB,CAAJ,EAAqC;AACnC4Y,0BAAcK,YAAd,GAA6BD,WAA7B;AACA3X,yBAAa,IAAb;AACA;AACD;AACF;AARiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASlDuX,oBAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,0BAA0BgO,WAAWyX,QAAX,EAAtD,EAA6E9Y,OAA7E;AACA,aAAOqB,UAAP;AACD;;AAED;;;;;;;;;;;;kCASqBjB,Y,EAAgCpH,M,EAAgBtH,M,EAA2C;AAC9G,aAAO,IAAI,IAAJ,CAAS0O,YAAT,EAAuBpH,MAAvB,EAA+BtH,MAA/B,CAAP;AACD;;AAED;;;;;;;;;AAMA,yBAAY0O,YAAZ,EAA4CpH,MAA5C,EAA4DtH,MAA5D,EAAkF;AAAA;;AAChFknB,kBAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,kBAA5B;;AADgF,8HAE1E+M,YAF0E,EAE5DpH,MAF4D;;AAGhF,UAAKkgB,oBAAL;AACA,UAAKhnB,aAAL,GAAqB,4BAArB;AACA,UAAKinB,mBAAL,GAA2BznB,OAAOsB,OAAP,CAAeomB,WAA1C;AALgF;AAMjF;;AAED;;;;;;;;;2CAK6B;AAC3B,UAAIR,cAAcK,YAAd,IAA8B,KAAK3Y,UAAnC,IAAiD,KAAKA,UAAL,CAAgBN,OAArE,EAA8E;AAC5E4Y,sBAAcK,YAAd,CAA2BI,cAA3B,CAA0C,KAAKhZ,aAA/C,EAA8D,KAAKC,UAAL,CAAgBN,OAA9E;AACD;AACF;;AAED;;;;;;;;;4CAM8B;AAC5B,UAAIsZ,gBAAgB,qBAAWC,8BAAX,CAA0C,KAAKJ,mBAA/C,EAAoE,KAAK9Y,aAAL,CAAmBoL,WAAvF,EAAoG,KAAKpL,aAAL,CAAmBmL,YAAvH,CAApB;AACA,UAAI8N,aAAJ,EAAmB;AACjB,aAAKhZ,UAAL,GAAkBgZ,aAAlB;AACD;AACF;;AAED;;;;;;;;;6CAMkC;AAChC,aAAO,KAAKhZ,UAAL,GAAkB,KAAKA,UAAL,CAAgBa,QAAhB,KAA6B,WAA/C,GAA6D,KAApE;AACD;;AAED;;;;;;;;;yBAMKnN,S,EAAqC;AAAA;;AACxC,UAAI,CAAC,KAAKwlB,YAAV,EAAwB;AACtB,aAAKA,YAAL,GAAoB,IAAIntB,OAAJ,CAAY,UAACC,OAAD,EAAUgM,MAAV,EAAqB;AACnD;AACA,iBAAKpG,aAAL,CAAmBunB,UAAnB,CAA8B,OAAKpZ,aAAnC,EAAkD,qBAAYpS,WAA9D,EAA2E,YAAM;AAC/E,gBAAImG,OAAO,EAACpJ,QAAQ,OAAK0uB,gBAAL,EAAT,EAAX;AACAd,0BAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,yCAA5B;AACA/G,oBAAQ8H,IAAR;AACD,WAJD;AAKA,iBAAKlC,aAAL,CAAmBunB,UAAnB,CAA8B,OAAKpZ,aAAnC,EAAkD,qBAAYrS,KAA9D,EAAqE,UAACwG,KAAD,EAAW;AAC9EokB,0BAAcxlB,OAAd,CAAsBoB,KAAtB,CAA4BA,KAA5B;AACA8D,mBAAO9D,KAAP;AACD,WAHD;AAIA,cAAI,OAAKmlB,sBAAL,EAAJ,EAAmC;AACjC,mBAAKC,qBAAL;AACD;AACD,cAAI,OAAKtZ,UAAL,IAAmB,OAAKA,UAAL,CAAgBuZ,GAAvC,EAA4C;AAC1C,mBAAKxZ,aAAL,CAAmB9F,GAAnB,GAAyB,OAAK+F,UAAL,CAAgBuZ,GAAzC;AACA,mBAAKtZ,QAAL,CAAc,iCAAuBC,YAAvB,CAAoC/Q,gBAAlD,EAAoE,EAACiZ,MAAM,OAAKiR,sBAAL,KAAgC,QAAhC,GAA2C,MAAlD,EAApE;AACD;AACD,cAAI3lB,SAAJ,EAAe;AACb,mBAAKqM,aAAL,CAAmBhE,WAAnB,GAAiCrI,SAAjC;AACD;AACD,iBAAKqM,aAAL,CAAmBnM,IAAnB;AACD,SAtBmB,CAApB;AAuBD;AACD,aAAO,KAAKslB,YAAZ;AACD;;AAED;;;;;;;;8BAKsB;AAAA;;AACpBZ,oBAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,SAA5B;AACA,aAAO,sHAAgBc,IAAhB,CAAqB,YAAM;AAChC,eAAKjC,aAAL,CAAmB8C,OAAnB;AACA,eAAKmkB,mBAAL,GAA2B,EAA3B;AACA,eAAKK,YAAL,GAAoB,IAApB;AACA,YAAIZ,cAAcK,YAAlB,EAAgC;AAC9BL,wBAAcK,YAAd,CAA2BjkB,OAA3B;AACA4jB,wBAAcK,YAAd,GAA6B,IAA7B;AACD;AACF,OARM,CAAP;AASD;;AAED;;;;;;;;;uCAMiC;AAC/B,UAAIa,cAAc,KAAKC,qBAAL,EAAlB;AACA,UAAIC,cAAc,KAAKC,qBAAL,EAAlB;AACA,UAAI5jB,aAAa,KAAK6jB,oBAAL,EAAjB;AACA,aAAOJ,YAAYpb,MAAZ,CAAmBsb,WAAnB,EAAgCtb,MAAhC,CAAuCrI,UAAvC,CAAP;AACD;;AAED;;;;;;;;;4CAMsC;AACpC,UAAI,KAAKsjB,sBAAL,EAAJ,EAAmC;AACjC,eAAO,KAAKQ,gCAAL,EAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAKC,6BAAL,EAAP;AACD;AACF;;AAED;;;;;;;;;uDAMiD;AAC/C,UAAIN,cAAc,KAAKX,mBAAvB;AACA,UAAIkB,eAAe,EAAnB;AACA,UAAIP,WAAJ,EAAiB;AACf,aAAK,IAAI7sB,IAAI,CAAb,EAAgBA,IAAI6sB,YAAY5sB,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C,cAAI9D,WAAW;AACbC,gBAAI0wB,YAAY7sB,CAAZ,EAAe7D,EADN;AAEb6C,uBAAW6tB,YAAY7sB,CAAZ,EAAehB,SAFb;AAGbhB,mBAAO6uB,YAAY7sB,CAAZ,EAAehC,KAHT;AAIbC,oBAAQ4uB,YAAY7sB,CAAZ,EAAe/B,MAJV;AAKb7B,oBAAQ,KAAKiX,UAAL,GAAkBwZ,YAAY7sB,CAAZ,EAAe7D,EAAf,KAAsB,KAAKkX,UAAL,CAAgBlX,EAAxD,GAA6D,KALxD;AAMbI,mBAAOyD;AANM,WAAf;AAQAotB,uBAAa1uB,IAAb,CAAkB,yBAAexC,QAAf,CAAlB;AACD;AACF;AACD,aAAOkxB,YAAP;AACD;;AAED;;;;;;;;;oDAM8C;AAC5C;AACA,UAAIP,cAAc,KAAKzZ,aAAL,CAAmByZ,WAArC;AACA,UAAIO,eAAe,EAAnB;AACA,UAAIP,WAAJ,EAAiB;AACf,aAAK,IAAI7sB,IAAI,CAAb,EAAgBA,IAAI6sB,YAAY5sB,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C,cAAI9D,WAAW;AACb;AACAC,gBAAI0wB,YAAY7sB,CAAZ,EAAe7D,EAFN;AAGbC,oBAAQywB,YAAY7sB,CAAZ,EAAeqtB,QAHV;AAIbhxB,mBAAOwwB,YAAY7sB,CAAZ,EAAe3D,KAJT;AAKbC,sBAAUuwB,YAAY7sB,CAAZ,EAAe1D,QALZ;AAMbC,mBAAOyD;AANM,WAAf;AAQAotB,uBAAa1uB,IAAb,CAAkB,yBAAexC,QAAf,CAAlB;AACD;AACF;AACD,aAAOkxB,YAAP;AACD;;AAED;;;;;;;;;4CAMsC;AACpC,UAAIL,cAAc,KAAK3Z,aAAL,CAAmB2Z,WAArC;AACA,UAAIK,eAAe,EAAnB;AACA,UAAIL,WAAJ,EAAiB;AACf,aAAK,IAAI/sB,IAAI,CAAb,EAAgBA,IAAI+sB,YAAY9sB,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C,cAAI9D,WAAW;AACbC,gBAAI4wB,YAAY/sB,CAAZ,EAAe7D,EADN;AAEbC,oBAAQ2wB,YAAY/sB,CAAZ,EAAestB,OAFV;AAGbjxB,mBAAO0wB,YAAY/sB,CAAZ,EAAe3D,KAHT;AAIbC,sBAAUywB,YAAY/sB,CAAZ,EAAe1D,QAJZ;AAKbC,mBAAOyD;AALM,WAAf;AAOAotB,uBAAa1uB,IAAb,CAAkB,yBAAexC,QAAf,CAAlB;AACD;AACF;AACD,aAAOkxB,YAAP;AACD;;AAED;;;;;;;;;2CAMqC;AACnC,UAAIhkB,aAAa,KAAKgK,aAAL,CAAmBhK,UAApC;AACA,UAAIgkB,eAAe,EAAnB;AACA,UAAIhkB,UAAJ,EAAgB;AACd,aAAK,IAAIpJ,IAAI,CAAb,EAAgBA,IAAIoJ,WAAWnJ,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,cAAI9D,WAAW;AACbwB,kBAAM0L,WAAWpJ,CAAX,EAActC,IADP;AAEbtB,oBAAQgN,WAAWpJ,CAAX,EAAcyb,IAAd,KAAuB,SAFlB;AAGbpf,mBAAO+M,WAAWpJ,CAAX,EAAc3D,KAHR;AAIbC,sBAAU8M,WAAWpJ,CAAX,EAAc1D,QAJX;AAKbC,mBAAOyD;AALM,WAAf;AAOAotB,uBAAa1uB,IAAb,CAAkB,yBAAgBxC,QAAhB,CAAlB;AACD;AACF;AACD,aAAOkxB,YAAP;AACD;;AAED;;;;;;;;;;qCAOiB5Z,U,EAA8B;AAC7C,UAAI,KAAKkZ,sBAAL,EAAJ,EAAmC;AACjC,aAAKa,4BAAL,CAAkC/Z,UAAlC;AACD,OAFD,MAEO;AACL,aAAKga,wBAAL,CAA8Bha,UAA9B;AACD;AACF;;AAED;;;;;;;;;;iDAO6BA,U,EAA8B;AAAA;;AACzD,UAAIqZ,cAAc,KAAKX,mBAAvB;AACA,UAAK1Y,0CAAD,IAAsCqZ,WAAtC,IAAqDA,YAAYrZ,WAAWjX,KAAvB,CAAzD,EAAwF;AACtF,YAAI6S,cAAc,KAAKgE,aAAL,CAAmBhE,WAArC;AACA,YAAI1B,SAAS,KAAK0F,aAAL,CAAmB1F,MAAhC;AACA,aAAK2F,UAAL,GAAkBwZ,YAAYrZ,WAAWjX,KAAvB,CAAlB;AACA,aAAK0I,aAAL,CAAmBunB,UAAnB,CAA8B,KAAKpZ,aAAnC,EAAkD,qBAAYpS,WAA9D,EAA2E,YAAM;AAC/E,cAAI,WAAIyiB,OAAJ,CAAY1Y,IAAZ,KAAqB,iBAAzB,EAA4C;AAC1C;AACA,mBAAK9F,aAAL,CAAmBunB,UAAnB,CAA8B,OAAKpZ,aAAnC,EAAkD,qBAAYxS,eAA9D,EAA+E,YAAM;AACnF,qBAAKwS,aAAL,CAAmBhE,WAAnB,GAAiCA,WAAjC;AACD,aAFD;AAGA,mBAAKnK,aAAL,CAAmBunB,UAAnB,CAA8B,OAAKpZ,aAAnC,EAAkD,qBAAY5R,MAA9D,EAAsE,YAAM;AAC1E,qBAAKisB,eAAL,CAAqBja,UAArB;AACA,kBAAI9F,MAAJ,EAAY;AACV,uBAAK0F,aAAL,CAAmBzL,KAAnB;AACD;AACF,aALD;AAMA,mBAAKyL,aAAL,CAAmB5L,IAAnB;AACD,WAZD,MAYO;AACL,mBAAKvC,aAAL,CAAmBunB,UAAnB,CAA8B,OAAKpZ,aAAnC,EAAkD,qBAAY5R,MAA9D,EAAsE,YAAM;AAC1E,qBAAKisB,eAAL,CAAqBja,UAArB;AACD,aAFD;AAGA,mBAAKJ,aAAL,CAAmBhE,WAAnB,GAAiCA,WAAjC;AACA,gBAAI,CAAC1B,MAAL,EAAa;AACX,qBAAK0F,aAAL,CAAmB5L,IAAnB;AACD;AACF;AACF,SAtBD;AAuBA,aAAK4L,aAAL,CAAmB9F,GAAnB,GAAyB,KAAK+F,UAAL,GAAkB,KAAKA,UAAL,CAAgBuZ,GAAlC,GAAwC,EAAjE;AACD;AACF;;AAED;;;;;;;;;;6CAOyBpZ,U,EAA8B;AACrD,UAAIqZ,cAAc,KAAKzZ,aAAL,CAAmByZ,WAArC;AACA,UAAKrZ,0CAAD,IAAsCqZ,WAAtC,IAAqDA,YAAYrZ,WAAWjX,KAAvB,CAAzD,EAAwF;AACtF,aAAKmxB,mBAAL;AACAb,oBAAYrZ,WAAWjX,KAAvB,EAA8B8wB,QAA9B,GAAyC,IAAzC;AACA,aAAKI,eAAL,CAAqBja,UAArB;AACD;AACF;;AAED;;;;;;;;;;qCAOiBC,U,EAA8B;AAC7C,UAAIsZ,cAAc,KAAK3Z,aAAL,CAAmB2Z,WAArC;AACA,UAAKtZ,0CAAD,IAAsCsZ,WAAtC,IAAqDA,YAAYtZ,WAAWlX,KAAvB,CAAzD,EAAwF;AACtF,aAAKoxB,mBAAL;AACAZ,oBAAYtZ,WAAWlX,KAAvB,EAA8B+wB,OAA9B,GAAwC,IAAxC;AACA,aAAKG,eAAL,CAAqBha,UAArB;AACD;AACF;;AAED;;;;;;;;;;oCAOgBnK,S,EAA8B;AAC5C,UAAIF,aAAa,KAAKgK,aAAL,CAAmBhK,UAApC;AACA,UAAKE,yCAAD,KAAuCA,UAAU5L,IAAV,KAAmB,WAAnB,IAAkC4L,UAAU5L,IAAV,KAAmB,UAA5F,KAA2G0L,UAA3G,IAAyHA,WAAWE,UAAU/M,KAArB,CAA7H,EAA0J;AACxJ,aAAKqxB,kBAAL;AACAxkB,mBAAWE,UAAU/M,KAArB,EAA4Bkf,IAA5B,GAAmC,QAAnC;AACAkQ,sBAAcxlB,OAAd,CAAsBC,KAAtB,CAA4B,oBAA5B,EAAkDkD,SAAlD;AACA,aAAKmkB,eAAL,CAAqBnkB,SAArB;AACD;AACF;;AAED;;;;;;;;;oCAMsB;AACpB,WAAKskB,kBAAL;AACD;;AAED;;;;;;;;;4CAM8B;AAC5BjC,oBAAcxlB,OAAd,CAAsBgG,IAAtB,CAA2B,gEAA3B;AACD;;AAED;;;;;;;;;;;+CAQoC;AAClC,aAAO,CAAC,KAAKugB,sBAAL,EAAR;AACD;;AAED;;;;;;;;0CAK4B;AAC1B,UAAIG,cAAc,KAAKzZ,aAAL,CAAmByZ,WAArC;AACA,UAAIA,WAAJ,EAAiB;AACf,aAAK,IAAI7sB,IAAI,CAAb,EAAgBA,IAAI6sB,YAAY5sB,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C6sB,sBAAY7sB,CAAZ,EAAeqtB,QAAf,GAA0B,KAA1B;AACD;AACF;AACF;;AAED;;;;;;;;0CAK4B;AAC1B,UAAIN,cAAc,KAAK3Z,aAAL,CAAmB2Z,WAArC;AACA,UAAIA,WAAJ,EAAiB;AACf,aAAK,IAAI/sB,IAAI,CAAb,EAAgBA,IAAI+sB,YAAY9sB,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C+sB,sBAAY/sB,CAAZ,EAAestB,OAAf,GAAyB,KAAzB;AACD;AACF;AACF;;AAED;;;;;;;;yCAK2B;AACzB,UAAIlkB,aAAa,KAAKgK,aAAL,CAAmBhK,UAApC;AACA,UAAIA,UAAJ,EAAgB;AACd,aAAK,IAAIpJ,IAAI,CAAb,EAAgBA,IAAIoJ,WAAWnJ,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1CoJ,qBAAWpJ,CAAX,EAAcyb,IAAd,GAAqB,UAArB;AACD;AACF;AACF;;AAED;;;;;;;;mCAKuB;AACrB,UAAI,KAAKrI,aAAL,CAAmB0X,QAAnB,CAA4B7qB,MAAhC,EAAwC;AACtC,eAAO,KAAKmT,aAAL,CAAmB0X,QAAnB,CAA4B+C,GAA5B,CAAgC,KAAKza,aAAL,CAAmB0X,QAAnB,CAA4B7qB,MAA5B,GAAqC,CAArE,CAAP;AACD,OAFD,MAEO,IAAI,KAAKmT,aAAL,CAAmB4X,QAAnB,CAA4B/qB,MAAhC,EAAwC;AAC7C,eAAO,KAAKmT,aAAL,CAAmB4X,QAAnB,CAA4B6C,GAA5B,CAAgC,KAAKza,aAAL,CAAmB4X,QAAnB,CAA4B/qB,MAA5B,GAAqC,CAArE,CAAP;AACD,OAFM,MAEA;AACL,eAAO,KAAKmT,aAAL,CAAmBjE,QAA1B;AACD;AACF;;AAED;;;;;;;;;qCAMuB;AACrB,UAAI;AACF,aAAKiE,aAAL,CAAmBhE,WAAnB,GAAiC,KAAK0e,YAAL,EAAjC;AACD,OAFD,CAEE,OACC7xB,CADD,EACI;AACJ;AACD;AACF;;AAED;;;;;;;;;6BAMkB;AAChB,aAAO,KAAKmX,aAAL,CAAmBjE,QAAnB,KAAgC9Q,QAAvC;AACD;;AAED;;;;;;;;wBAKkB;AAChB,aAAO,KAAK+U,aAAL,CAAmB9F,GAA1B;AACD;;AAED;;;;;;;;wBAKuB;AACrB,UAAI,KAAKlF,MAAL,EAAJ,EAAmB;AACjB,eAAO,KAAK0lB,YAAL,EAAP;AACD,OAFD,MAEO;AACL;AACD;AACF;;;;;;AA5jBkBnC,a,CAOZxvB,E,GAAa,e;AAPDwvB,a,CAeZxlB,O,GAAU,iCAAuB4K,SAAvB,CAAiC4a,cAAcxvB,EAA/C,C;AAfEwvB,a,CAsBZC,U,GAA+B,WAAI3hB,aAAJ,CAAkB,OAAlB,C;AAtBnB0hB,a,CA6BZG,a,GAAiC,oB;AA7BrBH,a,CAoCZK,Y,GAA0B,I;kBApCdL,a;;;;;;;;;;;;;;;ACfrB;;;;AACA;;;;AACA;;;;;;AAEA;;;IAGqBoC,U;;AAoBnB;;;;;AAbA;;;;;AAiBA,sBAAYC,OAAZ,EAAmD;AAAA;;AACjD,SAAKC,QAAL,GAAgBD,OAAhB;AACA,SAAKE,YAAL,GAAoB,wBAApB;AACA,SAAK/nB,OAAL,GAAe,qBAAc4K,SAAd,CAAwB,YAAxB,CAAf;AACD;;AAED;;;;;;;AAjBA;;;;;;AAZA;;;;;;;;;wBAmCIod,kB,EAA0C;AAC5C,WAAK,IAAIC,OAAT,IAAmB,KAAKH,QAAxB,EAAkC;AAChC,YAAII,YAAY,KAAKJ,QAAL,CAAcG,OAAd,CAAhB;AACA;AACA,YAAI,OAAOD,mBAAmBE,SAAnB,CAAP,KAAyC,UAA7C,EAAyD;AACvD,eAAKloB,OAAL,CAAaC,KAAb,gBAAgC+nB,mBAAmBhyB,EAAnD,qBAAqEkyB,SAArE;AACA;AACA,eAAKH,YAAL,CAAkBxvB,IAAlB,CAAuB2vB,SAAvB,EAAkCF,mBAAmBE,SAAnB,EAA8B3mB,IAA9B,CAAmCymB,kBAAnC,CAAlC;AACD;AACF;AACF;;AAED;;;;;;;;;;wBAOIC,M,EAAgBE,Q,EAA0B;AAAA;;AAC5C,WAAKnoB,OAAL,CAAaC,KAAb,CAAmB,uCAAuCgoB,MAA1D;AACA,UAAIG,cAAc,KAAKL,YAAL,CAAkBnuB,GAAlB,CAAsBquB,MAAtB,CAAlB;AACA,WAAKI,kBAAL,CAAwBD,WAAxB,EAAqC,YAAM;AACzC,cAAKpoB,OAAL,CAAaC,KAAb,CAAmB,wCAAwCgoB,MAA3D;AACAE;AACD,OAHD;AAID;;AAED;;;;;;;;;;uCAOmBC,W,EAA8BD,Q,EAA0B;AACzE;AACA,UAAMG,cAAcF,YAAYG,WAAZ,CAAwB,UAAC9c,IAAD,EAAO+c,EAAP;AAAA,eAAc,aAAK;AAC7DA,aAAG/c,IAAH;AACD,SAF2C;AAAA,OAAxB,EAEjB0c,QAFiB,CAApB;AAGAG;AACD;;;;;;kBA7EkBV,U;;;;;;;;;;;;;;;ACPrB;;;;AACA;;;;;;;;AAEA;;;IAGqBa,kB;;AAgBnB;;;;AAPA;;;;;AAUA,gCAAc;AAAA;;AACZ,SAAKC,WAAL,GAAmB,yBAAeD,mBAAmBE,OAAlC,CAAnB;AACD;;AAED;;;;;;;AAtBA;;;;;;;;wBA4BIX,kB,EAA0C;AAC5C,WAAKU,WAAL,CAAiBzjB,GAAjB,CAAqB+iB,kBAArB;AACD;;AAED;;;;;;;;;yBAMKG,Q,EAA0B;AAC7B,WAAKO,WAAL,CAAiBE,GAAjB,CAAqBH,mBAAmBE,OAAnB,CAA2B1tB,IAAhD,EAAsDktB,QAAtD;AACD;;AAED;;;;;;;;;0BAMMA,Q,EAA0B;AAC9B,WAAKO,WAAL,CAAiBE,GAAjB,CAAqBH,mBAAmBE,OAAnB,CAA2B3tB,KAAhD,EAAuDmtB,QAAvD;AACD;;;;;;AAnDkBM,kB,CAKZE,O,GAAwC;AAC7C1tB,QAAM,MADuC;AAE7CD,SAAO;AAFsC,C;kBAL5BytB,kB;;;;;;;;;;;;;QCmBLI,U,GAAAA,U;;AAzBhB;;;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYC,K;;;;;;AAMZA,MAAM/zB,aAAN,CAAoB6V,SAApB,GAAgCme,GAAhC,SAA0C,YAA1C,SAAsD,QAAtD,EAAqE,mCAArE;;AACAD,MAAM/zB,aAAN,CAAoB6V,SAApB,GAAgCme,GAAhC,8BAA+D,uCAA/D,EAAkF,iBAAlF;;AAEA;;;;AAIO,SAASF,UAAT,CAAoBvqB,MAApB,EAAqC;AAC1C,SAAO,qBAAWA,UAAU,EAArB,CAAP;AACD;;AAED;QACQgQ,0B;QAA4BvB,sB;;AAEpC;;QACQqC,c;QAAgB1D,U;QAAYF,c;;AAEpC;;QACQrW,K;QAAOqC,U;QAAYJ,U;QAAYC,S;QAAWgY,S;;AAElD;;QACQyZ,K,GAAAA,K;;AAER;;QACuBE,O,GAAf,Q;;AAER;;QACoBC,W,GAAZ,Y;;AAER;;QACQtc,e;kBAEOkc,U;;;;;;;;;;;;;;;AClDf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;;;AAEA;;;;IAIqBK,Y;;AA2HnB;;;;;AAvFA;;;;;;;AAdA;;;;;;;AAdA;;;;;;AAuHA,wBAAYvd,MAAZ,EAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA,SA/E5Bwd,YA+E4B,qDA9EzB,qBAAahY,IA8EY,gEA7EvB,qBAAYpW,UA6EW,EA7EE,YAAM;AAC9B,YAAKquB,YAAL,CAAkB,qBAAahY,OAA/B;AACA,YAAKiY,cAAL;AACD,KA0EuB,uCAzEvB,qBAAYpuB,IAyEW,EAzEJ,YAAM;AACxB,YAAKmuB,YAAL,CAAkB,qBAAa9X,SAA/B;AACA,YAAK+X,cAAL;AACD,KAsEuB,uDApEzB,qBAAajY,OAoEY,sEAnEvB,qBAAYtW,eAmEW,EAnEO,YAAM;AACnC,UAAI,MAAKwuB,OAAL,CAAahrB,MAAb,CAAoBuC,QAApB,CAA6BmG,QAAjC,EAA2C;AACzC,cAAKoiB,YAAL,CAAkB,qBAAaluB,OAA/B;AACD,OAFD,MAEO;AACL,cAAKkuB,YAAL,CAAkB,qBAAa/X,MAA/B;AACD;AACD,YAAKgY,cAAL;AACD,KA4DuB,0CA3DvB,qBAAYzuB,KA2DW,EA3DH,YAAM;AACzB,YAAKwuB,YAAL,CAAkB,qBAAajY,IAA/B;AACA,YAAKkY,cAAL;AACD,KAwDuB,0DAtDzB,qBAAahY,MAsDY,oEArDvB,qBAAYpW,IAqDW,EArDJ,YAAM;AACxB,YAAKmuB,YAAL,CAAkB,qBAAaluB,OAA/B;AACA,YAAKmuB,cAAL;AACD,KAkDuB,yCAjDvB,qBAAYnuB,OAiDW,EAjDD,YAAM;AAC3B,YAAKkuB,YAAL,CAAkB,qBAAaluB,OAA/B;AACA,YAAKmuB,cAAL;AACD,KA8CuB,yCA7CvB,qBAAY1uB,KA6CW,EA7CH,YAAM;AACzB,YAAKyuB,YAAL,CAAkB,qBAAajY,IAA/B;AACA,YAAKkY,cAAL;AACD,KA0CuB,yDAxCzB,qBAAanuB,OAwCY,sEAvCvB,qBAAYF,KAuCW,EAvCH,YAAM;AACzB,YAAKouB,YAAL,CAAkB,qBAAa/X,MAA/B;AACA,YAAKgY,cAAL;AACD,KAoCuB,0CAnCvB,qBAAY1tB,OAmCW,EAnCD,YAAM;AAC3B,YAAKytB,YAAL,CAAkB,qBAAa9X,SAA/B;AACA,YAAK+X,cAAL;AACD,KAgCuB,0CA/BvB,qBAAY1uB,KA+BW,EA/BH,YAAM;AACzB,YAAKyuB,YAAL,CAAkB,qBAAajY,IAA/B;AACA,YAAKkY,cAAL;AACD,KA4BuB,0CA3BvB,qBAAYzuB,KA2BW,EA3BH,YAAM;AACzB,YAAKwuB,YAAL,CAAkB,qBAAajY,IAA/B;AACA,YAAKkY,cAAL;AACD,KAwBuB,0DAtBzB,qBAAa/X,SAsBY,sEArBvB,qBAAYpW,OAqBW,EArBD,YAAM;AAC3B,YAAKkuB,YAAL,CAAkB,qBAAaluB,OAA/B;AACA,YAAKmuB,cAAL;AACD,KAkBuB,0CAjBvB,qBAAYruB,KAiBW,EAjBH,YAAM;AACzB,YAAKouB,YAAL,CAAkB,qBAAa/X,MAA/B;AACA,YAAKgY,cAAL;AACD,KAcuB,0CAbvB,qBAAYhuB,MAaW,EAbF,YAAM;AAC1B,UAAI,MAAKkuB,UAAL,IAAmB,MAAKA,UAAL,CAAgBjzB,IAAhB,KAAyB,qBAAa4E,OAA7D,EAAsE;AACpE,cAAKkuB,YAAL,CAAkB,qBAAaluB,OAA/B;AACA,cAAKmuB,cAAL;AACD;AACF,KAQuB;;AAC1B,SAAKC,OAAL,GAAe3d,MAAf;AACA,SAAK3L,OAAL,GAAe,qBAAc4K,SAAd,CAAwB,cAAxB,CAAf;AACA,SAAK9L,aAAL,GAAqB,4BAArB;AACA,SAAK0qB,QAAL,GAAgB,EAAhB;AACA,SAAKD,UAAL,GAAkB,IAAlB;AACA,SAAKE,SAAL,GAAiB,oBAAU,qBAAatY,IAAvB,CAAjB;AACA,SAAKuY,gBAAL;AACD;;AAED;;;;;;AA9FA;;;;;;AAdA;;;;;;;AAdA;;;;;;;AAdA;;;;;;;;;;uCA6IyB;AACvB,WAAK5qB,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAY1uB,KAApD,EAA2D,KAAK+uB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA3D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAY3uB,KAApD,EAA2D,KAAKgvB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA3D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYruB,IAApD,EAA0D,KAAK0uB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA1D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYvuB,UAApD,EAAgE,KAAK4uB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAAhE;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYpuB,OAApD,EAA6D,KAAKyuB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA7D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYxuB,eAApD,EAAqE,KAAK6uB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAArE;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYtuB,KAApD,EAA2D,KAAK2uB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA3D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAY3tB,OAApD,EAA6D,KAAKguB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA7D;AACA,WAAKzC,aAAL,CAAmBtF,MAAnB,CAA0B,KAAK8vB,OAA/B,EAAwC,qBAAYjuB,MAApD,EAA4D,KAAKsuB,aAAL,CAAmBpoB,IAAnB,CAAwB,IAAxB,CAA5D;AACD;;AAED;;;;;;;;;kCAMclI,K,EAAwB;AACpC,WAAK2G,OAAL,CAAaC,KAAb,CAAmB,uBAAnB,EAA4C5G,MAAM/C,IAAlD;AACA,UAAIszB,aAAa,KAAKT,YAAL,CAAkB,KAAKM,SAAL,CAAenzB,IAAjC,CAAjB;AACA,UAAI,OAAOszB,WAAWvwB,MAAM/C,IAAjB,CAAP,KAAkC,UAAtC,EAAkD;AAChDszB,mBAAWvwB,MAAM/C,IAAjB;AACD;AACF;;AAED;;;;;;;;;iCAMaA,I,EAAoB;AAC/B,UAAI,KAAKmzB,SAAL,CAAenzB,IAAf,KAAwBA,IAA5B,EAAkC;AAChC,aAAKmzB,SAAL,CAAezgB,QAAf,GAA0BjS,KAAKD,GAAL,KAAa,IAAvC;AACA,aAAK0yB,QAAL,CAAcjxB,IAAd,CAAmB,KAAKkxB,SAAxB;AACA,aAAKF,UAAL,GAAkB,KAAKE,SAAvB;AACA,aAAKA,SAAL,GAAiB,oBAAUnzB,IAAV,CAAjB;AACA,aAAK0J,OAAL,CAAaC,KAAb,gCAAgD,KAAKspB,UAAL,CAAgBjzB,IAAhE,YAA2E,KAAKmzB,SAAL,CAAenzB,IAA1F;AACD;AACF;;AAED;;;;;;;;qCAKuB;AACrB,UAAI+C,QAAQ,wBAAc,sBAAaiD,oBAA3B,EAAkD;AAC5D,oBAAY,KAAKitB,UAD2C;AAE5D,oBAAY,KAAKE;AAF2C,OAAlD,CAAZ;AAIA,WAAKH,OAAL,CAAappB,aAAb,CAA2B7G,KAA3B;AACD;;AAED;;;;;;;;8BAKgB;AACd,WAAKmwB,QAAL,GAAgB,EAAhB;AACA,WAAK1qB,aAAL,CAAmB8C,OAAnB;AACD;;AAED;;;;;;;;4BAKc;AACZ,WAAK4nB,QAAL,GAAgB,EAAhB;AACD;;AAED;;;;;;;;wBAK0B;AACxB,aAAO,KAAKC,SAAZ;AACD;;AAED;;;;;;;;wBAKgC;AAC9B,aAAO,KAAKF,UAAZ;AACD;;AAED;;;;;;;;wBAK4B;AAC1B,aAAO,KAAKC,QAAZ;AACD;;;;;;kBAjPkBN,Y;;;;;;;;;;;;;;;;;ACXrB;;;;IAIqBW,K;;AAwBnB;;;;;AAfA;;;;;;AAmBA,iBAAYvzB,IAAZ,EAA0B;AAAA;;AACxB,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKwzB,SAAL,GAAiB,CAAjB;AACA,SAAKC,UAAL,GAAkBhzB,KAAKD,GAAL,KAAa,IAA/B;AACD;;AAED;;;;;AAlBA;;;;;;;AAfA;;;;;;;;;;;wBAqCuB;AACrB,aAAO,KAAKgzB,SAAZ;AACD;;AAED;;;;;sBAIa7N,O,EAAuB;AAClC,WAAK6N,SAAL,GAAiB7N,UAAU,KAAK8N,UAAhC;AACD;;;;;;kBAhDkBF,K;;;;;;;;;;;;ACLrB,IAAMG,cAA2C;AAC/C1nB,SAAO,OADwC;AAE/CG,SAAO,OAFwC;AAG/CE,QAAM;AAHyC,CAAjD;;kBAMeqnB,W;;;;;;;;;;;;;;;;;ICNMp1B,G;;;;;;;;AACnB;;;;;;iCAMoBmV,O,EAAsBiK,S,EAAyB;AACjE,UAAIjK,QAAQkgB,SAAZ,EAAuB;AACrBlgB,gBAAQkgB,SAAR,CAAkBC,GAAlB,CAAsBlW,SAAtB;AACD,OAFD,MAEO;AACL,YAAI,CAACpf,IAAIu1B,YAAJ,CAAiBpgB,OAAjB,EAA0BiK,SAA1B,CAAL,EAA2C;AACzCjK,kBAAQiK,SAAR,IAAqBA,SAArB;AACD;AACF;AACF;;AAED;;;;;;;;;oCAMuBjK,O,EAAsBiK,S,EAAyB;AACpE,UAAIjK,QAAQkgB,SAAZ,EAAuB;AACrBlgB,gBAAQkgB,SAAR,CAAkBlwB,MAAlB,CAAyBia,SAAzB;AACD,OAFD,MAEO;AACL,YAAIpf,IAAIu1B,YAAJ,CAAiBpgB,OAAjB,EAA0BiK,SAA1B,CAAJ,EAA0C;AACxCjK,kBAAQiK,SAAR,GAAoBjK,QAAQiK,SAAR,CAAkBhC,OAAlB,CAA0B,IAAIoY,MAAJ,CAAW,YAAYpW,SAAZ,GAAwB,SAAnC,CAA1B,EAAyE,GAAzE,EAA8EhC,OAA9E,CAAsF,YAAtF,EAAoG,EAApG,CAApB;AACD;AACF;AACF;;AAED;;;;;;;;;iCAMoBjI,O,EAAsBiK,S,EAAmB;AAC3D,aAAOjK,QAAQiK,SAAR,IAAqB,IAAIoW,MAAJ,CAAW,YAAYpW,SAAZ,GAAwB,SAAnC,EAA8CkC,IAA9C,CAAmDnM,QAAQiK,SAA3D,CAA5B;AACD;;AAED;;;;;;;;;;iCAOoBjK,O,EAAsBnF,I,EAActP,K,EAAqB;AAC3EyU,cAAQ7F,YAAR,CAAqBU,IAArB,EAA2BtP,KAA3B;AACD;;AAED;;;;;;;;;oCAMuByU,O,EAAsBnF,I,EAAoB;AAC/DmF,cAAQ8Z,eAAR,CAAwBjf,IAAxB;AACD;;AAED;;;;;;;;;;6BAOgBmF,O,EAAsBnF,I,EAActP,K,EAAqB;AACvE,UAAIyU,QAAQF,KAAR,CAAcwgB,gBAAd,CAA+BzlB,IAA/B,MAAyCmD,SAA7C,EAAwD;AACtDgC,gBAAQF,KAAR,CAAcygB,WAAd,CAA0B1lB,IAA1B,EAAgCtP,KAAhC;AACD;AACF;;AAED;;;;;;;;;gCAMmBi1B,M,EAAkBC,K,EAAuB;AAC1D,UAAID,UAAUC,KAAV,IAAmBD,OAAOnmB,WAA9B,EAA2C;AACzCmmB,eAAOnmB,WAAP,CAAmBomB,KAAnB;AACD;AACF;;AAED;;;;;;;;;gCAMmBD,M,EAAeC,K,EAAuB;AACvD,UAAID,UAAUC,KAAV,IAAmBD,OAAOxoB,WAA9B,EAA2C;AACzCwoB,eAAOxoB,WAAP,CAAmByoB,KAAnB;AACD;AACF;;AAED;;;;;;;;;8BAMiBA,K,EAAoBD,M,EAA2B;AAC9D,UAAIA,OAAOnP,UAAX,EAAuB;AACrBmP,eAAOE,YAAP,CAAoBD,KAApB,EAA2BD,OAAOnP,UAAlC;AACD,OAFD,MAEO;AACLmP,eAAOnmB,WAAP,CAAmBomB,KAAnB;AACD;AACF;;AAED;;;;;;;;mCAKsBx0B,E,EAAiB;AACrC,aAAOiU,SAASD,cAAT,CAAwBhU,EAAxB,CAAP;AACD;;AAED;;;;;;;;kCAKqBud,O,EAAsB;AACzC,aAAOtJ,SAASnG,aAAT,CAAuByP,OAAvB,CAAP;AACD;;AAED;;;;;;;;;oCAMuBkT,G,EAAyB;AAAA;;AAC9C,aAAO,IAAIxtB,OAAJ,CAAY,UAACC,OAAD,EAAUgM,MAAV,EAAqB;AACtC,YAAIwlB,IAAI,KAAR;AAAA,YACEhX,IAAIzJ,SAAS0gB,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CADN;AAAA,YAEE9Y,IAAI,MAAK/N,aAAL,CAAmB,QAAnB,CAFN;AAGA+N,UAAEvb,IAAF,GAAS,iBAAT;AACAub,UAAE1K,GAAF,GAAQsf,GAAR;AACA5U,UAAE+Y,KAAF,GAAU,IAAV;AACA/Y,UAAEgZ,MAAF,GAAWhZ,EAAEiZ,kBAAF,GAAuB,YAAY;AAC5C,cAAI,CAACJ,CAAD,KAAO,CAAC,KAAKvF,UAAN,IAAoB,KAAKA,UAAL,KAAoB,UAA/C,CAAJ,EAAgE;AAC9DuF,gBAAI,IAAJ;AACAxxB,oBAAQ,IAAR;AACD;AACF,SALD;AAMA2Y,UAAEkZ,OAAF,GAAYlZ,EAAEmZ,OAAF,GAAY9lB,MAAxB;AACA,YAAIwO,KAAKA,EAAE1R,UAAX,EAAuB;AACrB0R,YAAE1R,UAAF,CAAayoB,YAAb,CAA0B5Y,CAA1B,EAA6B6B,CAA7B;AACD;AACF,OAjBM,CAAP;AAkBD;;;;;;kBA9JkB9e,G;;;;;;;;;;;;;ACArB;;;;;;AACA,IAAMC,MAAM,2BAAeo2B,SAAf,EAAZ;kBACep2B,G;;;;;;;;;;;;;;;;;ICFMF,S;;;;;;;;AACnB;;;;;6BAKgBmF,M,EAAyB;AACvC,UAAIoxB,OAAO,CAAX;AACA,UAAIriB,KAAKqiB,QAAS,CAACpxB,MAAD,IAAWA,SAAS,CAArB,GAA0B,CAA1B,GAA8BA,SAAS,CAA/C,CAAT;AACA,aAAO,MAAMzB,KAAK8yB,MAAL,GAAczF,QAAd,CAAuB,EAAvB,EAA2B1S,MAA3B,CAAkCkY,IAAlC,EAAwCriB,EAAxC,CAAb;AACD;;AAED;;;;;;;;2BAKsB;AACpB,UAAIuiB,KAAK,SAALA,EAAK,GAAM;AACb,eAAO,CAAE,CAAC,IAAI/yB,KAAK8yB,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsCzF,QAAtC,CAA+C,EAA/C,EAAmD2F,SAAnD,CAA6D,CAA7D,CAAP;AACD,OAFD;AAGA,aAAQD,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAAlE,GAAyEA,IAAjF;AACD;;;;;;kBAtBkBz2B,S;;;;;;;;;;;;;;;;;ACArB;;;;IAIqBG,M;;;;;;;;AACnB;;;;;wBAK8B;AAC5B,UAAI2d,aAAJ;;AAEA,UAAIwD,UAAUqV,SAAV,IAAuBrV,UAAUqV,SAAV,CAAoBxxB,MAA/C,EAAuD;AACrD;AACA2Y,eAAOwD,UAAUqV,SAAV,CAAoB,CAApB,CAAP;AACD,OAHD,MAGO,IAAIrV,UAAUsV,YAAd,EAA4B;AACjC;AACA;AACA9Y,eAAQwD,UAAUsV,YAAlB;AACD,OAJM,MAIA;AACL;AACA9Y,eAAOwD,UAAU9f,QAAjB;AACD;;AAED,UAAIsc,QAAQA,KAAKV,KAAL,CAAW,GAAX,CAAZ,EAA6B;AAC3BU,eAAOA,KAAK+Y,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAP;AACD;;AAED,aAAO/Y,IAAP;AACD;;;;;;kBA1BkB3d,M;;;;;;;;;;;;;;;;ACJrB;;IAAY22B,Q;;;;;;AAEZ,IAAMC,YAAyC;AAC7C,WAASD,SAASE,KAD2B;AAE7C,UAAQF,SAASG,IAF4B;AAG7C,UAAQH,SAASI,IAH4B;AAI7C,UAAQJ,SAASK,IAJ4B;AAK7C,WAASL,SAAS7wB,KAL2B;AAM7C,SAAO6wB,SAASrtB;AAN6B,CAA/C;;IASMrJ,a;AACJ,yBAAYg3B,OAAZ,EAA8B;AAAA;;AAC5BN,aAASO,WAAT,CAAqBD,WAAW,EAAhC;AACD;;;;8BAESnnB,I,EAAe;AACvB,UAAI,CAACA,IAAL,EAAW;AACT,eAAO6mB,QAAP;AACD;AACD,aAAOA,SAAS7xB,GAAT,CAAagL,IAAb,CAAP;AACD;;;;;;AAGH,IAAMqnB,KAAK,IAAIl3B,aAAJ,CAAkB,EAACm3B,cAAcT,SAASE,KAAxB,EAAlB,CAAX;;kBAEeM,E;QACPP,S,GAAAA,S;;;;;;;;;;;;;;;;;IC3Baj3B,G;;;;;;;;AACnB;;;;6BAIgB03B,C,EAAoB;AAClC,aAAOv1B,OAAOqnB,MAAP,CAAckO,CAAd,MAAqBA,CAA5B;AACD;;AAED;;;;;;;0BAIaA,C,EAAoB;AAC/B,aAAO13B,IAAIqU,QAAJ,CAAaqjB,CAAb,KAAmBA,IAAI,CAAJ,KAAU,CAApC;AACD;;AAED;;;;;;;4BAIeA,C,EAAoB;AACjC,aAAO13B,IAAIqU,QAAJ,CAAaqjB,CAAb,KAAmBA,IAAI,CAAJ,KAAU,CAApC;AACD;;;;;;kBAvBkB13B,G;;;;;;;;;;;;;;;;;;;;;;;ICAAD,G;;;;;;;;;AAyInB;;;;;;;yBAOK43B,O,EAAc5D,E,EAAwB;AACzC,aAAO,YAAY;AACjBA,WAAGhH,KAAH,CAAS4K,OAAT,EAAkBC,SAAlB;AACD,OAFD;AAGD;;;;AAnJD;;;;0BAIaC,O,EAAgC;AAC3C,UAAIp1B,SAAS,EAAb;AAD2C;AAAA;AAAA;;AAAA;AAE3C,6BAAgBo1B,OAAhB,8HAAyB;AAAA,cAAhBtU,GAAgB;;AACvBphB,iBAAO6N,MAAP,CAAc8nB,MAAd,CAAqBr1B,MAArB,EAA6B8gB,GAA7B;AACD;AAJ0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK3C,aAAO9gB,MAAP;AACD;;AAED;;;;;;;6BAIgBs1B,I,EAAW;AACzB,aAAQA,QAAQ,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAxB,IAAoC,CAACvhB,MAAMC,OAAN,CAAcshB,IAAd,CAA7C;AACD;;AAED;;;;;;;;8BAKiBt1B,M,EAAsC;AAAA,wCAAtB0I,OAAsB;AAAtBA,eAAsB;AAAA;;AACrD,UAAI,CAACA,QAAQ9F,MAAb,EAAqB;AACnB,eAAO5C,MAAP;AACD;AACD,UAAM0O,SAAShG,QAAQ6sB,KAAR,EAAf;AACA,UAAIj4B,IAAIk4B,QAAJ,CAAax1B,MAAb,KAAwB1C,IAAIk4B,QAAJ,CAAa9mB,MAAb,CAA5B,EAAkD;AAChD,aAAK,IAAMmF,GAAX,IAAkBnF,MAAlB,EAA0B;AACxB,cAAIpR,IAAIk4B,QAAJ,CAAa9mB,OAAOmF,GAAP,CAAb,CAAJ,EAA+B;AAC7B,gBAAI,CAAC7T,OAAO6T,GAAP,CAAL,EAAkBnU,OAAO6N,MAAP,CAAc8nB,MAAd,CAAqBr1B,MAArB,sBAA+B6T,GAA/B,EAAqC,EAArC;AAClBvW,gBAAIgL,SAAJ,CAActI,OAAO6T,GAAP,CAAd,EAA2BnF,OAAOmF,GAAP,CAA3B;AACD,WAHD,MAGO;AACLnU,mBAAO6N,MAAP,CAAc8nB,MAAd,CAAqBr1B,MAArB,sBAA+B6T,GAA/B,EAAqCnF,OAAOmF,GAAP,CAArC;AACD;AACF;AACF;AACD,aAAOvW,IAAIgL,SAAJ,aAActI,MAAd,4BAAyB0I,OAAzB,GAAP;AACD;;AAED;;;;;;;6BAIgBoB,I,EAAgB;AAC9B,UAAI8S,aAAJ;AACA,UAAI7I,MAAMC,OAAN,CAAclK,IAAd,CAAJ,EAAyB;AACvB8S,eAAO9S,KAAKlH,MAAL,GAAc,CAAd,GAAkBkH,KAAKqK,KAAL,CAAW,CAAX,CAAlB,GAAkC,EAAzC;AACAyI,aAAKnP,OAAL,CAAa,UAAC7O,CAAD,EAAI+D,CAAJ,EAAU;AACrB,cAAK,QAAO/D,CAAP,yCAAOA,CAAP,OAAa,QAAb,IAAyBA,MAAM,EAAhC,IACDmV,MAAMC,OAAN,CAAcpV,CAAd,KAAoBA,EAAEgE,MAAF,GAAW,CADlC,EACsC;AACpCga,iBAAKja,CAAL,IAAUrF,IAAImW,QAAJ,CAAa7U,CAAb,CAAV;AACD;AACF,SALD;AAMD,OARD,MAQO,IAAI,QAAOkL,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;AACnC8S,eAAOld,OAAO6N,MAAP,CAAc8nB,MAAd,CAAqB,EAArB,EAAyBvrB,IAAzB,CAAP;AACApK,eAAO6N,MAAP,CAAcC,IAAd,CAAmBoP,IAAnB,EAAyBnP,OAAzB,CAAiC,UAACoG,GAAD,EAAS;AACxC,cAAK,QAAO+I,KAAK/I,GAAL,CAAP,MAAqB,QAArB,IAAiC+I,KAAK/I,GAAL,MAAc,EAAhD,IACDE,MAAMC,OAAN,CAAc4I,KAAK/I,GAAL,CAAd,KAA4B+I,KAAK/I,GAAL,EAAUjR,MAAV,GAAmB,CADlD,EACsD;AACpDga,iBAAK/I,GAAL,IAAYvW,IAAImW,QAAJ,CAAamJ,KAAK/I,GAAL,CAAb,CAAZ;AACD;AACF,SALD;AAMD,OARM,MAQA;AACL+I,eAAO9S,IAAP;AACD;AACD,aAAO8S,IAAP;AACD;;AAED;;;;;;;;kCAKqBkE,G,EAAsB;AACzC,WAAK,IAAIjN,GAAT,IAAgBiN,GAAhB,EAAqB;AACnB,YAAIA,IAAIrC,cAAJ,CAAmB5K,GAAnB,CAAJ,EACE,OAAO,KAAP;AACH;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;;;oCAMuBiN,G,EAAa2U,Y,EAA2B;AAC7D,aAAOA,aAAanB,KAAb,CAAmB,GAAnB,EAAwBoB,MAAxB,CAA+B,UAAUC,CAAV,EAAa7T,CAAb,EAAgB;AACpD,eAAQ,OAAO6T,CAAP,KAAa,WAAb,IAA4BA,MAAM,IAAnC,GAA2CA,CAA3C,GAA+CA,EAAE7T,CAAF,CAAtD;AACD,OAFM,EAEJhB,GAFI,CAAP;AAGD;;AAED;;;;;;;;;oCAMuBA,G,EAAa2U,Y,EAA+B;AACjE,UAAI,CAACA,YAAL,EAAmB;AACjB,eAAO,KAAP;AACD;AACD,UAAIG,aAAaH,aAAanB,KAAb,CAAmB,GAAnB,CAAjB;AACA,WAAK,IAAI3xB,IAAI,CAAb,EAAgBA,IAAIizB,WAAWhzB,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,YAAI6b,OAAOoX,WAAWjzB,CAAX,CAAX;AACA,YAAI,CAACme,GAAD,IAAQ,CAACA,IAAIrC,cAAJ,CAAmBD,IAAnB,CAAb,EAAuC;AACrC,iBAAO,KAAP;AACD,SAFD,MAEO;AACLsC,gBAAMA,IAAItC,IAAJ,CAAN;AACD;AACF;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;4BAIgC;AAC9B,UAAIqX,YAAJ;AAAA,UAASC,YAAT;AACA;AACA,UAAIC,UAAU,IAAIh0B,OAAJ,CAAY,UAACC,OAAD,EAAUgM,MAAV,EAAqB;AAC7C6nB,cAAM7zB,OAAN;AACA8zB,cAAM9nB,MAAN;AACD,OAHa,CAAd;AAIA;AACA+nB,cAAQ/zB,OAAR,GAAkB6zB,GAAlB;AACA;AACAE,cAAQ/nB,MAAR,GAAiB8nB,GAAjB;AACA,aAAOC,OAAP;AACD;;;;;;kBAvIkBz4B,G;;;;;;;;;;;;;;;;;ICAAU,W;AAyBnB,uBAAYkM,KAAZ,EAA2B8rB,KAA3B,EAAwC;AAAA;;AACtC,SAAKtoB,IAAL,GAAYxD,MAAMwD,IAAlB;AACA,SAAK6F,OAAL,GAAerJ,MAAMqJ,OAAN,CAAcyiB,KAAd,CAAf;AACD;;;;+BAEU;AACT,aAAO;AACLtoB,cAAM,KAAKA,IADN;AAEL6F,iBAAS,KAAKA;AAFT,OAAP;AAID;;;;;;AAnCkBvV,W,CACZ0W,I,GAAmC;AACxC+C,yBAAuB;AACrB/J,UAAM,8BADe;AAErB6F,aAAS,iBAAU7F,IAAV,EAAgB;AACvB,8BAAsBA,IAAtB;AACD;AAJoB,GADiB;AAOxCuK,qBAAmB;AACjBvK,UAAM,kCADW;AAEjB6F,aAAS,mBAAY;AACnB,aAAO,qEAAP;AACD;AAJgB,GAPqB;AAaxCoB,0BAAwB;AACtBjH,UAAM,yBADgB;AAEtB6F,aAAS,iBAAU0iB,MAAV,EAAkB;AACzB,aAAUA,MAAV;AACD;AAJqB;AAbgB,C;kBADvBj4B,W;;;;;;;;;;;;;;;ACArB;;;;IAEMD,a;AACJ;;;;;AAaA,2BAAc;AAAA;;AACZ,SAAKm4B,SAAL;AACD;;AAED;;;;;;;AAXA;;;;;;;;;2BAiBOC,S,EAA0B;AAC/B,UAAIA,SAAJ,EAAe;AACb,aAAKC,UAAL,GAAkBD,SAAlB;AACA,mBAAIE,QAAJ,CAAa,KAAK7rB,GAAlB,EAAuB,kBAAvB,aAAmD,KAAK4rB,UAAxD;AACD;AACF;;AAED;;;;;;;;;;AASA;;;;;iCAK6B;AAC3B,aAAO,KAAK5rB,GAAZ;AACD;;AAED;;;;;;;;gCAKkB;AAChB,UAAI,CAAC,KAAKA,GAAV,EAAe;AACb,YAAMmC,KAAK,KAAKnC,GAAL,GAAW,WAAIoC,aAAJ,CAAkB,KAAlB,CAAtB;AACA,mBAAII,YAAJ,CAAiBL,EAAjB,EAAqB,IAArB,EAA2B,iBAAUI,QAAV,CAAmB,CAAnB,CAA3B;AACA,mBAAIC,YAAJ,CAAiBL,EAAjB,EAAqB,UAArB,EAAiC,IAAjC;AACD;AACF;;AAED;;;;;;;;gCAKkB;AAChB,UAAI,KAAKnC,GAAT,EAAc;AACZ,mBAAIK,WAAJ,CAAgB,KAAKL,GAAL,CAASM,UAAzB,EAAqC,KAAKN,GAA1C;AACD;AACF;;AAED;;;;;;;;;2BAMa;AACX,iBAAI6rB,QAAJ,CAAa,KAAK7rB,GAAlB,EAAuB,SAAvB,EAAkC,EAAlC;AACD;;AAED;;;;;;;;2BAKa;AACX,iBAAI6rB,QAAJ,CAAa,KAAK7rB,GAAlB,EAAuB,SAAvB,EAAkC,MAAlC;AACD;;AAED;;;;;;;;4BAKc;AACZ,WAAK4rB,UAAL,GAAkB,EAAlB;AACA,iBAAIC,QAAJ,CAAa,KAAK7rB,GAAlB,EAAuB,kBAAvB,EAA2C,EAA3C;AACD;;AAED;;;;;;;;8BAKgB;AACd,WAAK8F,KAAL;AACA,WAAKgmB,SAAL;AACD;;;wBA1EiB;AAChB,aAAO,KAAKF,UAAZ;AACD;;;;;;kBA2EYr4B,a;;;;;;;;;;;;;;;;;ICnHMP,G;;;;;;;;AACnB;;;;;;;8BAOiBguB,M,EAAwB;AACvC,UAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,eAAOA,MAAP;AACD;AACD,aAAOA,OAAOa,MAAP,CAAc,CAAd,EAAiBkK,WAAjB,KAAiC/K,OAAOrX,KAAP,CAAa,CAAb,CAAxC;AACD;;AAED;;;;;;;;6BAKgBqX,M,EAAgBgL,Y,EAA+B;AAC7D,UAAI,OAAOhL,MAAP,KAAkB,QAAlB,IAA8B,OAAOgL,YAAP,KAAwB,QAA1D,EAAoE;AAClE,eAAO,KAAP;AACD;AACD,aAAOhL,OAAO9U,OAAP,CAAe8f,YAAf,EAA6BhL,OAAO5oB,MAAP,GAAgB4zB,aAAa5zB,MAA1D,MAAsE,CAAC,CAA9E;AACD;;;;;;kBAzBkBpF,G;;;;;;ACDrB;AACA;;;AAGA;AACA,6CAA8C,uBAAuB,gBAAgB,iBAAiB,gBAAgB,kBAAkB,gCAAgC,8BAA8B,2BAA2B,0BAA0B,sBAAsB,6CAA6C,GAAG,qBAAqB,gBAAgB,iBAAiB,uBAAuB,WAAW,YAAY,wBAAwB,GAAG,2PAA2P,kBAAkB,+BAA+B,qBAAqB,uBAAuB,mBAAmB,WAAW,cAAc,YAAY,aAAa,6BAA6B,uCAAuC,iCAAiC,GAAG,wBAAwB,uBAAuB,WAAW,cAAc,aAAa,YAAY,GAAG,oCAAoC,yCAAyC,sCAAsC,oCAAoC,iCAAiC,GAAG;;AAEpuC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;;AAEA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;;AAEA;AACA,0CAA0C,0BAA0B;;AAEpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mEAAmE,aAAa;AAChF;;AAEA;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;AChQD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;ACzBA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC/VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA,6BAA6B;AAC7B,kDAAkD;;AAElD;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;;AAEA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,cAAc,gBAAgB;AAC9B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,8CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oDAAoD,IAAI;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+CAA+C,IAAI,kCAAkC,IAAI;AACzF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,sDAAsD;AACtD;;AAEA,sBAAsB;AACtB;;AAEA,+BAA+B;AAC/B;;AAEA;AACA,kCAAkC,MAAM;AACxC;;AAEA,+CAA+C;AAC/C;;AAEA,uBAAuB;AACvB;;AAEA,+BAA+B,8BAA8B,gDAAgD;AAC7G;AACA;AACA;;AAEA;;AAEA,+BAA+B,QAAQ;AACvC;;AAEA;AACA;;AAEA,sBAAsB,IAAI;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kCAAkC;AAClC;AACA,kCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,wCAAwC,KAAK;AAC7C;;AAEA;AACA;AACA;AACA,sCAAsC,EAAE;AACxC;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB;AACA,oEAAoE;AACpE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB;;AAEA,mBAAmB,uBAAuB;AAC1C;AACA,2BAA2B,EAAE;AAC7B;;AAEA;AACA;AACA;AACA,mBAAmB,IAAI;AACvB;AACA;AACA,0CAA0C,IAAI;AAC9C;;AAEA,8CAA8C,SAAS,IAAI,IAAI;AAC/D;;AAEA,0BAA0B;AAC1B;;AAEA,sBAAsB;AACtB;;AAEA,sDAAsD,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,GAAG,GAAG,KAAK,EAAE;AAC5C;;AAEA,+BAA+B,GAAG,GAAG,eAAe,IAAI;AACxD;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA,mBAAmB,YAAY;AAC/B;;AAEA;AACA;;AAEA,uBAAuB;AACvB;;AAEA;AACA;;AAEA,uBAAuB;AACvB;;AAEA,uBAAuB;AACvB;;AAEA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB,4BAA4B;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,mBAAmB,aAAa;AAChC;AACA,yCAAyC;AACzC;AACA,0BAA0B;AAC1B;AACA,+BAA+B;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B,IAAI;AAChC;;AAEA;AACA;;AAEA,wDAAwD;AACxD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AAAA;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;ACr7BD;AACA;;;;;;;;ACDA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"playkit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Playkit\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Playkit\"] = factory();\n\telse\n\t\troot[\"Playkit\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b2ca59875df32863b182","import Obj from './object'\nimport Num from './number'\nimport Str from './string'\nimport Generator from './generator'\nimport Dom from './dom'\nimport Env from './env'\nimport Locale from './locale'\nimport LoggerFactory from './logger'\nimport MultiMap from './multi-map'\nimport PosterManager from './poster-manager'\nimport PlayerError from './player-error'\n\nexport {\n  Obj,\n  Num,\n  Str,\n  Generator,\n  Dom,\n  Env,\n  Locale,\n  LoggerFactory,\n  MultiMap,\n  PosterManager,\n  PlayerError\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/index.js","//@flow\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nexport default class Track {\n  /**\n   * Comparing language strings.\n   * @param {string} inputLang - The configured language.\n   * @param {string} trackLang - The default track language.\n   * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n   */\n  static langComparer(inputLang: string, trackLang: string): boolean {\n    try {\n      inputLang = inputLang.toLowerCase();\n      trackLang = trackLang.toLowerCase();\n      return inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang);\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * The id of the track.\n   * @member\n   * @type {?string}\n   * @private\n   */\n  _id: ?string;\n  /**\n   * The active mode of the track.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _active: boolean;\n  /**\n   * The label of the track.\n   * @member\n   * @type {?string}\n   * @private\n   */\n  _label: ?string;\n  /**\n   * The language of the track.\n   * @member\n   * @type {?string}\n   * @private\n   */\n  _language: ?string;\n  /**\n   * The index of the track.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _index: number;\n\n  /**\n   * Getter for the track id.\n   * @public\n   * @returns {?string} - The track id.\n   */\n  get id(): ?string {\n    return this._id;\n  }\n\n  /**\n   * Getter for the active mode of the track.\n   * @public\n   * @returns {boolean} - The active mode of the track.\n   */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * Setter for the active mode of the track.\n   * @public\n   * @param {boolean} value - Whether the track is active or not.\n   */\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  /**\n   * Getter for the label of the track.\n   * @public\n   * @returns {?string} - The label of the track.\n   */\n  get label(): ?string {\n    return this._label;\n  }\n\n  /**\n   * Getter for the language of the track.\n   * @public\n   * @returns {?string} - The language of the track.\n   */\n  get language(): ?string {\n    return this._language;\n  }\n\n  /**\n   * Getter for the index of the track.\n   * @public\n   * @returns {number} - The index of the track.\n   */\n  get index(): number {\n    return this._index;\n  }\n\n  /**\n   * @constructor\n   * @param {TrackSettings} settings - The track settings object.\n   */\n  constructor(settings: TrackSettings) {\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/track.js","//@flow\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nclass FakeEvent {\n  /** @const {boolean} */\n  bubbles: boolean;\n\n  /** @const {boolean} */\n  cancelable: boolean;\n\n  /** @const {boolean} */\n  defaultPrevented: boolean;\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number | Date;\n\n  /** @const {string} */\n  type: string;\n\n  /** @const {boolean} */\n  isTrusted: boolean;\n\n  /** @type {EventTarget} */\n  currentTarget: any;\n\n  /** @type {EventTarget} */\n  target: any;\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n  stopped: boolean;\n\n  payload: any;\n\n  constructor(type: string, payload: any) {\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  preventDefault() {\n  }\n\n  /**\n   * Stops processing event listeners for this event.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopImmediatePropagation() {\n    this.stopped = true;\n  }\n\n  /**\n   * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopPropagation() {\n  }\n}\n\nexport default FakeEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event.js","//@flow\nimport Track from './track'\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nexport default class AudioTrack extends Track {}\n\n\n\n// WEBPACK FOOTER //\n// ./track/audio-track.js","//@flow\nimport Track from './track'\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nexport default class TextTrack extends Track {\n  /**\n   * The kind of the text track:\n   * subtitles/captions/metadata.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _kind: string;\n\n  /**\n   * Getter for the kind of the text track.\n   * @public\n   * @returns {string} - The kind of the text track.\n   */\n  get kind(): string {\n    return this._kind;\n  }\n\n  /**\n   * @constructor\n   * @param {TextTrackSettings} settings - The track settings object.\n   */\n  constructor(settings: TextTrackSettings) {\n    super(settings);\n    this._kind = settings.kind;\n  }\n}\n\nexport {TextTrack};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track.js","//@flow\nimport Track from './track'\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nexport default class VideoTrack extends Track {\n  /**\n   * Calculates the most suitable source to the container size\n   * @static\n   * @param {Array<Object>} tracks - The tracks\n   * @param {number} width - The width to calculate with\n   * @param {number} height - The height to calculate with\n   * @returns {Object} - The most suitable source to the container size\n   */\n  static getSuitableSourceForResolution(tracks: Array<Source>, width: number, height: number): ?Object {\n    let mostSuitableWidth = null;\n    if (height && tracks) {\n      let mostSuitableWidthTracks = [];\n      let minWidthDiff = Infinity;\n      for (let track of tracks) { // first filter the most width suitable\n        if (typeof track.width === 'number') {\n          let widthDiff = Math.abs(track.width - width);\n          if (widthDiff < minWidthDiff) {\n            minWidthDiff = widthDiff;\n            mostSuitableWidthTracks = [track];\n          } else if (widthDiff === minWidthDiff) {\n            mostSuitableWidthTracks.push(track);\n          }\n        }\n      }\n      let videoRatio = width / height;\n      let mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n      let minRatioDiff = Infinity;\n      for (let track of mostSuitableWidthTracks) {  // filter the most ratio suitable from the width filter results\n        if (typeof track.width === 'number' && typeof track.height === 'number') {\n          let ratioDiff = Math.abs(track.width / track.height - videoRatio);\n          if (ratioDiff < minRatioDiff) {\n            minRatioDiff = ratioDiff;\n            mostSuitableWidthAndRatioTracks = [track];\n          } else if (ratioDiff === minRatioDiff) {\n            mostSuitableWidthAndRatioTracks.push(track);\n          }\n        }\n      }\n      let maxBandwidth = 0;\n      for (let track of mostSuitableWidthAndRatioTracks) { // select the top bitrate from the ratio filter results\n        if (typeof track.bandwidth === 'number') {\n          if (track.bandwidth > maxBandwidth || !track.bandwidth) {\n            maxBandwidth = track.bandwidth || maxBandwidth;\n            mostSuitableWidth = track;\n          }\n        }\n      }\n    }\n    return mostSuitableWidth;\n  }\n\n  /**\n   * @member {number} _bandwidth - The bandwidth of the video track\n   * @type {number}\n   * @private\n   */\n  _bandwidth: number;\n\n  /**\n   * @member {number} _width - The width of the video track\n   * @type {number}\n   * @private\n   */\n  _width: number;\n\n  /**\n   * @member {number} _height - The height of the video track\n   * @type {number}\n   * @private\n   */\n  _height: number;\n\n  /**\n   * @public\n   * @returns {number} - The bandwidth of the video track\n   */\n  get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The width of the video track\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The height of the video track\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * @constructor\n   * @param {VideoTrackSettings} settings - The track settings object\n   */\n  constructor(settings: VideoTrackSettings) {\n    super(settings);\n    this._bandwidth = settings.bandwidth;\n    this._width = settings.width;\n    this._height = settings.height;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/video-track.js","//@flow\nimport MultiMap from '../utils/multi-map'\nimport FakeEvent from './fake-event'\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nclass EventManager {\n  _bindingMap: MultiMap<Binding_> | null;\n\n  constructor() {\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new MultiMap();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n  destroy() {\n    this.removeAll();\n    this._bindingMap = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Attaches an event listener to an event target for only one time.\n   * @param {EventTarget} target - The event target.\n   * @param {string} type - The event type.\n   * @param {EventManager.ListenerType} listener - The event listener.\n   * @returns {void}\n   */\n  listenOnce(target: any, type: string, listener: ListenerType): void {\n    let oneListener = (event) => {\n      this.unlisten(target, type, oneListener);\n      listener.call(this, event)\n    };\n    this.listen(target, type, oneListener);\n  }\n\n\n  /**\n   * Attaches an event listener to an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} listener The event listener.\n   * @returns {void}\n   */\n  listen(target: any, type: string, listener: ListenerType): void {\n    let binding = new Binding_(target, type, listener);\n    if (this._bindingMap) {\n      this._bindingMap.push(type, binding);\n    }\n  }\n\n\n  /**\n   * Detaches an event listener from an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n   * @returns {void}\n   */\n  unlisten(target: any, type: string, listener: ?ListenerType): void {\n    if (this._bindingMap) {\n      let list = this._bindingMap.get(type);\n\n      for (let i = 0; i < list.length; ++i) {\n        let binding = list[i];\n\n        if (binding.target === target && (binding.listener === listener || !listener)) {\n          binding.unlisten();\n          if (this._bindingMap) {\n            this._bindingMap.remove(type, binding);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Detaches all event listeners from all targets.\n   * @returns {void}\n   */\n  removeAll(): void {\n    if (this._bindingMap) {\n      let listeners = this._bindingMap.getAll();\n\n      for (let listener of listeners) {\n        listener.unlisten();\n      }\n      if (this._bindingMap) {\n        this._bindingMap.clear();\n      }\n    }\n  }\n}\n\n/**\n * @typedef {function(!Event)}\n */\ntype ListenerType = (event: FakeEvent) => any;\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nclass Binding_ {\n  target: any;\n  type: string;\n  listener: ?ListenerType;\n\n  constructor(target, type, listener) {\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    this.target.addEventListener(type, listener, false);\n  }\n\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n  unlisten(): void {\n    if (!this.target)\n      return;\n\n    this.target.removeEventListener(this.type, this.listener, false);\n\n    this.target = null;\n    this.listener = null;\n  }\n}\n\nexport default EventManager;\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-manager.js","//@flow\nimport {Obj} from '../utils/index'\n\nconst HTML5_EVENTS: { [event: string]: string } = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\nconst CUSTOM_EVENTS: { [event: string]: string } = {\n  /**\n   * Fires when change source flow started\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires when the player has selected the source to play\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress'\n};\n\nconst PLAYER_EVENTS: { [event: string]: string } = Obj.merge([HTML5_EVENTS, CUSTOM_EVENTS]);\n\nexport {PLAYER_EVENTS, HTML5_EVENTS, CUSTOM_EVENTS};\n\n\n\n// WEBPACK FOOTER //\n// ./event/events.js","//@flow\nimport {Locale, LoggerFactory, PosterManager, Env, Obj, Num, Dom, Generator} from './utils/index'\nimport EventManager from './event/event-manager'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport {PLAYER_EVENTS as PlayerEvents, HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from './event/events'\nimport PlayerStates from './state/state-types'\nimport Html5 from './engines/html5/html5'\nimport PluginManager from './plugin/plugin-manager'\nimport BasePlugin from './plugin/base-plugin'\nimport StateManager from './state/state-manager'\nimport TrackTypes from './track/track-types'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport {Cue} from './track/vtt-cue'\nimport {processCues} from './track/text-track-display'\nimport PlaybackMiddleware from './middleware/playback-middleware'\nimport DefaultPlayerConfig from './player-config.json'\nimport './assets/style.css'\n\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nconst CONTAINER_CLASS_NAME: string = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nconst POSTER_CLASS_NAME: string = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nconst ENGINE_CLASS_NAME: string = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nconst SUBTITLES_STYLE_ID_NAME: string = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_CLASS_NAME: string = 'playkit-subtitles';\n\n/**\n * The live string.\n * @type {string}\n * @const\n */\nconst LIVE: string = 'Live';\n\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nconst AUTO: string = 'auto';\n\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nconst OFF: string = 'off';\n\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\nexport default class Player extends FakeEventTarget {\n  /**\n   * The player class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = LoggerFactory.getLogger('Player');\n  /**\n   * The available engines of the player.\n   * @type {Array<typeof IEngine>}\n   * @private\n   * @static\n   */\n  static _engines: Array<typeof IEngine> = [Html5];\n  /**\n   * The plugin manager of the player.\n   * @type {PluginManager}\n   * @private\n   */\n  _pluginManager: PluginManager;\n  /**\n   * The event manager of the player.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The poster manager of the player.\n   * @type {PosterManager}\n   * @private\n   */\n  _posterManager: PosterManager;\n  /**\n   * The runtime configuration of the player.\n   * @type {PlayerConfig}\n   * @private\n   */\n  _config: PlayerConfig;\n  /**\n   * The playback engine.\n   * @type {IEngine}\n   * @private\n   */\n  _engine: IEngine;\n  /**\n   * The state manager of the player.\n   * @type {StateManager}\n   * @private\n   */\n  _stateManager: StateManager;\n  /**\n   * The tracks of the player.\n   * @type {Array<Track>}\n   * @private\n   */\n  _tracks: Array<Track>;\n  /**\n   * The player ready promise\n   * @type {Promise<*>}\n   * @private\n   */\n  _readyPromise: ?Promise<*>;\n  /**\n   * Whether the play is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlay: boolean;\n  /**\n   * The player DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n  /**\n   * The player text DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _textDisplayEl: HTMLDivElement;\n  /**\n   * The player DOM id.\n   * @type {string}\n   * @private\n   */\n  _playerId: string;\n  /**\n   * The player last updated text cues list\n   * @type {Array<any>}\n   * @private\n   */\n  _activeTextCues: Array<any> = [];\n  /**\n   * The player text display settings\n   * @type {Object}\n   * @private\n   */\n  _textDisplaySettings: Object = {};\n  /**\n   * The player text style settings\n   * @type {TextStyle}\n   * @private\n   */\n  _textStyle: TextStyle;\n  /**\n   * The playback middleware of the player.\n   * @type {PlaybackMiddleware}\n   * @private\n   */\n  _playbackMiddleware: PlaybackMiddleware;\n  /**\n   * The environment(os,device,browser) object of the player.\n   * @type {EnvData}\n   * @private\n   */\n  _env: EnvData;\n  /**\n   * The currently selected engine type\n   * @type {string}\n   * @private\n   */\n  _engineType: string;\n  /**\n   * The currently selected stream type\n   * @type {string}\n   * @private\n   */\n  _streamType: string;\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  constructor(config: Object = {}) {\n    super();\n    this._env = Env;\n    this._tracks = [];\n    this._firstPlay = true;\n    this._config = Player._defaultConfig;\n    this._eventManager = new EventManager();\n    this._posterManager = new PosterManager();\n    this._stateManager = new StateManager(this);\n    this._pluginManager = new PluginManager();\n    this._playbackMiddleware = new PlaybackMiddleware();\n    this._textStyle = new TextStyle();\n    this._createReadyPromise();\n    this._createPlayerContainer();\n    this._appendPosterEl();\n    this.configure(config);\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {PlayerConfig} config - The configuration for the player instance.\n   * @returns {void}\n   */\n  configure(config: PlayerConfig): void {\n    Obj.mergeDeep(this._config, config);\n    this._configureOrLoadPlugins(config.plugins);\n    if (!Obj.isEmptyObject(config.sources)) {\n      const receivedSourcesWhenHasEngine: boolean = !!this._engine;\n      if (receivedSourcesWhenHasEngine) {\n        this._reset();\n        Player._logger.debug('Change source started');\n        this.dispatchEvent(new FakeEvent(CustomEvents.CHANGE_SOURCE_STARTED));\n      }\n      if (this._selectEngineByPriority()) {\n        this._appendEngineEl();\n        this._posterManager.setSrc(this._config.metadata.poster);\n        this._posterManager.show();\n        this._attachMedia();\n        this._handlePlaybackConfig();\n        if (receivedSourcesWhenHasEngine) {\n          Player._logger.debug('Change source ended');\n          this.dispatchEvent(new FakeEvent(CustomEvents.CHANGE_SOURCE_ENDED));\n        }\n      }\n    }\n  }\n\n  /**\n   * The player readiness\n   * @public\n   * @returns {Promise<*>} - The ready promise\n   */\n  ready(): Promise<*> {\n    return this._readyPromise ? this._readyPromise : Promise.resolve();\n  }\n\n  /**\n   * Load media\n   * @public\n   * @returns {void}\n   */\n  load(): void {\n    if (this._engine) {\n      let startTime = this._config.playback.startTime;\n      this._engine.load(startTime).then((data) => {\n        this._tracks = data.tracks;\n        this._addTextTrackOffOption();\n        this._setDefaultTracks();\n        this.dispatchEvent(new FakeEvent(CustomEvents.TRACKS_CHANGED, {tracks: this._tracks}));\n      }).catch((error) => {\n        this.dispatchEvent(new FakeEvent(Html5Events.ERROR, error));\n      });\n    }\n  }\n\n  /**\n   * Start/resume playback.\n   * @returns {void}\n   * @public\n   */\n  play(): void {\n    if (this._engine) {\n      this._playbackMiddleware.play(this._play.bind(this));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @returns {void}\n   * @public\n   */\n  pause(): void {\n    if (this._engine) {\n      this._playbackMiddleware.pause(this._pause.bind(this));\n    }\n  }\n\n  /**\n   * Gets the view of the player (i.e the dom container object).\n   * @return {HTMLElement} - The dom container.\n   * @public\n   */\n  getView(): HTMLElement {\n    return this._el;\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): ?HTMLVideoElement {\n    if (this._engine) {\n      return this._engine.getVideoElement();\n    }\n  }\n\n  /**\n   * Destroys the player.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    if (this._engine) {\n      this._engine.destroy();\n    }\n    this._posterManager.destroy();\n    this._eventManager.destroy();\n    this._pluginManager.destroy();\n    this._stateManager.destroy();\n    this._activeTextCues = [];\n    this._textDisplaySettings = {};\n    this._config = DefaultPlayerConfig;\n    this._tracks = [];\n    this._engineType = '';\n    this._streamType = '';\n    this._readyPromise = null;\n    this._firstPlay = true;\n    if (this._el) {\n      Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  buffered(): void {\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   */\n  set currentTime(to: number): void {\n    if (this._engine) {\n      if (Num.isNumber(to)) {\n        let boundedTo = to;\n        if (to < 0) {\n          boundedTo = 0;\n        }\n        if (boundedTo > this._engine.duration) {\n          boundedTo = this._engine.duration;\n        }\n        this._engine.currentTime = boundedTo;\n      }\n    }\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {?Number} - The playback current time.\n   * @public\n   */\n  get currentTime(): ?number {\n    if (this._engine) {\n      return this._engine.currentTime;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {?Number} - The playback duration.\n   * @public\n   */\n  get duration(): ?number {\n    if (this._engine) {\n      return this._engine.duration;\n    }\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @returns {void}\n   * @public\n   */\n  set volume(vol: number): void {\n    if (this._engine) {\n      if (Num.isFloat(vol) || (vol === 0) || (vol === 1)) {\n        let boundedVol = vol;\n        if (boundedVol < 0) {\n          boundedVol = 0;\n        }\n        if (boundedVol > 1) {\n          boundedVol = 1;\n        }\n        this._engine.volume = boundedVol;\n      }\n    }\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {?Number} - The playback volume.\n   * @public\n   */\n  get volume(): ?number {\n    if (this._engine) {\n      return this._engine.volume;\n    }\n  }\n\n  /**\n   * Get paused state.\n   * @returns {?boolean} - Whether the video is paused or not.\n   * @public\n   */\n  get paused(): ?boolean {\n    if (this._engine) {\n      return this._engine.paused;\n    }\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {?boolean} - Whether the video is seeking or not.\n   * @public\n   */\n  get seeking(): ?boolean {\n    if (this._engine) {\n      return this._engine.seeking;\n    }\n  }\n\n  /**\n   * Set playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @param {boolean} playsinline - Whether the video should plays in line.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (this._engine) {\n      this._engine.playsinline = playsinline;\n    }\n  }\n\n  /**\n   * Get playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @returns {boolean} - Whether the video plays in line.\n   */\n  get playsinline(): ?boolean {\n    if (this._engine) {\n      return this._engine.playsinline;\n    }\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The mute value.\n   * @returns {void}\n   * @public\n   */\n  set muted(mute: boolean): void {\n    if (this._engine) {\n      this._engine.muted = mute;\n      this.dispatchEvent(new FakeEvent(CustomEvents.MUTE_CHANGE, {mute: mute}));\n    }\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {?boolean} - Whether the video is muted or not.\n   * @public\n   */\n  get muted(): ?boolean {\n    if (this._engine) {\n      return this._engine.muted;\n    }\n  }\n\n  /**\n   * Get the player source.\n   * @returns {?string} - The current source of the player.\n   * @public\n   */\n  get src(): ?string {\n    if (this._engine) {\n      return this._engine.src;\n    }\n  }\n\n  /**\n   * Get the dimensions of the player.\n   * @returns {PlayerDimensions} - The dimensions of the player.\n   * @public\n   */\n  get dimensions(): PlayerDimensions {\n    return {\n      width: this._el.clientWidth,\n      height: this._el.clientHeight\n    };\n  }\n\n  /**\n   * Get the poster source URL\n   * @returns {string} - the poster image URL\n   */\n  get poster(): string {\n    return this._posterManager.src;\n  }\n\n  /**\n   * Sets the playbackRate property.\n   * @param {number} rate - The playback speed of the video.\n   */\n  set playbackRate(rate: number): void {\n    if (this._engine) {\n      this._engine.playbackRate = rate;\n    }\n  }\n\n  /**\n   * Gets the current playback speed of the video.\n   * @returns {number} - The current playback speed of the video.\n   */\n  get playbackRate(): ?number {\n    if (this._engine) {\n      return this._engine.playbackRate;\n    }\n  }\n\n  /**\n   * get the engine type\n   * @returns {string} - html5\n   */\n  get engineType(): ?string {\n    return this._engineType;\n  }\n\n  /**\n   * get the stream type\n   * @returns {string} - hls|dash|progressive\n   */\n  get streamType(): ?string {\n    return this._streamType;\n  }\n\n  /**\n   * Getter for the environment of the player instance.\n   * @return {EnvData} - The current environment object.\n   * @public\n   */\n  get env(): EnvData {\n    return this._env;\n  }\n\n  /**\n   * Get the player config.\n   * @returns {PlayerConfig} - A copy of the player configuration.\n   * @public\n   */\n  get config(): PlayerConfig {\n    return Obj.mergeDeep({}, this._config);\n  }\n\n  /**\n   * Set player session id\n   * @param {string} sessionId - the player session id to set\n   * @returns {void}\n   * @public\n   */\n  set sessionId(sessionId: string): void {\n    this._config.session = this._config.session || {id: ''};\n    this._config.session.id = sessionId;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Live API\">\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return !!(this._config.type === LIVE || (this._engine && this._engine.isLive()));\n  }\n\n  /**\n   * Checking if the current live playback has DVR window.\n   * @function isDvr\n   * @returns {boolean} - Whether live playback has DVR window.\n   * @public\n   */\n  isDvr(): boolean {\n    return this.isLive() && this._config.dvr;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._engine && this.isLive()) {\n      this._engine.seekToLiveEdge();\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks API\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function getTracks\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @public\n   */\n  getTracks(type?: string): Array<Track> {\n    return this._getTracksByType(type);\n  }\n\n  /**\n   * Get an object includes the active video/audio/text tracks\n   * @return {ActiveTracks} - The active tracks object\n   */\n  getActiveTracks(): ActiveTracks {\n    return {\n      video: this._getTracksByType(TrackTypes.VIDEO).find(track => track.active),\n      audio: this._getTracksByType(TrackTypes.AUDIO).find(track => track.active),\n      text: this._getTracksByType(TrackTypes.TEXT).find(track => track.active),\n    };\n  }\n\n  /**\n   * Select a track\n   * @function selectTrack\n   * @param {Track} track - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectTrack(track: Track): void {\n    if (this._engine) {\n      if (track instanceof VideoTrack) {\n        this._engine.selectVideoTrack(track);\n      } else if (track instanceof AudioTrack) {\n        this._engine.selectAudioTrack(track);\n      } else if (track instanceof TextTrack) {\n        if (track.language === \"off\") {\n          this.hideTextTrack();\n        } else {\n          this._engine.selectTextTrack(track);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._engine) {\n      this._engine.hideTextTrack();\n      this._updateTextDisplay([]);\n      const textTracks = this._getTracksByType(TrackTypes.TEXT);\n      textTracks.map(track => track.active = false);\n      const textTrack = textTracks.find(track => track.language === \"off\");\n      if (textTrack) {\n        textTrack.active = true;\n        this.dispatchEvent(new FakeEvent(CustomEvents.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}))\n      }\n    }\n  }\n\n  /**\n   * Enables adaptive bitrate switching.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._engine) {\n      this._engine.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._engine) {\n      return this._engine.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * update the text display settings\n   * @param {Object} settings - text cue display settings\n   * @public\n   * @returns {void}\n   */\n  setTextDisplaySettings(settings: Object): void {\n    this._textDisplaySettings = settings;\n    this._updateCueDisplaySettings();\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  /**\n   * Sets style attributes for text tracks.\n   * @param {TextStyle} style - text styling settings\n   * @returns {void}\n   */\n  set textStyle(style: TextStyle): void {\n    if (!(style instanceof TextStyle)) {\n      throw new Error(\"Style must be instance of TextStyle\");\n    }\n    let element = Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n    if (!element) {\n      element = Dom.createElement('style');\n      Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n      Dom.appendChild(document.head, element);\n    }\n    let sheet = element.sheet;\n\n    while (sheet.cssRules.length) {\n      sheet.deleteRule(0);\n    }\n\n    try {\n      if (this._config.playback.useNativeTextTrack) {\n        sheet.insertRule(`video.${ENGINE_CLASS_NAME}::cue { ${style.toCSS()} }`, 0);\n      } else {\n        sheet.insertRule(`#${this._playerId} .${SUBTITLES_CLASS_NAME} > div > div > div { ${style.toCSS()} }`, 0);\n      }\n      this._textStyle = style;\n    } catch (e) {\n      Player._logger.error(e.message);\n    }\n  }\n\n  /**\n   * Gets style attributes for text tracks.\n   * @returns {?TextStyle} - the current style attribute\n   */\n  get textStyle(): ?TextStyle {\n    return this._textStyle.clone();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Ads API\">\n\n  /**\n   * Skip on an ad.\n   * @public\n   * @returns {void}\n   */\n  skipAd(): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n      adsPlugin.skipAd();\n    }\n  }\n\n  /**\n   * Start to play ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @public\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n      adsPlugin.playAdNow(adTagUrl);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Private Methods\">\n\n  // <editor-fold desc=\"Playback\">\n\n  /**\n   * Creates the player container.\n   * @private\n   * @returns {void}\n   */\n  _createPlayerContainer(): void {\n    const el = this._el = Dom.createElement(\"div\");\n    Dom.addClassName(el, CONTAINER_CLASS_NAME);\n    this._playerId = Generator.uniqueId(5);\n    Dom.setAttribute(el, \"id\", this._playerId);\n    Dom.setAttribute(el, \"tabindex\", '-1');\n  }\n\n  /**\n   * Appends the poster element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendPosterEl(): void {\n    if (this._el) {\n      let el: HTMLDivElement = this._posterManager.getElement();\n      Dom.addClassName(el, POSTER_CLASS_NAME);\n      Dom.appendChild(this._el, el);\n    }\n  }\n\n  /**\n   * Appends the engine's video element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendEngineEl(): void {\n    if (this._el && this._engine) {\n      let engineEl = this._engine.getVideoElement();\n      const classname = `${ENGINE_CLASS_NAME}`;\n      Dom.addClassName(engineEl, classname);\n      const classnameWithId = `${ENGINE_CLASS_NAME}-${this._engine.id}`;\n      Dom.addClassName(engineEl, classnameWithId);\n      Dom.prependTo(engineEl, this._el);\n    }\n  }\n\n  /**\n   * Configures or load the plugins defined in the configuration.\n   * @param {Object} plugins - The new received plugins configuration.\n   * @private\n   * @returns {void}\n   */\n  _configureOrLoadPlugins(plugins: Object = {}): void {\n    if (plugins) {\n      Object.keys(plugins).forEach((name) => {\n        // If the plugin is already exists in the registry we are updating his config\n        const plugin = this._pluginManager.get(name);\n        if (plugin) {\n          plugin.updateConfig(plugins[name]);\n          this._config.plugins[name] = plugin.getConfig();\n        } else {\n          // We allow to load plugins as long as the player has no engine\n          if (!this._engine) {\n            this._pluginManager.load(name, this, plugins[name]);\n            let plugin = this._pluginManager.get(name);\n            if (plugin) {\n              this._config.plugins[name] = plugin.getConfig();\n              if (typeof plugin.getMiddlewareImpl === \"function\") {\n                this._playbackMiddleware.use(plugin.getMiddlewareImpl());\n              }\n            }\n          } else {\n            delete this._config.plugins[name];\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Creates the ready promise.\n   * @private\n   * @returns {void}\n   */\n  _createReadyPromise(): void {\n    this._readyPromise = new Promise((resolve, reject) => {\n      this._eventManager.listen(this, CustomEvents.TRACKS_CHANGED, resolve);\n      this._eventManager.listen(this, Html5Events.ERROR, reject);\n    });\n  }\n\n  /**\n   * Selects an engine to play a source according to a given stream priority.\n   * @return {boolean} - Whether a proper engine was found to play the given sources\n   * according to the priority.\n   * @private\n   */\n  _selectEngineByPriority(): boolean {\n    const streamPriority = this._config.playback.streamPriority;\n    const preferNative = this._config.playback.preferNative;\n    const sources = this._config.sources;\n    for (let priority of streamPriority) {\n      const engineId = (typeof priority.engine === 'string') ? priority.engine.toLowerCase() : '';\n      const format = (typeof priority.format === 'string') ? priority.format.toLowerCase() : '';\n      const Engine = Player._engines.find((Engine) => Engine.id === engineId);\n      if (Engine) {\n        const formatSources = sources[format];\n        if (formatSources && formatSources.length > 0) {\n          const source = formatSources[0];\n          if (Engine.canPlaySource(source, preferNative[format])) {\n            Player._logger.debug('Source selected: ', formatSources);\n            this._loadEngine(Engine, source);\n            this._engineType = engineId;\n            this._streamType = format;\n            this.dispatchEvent(new FakeEvent(CustomEvents.SOURCE_SELECTED, {selectedSource: formatSources}));\n            return true;\n          }\n        }\n      }\n    }\n    Player._logger.warn(\"No playable engines was found to play the given sources\");\n    return false;\n  }\n\n  /**\n   * Loads the selected engine.\n   * @param {IEngine} Engine - The selected engine.\n   * @param {Source} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadEngine(Engine: typeof IEngine, source: Source) {\n    if (this._engine) {\n      if (this._engine.id === Engine.id) {\n        this._engine.restore(source, this._config);\n      } else {\n        this._engine.destroy();\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    } else {\n      this._engine = Engine.createEngine(source, this._config);\n    }\n  }\n\n  /**\n   * Listen to all HTML5 defined events and trigger them on the player\n   * @private\n   * @returns {void}\n   */\n  _attachMedia(): void {\n    if (this._engine) {\n      Object.keys(Html5Events).forEach((html5Event) => {\n        this._eventManager.listen(this._engine, Html5Events[html5Event], (event: FakeEvent) => {\n          return this.dispatchEvent(event);\n        });\n      });\n      this._eventManager.listen(this._engine, CustomEvents.VIDEO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedVideoTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.AUDIO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedAudioTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.TEXT_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedTextTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._engine, CustomEvents.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this, Html5Events.PLAY, this._onPlay.bind(this));\n      this._eventManager.listen(this, Html5Events.ENDED, this._onEnded.bind(this));\n    }\n  }\n\n  /**\n   * Handles the playback config.\n   * @returns {void}\n   * @private\n   */\n  _handlePlaybackConfig(): void {\n    if (this._config.playback) {\n      if (typeof this._config.playback.volume === 'number') {\n        this.volume = this._config.playback.volume;\n      }\n      if (typeof this._config.playback.muted === 'boolean') {\n        this.muted = this._config.playback.muted;\n      }\n      if (typeof this._config.playback.playsinline === 'boolean') {\n        this.playsinline = this._config.playback.playsinline;\n      }\n      if (this._config.playback.preload === \"auto\") {\n        /**\n         * If ads plugin enabled it's his responsibility to preload the content player.\n         * So to avoid loading the player twice which can cause errors on MSEs we are not\n         * calling load from the player.\n         * TODO: Change it to check the ads configuration when we will develop the ads manager.\n         */\n        if (!this._config.plugins.ima) {\n          this.load();\n        }\n      }\n      if (this._canAutoPlay()) {\n        this.play();\n      }\n    }\n  }\n\n  /**\n   * Determine whether we can auto playing or not.\n   * @returns {boolean} - Whether an auto play can be done.\n   * @private\n   */\n  _canAutoPlay(): ?boolean {\n    if (!this._config.playback.autoplay) {\n      return false;\n    }\n    let device = this._env.device.type;\n    let os = this._env.os.name;\n    if (device) {\n      return (os === 'iOS') ? this.muted && this.playsinline : this.muted;\n    }\n    return true;\n  }\n\n  /**\n   * Start/resume the engine playback.\n   * @private\n   * @returns {void}\n   */\n  _play(): void {\n    if (this._engine.src) {\n      if (this.isLive() && !this.isDvr()) {\n        this.seekToLiveEdge();\n      }\n      this._engine.play();\n    } else {\n      this.load();\n      this.ready().then(() => {\n        this._engine.play();\n      });\n    }\n  }\n\n  /**\n   * Starts the engine pause.\n   * @private\n   * @returns {void}\n   */\n  _pause(): void {\n    this._engine.pause();\n  }\n\n  /**\n   * @function _onPlay\n   * @return {void}\n   * @private\n   */\n  _onPlay(): void {\n    if (this._firstPlay) {\n      this._firstPlay = false;\n      this.dispatchEvent(new FakeEvent(CustomEvents.FIRST_PLAY));\n      this._posterManager.hide();\n    }\n  }\n\n  /**\n   * @function _onEnded\n   * @return {void}\n   * @private\n   */\n  _onEnded(): void {\n    if (!this.paused) {\n      this._pause();\n    }\n  }\n\n  /**\n   * Resets the necessary components before change media.\n   * @private\n   * @returns {void}\n   */\n  _reset(): void {\n    this.pause();\n    this._posterManager.reset();\n    this._stateManager.reset();\n    this._pluginManager.reset();\n    this._eventManager.removeAll();\n    this._activeTextCues = [];\n    this._tracks = [];\n    this._firstPlay = true;\n    this._engineType = '';\n    this._streamType = '';\n    this._createReadyPromise();\n  }\n\n  /**\n   * @returns {Object} - The default configuration of the player.\n   * @private\n   * @static\n   */\n  static get _defaultConfig(): Object {\n    return Obj.copyDeep(DefaultPlayerConfig);\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function _getTracksByType\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @private\n   */\n  _getTracksByType(type?: string): Array<Track> {\n    return !type ? this._tracks : this._tracks.filter((track: Track) => {\n      if (type === TrackTypes.VIDEO) {\n        return track instanceof VideoTrack;\n      } else if (type === TrackTypes.AUDIO) {\n        return track instanceof AudioTrack;\n      } else if (type === TrackTypes.TEXT) {\n        return track instanceof TextTrack;\n      } else {\n        return true;\n      }\n    });\n  }\n\n  /**\n   * Mark the selected track as active\n   * @function _markActiveTrack\n   * @param {Track} track - the track to mark\n   * @returns {void}\n   * @private\n   */\n  _markActiveTrack(track: Track): void {\n    let type;\n    if (track instanceof VideoTrack) {\n      type = TrackTypes.VIDEO;\n    } else if (track instanceof AudioTrack) {\n      type = TrackTypes.AUDIO;\n    } else if (track instanceof TextTrack) {\n      type = TrackTypes.TEXT;\n    }\n    if (type) {\n      let tracks = this.getTracks(type);\n      for (let i = 0; i < tracks.length; i++) {\n        tracks[i].active = track.index === i;\n      }\n    }\n  }\n\n  /**\n   * handle text cue change\n   * @param {FakeEvent} event - the cue change event payload\n   * @private\n   * @returns {void}\n   */\n  _onCueChange(event: FakeEvent): void {\n    Player._logger.debug('Text cue changed', event.payload.cues);\n    this._activeTextCues = event.payload.cues;\n    this._updateCueDisplaySettings();\n    this._updateTextDisplay(this._activeTextCues)\n  }\n\n  /**\n   * update the text cue display settings\n   * @private\n   * @returns {void}\n   */\n  _updateCueDisplaySettings(): void {\n    const activeCues = this._activeTextCues;\n    const settings = this._textDisplaySettings;\n    for (let i = 0; i < activeCues.length; i++) {\n      let cue = activeCues[i];\n      for (let name in settings) {\n        cue[name] = settings[name];\n      }\n    }\n  }\n\n  /**\n   * update the text display\n   * @param {Array<Cue>} cues - list of cues\n   * @private\n   * @returns {void}\n   */\n  _updateTextDisplay(cues: Array<Cue>): void {\n    if (this._textDisplayEl === undefined) {\n      this._textDisplayEl = Dom.createElement(\"div\");\n      Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n      Dom.appendChild(this._el, this._textDisplayEl);\n    }\n    processCues(window, cues, this._textDisplayEl);\n  }\n\n  /**\n   * Add off text track if there are actual text tracks associated with media\n   * setting this track is the same as calling Player's hideTextTrack\n   * @private\n   * @returns {void}\n   */\n  _addTextTrackOffOption(): void {\n    const textTracks = this.getTracks(TrackTypes.TEXT);\n    if (textTracks && textTracks.length) {\n      this._tracks.push(new TextTrack({\n        active: false,\n        index: textTracks.length,\n        kind: \"subtitles\",\n        label: \"Off\",\n        language: OFF\n      }));\n    }\n  }\n\n  /**\n   * Sets the default tracks defined in the player config.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTracks(): void {\n    const activeTracks = this.getActiveTracks();\n    const playbackConfig = this.config.playback;\n    const offTextTrack: ?Track = this._getTracksByType(TrackTypes.TEXT).find(track => TextTrack.langComparer(OFF, track.language));\n\n    this.hideTextTrack();\n\n    this._setDefaultTrack(TrackTypes.TEXT, this._getLanguage(playbackConfig.textLanguage, activeTracks.text, TrackTypes.TEXT), offTextTrack);\n    this._setDefaultTrack(TrackTypes.AUDIO, playbackConfig.audioLanguage, activeTracks.audio);\n  }\n\n  /**\n   * Gets the track language that should be set by default.\n   * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n   * @param {Track} defaultTrack - The default track.\n   * @param {string} type - The track type.\n   * @private\n   * @returns {string} - The track language to set by default.\n   */\n  _getLanguage(configuredLanguage: string, defaultTrack: ?Track, type: string): string {\n    let language = configuredLanguage;\n    if (language === AUTO) {\n      const tracks = this._getTracksByType(type);\n      const localeTrack: ?Track = tracks.find(track => Track.langComparer(Locale.language, track.language));\n      if (localeTrack) {\n        language = localeTrack.language;\n      } else if (defaultTrack && defaultTrack.language !== OFF) {\n        language = defaultTrack.language;\n      } else if (tracks && tracks.length > 0) {\n        language = tracks[0].language;\n      }\n    }\n    return language;\n  }\n\n  /**\n   * Sets a specific default track.\n   * @param {string} type - The track type.\n   * @param {string} language - The track language.\n   * @param {?Track} defaultTrack - The default track to set in case there in case no language configured.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTrack(type: string, language: string, defaultTrack: ?Track): void {\n    if (language) {\n      const track: ?Track = this._getTracksByType(type).find(track => Track.langComparer(language, track.language));\n      if (track) {\n        this.selectTrack(track);\n      }\n    } else if (defaultTrack) {\n      this.selectTrack(defaultTrack);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Enums\">\n\n  /**\n   * Get the player events.\n   * @returns {Object} - The events of the player.\n   * @public\n   */\n  get Event(): { [event: string]: string } {\n    return PlayerEvents;\n  }\n\n  /**\n   * Get the player TextStyle.\n   * @returns {TextStyle} - The TextStyle class\n   * @public\n   */\n  get TextStyle(): typeof TextStyle {\n    return TextStyle;\n  }\n\n  /**\n   * Get the player states.\n   * @returns {Object} - The states of the player.\n   * @public\n   */\n  get State(): { [state: string]: string } {\n    return PlayerStates;\n  }\n\n  /**\n   * Get the player tracks types.\n   * @returns {Object} - The tracks types of the player.\n   * @public\n   */\n  get Track(): { [track: string]: string } {\n    return TrackTypes;\n  }\n\n  // </editor-fold>\n}\n\n\n\n// WEBPACK FOOTER //\n// ./player.js","//@flow\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nclass MultiMap<T> {\n  _map: Map<string, T[]>;\n\n  constructor() {\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n  push(key: string, value: T): void {\n    if (this._map.has(key)) {\n      let list = this._map.get(key);\n      if (Array.isArray(list)) {\n        list.push(value);\n        this._map.set(key, list);\n      }\n    } else {\n      this._map.set(key, [value]);\n    }\n  }\n\n  /**\n   * Set an array of values for the key, overwriting any previous data.\n   * @param {string} key -\n   * @param {!Array.<T>} values -\n   * @returns {void}\n   */\n  set(key: string, values: T[]): void {\n    this._map.set(key, values);\n  }\n\n  /**\n   * Check for a key.\n   * @param {string} key -\n   * @return {boolean} true if the key exists.\n   */\n  has(key: string): boolean {\n    return this._map.has(key);\n  }\n\n  /**\n   * Get a list of values by key.\n   * @param {string} key -\n   * @return {Array.<T>} or null if no suZch key exists.\n   */\n  get(key: string): Array<T> {\n    let list = this._map.get(key);\n    // slice() clones the list so that it and the map can each be modified\n    // without affecting the other.\n    return list ? list.slice() : [];\n  }\n\n  /**\n   * Get a list of all values.\n   * @returns {!Array.<T>} -\n   */\n  getAll(): T[] {\n    let list: T[] = [];\n    for (var value of this._map.values()) {\n      list = list.concat(value);\n    }\n    return list;\n  }\n\n  /**\n   * Remove a specific value, if it exists.\n   * @param {string} key -\n   * @param {T} value -\n   * @returns {void}\n   */\n  remove(key: string, value: T): void {\n    if (!this._map.has(key)) return;\n    let list = this._map.get(key);\n    if (Array.isArray(list)) {\n      for (let i = 0; i < list.length; ++i) {\n        if (list[i] == value) {\n          list.splice(i, 1);\n          --i;\n        }\n      }\n    }\n  }\n\n  /**\n   * Get all keys from the multimap.\n   * @return {!Array.<string>}\n   */\n  // eslint-disable-next-line no-undef\n  keys(): Iterator<string> {\n    return this._map.keys();\n  }\n\n\n  /**\n   * Clear all keys and values from the multimap.\n   * @returns {void}\n   */\n  clear(): void {\n    this._map.clear();\n  }\n}\n\nexport default MultiMap;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/multi-map.js","// @flow\n\n/**\n * Base middleware.\n * @classdesc\n */\nexport default class BaseMiddleware {\n  /**\n   * Id of the middleware instance.\n   * @public\n   */\n  id: string;\n\n  /**\n   * Calls the next handler in the middleware chain.\n   * @param {Function} next - The next handler in the middleware chain.\n   * @returns {void}\n   */\n  callNext(next: Function): void {\n    if (next) {\n      next();\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/base-middleware.js","//@flow\nimport Player from '../player'\nimport {PlayerError, LoggerFactory, Obj, Str} from '../utils/index'\nimport EventManager from '../event/event-manager'\nimport FakeEvent from '../event/fake-event'\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nexport default class BasePlugin implements IPlugin {\n  /**\n   * The runtime configuration of the plugin.\n   * @member\n   */\n  config: Object;\n  /**\n   * The name of the plugin.\n   * @member\n   */\n  name: string;\n  /**\n   * The logger of the plugin.\n   * @member\n   */\n  logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   */\n  player: Player;\n  /**\n   * The event manager of the plugin.\n   * @member\n   */\n  eventManager: EventManager;\n  /**\n   * The default configuration of the plugin.\n   * Inherited plugins should override this property.\n   * @type {Object}\n   * @static\n   * @member\n   */\n  static defaultConfig: Object = {};\n\n  /**\n   * Factory method to create the actual plugin.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @returns {BasePlugin} - New runtime plugin instance\n   * @static\n   * @public\n   */\n  static createPlugin(name: string, player: Player, config: Object = {}): BasePlugin {\n    return new this(name, player, config);\n  }\n\n  /**\n   * Returns under what conditions the plugin is valid.\n   * Plugin must implement this method.\n   * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n   * @static\n   * @public\n   * @abstract\n   */\n  static isValid(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isValid()').getError();\n  }\n\n  /**\n   * constructor\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @constructor\n   * @private\n   */\n  constructor(name: string, player: Player, config: Object) {\n    this.name = name;\n    this.player = player;\n    this.eventManager = new EventManager();\n    this.logger = LoggerFactory.getLogger(Str.capitlize(this.name));\n    this.config = {};\n    Obj.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n  getConfig(attr?: string): any {\n    if (attr) {\n      return Obj.copyDeep(this.config[attr]);\n    }\n    return Obj.copyDeep(this.config);\n  }\n\n  /**\n   * Updates the config of the plugin.\n   * @param {Object} update - The updated configuration.\n   * @public\n   * @returns {void}\n   */\n  updateConfig(update: Object): void {\n    Obj.mergeDeep(this.config, update);\n  }\n\n  /**\n   * Runs the destroy logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  destroy(): void {\n  }\n\n  /**\n   * Runs the reset logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  reset(): void {\n  }\n\n  /**\n   * Getter for the plugin's name.\n   * @returns {string} - The name of the plugin.\n   * @public\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  /**\n   * Dispatch an event via the plugin.\n   * @param {string} name - The event name.\n   * @param {any} payload - The event payload.\n   * @returns {void}\n   */\n  dispatchEvent(name: string, payload: any): void {\n    this.logger.debug(\"Fire event: \" + name, payload);\n    this.player.dispatchEvent(new FakeEvent(name, payload));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/base-plugin.js","//@flow\nimport FakeEvent from './fake-event'\nimport MultiMap from '../utils/multi-map'\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nclass FakeEventTarget {\n  _listeners: MultiMap<ListenerType>;\n  dispatchTarget: FakeEventTarget;\n\n  constructor() {\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new MultiMap();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  addEventListener(type: string, listener: ListenerType) {\n    this._listeners.push(type, listener);\n  }\n\n  /**\n   * Remove an event listener from this object.\n   *\n   * @param {string} type The event type for which you wish to remove a listener.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to remove.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  removeEventListener(type: string, listener: ListenerType) {\n    this._listeners.remove(type, listener);\n  }\n\n  /**\n   * Dispatch an event from this object.\n   *\n   * @param {!Event} event The event to be dispatched from this object.\n   * @return {boolean} True if the default action was prevented.\n   * @override\n   * @export\n   */\n  dispatchEvent(event: FakeEvent) {\n    // In many browsers, it is complex to overwrite properties of actual Events.\n    // Here we expect only to dispatch FakeEvents, which are simpler.\n    //goog.asserts.assert(event instanceof FakeEvent,\n    //    'FakeEventTarget can only dispatch FakeEvents!');\n\n    let list = this._listeners.get(event.type) || [];\n\n    for (let i = 0; i < list.length; ++i) {\n      // Do this every time, since events can be re-dispatched from handlers.\n      event.target = this.dispatchTarget;\n      event.currentTarget = this.dispatchTarget;\n\n      let listener = list[i];\n      try {\n        if (listener.handleEvent) {\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (exception) {\n        // Exceptions during event handlers should not affect the caller,\n        // but should appear on the console as uncaught, according to MDN:\n        // http://goo.gl/N6Ff27\n        // TODO: add log\n      }\n\n      if (event.stopped) {\n        break;\n      }\n    }\n\n    return event.defaultPrevented;\n  }\n}\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\ndeclare function ListenerType(event: FakeEvent): (boolean | void);\n\nexport default FakeEventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event-target.js","// @flow\n/* eslint-disable no-unused-vars */\nimport {LoggerFactory, PlayerError} from '../utils/index'\nimport DrmSupport from './drm-support'\nimport {DrmScheme} from './drm-scheme'\n\nexport default class BaseDrmProtocol implements IDrmProtocol {\n  static getLogger: any = LoggerFactory.getLogger;\n  static DrmSupport: DrmSupport = DrmSupport;\n  static DrmScheme: { [scheme: string]: string } = DrmScheme;\n\n  static canPlayDrm(drmData: Array<DrmData>): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayDrm').getError();\n  }\n\n  static setDrmPlayback(...args): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static setDrmPlayback').getError();\n  }\n\n  static destroy(): void {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/base-drm-protocol.js","//@flow\n/* eslint-disable no-unused-vars */\nimport FakeEvent from '../../../event/fake-event'\nimport FakeEventTarget from '../../../event/fake-event-target'\nimport {CUSTOM_EVENTS} from '../../../event/events'\nimport Track from '../../../track/track'\nimport VideoTrack from '../../../track/video-track'\nimport AudioTrack from '../../../track/audio-track'\nimport TextTrack from '../../../track/text-track'\nimport {PlayerError, LoggerFactory} from '../../../utils/index'\n\nexport default class BaseMediaSourceAdapter extends FakeEventTarget implements IMediaSourceAdapter {\n  /**\n   * Passing the custom events to the actual media source adapter.\n   * @static\n   */\n  static CustomEvents: { [event: string]: string } = CUSTOM_EVENTS;\n\n  /**\n   * Passing the getLogger function to the actual media source adapter.\n   * @type {Function}\n   * @static\n   */\n  static getLogger: Function = LoggerFactory.getLogger;\n\n  /**\n   * The adapter config.\n   * @member {Object} _config\n   * @private\n   */\n  _config: ?Object;\n\n  /**\n   * The source object.\n   * @member {Source} _sourceObj\n   * @private\n   */\n  _sourceObj: ?Source;\n\n  /**\n   * The dom video element.\n   * @member {HTMLVideoElement} _videoElement\n   * @private\n   */\n  _videoElement: HTMLVideoElement;\n\n  /**\n   * Checks if the media source adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether the media source adapter is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n   * @param {Source} source - The source object.\n   * @param {Object} config - The media source adapter configuration.\n   */\n  constructor(videoElement: HTMLVideoElement, source: Source, config: Object = {}) {\n    super();\n    this._videoElement = videoElement;\n    this._sourceObj = source;\n    this._config = config;\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n  destroy(): Promise<*> {\n    this._sourceObj = null;\n    this._config = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Triggers the appropriate track changed event.\n   * @param {Track} track - The selected track.\n   * @private\n   * @returns {void}\n   */\n  _onTrackChanged(track: Track): void {\n    if (track instanceof VideoTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.VIDEO_TRACK_CHANGED, {selectedVideoTrack: track});\n    } else if (track instanceof AudioTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.AUDIO_TRACK_CHANGED, {selectedAudioTrack: track});\n    } else if (track instanceof TextTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.TEXT_TRACK_CHANGED, {selectedTextTrack: track});\n    }\n  }\n\n  /**\n   * Dispatch an adapter event forward.\n   * @param {string} name - The name of the event.\n   * @param {Object} payload - The event payload.\n   * @returns {void}\n   */\n  _trigger(name: string, payload: Object): void {\n    this.dispatchEvent(new FakeEvent(name, payload));\n  }\n\n  /** Must implemented methods by the derived media source adapter **/\n\n  static canPlayType(mimeType: string, preferNative: boolean): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayType').getError();\n  }\n\n  load(): Promise<Object> {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'load').getError();\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectVideoTrack').getError();\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectAudioTrack').getError();\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectTextTrack').getError();\n  }\n\n  hideTextTrack(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'hideTextTrack').getError();\n  }\n\n  enableAdaptiveBitrate(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'enableAdaptiveBitrate').getError();\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isAdaptiveBitrateEnabled').getError();\n  }\n\n  seekToLiveEdge(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'seekToLiveEdge').getError();\n  }\n\n  isLive(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isLive').getError();\n  }\n\n  get src(): string {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'get src').getError();\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._videoElement.currentTime;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    this._videoElement.currentTime = to;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._videoElement.duration;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/base-media-source-adapter.js","//@flow\nimport NativeAdapter from './adapters/native-adapter'\nimport {LoggerFactory} from '../../../utils/index'\n\n/**\n * Media source provider\n * @classdesc\n */\nexport default class MediaSourceProvider {\n  /**\n   * The logger of the media source provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = LoggerFactory.getLogger('MediaSourceProvider');\n  /**\n   * The media source adapter registry.\n   * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n   * @static\n   * @private\n   */\n  static _mediaSourceAdapters: Array<typeof IMediaSourceAdapter> = [NativeAdapter];\n  /**\n   * The selected adapter for playback.\n   * @type {null|IMediaSourceAdapter}\n   * @static\n   * @private\n   */\n  static _selectedAdapter: ?(typeof IMediaSourceAdapter) = null;\n\n  /**\n   * Add a media source adapter to the registry.\n   * @function register\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n   * @static\n   * @returns {void}\n   */\n  static register(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    if (mediaSourceAdapter) {\n      if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> has been registered successfully`);\n        MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n      } else {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> is already registered, do not register again`);\n      }\n    }\n  }\n\n  /**\n   * Remove a media source adapter from the registry.\n   * @function unRegister\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    let index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n    if (index > -1) {\n      MediaSourceProvider._logger.debug(`Unregistered <${mediaSourceAdapter.id}> adapter`);\n      MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if the a media source adapter can play a given source.\n   * @param {Source} source - The source object to check.\n   *  @param {boolean} [preferNative=true] - prefer native flag.\n   * @returns {boolean} - Whether a media source adapter can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: Source, preferNative: boolean = true): boolean {\n    MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n    let mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n    if (source && source.mimetype) {\n      for (let i = 0; i < mediaSourceAdapters.length; i++) {\n        if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n          MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n          MediaSourceProvider._logger.debug(`Selected adapter is <${MediaSourceProvider._selectedAdapter.id}>`);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Orders the media source adapters array according to the preferNative value.\n   * @param {boolean} preferNative - Whether to prefer native playback.\n   * @private\n   * @returns {void}\n   */\n  static _orderMediaSourceAdapters(preferNative: boolean): void {\n    MediaSourceProvider._mediaSourceAdapters =\n      MediaSourceProvider._mediaSourceAdapters.filter(mse => mse.id !== 'NativeAdapter');\n    if (preferNative) {\n      MediaSourceProvider._mediaSourceAdapters.unshift(NativeAdapter);\n    } else {\n      MediaSourceProvider._mediaSourceAdapters.push(NativeAdapter);\n    }\n  }\n\n  /**\n   * Get the appropriate media source adapter to the video source.\n   * @function getMediaSourceAdapter\n   * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n   * @param {Source} source - The selected source object.\n   * @param {PlayerConfig} config - The player configuration.\n   * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n   * @static\n   */\n  static getMediaSourceAdapter(videoElement: HTMLVideoElement, source: Source, config: PlayerConfig): ?IMediaSourceAdapter {\n    if (videoElement && source && config) {\n      if (!MediaSourceProvider._selectedAdapter) {\n        MediaSourceProvider.canPlaySource(source, true);\n      }\n      return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n    }\n    return null;\n  }\n\n  /**\n   * Destroys the media source adapter provider necessary props.\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    MediaSourceProvider._selectedAdapter = null;\n  }\n}\n\nconst registerMediaSourceAdapter = MediaSourceProvider.register;\nexport {registerMediaSourceAdapter};\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/media-source-provider.js","//@flow\nimport BasePlugin from './base-plugin'\nimport {PlayerError, LoggerFactory} from '../utils/index'\nimport Player from '../player'\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nconst logger = LoggerFactory.getLogger(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\nexport default class PluginManager {\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n  static _registry: Map<string, Function> = new Map();\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n  _plugins: Map<string, BasePlugin> = new Map();\n\n  /**\n   * Writes the plugin in the registry.\n   * Maps: plugin name -> plugin class.\n   * @param {string} name - The plugin name\n   * @param {Function} handler - The plugin class\n   * @returns {boolean} - If the registration request succeeded\n   * @static\n   * @public\n   */\n  static register(name: string, handler: Function): boolean {\n    if (typeof handler !== 'function' || handler.prototype instanceof BasePlugin === false) {\n      throw new PlayerError(PlayerError.TYPE.NOT_VALID_HANDLER).getError();\n    }\n    if (!PluginManager._registry.has(name)) {\n      PluginManager._registry.set(name, handler);\n      logger.debug(`Plugin <${name}> has been registered successfully`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> is already registered, do not register again`);\n    return false;\n  }\n\n  /**\n   * Removes the plugin from the registry.\n   * @param {string} name - The plugin name\n   * @static\n   * @public\n   * @returns {void}\n   */\n  static unRegister(name: string): void {\n    if (PluginManager._registry.has(name)) {\n      PluginManager._registry.delete(name);\n      logger.debug(`Unregistered <${name}> plugin.`);\n    }\n  }\n\n  /**\n   * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} [config={}] - The plugin configuration\n   * @returns {boolean} - Whether the plugin load was successful\n   * @public\n   */\n  load(name: string, player: Player, config: Object = {}): boolean {\n    if (!PluginManager._registry.has(name)) {\n      throw new PlayerError(PlayerError.TYPE.NOT_REGISTERED_PLUGIN, name).getError();\n    }\n    let pluginClass = PluginManager._registry.get(name);\n    if (pluginClass && pluginClass.isValid()) {\n      this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n      logger.debug(`Plugin <${name}> has been loaded`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> isn\\'t loaded, isValid()=false`);\n    return false;\n  }\n\n  /**\n   * Iterates over all the plugins and calls private _destroy.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._plugins.forEach(this._destroy.bind(this));\n  }\n\n  /**\n   * Iterates over all the plugins and calls reset() method of the plugin's impl.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._plugins.forEach((plugin: BasePlugin) => {\n      plugin.reset();\n    });\n  }\n\n  /**\n   * Calls destroy() method of the plugin's impl.\n   * @param {BasePlugin} plugin - The plugin instance\n   * @param {string} name - The plugin name\n   * @private\n   * @returns {void}\n   */\n  _destroy(plugin: BasePlugin, name: string): void {\n    plugin.destroy();\n    this._plugins.delete(name);\n  }\n\n  /**\n   * Returns the plugin's instance.\n   * @param {string} name - The plugin name\n   * @returns {BasePlugin} - The plugin instance\n   * @public\n   */\n  get(name: string): ?BasePlugin {\n    return this._plugins.get(name);\n  }\n}\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\nconst registerPlugin = PluginManager.register;\nexport {registerPlugin};\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/plugin-manager.js","// @flow\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nclass TextStyle {\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n  static FontFamily: { [string]: string } = {\n    \"ARIAL\": \"Arial\",\n    \"HELVETICA\": \"Helvetica\",\n    \"VERDANA\": \"Verdana\",\n    \"SANS_SERIF\": \"sans-serif\"\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n  static StandardColors: { [string]: Array<number> } = {\n    'WHITE': [255, 255, 255],\n    'BLACK': [0, 0, 0],\n    'RED': [255, 0, 0],\n    'GREEN': [0, 255, 0],\n    'BLUE': [0, 0, 255],\n    'YELLOW': [255, 255, 0],\n    'MAGENTA': [255, 0, 255],\n    'CYAN': [0, 255, 255]\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n  static StandardOpacities: { [string]: number } = {\n    'OPAQUE': 1,\n    'SEMI_HIGH': 0.75,\n    'SEMI_LOW': 0.25,\n    'TRANSPARENT': 0\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n  static EdgeStyles: { [string]: Array<Array<number>> } = {\n    'NONE': [],\n    'RAISED': [\n      [34, 34, 34, 1, 1, 0],\n      [34, 34, 34, 2, 2, 0],\n      [34, 34, 34, 3, 3, 0]],\n    'DEPRESSED': [\n      [204, 204, 204, 1, 1, 0],\n      [204, 204, 204, 0, 1, 0],\n      [34, 34, 34, -1, -1, 0],\n      [34, 34, 34, 0, -1, 0]],\n    'UNIFORM': [\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4]],\n    'DROP': [\n      [34, 34, 34, 2, 2, 3],\n      [34, 34, 34, 2, 2, 4],\n      [34, 34, 34, 2, 2, 5]]\n  };\n\n  static FontSizes: Array<string> = [\n    \"50%\",\n    \"75%\",\n    \"100%\",\n    \"200%\",\n    \"300%\",\n    \"400%\"\n  ];\n\n  /**\n   * Creates a CSS RGBA sctring for a given color and opacity values\n   * @param {TextStyle.StandardColors} color - color value in RGB\n   * @param {TextStyle.StandardOpacities} opacity - opacity value\n   * @return {string} - CSS rgba string\n   * @private\n   */\n  static _toRGBA(color: Array<number>, opacity: number): string {\n    // shaka.asserts.assert(color.length == 3);\n    return 'rgba(' + color.concat(opacity).join(',') + ')';\n  }\n\n  /**\n   * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n   * @type {string}\n   */\n  fontSize: string = '100%';\n\n  /**\n   * @type {TextStyle.FontFamily}\n   */\n  fontFamily: string = TextStyle.FontFamily.SANS_SERIF;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  fontColor: Array<number> = TextStyle.StandardColors.WHITE;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   * @expose\n   */\n  fontOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  backgroundColor: Array<number> = TextStyle.StandardColors.BLACK;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   */\n  backgroundOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.EdgeStyles}\n   * @expose\n   */\n  fontEdge: Array<Array<number>> = TextStyle.EdgeStyles.NONE;\n\n  /**\n   * Compute the CSS text necessary to represent this TextStyle.\n   * Output does not contain any selectors.\n   *\n   * @return {string} - ::CUE CSS string\n   */\n  toCSS(): string {\n    let attributes: Array<string> = [];\n\n    attributes.push('font-family: ' + this.fontFamily);\n    attributes.push('font-size: ' + this.fontSize);\n    attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n    attributes.push('background-color: ' +\n      TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n    // A given edge effect may be implemented with multiple shadows.\n    // Collect them all into an array, then combine into one attribute.\n    let shadows: Array<string> = [];\n    for (let i = 0; i < this.fontEdge.length; i++) {\n      // shaka.asserts.assert(this.fontEdge[i].length == 6);\n      const color: Array<number> = this.fontEdge[i].slice(0, 3);\n      let shadow: Array<number> = this.fontEdge[i].slice(3, 6);\n      shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' +\n        shadow.join('px ') + 'px');\n    }\n    attributes.push('text-shadow: ' + shadows.join(','));\n\n    return attributes.join('!important; ');\n  }\n\n  /**\n   * clones the textStyle object\n   * @returns {TextStyle} the cloned textStyle object\n   */\n  clone(): TextStyle {\n    let clonedTextStyle = new TextStyle();\n    clonedTextStyle.fontEdge = this.fontEdge;\n    clonedTextStyle.fontSize = this.fontSize;\n    clonedTextStyle.fontColor = this.fontColor;\n    clonedTextStyle.fontOpacity = this.fontOpacity;\n    clonedTextStyle.backgroundColor = this.backgroundColor;\n    clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n    return clonedTextStyle;\n  }\n}\n\nexport default TextStyle;\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-style.js","// @flow\nexport const DrmScheme: { [scheme: string]: string } = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-scheme.js","//@flow\n\n/**\n * The possible player state types.\n * @const\n */\nconst PLAYER_STATE_TYPES: { [state: string]: string } = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\n\nexport default PLAYER_STATE_TYPES;\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-types.js","/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nconst fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  const m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nconst ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200e\",\n  \"&rlm;\": \"\\u200f\",\n  \"&nbsp;\": \"\\u00a0\"\n};\n\nconst TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nconst TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nconst NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    const m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    let m;\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n      NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    const tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    let element = window.document.createElement(tagName);\n    element.localName = tagName;\n    const name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  let rootDiv = window.document.createElement(\"div\"),\n    current = rootDiv,\n    t,\n    tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n          tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      let ts = parseTimeStamp(t.substr(1, t.length - 2));\n      let node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      const m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nconst strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n  [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n  [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n  [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n  [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n  [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n  [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n  [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n  [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n  [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n  [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n  [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n  [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n  [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n  [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n  [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n  [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n  [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n  [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n  [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n  [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n  [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n  [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n  [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n  [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (let i = 0; i < strongRTLRanges.length; i++) {\n    const currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  let nodeStack = [],\n    text = \"\",\n    charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (let i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    const node = nodeStack.pop(),\n      text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      const m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (let i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n    (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n    !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  const track = cue.track;\n  const trackList = track.textTrackList;\n  let count = 0;\n  for (let i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nclass StyleBox {\n\n  constructor() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  applyStyles(styles, div) {\n    div = div || this.div;\n    for (let prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  }\n\n  formatStyle(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  }\n}\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nclass CueStyleBox extends StyleBox {\n  constructor(window, cue, styleOptions) {\n    super();\n    const isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    let color = \"rgba(255, 255, 255, 1)\";\n    let backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    let textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    let styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    let textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - (cue.size / 2);\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left: this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n}\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nclass BoxPosition {\n  constructor(obj) {\n    let isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    let lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      let rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n        rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n        : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  move(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n      case \"+x\":\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case \"-x\":\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case \"+y\":\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case \"-y\":\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  }\n\n  // Check if this box overlaps another box, b2.\n  overlaps = function (b2) {\n    return this.left < b2.right &&\n      this.right > b2.left &&\n      this.top < b2.bottom &&\n      this.bottom > b2.top;\n  }\n\n  // Check if this box overlaps any other boxes in boxes.\n  overlapsAny(boxes) {\n    for (let i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Check if this box is within another box.\n  within(container) {\n    return this.top >= container.top &&\n      this.bottom <= container.bottom &&\n      this.left >= container.left &&\n      this.right <= container.right;\n  }\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  overlapsOppositeAxis(container, axis) {\n    switch (axis) {\n      case \"+x\":\n        return this.left < container.left;\n      case \"-x\":\n        return this.right > container.right;\n      case \"+y\":\n        return this.top < container.top;\n      case \"-y\":\n        return this.bottom > container.bottom;\n    }\n  }\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  intersectPercentage(b2) {\n    let x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  }\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  toCSSCompatValues(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  }\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  static getSimpleBoxPosition(obj) {\n    let height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    let width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    let top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n      obj.tagName ? obj.getBoundingClientRect() : obj;\n    return {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n  };\n}\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    let bestPosition,\n      specifiedPosition = new BoxPosition(b),\n      percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (let i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n      (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      let p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  let boxPosition = new BoxPosition(styleBox),\n    cue = styleBox.cue,\n    linePos = computeLinePos(cue),\n    axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    let step = boxPosition.lineHeight,\n      position = step * Math.round(linePos),\n      maxPosition = containerBox[size] + step,\n      initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    let calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  let bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nconst FONT_SIZE_PERCENT = 0.05;\nconst FONT_STYLE = \"sans-serif\";\nconst CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  let paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (let i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  let boxPositions = [],\n    containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n    fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  let styleOptions = {\n    font: (fontSize * fontScale) + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    let styleBox, cue;\n\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\n\nexport {processCues, convertCueToDOMTree};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track-display.js","//@flow\nimport {convertCueToDOMTree} from './text-track-display'\n\nconst autoKeyword: string = \"auto\";\nconst directionSetting: { [string]: boolean } = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nconst alignSetting: { [string]: boolean } = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value: string): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\nclass VTTCue {\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n  hasBeenReset: boolean = false;\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  displayState: any = undefined;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n  _id: string = \"\";\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n  _pauseOnExit: boolean = false;\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _startTime: number;\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _endTime: number;\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n  _text: string;\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n  _region: ?string = null;\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n  _vertical: string = \"\";\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  _snapToLines: boolean = true;\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n  _line: string | number = \"auto\";\n  /**\n   * An alignment for the cue boxs line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n  _lineAlign: string = \"start\";\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n  _position: number = 50;\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n  _positionAlign: string = \"middle\";\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n  _size: number = 50;\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n  _align: string = \"middle\";\n\n  constructor(startTime: number, endTime: number, text: string) {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n\n  resetCue(): void {\n    this.hasBeenReset = true;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  set id(value: string) {\n    this._id = \"\" + value;\n  }\n\n  get pauseOnExit(): boolean {\n    return this._pauseOnExit;\n  }\n\n  set pauseOnExit(value: boolean) {\n    this._pauseOnExit = value;\n  }\n\n  get startTime(): number {\n    return this._endTime;\n  }\n\n  set startTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"Start time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set endTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"End time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    this._text = \"\" + value;\n    this.resetCue();\n  }\n\n  get region(): ?string {\n    return this._region;\n  }\n\n  set region(value: string) {\n    this._region = value;\n    this.resetCue();\n  }\n\n  get vertical(): string {\n    return this._vertical;\n  }\n\n  set vertical(value: string) {\n    const setting = findDirectionSetting(value);\n    // Have to check for false because the setting an be an empty string.\n    if (setting === false) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._vertical = setting;\n      this.resetCue();\n    }\n  }\n\n  get snapToLines(): boolean {\n    return this._snapToLines;\n  }\n\n  set snapToLines(value: boolean) {\n    this._snapToLines = value;\n    this.resetCue();\n  }\n\n  get line(): string | number {\n    return this._line;\n  }\n\n  set line(value: string | number) {\n    if (typeof value !== \"number\" && value !== autoKeyword) {\n      throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n    }\n    this._line = value;\n    this.resetCue();\n  }\n\n  get lineAlign(): string {\n    return this._lineAlign;\n  }\n\n  set lineAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._lineAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get position(): number {\n    return this._position;\n  }\n\n  set position(value: number) {\n    if (value < 0 || value > 100) {\n      throw new Error(\"Position must be between 0 and 100.\");\n    }\n    this._position = value;\n    this.resetCue();\n  }\n\n  get positionAlign(): string {\n    return this._positionAlign;\n  }\n\n  set positionAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._positionAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get size(): number | boolean {\n    return this._size;\n  }\n\n  set size(value: number): void {\n    if (value < 0 || value > 100\n    ) {\n      throw new Error(\"Size must be between 0 and 100.\");\n    }\n    this._size = value;\n    this.resetCue();\n  }\n\n  get align(): string {\n    return this._align;\n  }\n\n  set align(value: string): void {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._align = (setting: string);\n      this.resetCue();\n    }\n  }\n\n  getCueAsHTML() {\n    return convertCueToDOMTree(window, this.text);\n  }\n}\n\nlet Cue;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  Cue = window.VTTCue;\n} else {\n  Cue = VTTCue;\n}\n\nexport {Cue};\n\n\n\n// WEBPACK FOOTER //\n// ./track/vtt-cue.js","// @flow\nimport {LoggerFactory, Env} from '../utils/index'\nimport {DrmScheme} from './drm-scheme'\n\nconst NOT_SUPPORTED: string = 'not_supported_drm_playback';\n\nexport default class DrmSupport {\n  static _logger: any = LoggerFactory.getLogger('DrmSupport');\n  static _Browsers: BrowserHandlers = {\n    Safari: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      if (!device && os === 'Mac OS') {\n        return DrmScheme.FAIRPLAY;\n      }\n      return NOT_SUPPORTED;\n    },\n    Chrome: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      if (!device || os === 'Android') {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Firefox: () => {\n      const device = Env.device.type;\n      if (!device) {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Edge: () => {\n      const device = Env.device.type;\n      if (!device) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    },\n    IE: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      const osVersion = Env.os.version;\n      if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    }\n  };\n\n  /**\n   * Checks if a certain DRM scheme is supported in the current environment.\n   * @param {string} scheme - The drm scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether scheme can be play on the current environment.\n   */\n  static isProtocolSupported(scheme: string, drmData: Array<DrmData>): boolean {\n    const browser = Env.browser.name;\n    if (typeof DrmSupport._Browsers[browser] === 'function') {\n      const drmScheme = DrmSupport._Browsers[browser]();\n      DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n      return (drmScheme === scheme && !!(drmData.find((drmEntry) => drmEntry.scheme === scheme)));\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-support.js","// @flow\nimport BaseDrmProtocol from './base-drm-protocol'\n\nexport default class FairPlay extends BaseDrmProtocol {\n  static _logger = BaseDrmProtocol.getLogger('FairPlay');\n  static _keySession: any;\n  static _KeySystem: string = \"com.apple.fps.1_0\";\n  static _WebkitEvents: { [keyMessage: string]: string } = {\n    NEED_KEY: 'webkitneedkey',\n    KEY_MESSAGE: 'webkitkeymessage',\n    KEY_ADDED: 'webkitkeyadded',\n    KEY_ERROR: 'webkitkeyerror'\n  };\n\n  /**\n   * FairPlay playback supports in case 2 conditions are met:\n   * 1. The environment supports FairPlay playback.\n   * 2. The drm data of the source object contains entry with FairPlay scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether FairPlay can be play on the current environment.\n   */\n  static canPlayDrm(drmData: Array<DrmData>): boolean {\n    FairPlay._logger.debug(\"Can play DRM scheme of: \" + BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    return BaseDrmProtocol.DrmSupport.isProtocolSupported(BaseDrmProtocol.DrmScheme.FAIRPLAY, drmData);\n  }\n\n  /**\n   * Sets the FairPlay playback.\n   * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n   * @param {Array<Object>} drmData - The drm data.\n   * @returns {void}\n   */\n  static setDrmPlayback(videoElement: HTMLVideoElement, drmData: Array<DrmData> = []): void {\n    FairPlay._logger.debug(\"Sets DRM playback\");\n    videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n  }\n\n  static _onWebkitNeedKey(drmData: Array<DrmData>, event: any): void {\n    FairPlay._logger.debug(\"Webkit need key triggered\");\n    let fpDrmData = drmData.find((drmEntry) => drmEntry.scheme === BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    if (!fpDrmData || FairPlay._keySession) {\n      return;\n    }\n\n    let fpCertificate = fpDrmData.certificate;\n    let videoElement = event.target;\n    let initData = event.initData;\n    let contentId = FairPlay._extractContentId(initData);\n    let aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n    initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n    if (!videoElement.webkitKeys) {\n      let keySystem = FairPlay._selectKeySystem();\n      FairPlay._logger.debug(\"Sets media keys\");\n      videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n    }\n    if (!videoElement.webkitKeys) {\n      throw new Error(\"Could not create MediaKeys\");\n    }\n    FairPlay._logger.debug(\"Creates session\");\n    FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n    if (!FairPlay._keySession) {\n      throw new Error(\"Could not create key session\");\n    }\n    FairPlay._keySession.contentId = contentId;\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n  }\n\n  static destroy(): void {\n    FairPlay._keySession = null;\n  }\n\n  static _onWebkitKeyMessage(drmData: Object, event: any): void {\n    FairPlay._logger.debug(\"Webkit key message triggered\");\n    let message = event.message;\n    let request = new XMLHttpRequest();\n    request.responseType = \"text\";\n    request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n    request.addEventListener(\"error\", FairPlay._licenseRequestFailed, false);\n    let params = FairPlay._base64EncodeUint8Array(message);\n    request.open('POST', drmData.licenseUrl, true);\n    request.setRequestHeader(\"Content-type\", \"application/json\");\n    FairPlay._logger.debug(\"Ready for license request\");\n    request.send(params);\n  }\n\n  static _onWebkitKeyAdded(): void {\n    FairPlay._logger.debug(\"Decryption key was added to session\");\n  }\n\n  static _onWebkitKeyError(): void {\n    FairPlay._logger.error(\"A decryption key error was encountered\");\n  }\n\n  static _licenseRequestLoaded(event: any): void {\n    FairPlay._logger.debug(\"License request loaded\");\n    let request = event.target;\n    let keyText = request.responseText.trim();\n    let responseObj = JSON.parse(keyText);\n    let key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n    FairPlay._keySession.update(key);\n  }\n\n  static _licenseRequestFailed(): void {\n    throw new Error(\"License request failed\");\n  }\n\n  static _extractContentId(initData: Uint8Array): string {\n    let link = document.createElement('a');\n    link.href = FairPlay._arrayToString(initData);\n    return link.hostname;\n  }\n\n  static _selectKeySystem(): ?string {\n    let keySystem = null;\n    if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n      keySystem = FairPlay._KeySystem;\n    } else {\n      FairPlay._logger.warn(\"Key System not supported\");\n    }\n    return keySystem;\n  }\n\n  static _arrayToString(array: Uint8Array): string {\n    return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n  }\n\n  static _base64DecodeUint8Array(input: string): Uint8Array {\n    let raw = window.atob(input);\n    let rawLength = raw.length;\n    let array = new Uint8Array(new ArrayBuffer(rawLength));\n    for (let i = 0; i < rawLength; i++) {\n      array[i] = raw.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _concatInitDataIdAndCertificate(initData: Uint8Array, id: string | Uint16Array, cert: Uint8Array): Uint8Array {\n    if (typeof id === \"string\") {\n      id = FairPlay._stringToArray(id);\n    }\n    let offset = 0;\n    let buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n    let dataView = new DataView(buffer);\n\n    let initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initData.byteLength;\n\n    dataView.setUint32(offset, id.byteLength, true);\n    offset += 4;\n\n    let idArray = new Uint8Array(buffer, offset, id.byteLength);\n    idArray.set(id);\n    offset += idArray.byteLength;\n\n    dataView.setUint32(offset, cert.byteLength, true);\n    offset += 4;\n\n    let certArray = new Uint8Array(buffer, offset, cert.byteLength);\n    certArray.set(cert);\n\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n  }\n\n  static _stringToArray(string: string): Uint16Array {\n    let buffer = new ArrayBuffer(string.length * 2);\n    let array = new Uint16Array(buffer);\n    for (let i = 0, strLen = string.length; i < strLen; i++) {\n      array[i] = string.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _base64EncodeUint8Array(input: Uint8Array): string {\n    let keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let output = \"\";\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    while (i < input.length) {\n      chr1 = input[i++];\n      chr2 = i < input.length ? input[i++] : Number.NaN;\n      chr3 = i < input.length ? input[i++] : Number.NaN;\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output += keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n        keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/fairplay.js","//@flow\nimport FakeEventTarget from '../../event/fake-event-target'\nimport FakeEvent from '../../event/fake-event'\nimport EventManager from '../../event/event-manager'\nimport {HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from '../../event/events'\nimport MediaSourceProvider from './media-source/media-source-provider'\nimport VideoTrack from '../../track/video-track'\nimport AudioTrack from '../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../track/text-track'\nimport {Cue} from '../../track/vtt-cue'\nimport {Dom, Generator} from '../../utils/index'\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nexport default class Html5 extends FakeEventTarget implements IEngine {\n  /**\n   * The video element.\n   * @type {HTMLVideoElement}\n   * @private\n   */\n  _el: HTMLVideoElement;\n  /**\n   * The event manager of the engine.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The selected media source adapter of the engine.\n   * @type {?IMediaSourceAdapter}\n   * @private\n   */\n  _mediaSourceAdapter: ?IMediaSourceAdapter;\n  /**\n   * The player config object.\n   * @type {PlayerConfig}\n   * @private\n   */\n  _config: PlayerConfig;\n  /**\n   * Flag to indicate first time text track cue change.\n   * @type {Object<number, boolean>}\n   * @private\n   */\n  _showTextTrackFirstTime: { [number]: boolean } = {};\n  /**\n   * Promise to indicate when a media source adapter can be loaded.\n   * @type {Promise<*>}\n   * @private\n   */\n  _canLoadMediaSourceAdapterPromise: Promise<*>;\n\n  /**\n   * @type {string} - The engine id.\n   */\n  static id: string = \"html5\";\n\n  /**\n   * Factory method to create an engine.\n   * @param {Source} source - The selected source object.\n   * @param {PlayerConfig} config - The player configuration.\n   * @returns {IEngine} - New instance of the run time engine.\n   * @public\n   * @static\n   */\n  static createEngine(source: Source, config: PlayerConfig): IEngine {\n    return new this(source, config);\n  }\n\n  /**\n   * Checks if the engine can play a given source.\n   * @param {Source} source - The source object to check.\n   * @param {boolean} preferNative - prefer native flag\n   * @returns {boolean} - Whether the engine can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: Source, preferNative: boolean): boolean {\n    return MediaSourceProvider.canPlaySource(source, preferNative);\n  }\n\n  /**\n   * @constructor\n   * @param {Source} source - The selected source object.\n   * @param {PlayerConfig} config - The player configuration.\n   */\n  constructor(source: Source, config: PlayerConfig) {\n    super();\n    this._eventManager = new EventManager();\n    this._createVideoElement();\n    this._init(source, config);\n  }\n\n  /**\n   * Restores the engine.\n   * @param {Source} source - The selected source object.\n   * @param {PlayerConfig} config - The player configuration.\n   * @returns {void}\n   */\n  restore(source: Source, config: PlayerConfig): void {\n    this.detach();\n    this._eventManager.removeAll();\n    if (this._el) {\n      Dom.removeAttribute(this._el, 'src');\n    }\n    this._init(source, config);\n  }\n\n  /**\n   * Destroys the engine.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.detach();\n    if (this._el) {\n      this.pause();\n      Dom.removeAttribute(this._el, 'src');\n      Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._showTextTrackFirstTime = {};\n    this._eventManager.destroy();\n    MediaSourceProvider.destroy();\n    this._mediaSourceAdapter = null;\n  }\n\n  /**\n   * Get the engine's id\n   * @public\n   * @returns {string} the engine's id\n   */\n  get id(): string {\n    return Html5.id;\n  }\n\n  /**\n   * Listen to the video element events and triggers them from the engine.\n   * @public\n   * @returns {void}\n   */\n  attach(): void {\n    Object.keys(Html5Events).forEach((html5Event) => {\n      this._eventManager.listen(this._el, Html5Events[html5Event], () => {\n        this.dispatchEvent(new FakeEvent(Html5Events[html5Event]));\n      });\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.VIDEO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.AUDIO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.TEXT_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.TEXT_CUE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n    }\n  }\n\n  /**\n   * Remove the listeners of the video element events.\n   * @public\n   * @returns {void}\n   */\n  detach(): void {\n    Object.keys(Html5Events).forEach((html5Event) => {\n      this._eventManager.unlisten(this._el, Html5Events[html5Event]);\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.VIDEO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.AUDIO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.TEXT_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.TEXT_CUE_CHANGED);\n    }\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  /**\n   * Select a new video track.\n   * @param {VideoTrack} videoTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a new audio track.\n   * @param {AudioTrack} audioTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n    }\n  }\n\n  /**\n   * Select a new text track.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    this._removeCueChangeListener();\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectTextTrack(textTrack);\n    }\n    this._addCueChangeListener(textTrack);\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.hideTextTrack();\n    }\n    this._removeCueChangeListener();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to the media source extension logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n  }\n\n  /**\n   * Start/resume playback.\n   * @public\n   * @returns {void}\n   */\n  play(): void {\n    this._el.play();\n  }\n\n  /**\n   * Pause playback.\n   * @public\n   * @returns {void}\n   */\n  pause(): void {\n    return this._el.pause();\n  }\n\n  /**\n   * Load media.\n   * @param {number} startTime - Optional time to start the video from.\n   * @public\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._el.load();\n    return this._canLoadMediaSourceAdapterPromise.then(() => {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.load(startTime);\n      }\n      return Promise.resolve({});\n    });\n  }\n\n  /**\n   * Set a source.\n   * @param {string} source - Source to set.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    this._el.src = source;\n  }\n\n  /**\n   * Get the source url.\n   * @returns {string} - The source url.\n   * @public\n   */\n  get src(): string {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.src;\n    }\n    return \"\";\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.currentTime = to;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @public\n   * @returns {void}\n   */\n  set volume(vol: number): void {\n    this._el.volume = vol;\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {Number} - The volume value of the video element.\n   * @public\n   */\n  get volume(): number {\n    return this._el.volume;\n  }\n\n  ready(): void {\n  }\n\n  /**\n   * Get paused state.\n   * @returns {boolean} - The paused value of the video element.\n   * @public\n   */\n  get paused(): boolean {\n    return this._el.paused;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {boolean} - The seeking value of the video element.\n   * @public\n   */\n  get seeking(): boolean {\n    return this._el.seeking;\n  }\n\n  /**\n   * Get the first seekable range (part) of the video in seconds.\n   * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n   * @public\n   */\n  get seekable(): TimeRanges {\n    return this._el.seekable;\n  }\n\n  /**\n   * Get the first played range (part) of the video in seconds.\n   * @returns {TimeRanges} - First played range (part) of the video in seconds.\n   * @public\n   */\n  get played(): TimeRanges {\n    return this._el.played;\n  }\n\n  /**\n   * Get the first buffered range (part) of the video in seconds.\n   * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n   * @public\n   */\n  get buffered(): TimeRanges {\n    return this._el.buffered;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The new mute value.\n   * @public\n   * @returns {void}\n   */\n  set muted(mute: boolean): void {\n    this._el.muted = mute;\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {boolean} - The muted value of the video element.\n   * @public\n   */\n  get muted(): boolean {\n    return this._el.muted;\n  }\n\n  /**\n   * Get the default mute value.\n   * @returns {boolean} - The defaultMuted of the video element.\n   * @public\n   */\n  get defaultMuted(): boolean {\n    return this._el.defaultMuted;\n  }\n\n  /**\n   * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @param {string} poster - The image url to be shown.\n   * @returns {void}\n   * @public\n   */\n  set poster(poster: string): void {\n    this._el.poster = poster;\n  }\n\n  /**\n   * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @returns {poster} - The image url.\n   * @public\n   */\n  get poster(): string {\n    return this._el.poster;\n  }\n\n  /**\n   * Specifies if and how the author thinks that the video should be loaded when the page loads.\n   * @param {string} preload - The preload value.\n   * @public\n   * @returns {void}\n   */\n  set preload(preload: string): void {\n    this._el.preload = preload;\n  }\n\n  /**\n   * Gets the preload value of the video element.\n   * @returns {string} - The preload value.\n   * @public\n   */\n  get preload(): string {\n    return this._el.preload;\n  }\n\n  /**\n   * Set if the video will automatically start playing as soon as it can do so without stopping.\n   * @param {boolean} autoplay - The autoplay value.\n   * @public\n   * @returns {void}\n   */\n  set autoplay(autoplay: boolean): void {\n    this._el.autoplay = autoplay;\n  }\n\n  /**\n   * Gets the autoplay value of the video element.\n   * @returns {boolean} - The autoplay value.\n   * @public\n   */\n  get autoplay(): boolean {\n    return this._el.autoplay;\n  }\n\n  /**\n   * Set to specifies that the video will start over again, every time it is finished.\n   * @param {boolean} loop - the loop value.\n   * @public\n   * @returns {void}\n   */\n  set loop(loop: boolean) {\n    this._el.loop = loop;\n  }\n\n  /**\n   * Gets the loop value of the video element.\n   * @returns {boolean} - The loop value.\n   * @public\n   */\n  get loop(): boolean {\n    return this._el.loop;\n  }\n\n  /**\n   * Set to specifies that video controls should be displayed.\n   * @param {boolean} controls - the controls value.\n   * @public\n   * @returns {void}\n   */\n  set controls(controls: boolean): void {\n    this._el.controls = controls;\n  }\n\n  /**\n   * Gets the controls value of the video element.\n   * @returns {boolean} - The controls value.\n   * @public\n   */\n  get controls(): boolean {\n    return this._el.controls;\n  }\n\n  /**\n   * Sets the current playback speed of the audio/video.\n   * @param {Number} playbackRate - The playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set playbackRate(playbackRate: number): void {\n    this._el.playbackRate = playbackRate;\n  }\n\n  /**\n   * Gets the current playback speed of the audio/video.\n   * @returns {Number} - The current playback speed value.\n   * @public\n   */\n  get playbackRate(): number {\n    return this._el.playbackRate;\n  }\n\n  /**\n   * Sets the default playback speed of the audio/video.\n   * @param {Number} defaultPlaybackRate - The default playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set defaultPlaybackRate(defaultPlaybackRate: number) {\n    this._el.defaultPlaybackRate = defaultPlaybackRate;\n  }\n\n  /**\n   * Gets the default playback speed of the audio/video.\n   * @returns {Number} - The default playback speed value.\n   * @public\n   */\n  get defaultPlaybackRate(): number {\n    return this._el.defaultPlaybackRate;\n  }\n\n  /**\n   * The ended property returns whether the playback of the audio/video has ended.\n   * @returns {boolean} - The ended value.\n   * @public\n   */\n  get ended(): boolean {\n    return this._el.ended;\n  }\n\n  /**\n   * The error property returns a MediaError object.\n   * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n   * @public\n   */\n  get error(): ?MediaError {\n    return this._el.error;\n  }\n\n  /**\n   * @returns {Number} - The current network state (activity) of the audio/video.\n   * @public\n   */\n  get networkState(): number {\n    return this._el.networkState;\n  }\n\n  /**\n   * Indicates if the audio/video is ready to play or not.\n   * @returns {Number} - The current ready state of the audio/video.\n   * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n   * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n   * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n   * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n   * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n   */\n  get readyState(): number {\n    return this._el.readyState;\n  }\n\n  /**\n   * @returns {Number} - The height of the video player, in pixels.\n   * @public\n   */\n  get videoHeight(): number {\n    return this._el.videoHeight;\n  }\n\n  /**\n   * @returns {Number} - The width of the video player, in pixels.\n   * @public\n   */\n  get videoWidth(): number {\n    return this._el.videoWidth;\n  }\n\n  /**\n   * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (playsinline) {\n      this._el.setAttribute('playsinline', '');\n    } else {\n      this._el.removeAttribute('playsinline');\n    }\n  }\n\n  /**\n   * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n   */\n  get playsinline(): boolean {\n    return this._el.getAttribute('playsinline') === '';\n  }\n\n  /**\n   * Test video element to check if html5 engine is supported.\n   */\n  static TEST_VID: HTMLVideoElement;\n\n  /**\n   * Checks if the html5 engine is supported.\n   * @returns {boolean} - The isSupported result.\n   * @static\n   * @public\n   */\n  static isSupported() {\n    try {\n      Html5.TEST_VID = Dom.createElement('video');\n      Html5.TEST_VID.volume = 0.5;\n    } catch (e) {\n      return false;\n    }\n    return !!Html5.TEST_VID.canPlayType;\n  }\n\n  /**\n   * Initializes the engine.\n   * @param {Source} source - The selected source object.\n   * @param {PlayerConfig} config - The player configuration.\n   * @private\n   * @returns {void}\n   */\n  _init(source: Source, config: PlayerConfig): void {\n    this._config = config;\n    this._canLoadMediaSourceAdapterPromise = (this._mediaSourceAdapter ? this._mediaSourceAdapter.destroy() : Promise.resolve());\n    this._mediaSourceAdapter = null;\n    this._loadMediaSourceAdapter(source);\n    this.attach();\n  }\n\n  /**\n   * Creates a video element dom object.\n   * @private\n   * @returns {void}\n   */\n  _createVideoElement(): void {\n    this._el = Dom.createElement(\"video\");\n    this._el.id = Generator.uniqueId(5);\n    this._el.controls = false;\n  }\n\n  /**\n   * Loads the appropriate media source extension adapter.\n   * @param {Source} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadMediaSourceAdapter(source: Source): void {\n    this._mediaSourceAdapter = MediaSourceProvider.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(textTrack: PKTextTrack): void {\n    let textTrackEl = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      /*\n       There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n       didn't have it's mode set to showing for at least until a single cue has been change.\n       After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n       is set to hidden\n       This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n       track mode is set only to hidden and was never set to showing\n       */\n      if (this._config.playback.useNativeTextTrack) {\n        textTrackEl.mode = \"showing\";\n      } else {\n        textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n        this._showTextTrackFirstTime[textTrack.index] = true;\n        textTrackEl.oncuechange = (e) => this._onCueChange(e);\n      }\n    }\n  }\n\n  /**\n   * Remove cuechange listener to active textTrack\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListener(): void {\n    let textTrackEl: TextTrack = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      textTrackEl.oncuechange = null;\n    }\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let textTrack: TextTrack = e.currentTarget;\n    let activeCues: Array<Cue> = [];\n    textTrack.mode = 'hidden';\n    for (let cue of textTrack.activeCues) {\n      //Normalize cues to be of type of VTT model\n      if (cue instanceof window.VTTCue) {\n        activeCues.push(cue);\n      } else if (cue instanceof window.TextTrackCue) {\n        activeCues.push(new Cue(cue.startTime, cue.endTime, cue.text));\n      }\n    }\n    this.dispatchEvent(new FakeEvent(CustomEvents.TEXT_CUE_CHANGED, {cues: activeCues}));\n  }\n\n  /**\n   * Get currently selected text track\n   * @returns {?TextTrack} - returns the active text track element if available\n   * @private\n   */\n  _getSelectedTextTrackElement(): ?TextTrack {\n    const textTracks = this._el.textTracks;\n    for (let track in textTracks) {\n      if (textTracks.hasOwnProperty(track)) {\n        const textTrack = textTracks[parseInt(track)];\n        if (textTrack && textTrack.mode !== \"disabled\") {\n          return textTrack;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/html5.js","//@flow\nimport EventManager from '../../../../event/event-manager'\nimport {HTML5_EVENTS as Html5Events} from '../../../../event/events'\nimport Track from '../../../../track/track'\nimport VideoTrack from '../../../../track/video-track'\nimport AudioTrack from '../../../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../../../track/text-track'\nimport BaseMediaSourceAdapter from '../base-media-source-adapter'\nimport FairPlay from '../../../../drm/fairplay'\nimport {Env, Dom} from '../../../../utils/index'\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nexport default class NativeAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  static id: string = 'NativeAdapter';\n\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(NativeAdapter.id);\n  /**\n   * static video element for canPlayType testing\n   * @member {} TEST_VIDEO\n   * @type {HTMLVideoElement}\n   * @static\n   */\n  static TEST_VIDEO: HTMLVideoElement = Dom.createElement(\"video\");\n  /**\n   * The DRM protocols implementations for native adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  static _drmProtocols: Array<Function> = [FairPlay];\n  /**\n   * The DRM protocol for the current playback.\n   * @type {?Function}\n   * @private\n   * @static\n   */\n  static _drmProtocol: ?Function = null;\n  /**\n   * The event manager of the class.\n   * @member {EventManager} - _eventManager\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The load promise\n   * @member {Promise<Object>} - _loadPromise\n   * @type {Promise<Object>}\n   * @private\n   */\n  _loadPromise: ?Promise<Object>;\n  /**\n   * The original progressive sources\n   * @member {Array<Object>} - _progressiveSources\n   * @private\n   */\n  _progressiveSources: Array<Source>;\n\n  /**\n   * Checks if NativeAdapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the native adapter can play a specific mime type\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canPlayType = false;\n    if (typeof mimeType === 'string') {\n      canPlayType = !!(NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase()));\n    }\n    NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * Checks if NativeAdapter can play a given drm data.\n   * @function canPlayDrm\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @returns {boolean} - Whether the native adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(drmData: Array<DrmData>): boolean {\n    let canPlayDrm = false;\n    for (let drmProtocol of NativeAdapter._drmProtocols) {\n      if (drmProtocol.canPlayDrm(drmData)) {\n        NativeAdapter._drmProtocol = drmProtocol;\n        canPlayDrm = true;\n        break;\n      }\n    }\n    NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n    return canPlayDrm;\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {Object} source - The source Object.\n   * @param {PlayerConfig} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: Source, config: PlayerConfig): IMediaSourceAdapter {\n    return new this(videoElement, source, config);\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n   * @param {Source} source - The source object\n   * @param {PlayerConfig} config - The player configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: Source, config: PlayerConfig) {\n    NativeAdapter._logger.debug('Creating adapter');\n    super(videoElement, source);\n    this._maybeSetDrmPlayback();\n    this._eventManager = new EventManager();\n    this._progressiveSources = config.sources.progressive;\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n  _maybeSetDrmPlayback(): void {\n    if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n      NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData);\n    }\n  }\n\n  /**\n   * Set the suitable progressive source according the current resolution\n   * @function _setProgressiveSource\n   * @returns {void}\n   * @private\n   */\n  _setProgressiveSource(): void {\n    let suitableTrack = VideoTrack.getSuitableSourceForResolution(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n    if (suitableTrack) {\n      this._sourceObj = suitableTrack;\n    }\n  }\n\n  /**\n   * Checks if the playback source is progressive\n   * @function _isProgressivePlayback\n   * @returns {boolean} - is progressive source\n   * @private\n   */\n  _isProgressivePlayback(): boolean {\n    return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve, reject) => {\n        // We're using 'loadeddata' event for native hls (on 'loadedmetadata' native hls doesn't have tracks yet).\n        this._eventManager.listenOnce(this._videoElement, Html5Events.LOADED_DATA, () => {\n          let data = {tracks: this._getParsedTracks()};\n          NativeAdapter._logger.debug('The source has been loaded successfully');\n          resolve(data);\n        });\n        this._eventManager.listenOnce(this._videoElement, Html5Events.ERROR, (error) => {\n          NativeAdapter._logger.error(error);\n          reject(error);\n        });\n        if (this._isProgressivePlayback()) {\n          this._setProgressiveSource();\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._videoElement.src = this._sourceObj.url;\n          this._trigger(BaseMediaSourceAdapter.CustomEvents.ABR_MODE_CHANGED, {mode: this._isProgressivePlayback() ? 'manual' : 'auto'});\n        }\n        if (startTime) {\n          this._videoElement.currentTime = startTime;\n        }\n        this._videoElement.load();\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Destroys the native adapter.\n   * @function destroy\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    NativeAdapter._logger.debug('destroy');\n    return super.destroy().then(() => {\n      this._eventManager.destroy();\n      this._progressiveSources = [];\n      this._loadPromise = null;\n      if (NativeAdapter._drmProtocol) {\n        NativeAdapter._drmProtocol.destroy();\n        NativeAdapter._drmProtocol = null;\n      }\n    });\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  _getParsedTracks(): Array<Track> {\n    let videoTracks = this._getParsedVideoTracks();\n    let audioTracks = this._getParsedAudioTracks();\n    let textTracks = this._getParsedTextTracks();\n    return videoTracks.concat(audioTracks).concat(textTracks);\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<Track>} - The parsed video tracks\n   * @private\n   */\n  _getParsedVideoTracks(): Array<Track> {\n    if (this._isProgressivePlayback()) {\n      return this._getParsedProgressiveVideoTracks();\n    } else {\n      return this._getParsedAdaptiveVideoTracks();\n    }\n  }\n\n  /**\n   * Get the parsed progressive video tracks\n   * @function _getParsedProgressiveVideoTracks\n   * @returns {Array<Track>} - The parsed progressive video tracks\n   * @private\n   */\n  _getParsedProgressiveVideoTracks(): Array<Track> {\n    let videoTracks = this._progressiveSources;\n    let parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        let settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed adaptive video tracks\n   * @function _getParsedAdaptiveVideoTracks\n   * @returns {Array<Track>} - The parsed adaptive video tracks\n   * @private\n   */\n  _getParsedAdaptiveVideoTracks(): Array<Track> {\n    //TODO check adaptation in safari hls\n    let videoTracks = this._videoElement.videoTracks;\n    let parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        let settings = {\n          //TODO calculate width/height/bandwidth\n          id: videoTracks[i].id,\n          active: videoTracks[i].selected,\n          label: videoTracks[i].label,\n          language: videoTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<Track>} - The parsed audio tracks\n   * @private\n   */\n  _getParsedAudioTracks(): Array<Track> {\n    let audioTracks = this._videoElement.audioTracks;\n    let parsedTracks = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        let settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].enabled,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<Track>} - The parsed text tracks\n   * @private\n   */\n  _getParsedTextTracks(): Array<Track> {\n    let textTracks = this._videoElement.textTracks;\n    let parsedTracks = [];\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        let settings = {\n          kind: textTracks[i].kind,\n          active: textTracks[i].mode === 'showing',\n          label: textTracks[i].label,\n          language: textTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new PKTextTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._isProgressivePlayback()) {\n      this._selectProgressiveVideoTrack(videoTrack);\n    } else {\n      this.selectAdaptiveVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a progressive video track\n   * @function _selectProgressiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  _selectProgressiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._progressiveSources;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      let currentTime = this._videoElement.currentTime;\n      let paused = this._videoElement.paused;\n      this._sourceObj = videoTracks[videoTrack.index];\n      this._eventManager.listenOnce(this._videoElement, Html5Events.LOADED_DATA, () => {\n        if (Env.browser.name === 'Android Browser') {\n          // In android browser we have to seek only after some playback.\n          this._eventManager.listenOnce(this._videoElement, Html5Events.DURATION_CHANGE, () => {\n            this._videoElement.currentTime = currentTime;\n          });\n          this._eventManager.listenOnce(this._videoElement, Html5Events.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n            if (paused) {\n              this._videoElement.pause();\n            }\n          });\n          this._videoElement.play();\n        } else {\n          this._eventManager.listenOnce(this._videoElement, Html5Events.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n          });\n          this._videoElement.currentTime = currentTime;\n          if (!paused) {\n            this._videoElement.play();\n          }\n        }\n      });\n      this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n    }\n  }\n\n  /**\n   * Select a native video track\n   * @function selectAdaptiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectAdaptiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      this._disableVideoTracks();\n      videoTracks[videoTrack.index].selected = true;\n      this._onTrackChanged(videoTrack);\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the  audio track to select\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if ((audioTrack instanceof AudioTrack) && audioTracks && audioTracks[audioTrack.index]) {\n      this._disableAudioTracks();\n      audioTracks[audioTrack.index].enabled = true;\n      this._onTrackChanged(audioTrack);\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {PKTextTrack} textTrack - The playkit text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    let textTracks = this._videoElement.textTracks;\n    if ((textTrack instanceof PKTextTrack) && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions') && textTracks && textTracks[textTrack.index]) {\n      this._disableTextTracks();\n      textTracks[textTrack.index].mode = 'hidden';\n      NativeAdapter._logger.debug('Text track changed', textTrack);\n      this._onTrackChanged(textTrack);\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this._disableTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * For progressive playback will always returns false.\n   * For adaptive playback will always returns true.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return !this._isProgressivePlayback();\n  }\n\n  /**\n   * Disables all the existing video tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableVideoTracks(): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        videoTracks[i].selected = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing audio tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableAudioTracks(): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        audioTracks[i].enabled = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing text tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableTextTracks(): void {\n    let textTracks = this._videoElement.textTracks;\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        textTracks[i].mode = 'disabled';\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    if (this._videoElement.seekable.length) {\n      return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n    } else if (this._videoElement.buffered.length) {\n      return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch\n      (e) {\n      return;\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._videoElement.duration === Infinity;\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    return this._videoElement.src;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    if (this.isLive()) {\n      return this._getLiveEdge();\n    } else {\n      return super.duration;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/adapters/native-adapter.js","// @flow\nimport MultiMap from '../utils/multi-map'\nimport BaseMiddleware from './base-middleware'\nimport {LoggerFactory} from '../utils/index'\n\n/**\n * Generic middleware implementation.\n */\nexport default class Middleware {\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n  _middlewares: MultiMap<Function>;\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  _actions: { [action: string]: string };\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n  _logger: any;\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n  constructor(actions: { [action: string]: string }) {\n    this._actions = actions;\n    this._middlewares = new MultiMap();\n    this._logger = LoggerFactory.getLogger(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    for (let action in this._actions) {\n      let apiAction = this._actions[action];\n      // $FlowFixMe\n      if (typeof middlewareInstance[apiAction] === 'function') {\n        this._logger.debug(`Register <${middlewareInstance.id}> for action ${apiAction}`);\n        // $FlowFixMe\n        this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n      }\n    }\n  }\n\n  /**\n   * Runs a middleware chain for a specific action.\n   * @param {string} action - The action to run.\n   * @param {Function} callback - The callback function.\n   * @public\n   * @returns {void}\n   */\n  run(action: string, callback: Function): void {\n    this._logger.debug(\"Start middleware chain for action \" + action);\n    let middlewares = this._middlewares.get(action);\n    this._executeMiddleware(middlewares, () => {\n      this._logger.debug(\"Finish middleware chain for action \" + action);\n      callback();\n    });\n  }\n\n  /**\n   * Executes all the middlewares one by one.\n   * @param {Array<Function>} middlewares - The middlewares for a specific action.\n   * @param {Function} callback - The callback function.\n   * @private\n   * @returns {void}\n   */\n  _executeMiddleware(middlewares: Array<Function>, callback: Function): void {\n    // eslint-disable-next-line no-unused-vars\n    const composition = middlewares.reduceRight((next, fn) => v => {\n      fn(next);\n    }, callback);\n    composition();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/middleware.js","// @flow\nimport Middleware from './middleware'\nimport BaseMiddleware from './base-middleware'\n\n/**\n * The playback middleware.\n */\nexport default class PlaybackMiddleware {\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n  static Actions: { [action: string]: string } = {\n    PLAY: 'play',\n    PAUSE: 'pause'\n  };\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  _middleware: Middleware;\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._middleware = new Middleware(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    this._middleware.use(middlewareInstance);\n  }\n\n  /**\n   * Runs a play chain.\n   * @param {Function} callback - The last play handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  play(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n  }\n\n  /**\n   * Runs a pause chain.\n   * @param {Function} callback - The last pause handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  pause(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/playback-middleware.js","//@flow\nimport Player from './player'\nimport BaseMediaSourceAdapter from './engines/html5/media-source/base-media-source-adapter'\nimport {registerMediaSourceAdapter} from './engines/html5/media-source/media-source-provider'\nimport {registerPlugin} from './plugin/plugin-manager'\nimport BaseDrmProtocol from './drm/base-drm-protocol'\nimport BaseMiddleware from './middleware/base-middleware'\nimport BasePlugin from './plugin/base-plugin'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport * as Utils from './utils/index'\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\ndeclare var __PACKAGE_URL__: string;\n\nUtils.LoggerFactory.getLogger().log(`%c ${__NAME__} ${__VERSION__}`, \"color: #98ff98;  font-size: large\");\nUtils.LoggerFactory.getLogger().log(`%c For more details see ${__PACKAGE_URL__}`, \"color: #98ff98;\");\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nexport function loadPlayer(config: ?Object) {\n  return new Player(config || {});\n}\n\n// Export the media source adapters necessary utils\nexport {registerMediaSourceAdapter, BaseMediaSourceAdapter};\n\n// Export the plugin framework\nexport {registerPlugin, BasePlugin, BaseMiddleware};\n\n// Export the tracks classes\nexport {Track, VideoTrack, AudioTrack, TextTrack, TextStyle};\n\n// Export utils library\nexport {Utils};\n\n// Export version\nexport {__VERSION__ as VERSION};\n\n// Export player name\nexport {__NAME__ as PLAYER_NAME};\n\n// Export base DRM protocol\nexport {BaseDrmProtocol};\n\nexport default loadPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./playkit.js","//@flow\nimport Player from '../player'\nimport EventManager from '../event/event-manager'\nimport State from './state'\nimport PlayerStates from './state-types'\nimport {HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from '../event/events'\nimport FakeEvent from '../event/fake-event'\nimport {LoggerFactory} from '../utils/index'\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nexport default class StateManager {\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  _logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n  _curState: State;\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {MaybeState}\n   * @private\n   */\n  _prevState: MaybeState;\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n  _history: Array<State>;\n  /**\n   * The possible transitions from one state to another.\n   * @type {Transition}\n   * @private\n   */\n  _transitions: Transition = {\n    [PlayerStates.IDLE]: {\n      [Html5Events.LOAD_START]: () => {\n        this._updateState(PlayerStates.LOADING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PLAY]: () => {\n        this._updateState(PlayerStates.BUFFERING);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.LOADING]: {\n      [Html5Events.LOADED_METADATA]: () => {\n        if (this._player.config.playback.autoplay) {\n          this._updateState(PlayerStates.PLAYING);\n        } else {\n          this._updateState(PlayerStates.PAUSED);\n        }\n        this._dispatchEvent();\n      },\n      [Html5Events.ERROR]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.PAUSED]: {\n      [Html5Events.PLAY]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PLAYING]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.ENDED]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.PLAYING]: {\n      [Html5Events.PAUSE]: () => {\n        this._updateState(PlayerStates.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5Events.WAITING]: () => {\n        this._updateState(PlayerStates.BUFFERING);\n        this._dispatchEvent();\n      },\n      [Html5Events.ENDED]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      },\n      [Html5Events.ERROR]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.BUFFERING]: {\n      [Html5Events.PLAYING]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PAUSE]: () => {\n        this._updateState(PlayerStates.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5Events.SEEKED]: () => {\n        if (this._prevState && this._prevState.type === PlayerStates.PLAYING) {\n          this._updateState(PlayerStates.PLAYING);\n          this._dispatchEvent();\n        }\n      }\n    }\n  };\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n  constructor(player: Player) {\n    this._player = player;\n    this._logger = LoggerFactory.getLogger(\"StateManager\");\n    this._eventManager = new EventManager();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new State(PlayerStates.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n  _attachListeners(): void {\n    this._eventManager.listen(this._player, Html5Events.ERROR, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.ENDED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PLAY, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.LOAD_START, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PLAYING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.LOADED_METADATA, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PAUSE, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.WAITING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.SEEKED, this._doTransition.bind(this));\n  }\n\n  /**\n   * Performs a state transition depends on the event which occurs in the player system.\n   * @param {FakeEvent} event - The event occurs in the player system.\n   * @private\n   * @returns {void}\n   */\n  _doTransition(event: FakeEvent): void {\n    this._logger.debug('Do transition request', event.type);\n    let transition = this._transitions[this._curState.type];\n    if (typeof transition[event.type] === 'function') {\n      transition[event.type]();\n    }\n  }\n\n  /**\n   * Updates the player's state.\n   * @param {string} type - The type of the new state.\n   * @private\n   * @returns {void}\n   */\n  _updateState(type: string): void {\n    if (this._curState.type !== type) {\n      this._curState.duration = Date.now() / 1000;\n      this._history.push(this._curState);\n      this._prevState = this._curState;\n      this._curState = new State(type);\n      this._logger.debug(`Switch player state: from ${this._prevState.type} to ${this._curState.type}`)\n    }\n  }\n\n  /**\n   * Fires the playerStateChanged event after state has been changed.\n   * @private\n   * @returns {void}\n   */\n  _dispatchEvent(): void {\n    let event = new FakeEvent(CustomEvents.PLAYER_STATE_CHANGED, ({\n      'oldState': this._prevState,\n      'newState': this._curState\n    }: StateChanged));\n    this._player.dispatchEvent(event);\n  }\n\n  /**\n   * Destroys the state manager.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._history = [];\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Resets the state manager.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._history = [];\n  }\n\n  /**\n   * Getter to the current state of the player.\n   * @public\n   * @returns {State} - The current state object\n   */\n  get currentState(): State {\n    return this._curState;\n  }\n\n  /**\n   * Getter to the previous state of the player.\n   * @public\n   * @returns {MaybeState} - The previous state object, or null if such doesn't exists\n   */\n  get previousState(): MaybeState {\n    return this._prevState;\n  }\n\n  /**\n   * Getter to the state history of the player.\n   * @public\n   * @returns {Array.<State>} - The full states history objects\n   */\n  get history(): Array<State> {\n    return this._history;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-manager.js","//@flow\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nexport default class State {\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n  type: string;\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _duration: number;\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _timestamp: number;\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n  constructor(type: string) {\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n  get duration(): number {\n    return this._duration;\n  }\n\n  /**\n   * Setter for the duration of the state.\n   * @param {number} endTime - The timestamp of the next state.\n   */\n  set duration(endTime: number): void {\n    this._duration = endTime - this._timestamp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state.js","//@flow\nconst TRACK_TYPES: { [track: string]: string } = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\n\nexport default TRACK_TYPES;\n\n\n\n// WEBPACK FOOTER //\n// ./track/track-types.js","// @flow\nexport default class Dom {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  static addClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  }\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  static removeClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  }\n\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  static hasClassName(element: HTMLElement, className: string) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  }\n\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  static setAttribute(element: HTMLElement, name: string, value: string): void {\n    element.setAttribute(name, value);\n  }\n\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  static removeAttribute(element: HTMLElement, name: string): void {\n    element.removeAttribute(name);\n  }\n\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  static setStyle(element: HTMLElement, name: string, value: string): void {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  }\n\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  static appendChild(parent: ?Element, child: ?Element): void {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  }\n\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  static removeChild(parent: ?Node, child: ?Element): void {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  }\n\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  static prependTo(child: HTMLElement, parent: HTMLElement): void {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  }\n\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  static getElementById(id: string): any {\n    return document.getElementById(id);\n  }\n\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  static createElement(tagName: string): any {\n    return document.createElement(tagName);\n  }\n\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  static loadScriptAsync(url: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      let r = false,\n        t = document.getElementsByTagName(\"script\")[0],\n        s = this.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/dom.js","// @flow\nimport UAParser from 'ua-parser-js'\nconst Env = new UAParser().getResult();\nexport default Env;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/env.js","// @flow\nexport default class Generator {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  static uniqueId(length: ?number): string {\n    let from = 2;\n    let to = from + ((!length || length < 0) ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  }\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  static guid(): string {\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/generator.js","//@flow\n/**\n * Locale class\n * @class\n */\nexport default class Locale {\n  /**\n   * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n   * @returns {string} - the IOS-693-1 language string\n   * @static\n   */\n  static get language(): string {\n    let lang: string;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0]\n    } else if (navigator.userLanguage) {\n      // IE only\n      //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n      lang = (navigator.userLanguage: string);\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language\n    }\n\n    if (lang && lang.match(\"-\")) {\n      lang = lang.split(\"-\")[0];\n    }\n\n    return lang\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/locale.js","//@flow\nimport * as JsLogger from 'js-logger';\n\nconst LOG_LEVEL: { [level: string]: Object } = {\n  \"DEBUG\": JsLogger.DEBUG,\n  \"INFO\": JsLogger.INFO,\n  \"TIME\": JsLogger.TIME,\n  \"WARN\": JsLogger.WARN,\n  \"ERROR\": JsLogger.ERROR,\n  \"OFF\": JsLogger.OFF\n};\n\nclass LoggerFactory {\n  constructor(options?: Object) {\n    JsLogger.useDefaults(options || {});\n  }\n\n  getLogger(name?: string) {\n    if (!name) {\n      return JsLogger;\n    }\n    return JsLogger.get(name);\n  }\n}\n\nconst lf = new LoggerFactory({defaultLevel: JsLogger.DEBUG});\n\nexport default lf;\nexport {LOG_LEVEL};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/logger.js","// @flow\nexport default class Num {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  static isNumber(n: number): boolean {\n    return window.Number(n) === n;\n  }\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  static isInt(n: number): boolean {\n    return Num.isNumber(n) && n % 1 === 0;\n  }\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  static isFloat(n: number): boolean {\n    return Num.isNumber(n) && n % 1 !== 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/number.js","// @flow\nexport default class Obj {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  static merge(objects: Array<Object>): Object {\n    let target = {};\n    for (let obj of objects) {\n      window.Object.assign(target, obj);\n    }\n    return target;\n  }\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  static isObject(item: any) {\n    return (item && typeof item === 'object' && !Array.isArray(item));\n  }\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  static mergeDeep(target: any, ...sources: any): Object {\n    if (!sources.length) {\n      return target;\n    }\n    const source = sources.shift();\n    if (Obj.isObject(target) && Obj.isObject(source)) {\n      for (const key in source) {\n        if (Obj.isObject(source[key])) {\n          if (!target[key]) window.Object.assign(target, {[key]: {}});\n          Obj.mergeDeep(target[key], source[key]);\n        } else {\n          window.Object.assign(target, {[key]: source[key]});\n        }\n      }\n    }\n    return Obj.mergeDeep(target, ...sources);\n  }\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  static copyDeep(data: any): any {\n    let node;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach((e, i) => {\n        if ((typeof e === \"object\" && e !== {}) ||\n          (Array.isArray(e) && e.length > 0)) {\n          node[i] = Obj.copyDeep(e);\n        }\n      });\n    } else if (typeof data === \"object\") {\n      node = window.Object.assign({}, data);\n      window.Object.keys(node).forEach((key) => {\n        if ((typeof node[key] === \"object\" && node[key] !== {}) ||\n          (Array.isArray(node[key]) && node[key].length > 0)) {\n          node[key] = Obj.copyDeep(node[key]);\n        }\n      });\n    } else {\n      node = data;\n    }\n    return node;\n  }\n\n  /**\n   * Checks if an object is an empty object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  static isEmptyObject(obj: Object): boolean {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key))\n        return false;\n    }\n    return true;\n  }\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  static getPropertyPath(obj: Object, propertyPath: string): any {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return (typeof o === \"undefined\" || o === null) ? o : o[x];\n    }, obj);\n  }\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  static hasPropertyPath(obj: Object, propertyPath: string): boolean {\n    if (!propertyPath) {\n      return false;\n    }\n    let properties = propertyPath.split('.');\n    for (let i = 0; i < properties.length; i++) {\n      let prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  static defer(): DeferredPromise {\n    let res, rej;\n    // $FlowFixMe\n    let promise = new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  }\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind(thisObj: any, fn: Function): Function {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/object.js","//@flow\nexport default class PlayerError {\n  static TYPE: { [name: string]: Object } = {\n    NOT_REGISTERED_PLUGIN: {\n      name: \"PluginNotRegisteredException\",\n      message: function (name) {\n        return `Cannot load ${name} plugin. Name not found in the registry`;\n      }\n    },\n    NOT_VALID_HANDLER: {\n      name: \"PluginHandlerIsNotValidException\",\n      message: function () {\n        return \"To activate plugin you must provide a class derived from BasePlugin\";\n      }\n    },\n    NOT_IMPLEMENTED_METHOD: {\n      name: \"NotImplementedException\",\n      message: function (method) {\n        return `${method} method not implemented`;\n      }\n    }\n  };\n\n  name: string;\n  message: string;\n\n  constructor(error: Object, param?: any) {\n    this.name = error.name;\n    this.message = error.message(param);\n  }\n\n  getError() {\n    return {\n      name: this.name,\n      message: this.message\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/player-error.js","// @flow\nimport {Dom, Generator} from './index'\n\nclass PosterManager {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  _posterUrl: string;\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n\n  constructor() {\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n  setSrc(posterUrl: ?string): void {\n    if (posterUrl) {\n      this._posterUrl = posterUrl;\n      Dom.setStyle(this._el, \"background-image\", `url(\"${this._posterUrl}\")`);\n    }\n  }\n\n  /**\n   * Get the poster source URL\n   * @public\n   * @returns {string} - the poster image URL\n   */\n  get src(): string {\n    return this._posterUrl;\n  }\n\n  /**\n   * Get the poster HTML Div element\n   * @public\n   * @returns {HTMLDivElement} - Poster HTML Dom element\n   */\n  getElement(): HTMLDivElement {\n    return this._el;\n  }\n\n  /**\n   * Create the HTML Div element of the poster\n   * @private\n   * @returns {void}\n   */\n  _createEl(): void {\n    if (!this._el) {\n      const el = this._el = Dom.createElement(\"div\");\n      Dom.setAttribute(el, \"id\", Generator.uniqueId(5));\n      Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n  }\n\n  /**\n   * Removes the poster element from the dom\n   * @private\n   * @returns {void}\n   */\n  _removeEl(): void {\n    if (this._el) {\n      Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  /**\n   * Show the poster image\n   * @public\n   * @private\n   * @returns {void}\n   */\n  show(): void {\n    Dom.setStyle(this._el, \"display\", \"\");\n  }\n\n  /**\n   * Hide the poster image\n   * @public\n   * @returns {void}\n   */\n  hide(): void {\n    Dom.setStyle(this._el, \"display\", \"none\");\n  }\n\n  /**\n   * Resets the poster url and the background image\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._posterUrl = '';\n    Dom.setStyle(this._el, \"background-image\", '');\n  }\n\n  /**\n   * Destroys the poster element\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.reset();\n    this._removeEl();\n  }\n}\n\nexport default PosterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/poster-manager.js","// @flow\nexport default class Str {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  static capitlize(string: string): string {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  static endsWith(string: string, searchString: string): boolean {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) !== -1;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/string.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n.playkit-subtitles > div > div {\\n  -webkit-transition: 0.3s ease-in-out;\\n  -moz-transition: 0.3s ease-in-out;\\n  -o-transition: 0.3s ease-in-out;\\n  transition: 0.3s ease-in-out;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!./assets/style.css\n// module id = 42\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader/lib/css-base.js\n// module id = 43\n// module chunks = 0","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.3.0\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/js-logger/src/logger.js\n// module id = 44\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/style.css\n// module id = 45\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/style-loader/lib/addStyles.js\n// module id = 46\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/style-loader/lib/urls.js\n// module id = 47\n// module chunks = 0","/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/ua-parser-js/src/ua-parser.js\n// module id = 48\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webpack/buildin/amd-options.js\n// module id = 49\n// module chunks = 0","module.exports = {\n\t\"type\": \"\",\n\t\"dvr\": false,\n\t\"sources\": {},\n\t\"plugins\": {},\n\t\"metadata\": {\n\t\t\"poster\": \"\"\n\t},\n\t\"playback\": {\n\t\t\"startTime\": 0,\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"playsinline\": false,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./player-config.json\n// module id = 50\n// module chunks = 0"],"sourceRoot":""}