{"version":3,"sources":["./core/webpack/universalModuleDefinition","./core/webpack/bootstrap","./core/./assets/style.css","./core/../node_modules/css-loader/dist/runtime/api.js","./core/../node_modules/js-logger/src/logger.js","./core/../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","./core/../node_modules/ua-parser-js/src/ua-parser.js","./core/../node_modules/webpack/buildin/amd-options.js","./core/./ads/ad-break-type.js","./core/./ads/ad-error-code.js","./core/./ads/ad-event-type.js","./core/./ads/ad-tag-type.js","webpack://playkit.core/./assets/style.css?703f","./core/./drm/drm-scheme.js","./core/./drm/fairplay.js","./core/./engines/dropped-frames-watcher.js","./core/./engines/engine-decorator-manager.js","./core/./engines/engine-decorator-provider.js","./core/./engines/engine-decorator.js","./core/./engines/engine-provider.js","./core/./engines/engine-type.js","./core/./engines/html5/capabilities/html5-autoplay.js","./core/./engines/html5/cors-types.js","./core/./engines/html5/html5.js","./core/./engines/html5/media-source/adapters/fairplay-drm-handler.js","./core/./engines/html5/media-source/adapters/native-adapter.js","./core/./engines/html5/media-source/base-media-source-adapter.js","./core/./engines/html5/media-source/media-source-provider.js","./core/./engines/stream-type.js","./core/./enums/auto-play-type.js","./core/./enums/media-type.js","./core/./enums/mime-type.js","./core/./enums/request-type.js","./core/./enums/screen-orientation-type.js","./core/./error/category.js","./core/./error/code.js","./core/./error/error.js","./core/./error/severity.js","./core/./event/event-manager.js","./core/./event/event-type.js","./core/./event/fake-event-target.js","./core/./event/fake-event.js","./core/./fullscreen/fullscreen-controller.js","./core/./middleware/base-middleware.js","./core/./middleware/middleware.js","./core/./middleware/playback-middleware.js","./core/./player-config.js","./core/./player.js","./core/./playkit.js","./core/./state/state-manager.js","./core/./state/state-type.js","./core/./state/state.js","./core/./thumbnail/external-thumbnails-handler.js","./core/./thumbnail/thumbnail-info.js","./core/./track/abr-mode-type.js","./core/./track/audio-track.js","./core/./track/external-captions-handler.js","./core/./track/image-track.js","./core/./track/label-options.js","./core/./track/text-style.js","./core/./track/text-track-display.js","./core/./track/text-track.js","./core/./track/timed-metadata.js","./core/./track/track-type.js","./core/./track/track.js","./core/./track/video-track.js","./core/./track/vtt-cue.js","./core/./track/vtt-region.js","./core/./utils/binary-search.js","./core/./utils/env.js","./core/./utils/index.js","./core/./utils/jsonp.js","./core/./utils/locale.js","./core/./utils/logger.js","./core/./utils/multi-map.js","./core/./utils/poster-manager.js","./core/./utils/resize-watcher.js","./core/./utils/resolution.js","./core/./utils/restrictions.js","./core/./utils/util.js"],"names":["AdBreakType","PRE","MID","POST","OVERLAY","AdErrorCode","XML_PARSING_ERROR","VAST_SCHEMA_VALIDATION_ERROR","VAST_RESPONSE_VERSION_NOT_SUPPORTED","TRAFFICKING_ERROR","VAST_UNEXPECTED_LINEARITY","VAST_UNEXPECTED_DURATION_ERROR","VAST_UNEXPECTED_SIZE_ERROR","VAST_WRAPPER_ERROR","VAST_URI_ERROR","VAST_TOO_MANY_REDIRECTS","NO_ADS_VAST_RESPONSE","GENERAL_LINEAR_ERROR","FILE_NOT_FOUND","VAST_MEDIA_LOAD_TIMEOUT","MEDIA_FILE_NOT_FOUND","MEDIA_FILE_DISPLAY_ERROR","MEZZANINE_FILE_NOT_PROVIDED","MEZZANINE_DOWNLOADED_FOR_THE_FIRST_TIME","VAST_RESPONSE_AD_REJECTED","CREATIVE_WAS_NOT_EXECUTED","CODE_REFERENCED_NOT_EXECUTED","GENERAL_NON_LINEAR_AD_ERROR","NON_LINEAR_CREATIVE_DIMENSIONS_NOT_ALIGN_ERROR","NON_LINEAR_FETCH_ERROR","NON_LINEAR_RESOURCE_NOT_FOUND","GENERAL_COMPANION_ADS_ERROR","COMPANION_DIMENSIONS_NOT_FIT","COMPANION_CANNOT_BE_DISPLAY","COMPANION_CANNOT_BE_FETCHED","COMPANION_TYPE_NOT_FOUND","AD_UNDEFINED_ERROR","GENERAL_VPAID_ERROR","AdEventType","AD_CAN_SKIP","AD_MANIFEST_LOADED","AD_LOADED","AD_STARTED","AD_RESUMED","AD_PAUSED","AD_CLICKED","AD_SKIPPED","AD_COMPLETED","AD_ERROR","ADS_COMPLETED","ALL_ADS_COMPLETED","AD_BREAK_START","AD_BREAK_END","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_PROGRESS","AD_BUFFERING","AD_WATERFALLING","AD_WATERFALLING_FAILED","AD_AUTOPLAY_FAILED","AdTagType","VAST","VMAP","DrmScheme","WIDEVINE","PLAYREADY","FAIRPLAY","_logger","getLogger","FairPlay","isConfigured","drmData","drmConfig","keySystem","find","drmEntry","scheme","canPlayDrm","result","some","window","WebKitMediaKeys","debug","toString","setDrmPlayback","config","licenseUrl","certificate","NOT_SUPPORTED","DroppedFramesWatcher","mediaSourceAdapter","videoElement","_eventManager","EventManager","_mediaSourceAdapter","_config","_videoElement","capabilities","fpsControl","listen","CustomEventType","FPS_DROP","event","_triggerFPSDrop","payload","data","_getDroppedAndDecodedFrames","capLevelOnFPSDrop","_init","VIDEO_TRACK_CHANGED","_currentBitrate","selectedVideoTrack","bandwidth","_droppedFramesInterval","setInterval","_checkFPS","fpsDroppedFramesInterval","dispatchEvent","FakeEvent","getVideoPlaybackQuality","videoPlaybackQuality","droppedVideoFrames","totalVideoFrames","webkitDroppedFrameCount","webkitDecodedFrameCount","droppedFrames","decodedFrames","currentTime","performance","now","_lastTime","currentPeriod","currentDropped","_lastDroppedFrames","currentDecoded","_lastDecodedFrames","droppedFPS","fpsDroppedMonitoringThreshold","setMaxBitrate","totalDroppedFrames","error","destroy","clearInterval","FakeEventTarget","EngineDecoratorManager","Map","register","engineDecoratorProvider","_decoratorProviders","has","getName","set","warn","createDecorators","engine","Array","from","keys","values","getEngineDecorator","clear","EngineDecoratorProvider","plugin","_name","_getEngineDecorator","bind","dispatchEventHandler","EngineDecorator","decoratorManager","_pluginDecorators","events","Object","EventType","forEach","e","Proxy","get","obj","prop","_destroy","activeDecorator","decorator","active","target","value","EngineProvider","id","_engineProviders","unRegister","getEngines","map","key","Html5","isSupported","registerEngine","unRegisterEngine","EngineType","HTML5","FLASH","SILVERLIGHT","CAST","WAIT_TIME","Html5AutoPlayCapability","runCapability","_capabilities","autoplay","mutedAutoPlay","_playPromiseResult","Promise","resolve","_vid","Utils","createElement","src","EncodingSources","setAttribute","_setMuted","_getPlayPromise","then","catch","getCapability","playCapability","fallbackPlayCapabilityTest","fallbackPlayCapability","mergeDeep","setCapabilities","play","_forcePromiseReturnValue","muted","removeAttribute","reject","addEventListener","Html5EventType","ERROR","supported","setTimeout","paused","clearTimeout","CorsType","ANONYMOUS","USE_CREDENTIALS","SHORT_BUFFERING_TIMEOUT","el","volume","canPlayType","createEngine","source","playerId","canPlaySource","preferNative","MediaSourceProvider","runCapabilities","capability","getCapabilities","promises","push","all","arrayOfResults","mergedResults","res","assign","prepareVideoElement","videoElementStore","load","_canLoadMediaSourceAdapterPromise","_createVideoElement","restore","reset","_reset","removeAll","_droppedFramesWatcher","mediaSourceAdapterDestroyed","_el","detach","pause","removeChild","parentNode","attachMediaSource","detachMediaSource","attach","html5Event","WAITING","includes","_handleVideoError","_handleWaiting","_handleMetadataTrackEvents","textTracks","PKTextTrack","isNativeTextTrack","track","TEXT_TRACK_ADDED","AUDIO_TRACK_CHANGED","TEXT_TRACK_CHANGED","IMAGE_TRACK_CHANGED","ABR_MODE_CHANGED","TEXT_CUE_CHANGED","TRACKS_CHANGED","FRAG_LOADED","DRM_LICENSE_LOADED","MANIFEST_LOADED","TIME_UPDATE","PLAYING","MEDIA_RECOVERED","TIMED_METADATA_ADDED","unlisten","getVideoElement","selectVideoTrack","videoTrack","selectAudioTrack","audioTrack","selectTextTrack","textTrack","_removeCueChangeListeners","resetAllCues","_addCueChangeListener","selectImageTrack","imageTrack","hideTextTrack","enableAdaptiveBitrate","isAdaptiveBitrateEnabled","applyABRRestriction","restriction","seekToLiveEdge","isOnLiveEdge","getStartTimeOfDvrWindow","isLive","playPromise","err","PLAY_FAILED","startTime","enterPictureInPicture","document","pictureInPictureEnabled","requestPictureInPicture","Error","Severity","RECOVERABLE","Category","PLAYER","Code","ENTER_PICTURE_IN_PICTURE_FAILED","webkitSetPresentationMode","ENTER_PICTURE_IN_PICTURE","exitPictureInPicture","pictureInPictureElement","EXIT_PICTURE_IN_PICTURE_FAILED","isPictureInPictureSupported","webkitSupportsPresentationMode","getThumbnail","time","_loadMediaSourceAdapter","uniqueId","controls","getMediaSourceAdapter","abr","textTrackEl","mode","MODE","DISABLED","_onCueChange","filter","isMetaDataTrack","activeCues","currentTarget","normalizedActiveCues","getActiveCues","cues","activeTextTrack","i","length","hasBeenReset","code","MediaError","MEDIA_ERR_ABORTED","extended","_getMsExtendedError","message","handleMediaError","CRITICAL","MEDIA","VIDEO_ERROR","playing","listenOnce","msExtendedCode","Math","pow","listenToCueChange","metadataTrack","HIDDEN","concat","sort","a","b","TIMED_METADATA","TIMED_METADATA_CHANGE","cue","createTimedMetadata","addTextTrack","kind","label","language","getNativeTextTracks","getDrmInfo","to","duration","liveDuration","vol","seeking","seekable","played","buffered","mute","defaultMuted","poster","preload","loop","playbackRate","defaultPlaybackRate","ended","networkState","readyState","videoHeight","videoWidth","playsinline","getAttribute","crossOrigin","PLAYBACK_RATES","webkitPresentationMode","targetBuffer","NaN","retVal","start","end","KeySystem","WebkitEvents","NEED_KEY","KEY_MESSAGE","KEY_ADDED","KEY_ERROR","FairPlayDrmHandler","errorCallback","drmResponseCallback","network","responseFilter","type","response","responseObj","dataView","DataView","decoder","TextDecoder","keyText","decode","trim","JSON","parse","_onError","BAD_FAIRPLAY_RESPONSE","responseText","isValidResponse","_validateResponse","valid","_base64DecodeUint8Array","ckc","_defaultConfig","_errorCallback","_drmResponseCallback","_onWebkitNeedKeyHandler","_onWebkitNeedKey","initData","contentId","_extractContentId","fpsCertificate","_concatInitDataIdAndCertificate","webkitKeys","_selectKeySystem","webkitSetMediaKeys","COULD_NOT_CREATE_MEDIA_KEYS","_keySession","createSession","COULD_NOT_CREATE_KEY_SESSION","_onWebkitKeyMessage","_onWebkitKeyAdded","_onWebkitKeyError","close","request","XMLHttpRequest","responseType","_licenseRequestLoaded","pkRequest","url","body","_base64EncodeUint8Array","headers","requestFilterPromise","requestFilter","RequestType","LICENSE","updatedRequest","open","setContentType","entries","header","setRequestHeader","toLowerCase","withCredentials","onerror","LICENSE_REQUEST_FAILED","status","_licenseRequestTime","Date","send","NETWORK","REQUEST_FILTER_ERROR","_retryLicenseRequest","licenseTime","responseURL","originalUrl","convertHeadersToDictionary","getAllResponseHeaders","pkResponse","responseFilterPromise","updatedResponse","update","RESPONSE_FILTER_ERROR","DRM","indexOf","reference","status_code","details","isTypeSupported","link","href","_arrayToString","hostname","array","String","fromCharCode","apply","Uint16Array","buffer","input","raw","atob","rawLength","Uint8Array","ArrayBuffer","charCodeAt","cert","_stringToArray","offset","byteLength","initDataArray","setUint32","idArray","certArray","string","strLen","keyStr","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","Number","isNaN","charAt","BACK_TO_FOCUS_TIMEOUT","MAX_MEDIA_RECOVERY_ATTEMPTS","NUDGE_SEEK_AFTER_FOCUS","SAFARI_BUFFERED_SEGMENTS_COUNT","LIVE_DURATION_INTERVAL_MS","NativeAdapter","mimeType","TEST_VIDEO","_drmProtocol","_drmProtocols","drmProtocol","createAdapter","adapterConfig","displayTextTrack","progressiveSources","hasPropertyPath","getPropertyPath","enableCEA708Captions","text","captionsTextTrack1Label","captionsTextTrack1LanguageCode","captionsTextTrack2Label","captionsTextTrack2LanguageCode","playback","options","html5","native","restrictions","createPropertyPath","defaultConfig","_progressiveSources","_liveEdge","_dispatchErrorCallback","_trigger","_dispatchDRMLicenseLoaded","_maybeSetDrmPlayback","_sourceObj","_drmHandler","_setProgressiveSource","suitableTrack","getSuitableSourceForResolution","offsetWidth","offsetHeight","_isProgressivePlayback","_progressiveMimeTypes","mimetype","_wasCurrentTimeSetSuccessfully","_loadPromise","_lastTimeUpdate","playbackStartTime","_startTimeAttach","_loadPromiseReject","LOADED_DATA","_onLoadedData","_onPlaying","_onTimeUpdate","PLAY","_resetHeartbeatTimeout","PAUSE","_clearHeartbeatTimeout","ENDED","ABORT","SEEKED","_syncCurrentTime","_waitingEventTriggered","Env","isIOS","_setSrc","_handleDecodeError","prevCurrTime","prevActiveAudioTrack","_getActivePKAudioTrack","prevActiveTextTrack","_getActivePKTextTrack","_mediaErrorRecoveryAttempts","CAN_PLAY","disableNativeTextTracks","NATIVE_ADAPTER_LOAD_FAILED","MEDIA_ERR_DECODE","_lastTimeDetach","MANIFEST","_setStartTime","parseTracksAndResolve","_playerTracks","_getParsedTracks","_addNativeAudioTrackChangeListener","_addNativeTextTrackChangeListener","_addNativeTextTrackAddedListener","tracks","_handleLiveDurationChange","_handleVideoTracksChange","onTimeout","TIMEOUT","heartbeatTimeout","_heartbeatTimeoutId","videoTracks","_videoDimensions","setting","height","width","index","findIndex","selected","_onTrackChanged","VideoTrack","_nativeTextTracksMap","_liveDurationChangeInterval","_getParsedVideoTracks","audioTracks","_getParsedAudioTracks","_getParsedTextTracks","_getParsedProgressiveVideoTracks","_getParsedAdaptiveVideoTracks","parsedTracks","settings","enabled","AudioTrack","captionsTextTrackLabels","captionsTextTrackLanguageCodes","isExternalTrack","SHOWING","available","KIND","SUBTITLES","newTrack","CAPTIONS","shift","_captionsHidden","_maybeShow708Captions","captions","activeCaption","_getPKTextTracks","_selectProgressiveVideoTrack","selectAdaptiveVideoTrack","browser","name","DURATION_CHANGE","_disableVideoTracks","_removeNativeAudioTrackChangeListener","_disableAudioTracks","_onNativeAudioTrackChange","_getPKAudioTracks","pkAudioTracks","getActiveVidAudioTrackIndex","vidIndex","activeAudioTrack","pkIndex","pkAudioTrack","_removeNativeTextTrackChangeListener","selectedTrack","_getDisplayTextTrackModeString","_onNativeTextTrackChange","pkTextTracks","pkOffTrack","getActiveVidTextTrackIndex","textTrackId","activePKtextTrack","pkTextTrack","_onNativeTextTrackAdded","_maybeApplyAbrRestrictions","availableTracks","filterTracksByRestriction","activeTrackInRange","_getLiveEdge","getSegmentDuration","_segmentDuration","Infinity","_calculateSegmentDuration","liveEdge","Event","BaseMediaSourceAdapter","CURRENT_OR_NEXT_SEGMENT_COUNT","isMSESupported","mediaSource","MediaSource","WebKitMediaSource","_onDurationChanged","_handleLiveTimeUpdate","removeEventListener","selectedAudioTrack","TextTrack","selectedTextTrack","ImageTrack","selectedImageTrack","_throwNotImplementedError","bitrate","RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED","_mediaSourceAdapters","splice","_orderMediaSourceAdapters","mediaSourceAdapters","_selectedAdapter","mse","unshift","drm","registerMediaSourceAdapter","StreamType","DASH","HLS","PROGRESSIVE","AutoPlayType","TRUE","FALSE","IN_VIEW","MediaType","VOD","LIVE","AUDIO","UNKNOWN","MimeType","SMOOTH_STREAMING","SEGMENT","ScreenOrientationType","NONE","ANY","NATURAL","LANDSCAPE","PORTRAIT","PORTRAIT_PRIMARY","PORTRAIT_SECONDARY","LANDSCAPE_PRIMARY","LANDSCAPE_SECONDARY","TEXT","STREAMING","ADS","STORAGE","VR","UNSUPPORTED_SCHEME","BAD_HTTP_STATUS","HTTP_ERROR","MALFORMED_DATA_URI","UNKNOWN_DATA_URI_ENCODING","LIVE_MANIFEST_REFRESH_ERROR","INVALID_TEXT_HEADER","INVALID_TEXT_CUE","UNABLE_TO_DETECT_ENCODING","BAD_ENCODING","INVALID_XML","INVALID_MP4_TTML","INVALID_MP4_VTT","UNABLE_TO_CREATE_TEXT_CUE","DASH_ADAPTER_ERROR_PARSE_ISSUE","UNKNOWN_FILE_TYPE","UNKNOWN_LANGUAGE","INVALID_VTT_THUMBNAILS_FILE","BUFFER_READ_OUT_OF_BOUNDS","JS_INTEGER_OVERFLOW","EBML_OVERFLOW","EBML_BAD_FLOATING_POINT_SIZE","MP4_SIDX_WRONG_BOX_TYPE","MP4_SIDX_INVALID_TIMESCALE","MP4_SIDX_TYPE_NOT_SUPPORTED","WEBM_CUES_ELEMENT_MISSING","WEBM_EBML_HEADER_ELEMENT_MISSING","WEBM_SEGMENT_ELEMENT_MISSING","WEBM_INFO_ELEMENT_MISSING","WEBM_DURATION_ELEMENT_MISSING","WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING","WEBM_CUE_TIME_ELEMENT_MISSING","MEDIA_SOURCE_OPERATION_FAILED","MEDIA_SOURCE_OPERATION_THREW","QUOTA_EXCEEDED_ERROR","HLS_FATAL_MEDIA_ERROR","HLS_FRAG_PARSING_ERROR","HLS_BUFFER_APPEND_ISSUE","HLS_BUFFER_APPENDING_ISSUE","HLS_BUFFER_STALLED_ERROR","UNABLE_TO_GUESS_MANIFEST_TYPE","DASH_INVALID_XML","DASH_NO_SEGMENT_INFO","DASH_EMPTY_ADAPTATION_SET","DASH_EMPTY_PERIOD","DASH_WEBM_MISSING_INIT","DASH_UNSUPPORTED_CONTAINER","DASH_PSSH_BAD_ENCODING","DASH_NO_COMMON_KEY_SYSTEM","DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED","DASH_CONFLICTING_KEY_IDS","UNPLAYABLE_PERIOD","RESTRICTIONS_CANNOT_BE_MET","NO_PERIODS","HLS_PLAYLIST_HEADER_MISSING","INVALID_HLS_TAG","HLS_INVALID_PLAYLIST_HIERARCHY","DASH_DUPLICATE_REPRESENTATION_ID","HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND","HLS_COULD_NOT_GUESS_MIME_TYPE","HLS_MASTER_PLAYLIST_NOT_PROVIDED","HLS_REQUIRED_ATTRIBUTE_MISSING","HLS_REQUIRED_TAG_MISSING","HLS_COULD_NOT_GUESS_CODECS","HLS_KEYFORMATS_NOT_SUPPORTED","DASH_UNSUPPORTED_XLINK_ACTUATE","DASH_XLINK_DEPTH_LIMIT","HLS_LIVE_CONTENT_NOT_SUPPORTED","HLSJS_CANNOT_PARSE","INVALID_STREAMS_CHOSEN","NO_RECOGNIZED_KEY_SYSTEMS","REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE","FAILED_TO_CREATE_CDM","FAILED_TO_ATTACH_TO_VIDEO","INVALID_SERVER_CERTIFICATE","FAILED_TO_CREATE_SESSION","FAILED_TO_GENERATE_LICENSE_REQUEST","LICENSE_RESPONSE_REJECTED","ENCRYPTED_CONTENT_WITHOUT_DRM_INFO","NO_LICENSE_SERVER_GIVEN","OFFLINE_SESSION_REMOVED","EXPIRED","LOAD_INTERRUPTED","BITRATE_SWITCH_ISSUE","LOAD_FAILED","RUNTIME_ERROR_NOT_REGISTERED_PLUGIN","RUNTIME_ERROR_NOT_VALID_HANDLER","NO_SOURCE_PROVIDED","NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE","PLUGIN_LOAD_FAILED","CAST_API_UNAVAILABLE","NO_CAST_RECEIVERS","ALREADY_CASTING","UNEXPECTED_CAST_ERROR","CAST_CANCELED_BY_USER","CAST_CONNECTION_TIMED_OUT","CAST_RECEIVER_APP_UNAVAILABLE","STORAGE_NOT_SUPPORTED","INDEXED_DB_ERROR","OPERATION_ABORTED","REQUESTED_ITEM_NOT_FOUND","MALFORMED_OFFLINE_URI","CANNOT_STORE_LIVE_OFFLINE","STORE_ALREADY_IN_PROGRESS","NO_INIT_DATA_FOR_OFFLINE","LOCAL_PLAYER_INSTANCE_REQUIRED","CONTENT_UNSUPPORTED_BY_BROWSER","CANNOT_ADD_ITEM","DOWNLOAD_FAILED","COULD_NOT_GET_INFO_FROM_MEDIA_PROVIDER","ENTRY_DOES_NOT_EXIST","PAUSE_FAILED","RESUME_FAILED","RENEW_LICENSE_FAILED","ENTRY_ALREADY_EXISTS","REMOVE_FAILED","CAST_LOAD_MEDIA_FAILED","CAST_CUSTOM_MESSAGE_PARSING_ERROR","CAST_EDIT_TRACKS_INFO_ERROR","VR_NOT_SUPPORTED","CLASS_NAME","severity","category","getLogLevel","LogLevel","OFF","_bindingMap","MultiMap","listener","oneListener","call","binding","Binding_","list","remove","listeners","getAll","CAN_PLAY_THROUGH","EMPTIED","LOADED_METADATA","LOAD_START","PROGRESS","RATE_CHANGE","SEEKING","STALLED","SUSPEND","VOLUME_CHANGE","LEAVE_PICTURE_IN_PICTURE","PRESENTATION_MODE_CHANGED","MEDIA_LOADED","PLAYER_RESET","PLAYER_DESTROY","ENTER_FULLSCREEN","EXIT_FULLSCREEN","AUTOPLAY_FAILED","FALLBACK_TO_MUTED_AUTOPLAY","CHANGE_SOURCE_STARTED","CHANGE_SOURCE_ENDED","MUTE_CHANGE","PLAYER_STATE_CHANGED","PLAYBACK_START","FIRST_PLAY","FIRST_PLAYING","PLAYBACK_ENDED","SOURCE_SELECTED","TEXT_STYLE_CHANGED","VR_STEREO_MODE_CHANGED","BOOKMARK_ERROR","CONCURRENCY_LIMIT","RESIZE","USER_GESTURE","SOURCE_URL_SWITCHED","merge","_listeners","dispatchTarget","__logger","handleEvent","exception","stopped","defaultPrevented","bubbles","cancelable","timeStamp","isTrusted","preventDefault","stopImmediatePropagation","stopPropagation","IN_BROWSER_FULLSCREEN","EXIT_PIP_TIMEOUT","FullscreenController","player","screen","orientation","unlock","lock","_player","_isInBrowserFullscreen","_isNativeDocumentFullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","_isIOSFullscreen","env","os","webkitDisplayingFullscreen","isFullscreen","_isElementInFullscreen","enterFullscreen","elementId","registerFullScreenEvents","fullScreenElement","getElementById","playbackConfig","getView","inBrowserFullscreen","_enterInBrowserFullscreen","webkitEnterFullScreen","isInPictureInPicture","_requestFullscreen","exitFullscreen","_exitInBrowserFullscreen","webkitExitFullscreen","_requestExitFullscreen","_nativeEnterFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","screenLockOrientionMode","validOrientation","_isScreenOrientationSupport","_isScreenLocked","_nativeExitFullScreen","mozCancelFullScreen","msExitFullscreen","addClassName","_fullscreenEnterHandler","getElementBySelector","removeClassName","_fullscreenExitHandler","_handleIosFullscreen","_fullscreenChangeHandler","attachIosFullscreenListeners","vidEl","_isFullscreenEventDispatched","BaseMiddleware","callNext","next","Middleware","actions","_actions","_middlewares","use","middlewareInstance","action","apiAction","run","callback","middlewares","params","_executeMiddleware","origParams","applyFunc","fn","prevParams","composition","reduceRight","PlaybackMiddleware","_middleware","Actions","LOAD","setCurrentTime","SET_CURRENT_TIME","DefaultConfig","log","level","useNativeTextTrack","forceCenter","audioLanguage","textLanguage","autopause","allowMutedAutoPlay","pictureInPicture","hls","dash","playAdsWithMSE","streamPriority","format","streaming","forceBreakStall","capLevelToPlayerSize","minHeight","maxHeight","minWidth","maxWidth","minBitrate","maxBitrate","maxStaleLevelReloads","DefaultSources","metadata","BLACK_COVER_CLASS_NAME","CONTAINER_CLASS_NAME","POSTER_CLASS_NAME","ENGINE_CLASS_NAME","SUBTITLES_STYLE_CLASS_NAME","SUBTITLES_CLASS_NAME","AUTO","DURATION_OFFSET","LIVE_EDGE_THRESHOLD","Player","Engine","engineType","playerCapabilities","selectedEngine","undefined","rate","_setConfigLogLevel","_playerId","_prepareVideoElement","_env","_tracks","_firstPlay","_loadingMedia","_loading","_playbackStart","_firstPlaying","_destroyed","_fallbackToMutedAutoPlay","_sources","copyDeep","_posterManager","PosterManager","_stateManager","StateManager","_resizeWatcher","ResizeWatcher","_playbackMiddleware","_textStyle","TextStyle","_createReadyPromise","_createPlayerContainer","_appendDomElements","_externalCaptionsHandler","ExternalCaptionsHandler","_externalThumbnailsHandler","ExternalThumbnailsHandler","_fullscreenController","configure","_applyTextTrackConfig","_applyABRRestriction","setSourcesMetadata","sourcesMetadata","setSources","sources","_hasSources","init","_selectEngineByPriority","selectedSource","_streamType","_attachMedia","_handlePlaybackOptions","setSrc","_handleDimensions","_handlePreload","_handleAutoPlay","PKError","ready","_readyPromise","loadPlayer","_engine","_load","playOptions","programmatic","_autoPlay","_play","_playAfterAsyncMiddleware","_pause","isChangeMedia","_activeTextCues","_updateTextDisplay","_resetStateFlags","_engineType","_pendingSelectedVideoTrack","showBlackCover","_isOnLiveEdge","_shouldLoadAfterAttach","_textDisplaySettings","_playbackAttributesState","_engineDecoratorManager","hideBlackCover","_blackCoverEl","style","visibility","registerEngineDecoratorProvider","_getTargetElement","targetId","isAudio","isDvr","dvr","getTracks","TrackType","VIDEO","_getVideoTracks","_getAudioTracks","_getTextTracks","IMAGE","_getImageTracks","getActiveTracks","video","audio","selectTrack","currentState","StateType","IDLE","_resetTextDisplay","external","showTextTrack","prevLanguage","prevOrAutoTextLang","_getLanguage","default","_setDefaultTrack","newVideoTracks","currentVideoTracks","tracksHasChanged","every","element","textDisplaySettings","textTrackDisplaySetting","position","align","size","setTextDisplaySettings","textStyle","fromJson","isUsingVttThumbnails","_updateCueDisplaySettings","notifyEnterFullscreen","notifyExitFullscreen","isVr","vr","setLogLevel","handler","setLogHandler","_appendEngineEl","engineEl","className","classNameWithId","prependTo","zIndex","appendChild","getElement","_textDisplayEl","priority","engineId","formatSources","_loadEngine","_createEngine","_removeTextCuePatch","_markActiveTrack","_onTextTrackChanged","_onTracksChanged","_onPlayFailed","_handleRecovered","_onPlay","_onPause","_onEnded","_resetTextCuesAndReposition","rootElement","_hasUserInteracted","capture","filteredActiveTextCues","textCue","cueEndTime","_endTime","cueStartTime","_startTime","currTime","isArray","playbackRates","validPlaybackRates","number","self","_playbackRates","onAutoPlay","onMutedAutoPlay","onFallbackToMutedAutoPlay","onAutoPlayFailed","show","resetFlags","_updateTracks","thumbnails","finally","dimensions","isObject","isEmptyObject","_shouldPlayerSeekToLiveEdge","outOfDvr","_setCurrentTime","isNumber","boundedTo","safeDuration","hide","_calcRatio","targetElement","ratio","_aspectRatio","split","r","ratioWidth","ratioHeight","clientWidth","clientHeight","getExternalTracks","_addTextTrackOffOption","_maybeSetTracksLabels","_setDefaultTracks","_getTracksByType","reduce","arr","prevCue","endTime","processCues","activeTracks","offTextTrack","langComparer","currentOrConfiguredTextLang","localStorage","getItem","currentOrConfiguredAudioLang","_setDefaultVideoTrack","configuredLanguage","defaultTrack","localeTrack","Track","Locale","updateTrack","sameTrack","sortedVideoTracks","track1","track2","customLabels","callbackType","prototype","hasOwnProperty","LabelOptions","QUALITIES","_setTracksCustomLabels","statsObject","availableBuffer","isFloat","boundedVol","loading","head","sheet","cssRules","deleteRule","insertRule","toCSS","clone","LogLevelType","AbrMode","VERSION","__VERSION__","NAME","__NAME__","_updateState","LOADING","BUFFERING","PAUSED","_prevState","_lastWaitingTime","_history","_curState","State","_attachListeners","_doTransition","transition","_transitions","_dispatchEvent","oldState","newState","_duration","_timestamp","VTT_INCLUDES_SIZE_ONLY","VTT_INCLUDES_SIZE_AND_COORDS","RELATIVE_PATH_PATTERN","RegExp","thumbnailsConfig","_downloadAndParseCues","_findCue","_cues","coordinates","imgUrl","_naturalImgSize","x","y","thumbnailInfo","ThumbnailInfo","_downloadVttFile","VttStr","_processVtt","cuesArray","_formatIntoThumbnailCues","execute","vttUrl","vttStr","parser","Parser","StringDecoder","oncue","onflush","flush","onparsingerror","validateThumbnailsVTTFormat","sampleProcessedCue","_extractCueMetadata","validateImgUrl","extractImgNaturalDimensions","thumbnailCues","processedCue","Cue","img","Image","naturalHeight","naturalWidth","vttCue","imgBaseUrl","substring","lastIndexOf","isVTTIncludesImgSizeOnly","test","isVTTIncludesImgSizeAndCoords","isValidThumbnailVTTFormat","imgData","option","parsedCue","left","right","middle","floor","potentialCueMatch","info","_url","_width","_height","_x","_y","MANUAL","CuesStatus","NOT_DOWNLOADED","DOWNLOADING","DOWNLOADED","SRT_POSTFIX","VTT_POSTFIX","_resetExternalNativeTextTrack","_isTextTrackActive","_resetCurrentTrack","_addNativeTextTrack","playerTextTracks","newTextTracks","caption","_createTextTrack","_maybeAddTrack","sameLangTrack","_updateTextTracksModel","_textTrackModel","cuesStatus","_selectTextTrack","_addCuesToNativeTextTrack","_setTextTrack","_maybeSetExternalCueIndex","_getCuesString","captionType","_getFileType","_convertSrtToVtt","_parseCues","str","replace","match","part1","part2","part3","part4","vttString","pop","_handleCaptionOnTimeUpdate","cueIndexUpdated","_hadSeeked","activeCuesRemoved","_maybeRemoveActiveCues","activeCuesAdded","_maybeAddToActiveCues","abs","hadRemoved","activeTextCuesIndex","hadAdded","_externalCueIndex","removeCue","VTTCue","convertedCues","_convertCues","addCue","TextTrackCue","sameLanguageTrackIndex","EXTERNAL_TRACK_ID","rows","cols","customData","_customData","_rows","_cols","IMPLICIT_SCALE_PERCENTAGE","FontFamily","SANS_SERIF","StandardColors","WHITE","StandardOpacities","OPAQUE","BLACK","EdgeStyles","toRGBA","color","opacity","join","getValue","newValue","defaultValue","fontEdge","fontSize","fontScale","fontColor","fontOpacity","backgroundColor","backgroundOpacity","fontFamily","toJson","getTextShadow","shadows","slice","shadow","attributes","isEqual","stringify","FontSizes","_fontSizeIndex","fontSizeValue","ARIAL","HELVETICA","VERDANA","RED","GREEN","BLUE","YELLOW","MAGENTA","CYAN","SEMI_HIGH","SEMI_LOW","TRANSPARENT","RAISED","DEPRESSED","UNIFORM","DROP","parseTimeStamp","computeSeconds","h","m","s","f","ESCAPE","TAG_NAME","c","u","ruby","rt","v","lang","TAG_ANNOTATION","NEEDS_PARENT","Settings","_objCreate","k","dflt","defaultKey","alt","n","integer","parseInt","percent","parseFloat","parseOptions","keyValueDelim","groupDelim","groups","kv","parseCue","regionList","oInput","consumeTimeStamp","ts","ParsingError","Errors","BadTimeStamp","consumeCueSettings","region","vals","vals0","vertical","line","lineAlign","snapToLines","positionAlign","center","skipWhitespace","substr","parseContent","nextToken","consume","unescape1","unescape","shouldAdd","current","localName","annotation","tagName","rootDiv","t","tagStack","node","createProcessingInstruction","createTextNode","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","childNodes","pushNodes","nextTextNode","textContent","innerText","computeLinePos","textTrackList","mediaElement","trackList","count","StyleBox","applyStyles","styles","div","formatStyle","val","unit","CueStyleBox","styleOptions","isIE8","navigator","userAgent","textShadow","WebVTTSet","fontSet","backgroundSet","edgeSet","top","bottom","display","writingMode","unicodeBidi","textAlign","font","whiteSpace","direction","stylesunicodeBidi","textPos","min","move","box","BoxPosition","b2","lh","offsetTop","rects","getClientRects","getBoundingClientRect","max","lineHeight","axis","toMove","overlapsAny","boxes","overlaps","within","container","overlapsOppositeAxis","intersectPercentage","intersectArea","toCSSCompatValues","getSimpleBoxPosition","moveBoxToLinePosition","styleBox","containerBox","boxPositions","findBestPosition","bestPosition","specifiedPosition","percentage","p","boxPosition","linePos","step","round","maxPosition","initialAxis","ceil","reverse","calculatedPercentage","convertCueToDOMTree","cuetext","FONT_SIZE_PERCENT","FONT_STYLE","CUE_BACKGROUND_PADDING","overlay","firstChild","paddedOverlay","margin","shouldCompute","displayState","dimensionSize","implicitFontScale","state","decodeURIComponent","encodeURIComponent","create","F","o","arguments","errorData","constructor","BadSignature","reportOrThrowError","stream","collectNextLine","pos","parseRegion","xy","anchor","Region","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseHeader","alreadyCollectedLine","hasSubstring","_generateIndex","_tracksCount","_kind","_external","_default","_label","_index","METADATA","textTrackCueList","normalizedCues","DataCue","TimedMetadata","TYPE","ID3","EMSG","CUE_POINT","CUSTOM","createTextTrackCue","timedMetadata","cueValue","typeAndMetadata","_getTypeAndMetadata","isId3","timedMetadataType","freeze","inputLang","trackLang","equal","startsWith","getPrototypeOf","_id","_active","_language","_available","isAvailable","_bandwidth","autoKeyword","directionSetting","lr","rl","alignSetting","findDirectionSetting","dir","findAlignSetting","_text","resetCue","getCueAsHTML","_pauseOnExit","TypeError","_region","_vertical","SyntaxError","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","scrollSetting","up","findScrollSetting","isValidPercentValue","VTTRegion","_scroll","_viewportAnchorY","_viewportAnchorX","_regionAnchorX","_lines","_regionAnchorY","binarySearch","comparisonFn","mid","SmartTvRegex","LGTVRegex","SAMSUNGTVRegex","HISENSETVRegex","SAMSUNGBrowserParser","UAParser","BROWSER","MAJOR","OSParser","OS","DeviceParser","DEVICE","VENDOR","SMARTTV","EdgeChromiumParser","BrowserParser","device","getResult","isConsole","CONSOLE","isSmartTV","isMobile","MOBILE","isTablet","TABLET","isWearable","WEARABLE","isEmbedded","EMBEDDED","isIPadOS","isSafari","isMacOS","JSONP_TIMEOUT","CALLBACK_PREFIX","JSONP_FORMAT_STRING","jsonp","timeout","script","callbackId","random","scriptUri","timer","_cleanup","callbackResult","getElementsByTagName","languages","userLanguage","DEBUG","JsLogger","INFO","TIME","WARN","defaultLevel","messages","context","getLevel","setLevel","_map","delete","_createEl","posterUrl","_posterUrl","setStyle","_removeEl","_observer","disconnect","ResizeObserver","_createNativeObserver","_createIframeObserver","HTMLElement","observe","_triggerResize","IFrameObserver","IFRAME_CLASS_NAME","_onChangeCallback","iframe","_createIframe","_observersStore","contentWindow","onresize","mostSuitableWidth","mostSuitableWidthTracks","minWidthDiff","widthDiff","videoRatio","mostSuitableWidthAndRatioTracks","minRatioDiff","ratioDiff","maxBandwidth","_filterVideoTracksByRestriction","MIN_DEFAULT_VALUE","MAX_DEFAULT_VALUE","inRange","filterVideoTracks","_Number","isInt","_String","capitlize","toUpperCase","endsWith","searchString","_Object","objects","item","isClassInstance","__proto__","propertyPath","properties","path","pathArray","tail","deletePropertyPath","defer","rej","promise","thisObj","_Generator","guid","S4","_Dom","classList","add","hasClassName","getPropertyValue","setProperty","parent","child","insertBefore","loadStyleSheetAsync","resolved","cssLinkElement","rel","async","onload","onreadystatechange","onabort","loadScriptAsync","selector","querySelector","newChild","existingChild","_Http","protocol","location","method","ontimeout","jsonResponse","headerRow","headerMap","parts","_VERSION","compare","v1","v2","lexicographical","zeroExtend","v1parts","v2parts","isValidPart","mapParts","exec"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA,kCAAkC,mBAAO,CAAC,yGAAmD;AAC7F;AACA;AACA,cAAc,QAAS,uBAAuB,uBAAuB,gBAAgB,iBAAiB,gBAAgB,kBAAkB,gCAAgC,8BAA8B,2BAA2B,0BAA0B,sBAAsB,6CAA6C,GAAG,qBAAqB,gBAAgB,iBAAiB,uBAAuB,WAAW,YAAY,wBAAwB,GAAG,2PAA2P,kBAAkB,6BAA6B,GAAG,qBAAqB,uBAAuB,mBAAmB,WAAW,cAAc,YAAY,aAAa,6BAA6B,uCAAuC,iCAAiC,2BAA2B,yBAAyB,GAAG,wBAAwB,uBAAuB,WAAW,cAAc,aAAa,YAAY,yBAAyB,uBAAuB,GAAG,0BAA0B,uBAAuB,gBAAgB,iBAAiB,4BAA4B,yBAAyB,GAAG,0BAA0B,gBAAgB,iBAAiB,uBAAuB,cAAc,kBAAkB,GAAG,yCAAyC,2BAA2B,4BAA4B,+BAA+B,sBAAsB,uBAAuB,8HAA8H,GAAG;AAC1rD;AACA;;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,iBAAiB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;;AAEA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;;AAEA;AACA,0CAA0C,0BAA0B;;AAEpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mEAAmE,aAAa;AAChF;;AAEA;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK,IAA0C;AAC/C,EAAE,oCAAO,MAAM;AAAA;AAAA;AAAA;AAAA,oGAAC;AAChB;AACA,MAAM,EAYJ;AACF,CAAC;;;;;;;;;;;;;ACpRY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;;;AC5QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;;AAEA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,IAAI;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,8CAA8C,EAAE;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sDAAsD;AACtD;;AAEA,sBAAsB;AACtB;;AAEA,+BAA+B;AAC/B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC,KAAK;AACtC;;AAEA,8CAA8C;AAC9C;;AAEA,uBAAuB;AACvB;;AAEA,+BAA+B,0CAA0C;AACzE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,IAAI,WAAW,IAAI;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,sBAAsB,QAAQ;AAC9B;AACA,kCAAkC;AAClC;;AAEA;AACA,wDAAwD,EAAE;AAC1D;AACA,wCAAwC;AACxC,4BAA4B,IAAI;AAChC;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd,0BAA0B,EAAE;AAC5B;;AAEA;AACA;AACA,wBAAwB,EAAE,iBAAiB;AAC3C;;AAEA;AACA,0BAA0B,EAAE,UAAU;AACtC;;AAEA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA,gCAAgC,IAAI;AACpC;;AAEA;AACA,gCAAgC,EAAE,eAAe,GAAG,GAAG,aAAa,IAAI;AACxE;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA,6DAA6D,EAAE,WAAW,EAAE;AAC5E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,gBAAgB,IAAI;AACzC;;AAEA;AACA,8BAA8B,EAAE,yDAAyD,IAAI;AAC7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA,oBAAoB;AACpB;;AAEA;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,IAAI,IAAI;;AAE7B;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;;AAEA;AACA,qBAAqB;AACrB,yBAAyB,GAAG;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,IAAI;AACtC,gCAAgC,EAAE;AAClC,gCAAgC,IAAI;AACpC;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA,sBAAsB,EAAE;AACxB;AACA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB,yCAAyC,EAAE;AAC3C;AACA,uBAAuB,IAAI;AAC3B;AACA,+BAA+B,IAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iCAAiC,WAAW;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,4CAA4C,QAAQ,IAAI,IAAI;AAC5D;AACA,oDAAoD;AACpD;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB,SAAS,IAAI;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,KAAK;AAC5B;AACA,uBAAuB,KAAK;AAC5B;AACA,8BAA8B;AAC9B;AACA,+BAA+B;AAC/B;AACA,8BAA8B,IAAI,EAAE;AACpC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,IAAI;AAC7B;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,IAAI,4BAA4B;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,sBAAsB;AACtB;AACA,0CAA0C;AAC1C;AACA,2DAA2D,SAAS;AACpE;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,aAAa;;AAEjC;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,+BAA+B,IAAI,mCAAmC,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY,UAAc,kBAAkB,iGAAU;AACtD,YAAY,mCAAO;AACnB;AACA,aAAa;AAAA,oGAAC;AACd,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACz2BD;AACA;;;;;;;;;;;;;;ACAA;AAAA;AAAA,IAAMA,WAA2B,GAAG;A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","file":"playkit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"core\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./playkit.js\");\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none;\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-color: #000;\\n  pointer-events: none;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  pointer-events: none;\\n  margin-bottom: 5px;\\n}\\n\\n.playkit-black-cover {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  background-color: black;\\n  pointer-events: none;\\n}\\n\\n.playkit-size-iframe {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  border: 0;\\n  z-index: -100;\\n}\\n\\n.playkit-in-browser-fullscreen-mode {\\n  width: 100% !important;\\n  height: 100% !important;\\n  position: fixed !important;\\n  top: 0 !important;\\n  left: 0 !important;\\n  /*added for blocking element with fixed position which could be on the top of the player */\\n  z-index: 999999 !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.6.0\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.TRACE = defineLogLevel(1, 'TRACE');\r\n\tLogger.DEBUG = defineLogLevel(2, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(3, 'INFO');\r\n\tLogger.TIME = defineLogLevel(4, 'TIME');\r\n\tLogger.WARN = defineLogLevel(5, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Gets the current logging level for the logging instance\r\n\t\tgetLevel: function () {\r\n\t\t\treturn this.context.filterLevel;\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\ttrace: function () {\r\n\t\t\tthis.invoke(Logger.TRACE, arguments);\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.trace = bind(globalLogger, globalLogger.trace);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Gets the global logging filter level\r\n\tLogger.getLevel = function() {\r\n\t\treturn globalLogger.getLevel();\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t} else if (context.level === Logger.DEBUG && console.debug) {\r\n\t\t\t\t\thdlr = console.debug;\r\n\t\t\t\t} else if (context.level === Logger.TRACE && console.trace) {\r\n\t\t\t\t\thdlr = console.trace;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.2\n   Copyright  2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.2',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK   = 'Facebook';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY).replace(/\\s\\s*$/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /\\bqbcore\\/([\\w\\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i                        // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\w ]*);/i                                         // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)( bui|\\))/i,                                         // Kindle Fire without Silk\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i               // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2)?)/i                                                     // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i                                       // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86)/i                              // Android-x86\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+ ([\\w\\.]+\\w)/i                                         // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = majorize(_browser.version);\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","// @flow\nconst AdBreakType: PKAdBreakTypes = {\n  PRE: 'preroll',\n  MID: 'midroll',\n  POST: 'postroll',\n  OVERLAY: 'overlay'\n};\n\nexport {AdBreakType};\n","// @flow\nconst AdErrorCode: {[code: string]: number} = {\n  /**\n   * VAST supplied in adm is not a valid XML document.\n   * URL supplied in nurl does not resolve to a valid XML document.\n   * Nurl only: Server did not respond with VAST, or at all when player called the nurl.\n   * Perhaps a CORS issue\n   * Ensure VAST XML is properly formatted per IAB spec\n   */\n  XML_PARSING_ERROR: 8100,\n  /**\n   * The VAST validates as XML, but does not validate per the VAST schema (i.e. there are missing mandatory elements or attributes, or combinations of elements/attributes that are not permissible).\n   */\n  VAST_SCHEMA_VALIDATION_ERROR: 8101,\n  /**\n   * idder did not respect the VAST version(s) listed in the bid request.\n   * Exchange is sending wrong VAST version(s) in bid request.\n   * VAST does not contain version (this could also be considered a schema validation issue)\n   */\n  VAST_RESPONSE_VERSION_NOT_SUPPORTED: 8102,\n  /**\n   * Player wanted Skippable Linear, but got back Linear.\n   * Player wanted Linear, but got back Skippable Linear.\n   * For Skippable Linear, skipoffset doesnt meet publisher expectations.\n   * Bidder did not respect the skippability/skipoffset in the bid request.\n   * Exchange is sending wrong skippability/skipoffset in the bid request.\n   * Potentially any of the reasons in 201-203\n   * Make sure proper ad types are being sent and skippable attributes are being respected\n   */\n  TRAFFICKING_ERROR: 8200,\n  /**\n   * Bidder did not respect the linearity in the bid request.\n   * Exchange is sending wrong linearity in the bid request\n   * Ensure linearity requested is being respected\n   */\n  VAST_UNEXPECTED_LINEARITY: 8201,\n  /**\n   * Bidder did not respect the duration in the bid request.\n   * Exchange is sending wrong duration in the bid request\n   * Ensure duration requested is being respected\n   */\n  VAST_UNEXPECTED_DURATION_ERROR: 8202,\n  /**\n   * No MediaFile is available with dimensions that are matching for the device (i.e. mobile devices that cannot play full HD).\n   * No MediaFile is available with an acceptable bitrate.\n   * Bidder did not respect maxbitrate\n   * Exchange is not sending maxbitrate\n   * High bitrate creatives attempting to serve on mobile devices\n   * Ensure multiple mediafiles options to cover different devices and environments\n   */\n  VAST_UNEXPECTED_SIZE_ERROR: 8203,\n  /**\n   * Check that all VAST URIs are reachable and not timing out\n   * Ensure wrapper limit is not reached\n   */\n  VAST_WRAPPER_ERROR: 8300,\n  /**\n   * Check that the VAST URI is valid and reachable.\n   * This could be due to poor internet connection or non-optimized page and therefore request times out. Check whether this occurs more on mobile devices (may not be reproducible due to network limits).\n   * Check timeout limit of your player to ensure this isn't being reached\n   * This can be caused by HTTP serving to HTTPS.\n   */\n  VAST_URI_ERROR: 8301,\n  /**\n   * This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).\n   * Too many wrappers\n   * Look into increasing the wrapper limit of your player to accommodate these creatives\n   */\n  VAST_TOO_MANY_REDIRECTS: 8302,\n  /**\n   * No Ad element in VAST doc (after following wrappers).\n   * When working with third-party networks, the fill-rate can be less than 100%. If so, this is an expected error. For example, if the third-party expects to fill 60% of the time, you should expect 40% errors. You can check to ensure that the error rate is in line with the fill-rate of the third-party network.\n   * Ensure the bids being returned do not have empty VAST\n   */\n  NO_ADS_VAST_RESPONSE: 8303,\n  /**\n   * Check that the MediaFile a valid video file of the specified format in the request\n   * Make sure the URL returns a valid video asset\n   * Check for browser restrictions such as autoplay blocking, auto-mute, etc\n   * See also possible causes for 401-405\n   */\n  GENERAL_LINEAR_ERROR: 8400,\n  /**\n   * Ensure that all MediaFiles in the response return a valid video asset\n   */\n  FILE_NOT_FOUND: 8401,\n  /**\n   * Issue with CDN server.\n   * Timeout (in milliseconds) when loading a video ad media file. If loading takes longer than this timeout, the ad playback is canceled.\n   * Can be caused by low bandwidth, or poor website implementation with competing requests that delay loading of the media file.\n   * Can occur when a video auto-plays in a mobile environment, since it should be click-to-play (there are some exceptions).\n   * Increase the timeout limit of your player\n   */\n  VAST_MEDIA_LOAD_TIMEOUT: 8402,\n  /**\n   * Bidder did not respect mime types in bid request.\n   * Exchange did not send correct mime types.\n   * This may indicate that the wrong creative type attempted to play. For example, a Flash creative attempted to play on a mobile device or WebM on iOS.\n   * This error type is more common on mobile.\n   * Ad is inline but no compatible media file found. Generally, if the player reaches a point where it sees no MediaFiles in the array of mediafiles considered eligible\n   */\n  MEDIA_FILE_NOT_FOUND: 8403,\n  /**\n   * CORS issue for CDN server.\n   * Unsupported Codecs.\n   * Mismatch between MIME type and video file type.\n   * Unsupported delivery method\n   */\n  MEDIA_FILE_DISPLAY_ERROR: 8405,\n  /**\n   * Ensure that there is a mezzanine file included in the response\n   */\n  MEZZANINE_FILE_NOT_PROVIDED: 8406,\n  /**\n   * This is an expected error while the video is being transcoded. This error will stop once transcoding is complete and available.\n   */\n  MEZZANINE_DOWNLOADED_FOR_THE_FIRST_TIME: 8407,\n  /**\n   * The ad returned in the VAST response was rejected.\n   */\n  VAST_RESPONSE_AD_REJECTED: 8408,\n  /**\n   * The interactive creative defined in the InteractiveCreativeFile node was not executed.\n   */\n  CREATIVE_WAS_NOT_EXECUTED: 8409,\n  /**\n   * The code referenced in the Verification node was not executed.\n   */\n  CODE_REFERENCED_NOT_EXECUTED: 8410,\n  /**\n   * General NonLinearAds error.\n   */\n  GENERAL_NON_LINEAR_AD_ERROR: 8500,\n  /**\n   * Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large).\n   */\n  NON_LINEAR_CREATIVE_DIMENSIONS_NOT_ALIGN_ERROR: 8501,\n  /**\n   * Unable to fetch NonLinearAds/NonLinear resource.\n   */\n  NON_LINEAR_FETCH_ERROR: 8502,\n  /**\n   * Could not find NonLinear resource with supported type.\n   */\n  NON_LINEAR_RESOURCE_NOT_FOUND: 8503,\n  /**\n   * General CompanionAds error.\n   */\n  GENERAL_COMPANION_ADS_ERROR: 8600,\n  /**\n   * Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).\n   */\n  COMPANION_DIMENSIONS_NOT_FIT: 8601,\n  /**\n   * Unable to display Required Companion.\n   */\n  COMPANION_CANNOT_BE_DISPLAY: 8602,\n  /**\n   * Unable to fetch CompanionAds/Companion resource.\n   */\n  COMPANION_CANNOT_BE_FETCHED: 8603,\n  /**\n   * Could not find Companion resource with supported type.\n   */\n  COMPANION_TYPE_NOT_FOUND: 8604,\n  /**\n   * This error is usually fired when the error does not match the criteria of any of the other errors.\n   */\n  AD_UNDEFINED_ERROR: 8900,\n  /**\n   * General VPAID error.\n   */\n  GENERAL_VPAID_ERROR: 8901\n};\n\nexport {AdErrorCode};\n","// @flow\nconst AdEventType: PKEventTypes = {\n  /**\n   * Fired when the ad can be skip by the user.\n   */\n  AD_CAN_SKIP: 'adcanskip',\n  /**\n   * Fired when the ad manifest has been loaded.\n   */\n  AD_MANIFEST_LOADED: 'admanifestloaded',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads plugin is done playing all own ads.\n   */\n  ADS_COMPLETED: 'adscompleted',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress',\n  /**\n   * Fired when the ad has stalled playback to buffer.\n   */\n  AD_BUFFERING: 'adbuffering',\n  /**\n   * Fired when an ad waterfalling occurred\n   */\n  AD_WATERFALLING: 'adwaterfalling',\n  /**\n   * Fired when an ad waterfalling failed\n   */\n  AD_WATERFALLING_FAILED: 'adwaterfallingfailed',\n  /**\n   * Fires when browser fails to autoplay an ad.\n   */\n  AD_AUTOPLAY_FAILED: 'adautoplayfailed'\n};\n\nexport {AdEventType};\n","// @flow\nconst AdTagType: {[type: string]: string} = {\n  VAST: 'vast',\n  VMAP: 'vmap'\n};\n\nexport {AdTagType};\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// @flow\nexport const DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n","// @flow\nimport type {FairPlayDrmConfigType} from '../engines/html5/media-source/adapters/fairplay-drm-handler';\nimport getLogger from '../utils/logger';\nimport {DrmScheme} from './drm-scheme';\n\nconst _logger = getLogger('FairPlay');\n\nconst FairPlay: IDrmProtocol = class FairPlay {\n  /**\n   * FairPlay is the configure key system.\n   * @param {Array<PKDrmDataObject>} drmData - The drm data.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @return {boolean} - Whether FairPlay is the configure key system.\n   */\n  static isConfigured(drmData: Array<PKDrmDataObject>, drmConfig: PKDrmConfigObject): boolean {\n    return DrmScheme.FAIRPLAY === drmConfig.keySystem && !!drmData.find(drmEntry => drmEntry.scheme === drmConfig.keySystem);\n  }\n\n  /**\n   * FairPlay playback supports in case 2 conditions are met:\n   * 1. The environment supports FairPlay playback.\n   * 2. The drm data of the source object contains entry with FairPlay scheme.\n   * @param {Array<PKDrmDataObject>} drmData - The drm data to check.\n   * @return {boolean} - Whether FairPlay can be play on the current environment.\n   */\n  static canPlayDrm(drmData: Array<PKDrmDataObject>): boolean {\n    const result = drmData.some(drmEntry => drmEntry.scheme === DrmScheme.FAIRPLAY) && !!window.WebKitMediaKeys;\n    _logger.debug(`Can play DRM scheme of: ${DrmScheme.FAIRPLAY} is ${result.toString()}`);\n    return result;\n  }\n\n  /**\n   * Sets the FairPlay playback.\n   * @param {FairPlayDrmConfigType} config - The config to manipulate.\n   * @param {Array<PKDrmDataObject>} drmData - The drm data.\n   * @returns {void}\n   */\n  static setDrmPlayback(config: FairPlayDrmConfigType, drmData: Array<PKDrmDataObject>): void {\n    _logger.debug('Sets drm playback');\n    let drmEntry = drmData.find(drmEntry => drmEntry.scheme === DrmScheme.FAIRPLAY);\n    if (drmEntry) {\n      config.licenseUrl = drmEntry.licenseUrl;\n      config.certificate = drmEntry.certificate;\n    }\n  }\n};\n\nexport default FairPlay;\n","// @flow\nimport FakeEventTarget from '../event/fake-event-target';\nimport getLogger from '../utils/logger';\nimport {CustomEventType} from '../event/event-type';\nimport EventManager from '../event/event-manager';\nimport FakeEvent from '../event/fake-event';\n\nconst NOT_SUPPORTED: number = -1;\n\nclass DroppedFramesWatcher extends FakeEventTarget {\n  _droppedFramesInterval: ?IntervalID = null;\n  _lastDroppedFrames: number = 0;\n  _lastDecodedFrames: number = 0;\n  _lastTime: number = 0;\n  _mediaSourceAdapter: IMediaSourceAdapter;\n  _config: PKAbrConfigObject;\n  _videoElement: HTMLVideoElement;\n  _currentBitrate: number = 0;\n  _eventManager: EventManager;\n  static _logger: any = getLogger('droppedFramesWatcher');\n\n  constructor(mediaSourceAdapter: IMediaSourceAdapter, config: PKAbrConfigObject, videoElement: HTMLVideoElement) {\n    super();\n    this._eventManager = new EventManager();\n    this._mediaSourceAdapter = mediaSourceAdapter;\n    this._config = config;\n    this._videoElement = videoElement;\n    if (this._mediaSourceAdapter.capabilities.fpsControl) {\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.FPS_DROP, (event: FakeEvent) => this._triggerFPSDrop(event.payload.data));\n      return;\n    }\n    if (this._getDroppedAndDecodedFrames()[0] === NOT_SUPPORTED) {\n      DroppedFramesWatcher._logger.debug('Dropped frame watcher is not supported');\n    } else if (this._config.capLevelOnFPSDrop) {\n      this._init();\n    }\n  }\n\n  _init(): void {\n    this._eventManager.listen(\n      this._mediaSourceAdapter,\n      CustomEventType.VIDEO_TRACK_CHANGED,\n      (event: FakeEvent) => (this._currentBitrate = event.payload.selectedVideoTrack.bandwidth)\n    );\n    this._droppedFramesInterval = setInterval(() => this._checkFPS(), this._config.fpsDroppedFramesInterval);\n  }\n\n  _triggerFPSDrop(data: Object): void {\n    this.dispatchEvent(new FakeEvent(CustomEventType.FPS_DROP, data));\n  }\n\n  _getDroppedAndDecodedFrames(): [number, number] {\n    if (typeof this._videoElement.getVideoPlaybackQuality === 'function') {\n      const videoPlaybackQuality = this._videoElement.getVideoPlaybackQuality();\n      return [videoPlaybackQuality.droppedVideoFrames, videoPlaybackQuality.totalVideoFrames];\n    } else if (typeof this._videoElement.webkitDroppedFrameCount == 'number' && typeof this._videoElement.webkitDecodedFrameCount == 'number') {\n      return [this._videoElement.webkitDroppedFrameCount, this._videoElement.webkitDecodedFrameCount];\n    } else {\n      return [NOT_SUPPORTED, NOT_SUPPORTED];\n    }\n  }\n\n  _checkFPS(): void {\n    const [droppedFrames, decodedFrames] = this._getDroppedAndDecodedFrames();\n    try {\n      const currentTime = performance.now();\n      if (decodedFrames) {\n        if (this._lastTime) {\n          const currentPeriod = currentTime - this._lastTime,\n            currentDropped = droppedFrames - this._lastDroppedFrames,\n            currentDecoded = decodedFrames - this._lastDecodedFrames,\n            droppedFPS = (1000 * currentDropped) / currentPeriod;\n          if (droppedFPS > 0) {\n            DroppedFramesWatcher._logger.debug('checkFPS : droppedFPS/decodedFPS:' + droppedFPS / ((1000 * currentDecoded) / currentPeriod));\n            if (currentDropped > this._config.fpsDroppedMonitoringThreshold * currentDecoded) {\n              this._mediaSourceAdapter.setMaxBitrate(this._currentBitrate - 1);\n              this._triggerFPSDrop({\n                currentDropped: currentDropped,\n                currentDecoded: currentDecoded,\n                totalDroppedFrames: droppedFPS\n              });\n            }\n          }\n        }\n        this._lastTime = currentTime;\n        this._lastDroppedFrames = droppedFrames;\n        this._lastDecodedFrames = decodedFrames;\n      }\n    } catch (error) {\n      DroppedFramesWatcher._logger.error('Error occur while trying to check dropFrames: ', error);\n    }\n  }\n\n  destroy(): void {\n    if (this._droppedFramesInterval) {\n      clearInterval(this._droppedFramesInterval);\n    }\n    this._droppedFramesInterval = null;\n    this._eventManager.destroy();\n  }\n}\n\nexport {DroppedFramesWatcher};\n","// @flow\nimport getLogger from '../utils/logger';\n\n/**\n * Engine decorator manager for plugins.\n * @class EngineDecoratorManager\n */\nclass EngineDecoratorManager {\n  _decoratorProviders: Map<string, IEngineDecoratorProvider> = new Map();\n  _logger: any = getLogger('EngineDecoratorManager');\n\n  register(engineDecoratorProvider: IEngineDecoratorProvider): void {\n    if (!this._decoratorProviders.has(engineDecoratorProvider.getName())) {\n      this._decoratorProviders.set(engineDecoratorProvider.getName(), engineDecoratorProvider);\n    } else {\n      this._logger.warn(`decorator already registered for ${engineDecoratorProvider.getName()}`);\n    }\n  }\n\n  createDecorators(engine: IEngine, dispatchEvent: Function): Array<IEngineDecorator> {\n    this._logger.debug(`decorators created for ${Array.from(this._decoratorProviders.keys()).toString()}`);\n    return Array.from(this._decoratorProviders.values(), engineDecoratorProvider =>\n      engineDecoratorProvider.getEngineDecorator(engine, dispatchEvent)\n    );\n  }\n\n  destroy(): void {\n    this._logger.debug(`decorators destroyed`);\n    this._decoratorProviders.clear();\n  }\n}\n\nexport {EngineDecoratorManager};\n","// @flow\n\n/**\n * Engine decorator provider.\n * @class EngineDecoratorProvider\n * @param {IEngineDecoratorProvider} plugin - The plugin which have implemented decorator.\n * @implements {IEngineDecorator}\n */\nclass EngineDecoratorProvider implements IEngineDecoratorProvider {\n  _name: string;\n  _getEngineDecorator: (engine: IEngine, dispatchEventHandler: Function) => IEngineDecorator;\n\n  constructor(plugin: IEngineDecoratorProvider) {\n    this._name = plugin.getName();\n    this._getEngineDecorator = plugin.getEngineDecorator.bind(plugin);\n  }\n\n  getEngineDecorator(engine: IEngine, dispatchEventHandler: Function): IEngineDecorator {\n    return this._getEngineDecorator(engine, dispatchEventHandler);\n  }\n\n  getName(): string {\n    return this._name;\n  }\n}\n\nexport {EngineDecoratorProvider};\n","// @flow\nimport FakeEvent from '../event/fake-event';\nimport {EventType} from '../event/event-type';\nimport EventManager from '../event/event-manager';\nimport FakeEventTarget from '../event/fake-event-target';\nimport {EngineDecoratorManager} from './engine-decorator-manager';\n\n/**\n * Engine decorator for plugin.\n * @class EngineDecorator\n * @param {IEngineDecorator} engine - The engine to decorate.\n * @implements {IEngineDecorator}\n */\nclass EngineDecorator extends FakeEventTarget implements IEngineDecorator {\n  _pluginDecorators: Array<IEngineDecorator>;\n  _eventManager: EventManager;\n\n  constructor(engine: IEngine, decoratorManager: EngineDecoratorManager) {\n    super();\n    this._eventManager = new EventManager();\n    this._pluginDecorators = decoratorManager.createDecorators(engine, super.dispatchEvent.bind(this));\n    const events: Array<string> = (Object.values(EventType): any);\n    events.forEach(event => this._eventManager.listen(engine, event, (e: FakeEvent) => this.dispatchEvent(e)));\n    return new Proxy(engine, {\n      get: (obj, prop) => {\n        if (prop === 'destroy') {\n          this._destroy();\n        }\n        const activeDecorator = this._pluginDecorators.find(decorator => decorator.active);\n        let target;\n        //For events the proxy is the target - to avoid listening to engine itself\n        if (prop === 'addEventListener' || prop === 'removeEventListener') {\n          target = this;\n        } else {\n          target = activeDecorator && prop in activeDecorator ? activeDecorator : obj;\n        }\n        // $FlowFixMe\n        return target[prop] && typeof target[prop].bind === 'function' ? target[prop].bind(target) : target[prop];\n      },\n      set: (obj, prop, value) => {\n        const activeDecorator = this._pluginDecorators.find(decorator => prop in decorator && decorator.active);\n        // $FlowFixMe\n        activeDecorator && prop in activeDecorator ? (activeDecorator[prop] = value) : (obj[prop] = value);\n        return true;\n      }\n    });\n  }\n\n  dispatchEvent(event: FakeEvent): boolean {\n    const activeDecorator = this._pluginDecorators.find(decorator => decorator.active);\n    return activeDecorator && activeDecorator.dispatchEvent ? activeDecorator.dispatchEvent(event) : super.dispatchEvent(event);\n  }\n\n  _destroy(): void {\n    this._pluginDecorators = [];\n    this._eventManager.destroy();\n  }\n\n  get active(): boolean {\n    return true;\n  }\n}\n\nexport {EngineDecorator};\n","//@flow\nimport getLogger from '../utils/logger';\nimport Html5 from './html5/html5';\n\n/**\n * Engine Provider\n * @classdesc\n */\nclass EngineProvider {\n  /**\n   * The logger of the Engine provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('EngineProvider');\n\n  /**\n   * The Engine registry.\n   * @member {Object} _engineProviders\n   * @static\n   * @private\n   */\n  static _engineProviders: {[id: string]: IEngineStatic} = {};\n\n  /**\n   * Add an engine to the registry.\n   * @function register\n   * @param {string} id - The engine id.\n   * @param {IEngineStatic} engine -  The engine to register.\n   * @static\n   * @returns {void}\n   */\n  static register(id: string, engine: IEngineStatic): void {\n    if (id && !EngineProvider._engineProviders[id]) {\n      EngineProvider._logger.debug(`Engine <${id}> has been registered successfully`);\n      EngineProvider._engineProviders[id] = engine;\n    } else {\n      EngineProvider._logger.debug(`Engine <${id}> is already registered, do not register again`);\n    }\n  }\n\n  /**\n   * Remove an engine from the registry.\n   * @function unRegister\n   * @param {string} id - The engine id.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(id: string): void {\n    if (EngineProvider._engineProviders[id]) {\n      EngineProvider._logger.debug(`Unregistered <${id}> Engine`);\n      delete EngineProvider._engineProviders[id];\n    }\n  }\n\n  /**\n   * Get the appropriate Engines.\n   * @function getEngines\n   * @returns {Array<IEngineStatic>} - The Array of engines, or null if such doesn't exists.\n   * @static\n   */\n  static getEngines(): Array<IEngineStatic> {\n    return Object.keys(EngineProvider._engineProviders).map(key => EngineProvider._engineProviders[key]);\n  }\n\n  /**\n   * Destroys and clear the registered engines\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    EngineProvider._engineProviders = {};\n  }\n}\n\nif (Html5.isSupported()) {\n  EngineProvider.register(Html5.id, Html5);\n}\n\nconst registerEngine = EngineProvider.register;\nconst unRegisterEngine = EngineProvider.unRegister;\nexport {registerEngine, unRegisterEngine, EngineProvider};\n","// @flow\nconst EngineType: PKEngineTypes = {\n  HTML5: 'html5',\n  FLASH: 'flash',\n  SILVERLIGHT: 'silverlight',\n  CAST: 'cast'\n};\n\nexport {EngineType};\n","// @flow\nimport * as Utils from '../../../utils/util';\nimport {Html5EventType} from '../../../event/event-type';\nimport getLogger from '../../../utils/logger';\nimport * as EncodingSources from '../../../assets/encoding-sources.json';\n\nconst WAIT_TIME: number = 500;\n\nconst Html5AutoPlayCapability: ICapability = class Html5AutoPlayCapability {\n  static _vid: HTMLVideoElement;\n  static _playPromiseResult: Promise<*>;\n  static _logger: any = getLogger('Html5AutoPlayCapability');\n  static _capabilities: Object = {};\n\n  /**\n   * Runs the test for autoplay capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    if (\n      Html5AutoPlayCapability._capabilities.autoplay ||\n      (typeof Html5AutoPlayCapability._capabilities.autoplay === 'boolean' &&\n        typeof Html5AutoPlayCapability._capabilities.mutedAutoPlay === 'boolean')\n    ) {\n      Html5AutoPlayCapability._playPromiseResult = Promise.resolve(Html5AutoPlayCapability._capabilities);\n      return;\n    }\n    if (!Html5AutoPlayCapability._vid) {\n      Html5AutoPlayCapability._vid = Utils.Dom.createElement('video');\n      Html5AutoPlayCapability._vid.src = EncodingSources.Base64Mp4Source;\n      // For iOS devices needs to turn the playsinline attribute on\n      Html5AutoPlayCapability._vid.setAttribute('playsinline', '');\n    }\n    Html5AutoPlayCapability._playPromiseResult = new Promise(resolve => {\n      Html5AutoPlayCapability._setMuted(false);\n      Html5AutoPlayCapability._getPlayPromise()\n        .then(() => resolve({autoplay: true, mutedAutoPlay: true}))\n        .catch(() => {\n          Html5AutoPlayCapability._setMuted(true);\n          Html5AutoPlayCapability._getPlayPromise()\n            .then(() => resolve({autoplay: false, mutedAutoPlay: true}))\n            .catch(() => resolve({autoplay: false, mutedAutoPlay: false}));\n        });\n    });\n  }\n\n  /**\n   * Gets the test result for autoplay capability.\n   * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Html5AutoPlayCapability._playPromiseResult.then(playCapability => {\n      let fallbackPlayCapabilityTest;\n      if (playCapability.autoplay) {\n        fallbackPlayCapabilityTest = Promise.resolve(playCapability);\n      } else {\n        // If autoplay is not allowed - try again and return the updated result\n        Html5AutoPlayCapability.runCapability();\n        fallbackPlayCapabilityTest = Html5AutoPlayCapability._playPromiseResult;\n      }\n      return fallbackPlayCapabilityTest.then(fallbackPlayCapability =>\n        Utils.Object.mergeDeep(fallbackPlayCapability, Html5AutoPlayCapability._capabilities)\n      );\n    });\n  }\n\n  /**\n   * Sets an engine capabilities.\n   * @param {Object} capabilities - The engine capabilities.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static setCapabilities(capabilities: {[name: string]: any}): void {\n    Html5AutoPlayCapability._logger.debug('Set player capabilities', capabilities);\n    const {autoplay, mutedAutoPlay} = capabilities;\n    if (typeof autoplay === 'boolean') {\n      Html5AutoPlayCapability._capabilities.autoplay = autoplay;\n    }\n    if (typeof mutedAutoPlay === 'boolean') {\n      Html5AutoPlayCapability._capabilities.mutedAutoPlay = mutedAutoPlay;\n    }\n  }\n\n  /**\n   * Gets the play promise.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   */\n  static _getPlayPromise(): Promise<*> {\n    return Html5AutoPlayCapability._vid.play() || Html5AutoPlayCapability._forcePromiseReturnValue();\n  }\n\n  /**\n   * Sets the test video element muted value.\n   * @param {boolean} muted - The muted value.\n   * @private\n   * @returns {void}\n   * @static\n   */\n  static _setMuted(muted: boolean): void {\n    if (muted) {\n      Html5AutoPlayCapability._vid.muted = true;\n      Html5AutoPlayCapability._vid.setAttribute('muted', '');\n    } else {\n      Html5AutoPlayCapability._vid.muted = false;\n      Html5AutoPlayCapability._vid.removeAttribute('muted');\n    }\n  }\n\n  /**\n   * For browsers which are not supported promise return value from play()\n   * request we are simulate the same behaviour.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   * @static\n   */\n  static _forcePromiseReturnValue(): Promise<*> {\n    return new Promise((resolve, reject) => {\n      Html5AutoPlayCapability._vid.addEventListener(Html5EventType.ERROR, () => {\n        reject();\n      });\n      const supported = setTimeout(() => {\n        Html5AutoPlayCapability._logger.debug(`Timeout ${WAIT_TIME} ms has been reached`);\n        reject();\n      }, WAIT_TIME);\n      if (Html5AutoPlayCapability._vid.paused === true) {\n        clearTimeout(supported);\n        reject();\n      } else {\n        clearTimeout(supported);\n        resolve();\n      }\n    });\n  }\n};\n\nexport default Html5AutoPlayCapability;\n","// @flow\nconst CorsType: PKCorsTypes = {\n  ANONYMOUS: 'anonymous',\n  USE_CREDENTIALS: 'use-credentials'\n};\n\nexport {CorsType};\n","//@flow\nimport FakeEventTarget from '../../event/fake-event-target';\nimport FakeEvent from '../../event/fake-event';\nimport EventManager from '../../event/event-manager';\nimport {CustomEventType, Html5EventType} from '../../event/event-type';\nimport MediaSourceProvider from './media-source/media-source-provider';\nimport VideoTrack from '../../track/video-track';\nimport AudioTrack from '../../track/audio-track';\nimport PKTextTrack, {getActiveCues} from '../../track/text-track';\nimport ImageTrack from '../../track/image-track';\nimport {Cue} from '../../track/vtt-cue';\nimport {createTimedMetadata} from '../../track/timed-metadata';\nimport * as Utils from '../../utils/util';\nimport Html5AutoPlayCapability from './capabilities/html5-autoplay';\nimport Error from '../../error/error';\nimport getLogger from '../../utils/logger';\nimport {DroppedFramesWatcher} from '../dropped-frames-watcher';\nimport {ThumbnailInfo} from '../../thumbnail/thumbnail-info';\n\nconst SHORT_BUFFERING_TIMEOUT: number = 750;\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nexport default class Html5 extends FakeEventTarget implements IEngine {\n  /**\n   * The video element.\n   * @type {HTMLVideoElement}\n   * @private\n   */\n  _el: HTMLVideoElement;\n  /**\n   * The event manager of the engine.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The selected media source adapter of the engine.\n   * @type {?IMediaSourceAdapter}\n   * @private\n   */\n  _mediaSourceAdapter: IMediaSourceAdapter | null;\n  /**\n   * The player config object.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * Promise to indicate when a media source adapter can be loaded.\n   * @type {Promise<*>}\n   * @private\n   */\n  _canLoadMediaSourceAdapterPromise: Promise<*>;\n  _droppedFramesWatcher: ?DroppedFramesWatcher;\n  _reset: boolean = false;\n  /**\n   * The html5 class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Html5');\n\n  /**\n   * The html5 capabilities handlers.\n   * @private\n   * @static\n   */\n  static _capabilities: Array<ICapability> = [Html5AutoPlayCapability];\n\n  /**\n   * @type {string} - The engine id.\n   * @public\n   * @static\n   */\n  static id: string = 'html5';\n\n  /**\n   * @type {PKVideoElementStore} - Store object which maps between playerId to its video element.\n   */\n  static videoElementStore: PKVideoElementStore = {};\n\n  /**\n   * Checks if html5 is supported.\n   * @returns {boolean} - Whether the html5 is supported.\n   */\n  static isSupported(): boolean {\n    try {\n      const el = Utils.Dom.createElement('video');\n      el.volume = 0.5;\n      return !!el.canPlayType;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * Factory method to create an engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @param {string} playerId - The player id.\n   * @returns {IEngine} - New instance of the run time engine.\n   * @public\n   * @static\n   */\n  static createEngine(source: PKMediaSourceObject, config: Object, playerId: string): IEngine {\n    return new this(source, config, playerId);\n  }\n\n  /**\n   * Checks if the engine can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   * @param {boolean} preferNative - prefer native flag.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @returns {boolean} - Whether the engine can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean, drmConfig: PKDrmConfigObject): boolean {\n    return MediaSourceProvider.canPlaySource(source, preferNative, drmConfig);\n  }\n\n  /**\n   * Runs the html5 capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Html5._capabilities.forEach(capability => capability.runCapability());\n  }\n\n  /**\n   * Gets the html5 capabilities.\n   * @return {Promise<Object>} - The html5 capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(): Promise<Object> {\n    let promises = [];\n    Html5._capabilities.forEach(capability => promises.push(capability.getCapability()));\n    return Promise.all(promises).then(arrayOfResults => {\n      const mergedResults = {};\n      arrayOfResults.forEach(res => Object.assign(mergedResults, res));\n      return {[Html5.id]: mergedResults};\n    });\n  }\n\n  /**\n   * Sets an engine capabilities.\n   * @param {Object} capabilities - The engine capabilities.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static setCapabilities(capabilities: {[name: string]: any}): void {\n    Html5._capabilities.forEach(capability => capability.setCapabilities(capabilities));\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @param {string} playerId - the id to be set as the key of the video element\n   * @private\n   * @public\n   */\n  static prepareVideoElement(playerId: string): void {\n    if (!Html5.videoElementStore[playerId]) {\n      Html5._logger.debug(`Create the video element for playing ${playerId}`);\n      const videoElement = Utils.Dom.createElement('video');\n      Html5.videoElementStore[playerId] = videoElement;\n    }\n    Html5._logger.debug(`Prepare the video element for playing ${playerId}`);\n    Html5.videoElementStore[playerId].load();\n  }\n\n  /**\n   * The player playback rates.\n   * @type {Array<number>}\n   */\n  static PLAYBACK_RATES: Array<number> = [0.5, 1, 1.5, 2];\n\n  /**\n   * @constructor\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @param {string} playerId - The player id.\n   */\n  constructor(source: PKMediaSourceObject, config: Object, playerId: string) {\n    super();\n    this._eventManager = new EventManager();\n    this._canLoadMediaSourceAdapterPromise = Promise.resolve();\n    this._createVideoElement(playerId);\n    this._init(source, config);\n  }\n\n  /**\n   * Restores the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n  restore(source: PKMediaSourceObject, config: Object): void {\n    this.reset();\n    this._init(source, config);\n  }\n\n  /**\n   * Resets the engine.\n   * @returns {void}\n   */\n  reset(): void {\n    if (this._reset) return;\n    this._reset = true;\n    this._eventManager.removeAll();\n    if (this._droppedFramesWatcher) {\n      this._droppedFramesWatcher.destroy();\n      this._droppedFramesWatcher = null;\n    }\n    this._canLoadMediaSourceAdapterPromise = new Promise((resolve, reject) => {\n      const mediaSourceAdapterDestroyed = this._mediaSourceAdapter ? this._mediaSourceAdapter.destroy() : Promise.resolve();\n      if (this._el && this._el.src) {\n        mediaSourceAdapterDestroyed.then(() => {\n          Utils.Dom.setAttribute(this._el, 'src', '');\n          Utils.Dom.removeAttribute(this._el, 'src');\n          resolve();\n        }, reject);\n      } else {\n        mediaSourceAdapterDestroyed.then(resolve, reject);\n      }\n    });\n    this._mediaSourceAdapter = null;\n  }\n\n  /**\n   * Destroys the engine.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.detach();\n    if (this._el) {\n      this.pause();\n      Utils.Dom.removeAttribute(this._el, 'src');\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._eventManager.destroy();\n    MediaSourceProvider.destroy();\n    if (this._droppedFramesWatcher) {\n      this._droppedFramesWatcher.destroy();\n      this._droppedFramesWatcher = null;\n    }\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.destroy();\n      this._mediaSourceAdapter = null;\n    }\n  }\n\n  /**\n   * Get the engine's id\n   * @public\n   * @returns {string} the engine's id\n   */\n  get id(): string {\n    return Html5.id;\n  }\n\n  /**\n   * attach media - return the media source to handle the video tag\n   * @public\n   * @returns {void}\n   */\n  attachMediaSource(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.attachMediaSource();\n    }\n  }\n\n  /**\n   * detach media - will remove the media source from handling the video\n   * @public\n   * @returns {void}\n   */\n  detachMediaSource(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.detachMediaSource();\n    }\n  }\n\n  /**\n   * Listen to the video element events and triggers them from the engine.\n   * @public\n   * @returns {void}\n   */\n  attach(): void {\n    Object.keys(Html5EventType).forEach(html5Event => {\n      if (![Html5EventType.ERROR, Html5EventType.WAITING].includes(Html5EventType[html5Event])) {\n        this._eventManager.listen(this._el, Html5EventType[html5Event], () => {\n          return this.dispatchEvent(new FakeEvent(Html5EventType[html5Event]));\n        });\n      }\n    });\n    this._eventManager.listen(this._el, Html5EventType.ERROR, () => this._handleVideoError());\n    this._eventManager.listen(this._el, Html5EventType.WAITING, () => this._handleWaiting());\n    this._handleMetadataTrackEvents();\n    this._eventManager.listen(this._el.textTracks, 'addtrack', (event: any) => {\n      if (PKTextTrack.isNativeTextTrack(event.track)) {\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_ADDED, {track: event.track}));\n      }\n    });\n    let mediaSourceAdapter = this._mediaSourceAdapter;\n    if (mediaSourceAdapter) {\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.IMAGE_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.FRAG_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.DRM_LICENSE_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.MANIFEST_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, Html5EventType.ERROR, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, Html5EventType.TIME_UPDATE, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, Html5EventType.PLAYING, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, Html5EventType.WAITING, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.MEDIA_RECOVERED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, CustomEventType.TIMED_METADATA_ADDED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(mediaSourceAdapter, 'hlsFragParsingMetadata', (event: FakeEvent) => this.dispatchEvent(event));\n      if (this._droppedFramesWatcher) {\n        this._eventManager.listen(this._droppedFramesWatcher, CustomEventType.FPS_DROP, (event: FakeEvent) => this.dispatchEvent(event));\n      }\n    }\n  }\n\n  /**\n   * Remove the listeners of the video element events.\n   * @public\n   * @returns {void}\n   */\n  detach(): void {\n    Object.keys(Html5EventType).forEach(html5Event => {\n      this._eventManager.unlisten(this._el, Html5EventType[html5Event]);\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED);\n    }\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  /**\n   * Select a new video track.\n   * @param {VideoTrack} videoTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a new audio track.\n   * @param {AudioTrack} audioTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n    }\n  }\n\n  /**\n   * Select a new text track.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    this._removeCueChangeListeners();\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectTextTrack(textTrack);\n    }\n    this.resetAllCues();\n    this._addCueChangeListener();\n  }\n\n  /**\n   * Select a new image track.\n   * @param {ImageTrack} imageTrack - The image track object to set.\n   * @returns {void}\n   */\n  selectImageTrack(imageTrack: ImageTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectImageTrack(imageTrack);\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.hideTextTrack();\n    }\n    this._removeCueChangeListeners();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to the media source extension logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * Apply ABR restriction\n   * @function applyABRRestriction\n   * @param {PKABRRestrictionObject} restriction - abr restriction config\n   * @returns {void}\n   * @public\n   */\n  applyABRRestriction(restriction: PKABRRestrictionObject): void {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.applyABRRestriction(restriction);\n    }\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.seekToLiveEdge();\n    }\n  }\n\n  isOnLiveEdge(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isOnLiveEdge();\n    }\n    return false;\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.getStartTimeOfDvrWindow() : 0;\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n  }\n\n  /**\n   * Start/resume playback.\n   * @public\n   * @returns {?Promise<*>} - play promise\n   */\n  play(): ?Promise<*> {\n    let playPromise = this._el.play();\n    if (playPromise) {\n      playPromise.catch(err => this.dispatchEvent(new FakeEvent(CustomEventType.PLAY_FAILED, {error: err})));\n    }\n    return playPromise;\n  }\n\n  /**\n   * Pause playback.\n   * @public\n   * @returns {void}\n   */\n  pause(): void {\n    return this._el.pause();\n  }\n\n  /**\n   * Load media.\n   * @param {number} startTime - Optional time to start the video from.\n   * @public\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._el.load();\n    return this._canLoadMediaSourceAdapterPromise\n      .then(() => {\n        return this._mediaSourceAdapter ? this._mediaSourceAdapter.load(startTime) : Promise.resolve({});\n      })\n      .catch(error => {\n        this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n        return Promise.reject(error);\n      });\n  }\n\n  /**\n   * Request the engine to enter picture in picture mode\n   * @public\n   * @returns {void}\n   */\n  enterPictureInPicture(): void {\n    try {\n      // Currently it's supported in chrome and in safari. So if we consider checking support before,\n      // we can use this flag to distinguish between the two. In the future we might need a different method.\n      // Second condition is because flow does not support this API yet\n      if (document.pictureInPictureEnabled && typeof this._el.requestPictureInPicture === 'function') {\n        this._el.requestPictureInPicture().catch(error => {\n          this.dispatchEvent(\n            new FakeEvent(\n              Html5EventType.ERROR,\n              new Error(Error.Severity.RECOVERABLE, Error.Category.PLAYER, Error.Code.ENTER_PICTURE_IN_PICTURE_FAILED, error)\n            )\n          );\n        });\n      } else if (typeof this._el.webkitSetPresentationMode === 'function') {\n        this._el.webkitSetPresentationMode('picture-in-picture');\n        // Safari does not fire this event but Chrome does, normalizing the behaviour\n        setTimeout(() => this.dispatchEvent(new FakeEvent(Html5EventType.ENTER_PICTURE_IN_PICTURE)), 0);\n      }\n    } catch (error) {\n      this.dispatchEvent(\n        new FakeEvent(\n          Html5EventType.ERROR,\n          new Error(Error.Severity.RECOVERABLE, Error.Category.PLAYER, Error.Code.ENTER_PICTURE_IN_PICTURE_FAILED, error)\n        )\n      );\n    }\n  }\n\n  /**\n   * Request the engine to exit picture in picture mode\n   * @public\n   * @returns {void}\n   */\n  exitPictureInPicture(): void {\n    try {\n      // Currently it's supported in chrome and in safari. So if we consider checking support before,\n      // we can use this flag to distinguish between the two. In the future we might need a different method.\n      // Second condition is because flow does not support this API yet\n      if (document.pictureInPictureEnabled && typeof document.exitPictureInPicture === 'function' && this._el === document.pictureInPictureElement) {\n        document.exitPictureInPicture().catch(error => {\n          this.dispatchEvent(\n            new FakeEvent(\n              Html5EventType.ERROR,\n              new Error(Error.Severity.RECOVERABLE, Error.Category.PLAYER, Error.Code.EXIT_PICTURE_IN_PICTURE_FAILED, error)\n            )\n          );\n        });\n      } else if (typeof this._el.webkitSetPresentationMode === 'function') {\n        this._el.webkitSetPresentationMode('inline');\n      }\n    } catch (error) {\n      this.dispatchEvent(\n        new FakeEvent(\n          Html5EventType.ERROR,\n          new Error(Error.Severity.RECOVERABLE, Error.Category.PLAYER, Error.Code.EXIT_PICTURE_IN_PICTURE_FAILED, error)\n        )\n      );\n    }\n  }\n\n  /**\n   * Check if the engine is in picture in picture mode\n   * @public\n   * @return {boolean} if the engine is in picture in picture mode or not\n   */\n  isPictureInPictureSupported(): boolean {\n    // due to a bug in shaka pip_webkit which sets pictureInPictureEnabled to true in unsupported devices like iphones we will\n    // first rely on the response of webkitSupportsPresentationMode (if exists) and only if not on the pictureInPictureEnabled property\n    if (typeof this._el.webkitSupportsPresentationMode === 'function') {\n      return this._el.webkitSupportsPresentationMode('picture-in-picture');\n    } else {\n      // $FlowFixMe\n      return !!document.pictureInPictureEnabled;\n    }\n  }\n\n  /**\n   *  Returns in-stream thumbnail for a chosen time.\n   * @param {number} time - playback time.\n   * @public\n   * @return {?ThumbnailInfo} - Thumbnail info\n   */\n  getThumbnail(time: number): ?ThumbnailInfo {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.getThumbnail(time);\n    }\n  }\n\n  /**\n   * Set a source.\n   * @param {string} source - Source to set.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.src = source;\n    }\n  }\n\n  /**\n   * Get the source url.\n   * @returns {string} - The source url.\n   * @public\n   */\n  get src(): string {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.src;\n    }\n    return '';\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._el ? this._el.currentTime : 0;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this._el) {\n      this._el.currentTime = to;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._el.duration;\n  }\n\n  get liveDuration(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.liveDuration : -1;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @public\n   * @returns {void}\n   */\n  set volume(vol: number): void {\n    this._el.volume = vol;\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {Number} - The volume value of the video element.\n   * @public\n   */\n  get volume(): number {\n    return this._el.volume;\n  }\n\n  /**\n   * Get paused state.\n   * @returns {boolean} - The paused value of the video element.\n   * @public\n   */\n  get paused(): boolean {\n    return this._el.paused;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {boolean} - The seeking value of the video element.\n   * @public\n   */\n  get seeking(): boolean {\n    return this._el.seeking;\n  }\n\n  /**\n   * Get the first seekable range (part) of the video in seconds.\n   * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n   * @public\n   */\n  get seekable(): TimeRanges {\n    return this._el.seekable;\n  }\n\n  /**\n   * Get the first played range (part) of the video in seconds.\n   * @returns {TimeRanges} - First played range (part) of the video in seconds.\n   * @public\n   */\n  get played(): TimeRanges {\n    return this._el.played;\n  }\n\n  /**\n   * Get the first buffered range (part) of the video in seconds.\n   * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n   * @public\n   */\n  get buffered(): TimeRanges {\n    return this._el.buffered;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The new mute value.\n   * @public\n   * @returns {void}\n   */\n  set muted(mute: boolean): void {\n    this._el.muted = mute;\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {boolean} - The muted value of the video element.\n   * @public\n   */\n  get muted(): boolean {\n    return this._el.muted;\n  }\n\n  /**\n   * Get the default mute value.\n   * @returns {boolean} - The defaultMuted of the video element.\n   * @public\n   */\n  get defaultMuted(): boolean {\n    return this._el.defaultMuted;\n  }\n\n  /**\n   * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @param {string} poster - The image url to be shown.\n   * @returns {void}\n   * @public\n   */\n  set poster(poster: string): void {\n    this._el.poster = poster;\n  }\n\n  /**\n   * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @returns {poster} - The image url.\n   * @public\n   */\n  get poster(): string {\n    return this._el.poster;\n  }\n\n  /**\n   * Specifies if and how the author thinks that the video should be loaded when the page loads.\n   * @param {string} preload - The preload value.\n   * @public\n   * @returns {void}\n   */\n  set preload(preload: string): void {\n    this._el.preload = preload;\n  }\n\n  /**\n   * Gets the preload value of the video element.\n   * @returns {string} - The preload value.\n   * @public\n   */\n  get preload(): string {\n    return this._el.preload;\n  }\n\n  /**\n   * Set if the video will automatically start playing as soon as it can do so without stopping.\n   * @param {boolean} autoplay - The autoplay value.\n   * @public\n   * @returns {void}\n   */\n  set autoplay(autoplay: boolean): void {\n    this._el.autoplay = autoplay;\n  }\n\n  /**\n   * Gets the autoplay value of the video element.\n   * @returns {boolean} - The autoplay value.\n   * @public\n   */\n  get autoplay(): boolean {\n    return this._el.autoplay;\n  }\n\n  /**\n   * Set to specifies that the video will start over again, every time it is finished.\n   * @param {boolean} loop - the loop value.\n   * @public\n   * @returns {void}\n   */\n  set loop(loop: boolean) {\n    this._el.loop = loop;\n  }\n\n  /**\n   * Gets the loop value of the video element.\n   * @returns {boolean} - The loop value.\n   * @public\n   */\n  get loop(): boolean {\n    return this._el.loop;\n  }\n\n  /**\n   * Set to specifies that video controls should be displayed.\n   * @param {boolean} controls - the controls value.\n   * @public\n   * @returns {void}\n   */\n  set controls(controls: boolean): void {\n    this._el.controls = controls;\n  }\n\n  /**\n   * Gets the controls value of the video element.\n   * @returns {boolean} - The controls value.\n   * @public\n   */\n  get controls(): boolean {\n    return this._el.controls;\n  }\n\n  /**\n   * Sets the current playback speed of the audio/video.\n   * @param {Number} playbackRate - The playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set playbackRate(playbackRate: number): void {\n    this._el.playbackRate = playbackRate;\n  }\n\n  /**\n   * Gets the current playback speed of the audio/video.\n   * @returns {Number} - The current playback speed value.\n   * @public\n   */\n  get playbackRate(): number {\n    return this._el.playbackRate;\n  }\n\n  /**\n   * Sets the default playback speed of the audio/video.\n   * @param {Number} defaultPlaybackRate - The default playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set defaultPlaybackRate(defaultPlaybackRate: number) {\n    this._el.defaultPlaybackRate = defaultPlaybackRate;\n  }\n\n  /**\n   * Gets the default playback speed of the audio/video.\n   * @returns {Number} - The default playback speed value.\n   * @public\n   */\n  get defaultPlaybackRate(): number {\n    return this._el.defaultPlaybackRate;\n  }\n\n  /**\n   * The ended property returns whether the playback of the audio/video has ended.\n   * @returns {boolean} - The ended value.\n   * @public\n   */\n  get ended(): boolean {\n    return this._el.ended;\n  }\n\n  /**\n   * The error property returns a MediaError object.\n   * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n   * @public\n   */\n  get error(): ?MediaError {\n    return this._el.error;\n  }\n\n  /**\n   * @returns {Number} - The current network state (activity) of the audio/video.\n   * @public\n   */\n  get networkState(): number {\n    return this._el.networkState;\n  }\n\n  /**\n   * Indicates if the audio/video is ready to play or not.\n   * @returns {Number} - The current ready state of the audio/video.\n   * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n   * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n   * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n   * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n   * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n   */\n  get readyState(): number {\n    return this._el.readyState;\n  }\n\n  /**\n   * @returns {Number} - The height of the video player, in pixels.\n   * @public\n   */\n  get videoHeight(): number {\n    return this._el.videoHeight;\n  }\n\n  /**\n   * @returns {Number} - The width of the video player, in pixels.\n   * @public\n   */\n  get videoWidth(): number {\n    return this._el.videoWidth;\n  }\n\n  /**\n   * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (playsinline) {\n      this._el.setAttribute('playsinline', '');\n    } else {\n      this._el.removeAttribute('playsinline');\n    }\n  }\n\n  /**\n   * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n   */\n  get playsinline(): boolean {\n    return this._el.getAttribute('playsinline') === '';\n  }\n\n  /**\n   * Set crossOrigin attribute.\n   * @param {?string} crossOrigin - 'anonymous' or 'use-credentials'\n   */\n  set crossOrigin(crossOrigin: ?string): void {\n    if (typeof crossOrigin === 'string') {\n      this._el.setAttribute('crossorigin', crossOrigin);\n    } else {\n      this._el.removeAttribute('crossorigin');\n    }\n  }\n\n  /**\n   * Get crossOrigin attribute.\n   * @returns {?string} - 'anonymous' or 'use-credentials'\n   */\n  get crossOrigin(): ?string {\n    return this._el.getAttribute('crossorigin');\n  }\n\n  /**\n   * get the playback rates\n   * @return {number[]} - playback rates\n   */\n  get playbackRates(): Array<number> {\n    return Html5.PLAYBACK_RATES;\n  }\n\n  /**\n   * get if the engine's video element is the one in the PIP\n   * @return {boolean} boolean - is in PIP\n   */\n  get isInPictureInPicture(): boolean {\n    // Check if the engine's video element is the one in the PIP\n    return (\n      (!!document.pictureInPictureElement && document.pictureInPictureElement != null && this._el === document.pictureInPictureElement) ||\n      (!!this._el.webkitPresentationMode && this._el.webkitPresentationMode === 'picture-in-picture')\n    );\n  }\n\n  /**\n   * Initializes the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @private\n   * @returns {void}\n   */\n  _init(source: PKMediaSourceObject, config: Object): void {\n    this._config = config;\n    this._reset = false;\n    this._loadMediaSourceAdapter(source);\n    this.attach();\n  }\n\n  /**\n   * Creates a video element dom object.\n   * @param {string} playerId - the id to be set as the key of the video element\n   * @private\n   * @returns {void}\n   */\n  _createVideoElement(playerId: string): void {\n    this._el = Html5.videoElementStore[playerId] || Utils.Dom.createElement('video');\n    this._el.id = Utils.Generator.uniqueId(5);\n    this._el.controls = false;\n  }\n\n  /**\n   * Loads the appropriate media source extension adapter.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadMediaSourceAdapter(source: PKMediaSourceObject): void {\n    this._mediaSourceAdapter = MediaSourceProvider.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n    if (this._mediaSourceAdapter) {\n      this._droppedFramesWatcher = new DroppedFramesWatcher(this._mediaSourceAdapter, this._config.abr, this._el);\n    }\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(): void {\n    let textTrackEl = Array.from(this._el.textTracks).find(track => PKTextTrack.isNativeTextTrack(track) && track.mode !== PKTextTrack.MODE.DISABLED);\n    if (textTrackEl) {\n      this._eventManager.listen(textTrackEl, 'cuechange', (e: FakeEvent) => this._onCueChange(e));\n    }\n  }\n\n  /**\n   * Remove cuechange listeners from textTracks\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListeners(): void {\n    Array.from(this._el.textTracks)\n      .filter(track => !PKTextTrack.isMetaDataTrack(track))\n      .forEach(track => {\n        this._eventManager.unlisten(track, 'cuechange');\n      });\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let activeCues: TextTrackCueList = e.currentTarget.activeCues;\n    let normalizedActiveCues = getActiveCues(activeCues);\n    this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: normalizedActiveCues}));\n  }\n\n  /**\n   * set hasBeenReset to true for all the cues. (use case: when cues should be recalculated for display)\n   * @returns {void}\n   */\n  resetAllCues(): void {\n    let activeTextTrack = Array.from(this._el.textTracks).find(\n      track => PKTextTrack.isNativeTextTrack(track) && track.mode !== PKTextTrack.MODE.DISABLED\n    );\n    if (activeTextTrack) {\n      for (let i = 0; i < activeTextTrack.cues.length; i++) {\n        activeTextTrack.cues[i].hasBeenReset = true;\n      }\n    }\n  }\n\n  /**\n   * Handles errors from the video element\n   * @returns {void}\n   * @private\n   */\n  _handleVideoError(): void {\n    if (!this._el.error) return;\n    const code = this._el.error.code;\n    if (code === window.MediaError.MEDIA_ERR_ABORTED) {\n      // Ignore this error code.js, which should only occur when navigating away or\n      // deliberately stopping playback of HTTP content.\n      return;\n    }\n\n    // Extra error information from MS Edge and IE11:\n    let extended = this._getMsExtendedError();\n\n    // Extra error information from Chrome:\n    // $FlowFixMe\n    const message = this._el.error.message;\n    if (this._mediaSourceAdapter && !this._mediaSourceAdapter.handleMediaError(this._el.error)) {\n      const error = new Error(Error.Severity.CRITICAL, Error.Category.MEDIA, Error.Code.VIDEO_ERROR, {\n        code: code,\n        extended: extended,\n        message: message\n      });\n      this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n    }\n  }\n\n  _handleWaiting(): void {\n    let playing = false;\n    this._eventManager.listenOnce(this._el, Html5EventType.PLAYING, () => (playing = true));\n    setTimeout(() => {\n      // prevent sending waiting event for too short buffering\n      if (!playing) {\n        this.dispatchEvent(new FakeEvent(Html5EventType.WAITING));\n      }\n    }, SHORT_BUFFERING_TIMEOUT);\n  }\n\n  /**\n   * more info about the error\n   * @returns {string} info about the video element error\n   * @private\n   */\n  _getMsExtendedError(): string {\n    // $FlowFixMe\n    let extended = this._el.error.msExtendedCode;\n    if (extended) {\n      // Convert to unsigned:\n      if (extended < 0) {\n        extended += Math.pow(2, 32);\n      }\n      // Format as hex:\n      extended = extended.toString(16);\n    }\n    return extended;\n  }\n\n  _handleMetadataTrackEvents(): void {\n    const listenToCueChange = metadataTrack => {\n      metadataTrack.mode = PKTextTrack.MODE.HIDDEN;\n      this._eventManager.listen(metadataTrack, 'cuechange', () => {\n        let activeCues = [];\n        Array.from(this._el.textTracks).forEach((track: TextTrack) => {\n          if (PKTextTrack.isMetaDataTrack(track)) {\n            activeCues = activeCues.concat(getActiveCues(track.activeCues));\n          }\n        });\n        activeCues = activeCues.sort((a: Cue, b: Cue) => {\n          return a.startTime - b.startTime;\n        });\n        this.dispatchEvent(new FakeEvent(CustomEventType.TIMED_METADATA, {cues: activeCues}));\n        this.dispatchEvent(\n          new FakeEvent(CustomEventType.TIMED_METADATA_CHANGE, {\n            cues: activeCues.map(cue => createTimedMetadata(cue))\n          })\n        );\n      });\n    };\n\n    Array.from(this._el.textTracks).forEach((track: TextTrack) => {\n      if (PKTextTrack.isMetaDataTrack(track)) {\n        listenToCueChange(track);\n      }\n    });\n\n    this._eventManager.listen(this._el.textTracks, 'addtrack', (event: any) => {\n      if (PKTextTrack.isMetaDataTrack(event.track)) {\n        listenToCueChange(event.track);\n      }\n    });\n\n    this._eventManager.listen(this._el.textTracks, 'change', () => {\n      Array.from(this._el.textTracks).forEach((track: TextTrack) => {\n        if (PKTextTrack.isMetaDataTrack(track) && track.mode !== PKTextTrack.MODE.HIDDEN) {\n          track.mode = PKTextTrack.MODE.HIDDEN;\n        }\n      });\n    });\n  }\n\n  get targetBuffer(): number {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.targetBuffer;\n    }\n    return NaN;\n  }\n\n  get availableBuffer(): number {\n    let retVal = 0;\n    if (this.buffered) {\n      for (let i = 0; i < this.buffered.length; i++) {\n        // find the relevant buffer time range containing the current time\n        if (this.buffered.start(i) <= this._el.currentTime && this._el.currentTime <= this.buffered.end(i)) {\n          retVal = this.buffered.end(i) - this._el.currentTime;\n        }\n      }\n    }\n    return retVal;\n  }\n\n  addTextTrack(kind: string, label?: string, language?: string): ?TextTrack {\n    return this._el.addTextTrack(kind, label, language);\n  }\n\n  /**\n   * get the native text tracks\n   * @function getNativeTextTracks\n   * @returns {Array<TextTrack>} - The native TextTracks array.\n   * @public\n   */\n  getNativeTextTracks(): Array<TextTrack> {\n    return Array.from(this._el.textTracks);\n  }\n\n  getDrmInfo(): ?PKDrmDataObject {\n    return this._mediaSourceAdapter?.getDrmInfo();\n  }\n}\n","// @flow\nimport Error from '../../../../error/error';\nimport getLogger from '../../../../utils/logger';\nimport * as Utils from '../../../../utils/util';\nimport {RequestType} from '../../../../enums/request-type';\nimport type {CodeType} from '../../../../error/code';\nimport type {SeverityType} from '../../../../error/severity';\nimport type {CategoryType} from '../../../../error/category';\nimport {DrmScheme} from '../../../../drm/drm-scheme';\nimport EventManager from '../../../../event/event-manager';\n\ntype WebkitEventsType = {[name: string]: string};\n\nconst KeySystem: string = 'com.apple.fps.1_0';\nconst WebkitEvents: WebkitEventsType = {\n  NEED_KEY: 'webkitneedkey',\n  KEY_MESSAGE: 'webkitkeymessage',\n  KEY_ADDED: 'webkitkeyadded',\n  KEY_ERROR: 'webkitkeyerror'\n};\n\ntype FairPlayDrmConfigType = {licenseUrl: string, certificate?: string, network: {requestFilter?: Function, responseFilter: Function}};\n\nclass FairPlayDrmHandler {\n  static WebkitEvents: WebkitEventsType = WebkitEvents;\n\n  _logger = getLogger('FairPlayDrmHandler');\n  _eventManager: EventManager;\n  _keySession: any;\n  _config: FairPlayDrmConfigType;\n  _onWebkitNeedKeyHandler: Function;\n  _errorCallback: Function;\n  _drmResponseCallback: Function;\n  _videoElement: HTMLVideoElement;\n  _retryLicenseRequest: number = 4;\n  _licenseRequestTime: number;\n  _defaultConfig: FairPlayDrmConfigType = {\n    licenseUrl: '',\n    certificate: '',\n    network: {\n      responseFilter: (type, response) => {\n        let responseObj = {};\n        try {\n          const dataView = new DataView(response.data);\n          const decoder = new TextDecoder();\n          const keyText = decoder.decode(dataView).trim();\n          responseObj = JSON.parse(keyText);\n        } catch (error) {\n          this._onError((Error.Code: CodeType).BAD_FAIRPLAY_RESPONSE, {\n            error,\n            responseText: response.data\n          });\n          return;\n        }\n        let isValidResponse = FairPlayDrmHandler._validateResponse(responseObj);\n        if (isValidResponse.valid) {\n          response.data = FairPlayDrmHandler._base64DecodeUint8Array(responseObj.ckc);\n        } else {\n          this._onError((Error.Code: CodeType).BAD_FAIRPLAY_RESPONSE, isValidResponse);\n        }\n      }\n    }\n  };\n\n  /**\n   * Fairplay DRM handler\n   * @param {HTMLVideoElement} videoElement - the video element\n   * @param {FairPlayDrmConfigType} config - config object\n   * @param {Function} errorCallback - error callback function\n   * @param {Function} drmResponseCallback - drm license response callback function\n   */\n  constructor(videoElement: HTMLVideoElement, config: FairPlayDrmConfigType, errorCallback: Function, drmResponseCallback: Function): void {\n    this._config = Utils.Object.mergeDeep({}, this._defaultConfig, config);\n    this._errorCallback = errorCallback;\n    this._drmResponseCallback = drmResponseCallback;\n    this._videoElement = videoElement;\n    this._onWebkitNeedKeyHandler = (e: Event) => this._onWebkitNeedKey(e);\n    this._eventManager = new EventManager();\n    this._eventManager.listen(this._videoElement, WebkitEvents.NEED_KEY, this._onWebkitNeedKeyHandler);\n  }\n\n  _onWebkitNeedKey(event: any): void {\n    this._logger.debug('Webkit need key triggered');\n    let videoElement = event.target;\n    let initData = event.initData;\n\n    let contentId = FairPlayDrmHandler._extractContentId(initData);\n    let fpsCertificate = FairPlayDrmHandler._base64DecodeUint8Array(this._config.certificate);\n\n    initData = FairPlayDrmHandler._concatInitDataIdAndCertificate(initData, contentId, fpsCertificate);\n\n    if (!videoElement.webkitKeys) {\n      let keySystem = this._selectKeySystem();\n      this._logger.debug('Sets media keys');\n      videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n    }\n    if (!videoElement.webkitKeys) {\n      this._onError((Error.Code: CodeType).COULD_NOT_CREATE_MEDIA_KEYS);\n    }\n    this._logger.debug('Creates session');\n    this._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n    if (!this._keySession) {\n      this._onError((Error.Code: CodeType).COULD_NOT_CREATE_KEY_SESSION);\n    }\n    this._keySession.contentId = contentId;\n    this._eventManager.listen(this._keySession, WebkitEvents.KEY_MESSAGE, (e: Event) => this._onWebkitKeyMessage(e));\n    this._eventManager.listen(this._keySession, WebkitEvents.KEY_ADDED, () => this._onWebkitKeyAdded());\n    this._eventManager.listen(this._keySession, WebkitEvents.KEY_ERROR, (e: Event) => this._onWebkitKeyError(e));\n  }\n\n  getDrmInfo(): PKDrmDataObject {\n    const {certificate, licenseUrl} = this._config;\n    return {certificate, licenseUrl, scheme: DrmScheme.FAIRPLAY};\n  }\n\n  destroy(): void {\n    this._eventManager.destroy();\n    this._keySession.close();\n    this._keySession = null;\n  }\n\n  _onWebkitKeyMessage(event: any): void {\n    this._logger.debug('Webkit key message triggered');\n    let message = event.message;\n    let request = new XMLHttpRequest();\n    request.responseType = 'arraybuffer';\n    this._eventManager.listenOnce(request, 'load', (e: Event) => this._licenseRequestLoaded(e));\n    const pkRequest: PKRequestObject = {\n      url: this._config.licenseUrl,\n      body: FairPlayDrmHandler._base64EncodeUint8Array(message),\n      headers: {}\n    };\n    let requestFilterPromise;\n    const requestFilter = this._config.network.requestFilter;\n    if (requestFilter) {\n      this._logger.debug('Apply request filter');\n      try {\n        requestFilterPromise = requestFilter(RequestType.LICENSE, pkRequest);\n      } catch (error) {\n        requestFilterPromise = Promise.reject(error);\n      }\n    }\n    requestFilterPromise = requestFilterPromise || Promise.resolve(pkRequest);\n    requestFilterPromise\n      .then(updatedRequest => {\n        request.open('POST', updatedRequest.url, true);\n        let setContentType = true;\n        if (updatedRequest.headers) {\n          Object.entries(updatedRequest.headers).forEach(([header, value]) => {\n            typeof value === 'string' && request.setRequestHeader(header, value);\n            setContentType && (setContentType = header.toLowerCase() !== 'content-type');\n          });\n        }\n        if (typeof updatedRequest.withCredentials === 'boolean') {\n          request.withCredentials = updatedRequest.withCredentials;\n        }\n        setContentType && request.setRequestHeader('Content-type', 'application/json');\n        this._logger.debug('Ready for license request');\n        request.onerror = () => {\n          this._onError((Error.Code: CodeType).LICENSE_REQUEST_FAILED, {\n            status: request.status,\n            responseText: request.responseText\n          });\n        };\n        this._licenseRequestTime = Date.now();\n        request.send(updatedRequest.body);\n      })\n      .catch(error => {\n        this._errorCallback(\n          new Error(\n            (Error.Severity: SeverityType).CRITICAL,\n            (Error.Category: CategoryType).NETWORK,\n            (Error.Code: CodeType).REQUEST_FILTER_ERROR,\n            error\n          )\n        );\n        this.destroy();\n      });\n  }\n\n  _onWebkitKeyAdded(): void {\n    this._logger.debug('Decryption key was added to session');\n  }\n\n  _onWebkitKeyError(e: any): void {\n    this._logger.error('A decryption key error was encountered', e);\n    if (this._retryLicenseRequest <= 0) {\n      this._onError((Error.Code: CodeType).LICENSE_REQUEST_FAILED, e.target.error);\n    }\n    this._retryLicenseRequest--;\n  }\n\n  _licenseRequestLoaded(event: any): void {\n    this._logger.debug('License request loaded');\n    let request = event.target;\n    if (request.status > 299) {\n      this._onError((Error.Code: CodeType).LICENSE_REQUEST_FAILED, {\n        status: request.status,\n        error: request.responseText\n      });\n      return;\n    }\n    if (this._drmResponseCallback) {\n      const licenseTime = Date.now() - this._licenseRequestTime;\n      this._drmResponseCallback({licenseTime: licenseTime / 1000, scheme: DrmScheme.FAIRPLAY});\n    }\n    const {responseURL: url, response: data} = request;\n    const originalUrl = this._config.licenseUrl;\n    const headers = Utils.Http.convertHeadersToDictionary(request.getAllResponseHeaders());\n\n    const pkResponse: PKResponseObject = {url, originalUrl, data, headers};\n    this._logger.debug('Apply response filter');\n    let responseFilterPromise;\n    try {\n      responseFilterPromise = this._config.network.responseFilter(RequestType.LICENSE, pkResponse);\n    } catch (error) {\n      responseFilterPromise = Promise.reject(error);\n    }\n    responseFilterPromise = responseFilterPromise || Promise.resolve(pkResponse);\n    responseFilterPromise\n      .then(updatedResponse => {\n        this._keySession.update(updatedResponse.data);\n      })\n      .catch(error => {\n        this._errorCallback(\n          new Error(\n            (Error.Severity: SeverityType).CRITICAL,\n            (Error.Category: CategoryType).NETWORK,\n            (Error.Code: CodeType).RESPONSE_FILTER_ERROR,\n            error\n          )\n        );\n        this.destroy();\n      });\n  }\n\n  _onError(code: number, data?: Object): void {\n    this._errorCallback(new Error((Error.Severity: SeverityType).CRITICAL, (Error.Category: CategoryType).DRM, code, data));\n  }\n\n  static _validateResponse(responseObj: Object): Object {\n    if ((responseObj.message && responseObj.message.indexOf('error') > 0) || responseObj.reference === null || responseObj.status_code === 500) {\n      return {\n        //todo: create & edit an error object\n        valid: false,\n        details: 'internal server error' // would be ERROR.INTERNAL or something like that\n      };\n    } else if (responseObj.ckc === '') {\n      return {\n        valid: false,\n        details: 'ckc is missing' // would be ERROR.MISSING_CKC or something like that\n      };\n    } else {\n      return {\n        valid: true\n      };\n    }\n  }\n\n  _selectKeySystem(): ?string {\n    let keySystem = null;\n    if (window.WebKitMediaKeys.isTypeSupported(KeySystem, 'video/mp4')) {\n      keySystem = KeySystem;\n    } else {\n      this._logger.warn('Key System not supported');\n    }\n    return keySystem;\n  }\n\n  static _extractContentId(initData: Uint8Array): string {\n    let link = document.createElement('a');\n    link.href = FairPlayDrmHandler._arrayToString(initData);\n    return link.hostname;\n  }\n\n  static _arrayToString(array: Uint8Array): string {\n    return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n  }\n\n  static _base64DecodeUint8Array(input?: string): Uint8Array {\n    let raw = window.atob(input);\n    let rawLength = raw.length;\n    let array = new Uint8Array(new ArrayBuffer(rawLength));\n    for (let i = 0; i < rawLength; i++) {\n      array[i] = raw.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _concatInitDataIdAndCertificate(initData: Uint8Array, id: string | Uint16Array, cert: Uint8Array): Uint8Array {\n    if (typeof id === 'string') {\n      id = FairPlayDrmHandler._stringToArray(id);\n    }\n    let offset = 0;\n    let buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n    let dataView = new DataView(buffer);\n\n    let initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initData.byteLength;\n\n    dataView.setUint32(offset, id.byteLength, true);\n    offset += 4;\n\n    let idArray = new Uint8Array(buffer, offset, id.byteLength);\n    idArray.set(id);\n    offset += idArray.byteLength;\n\n    dataView.setUint32(offset, cert.byteLength, true);\n    offset += 4;\n\n    let certArray = new Uint8Array(buffer, offset, cert.byteLength);\n    certArray.set(cert);\n\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n  }\n\n  static _stringToArray(string: string): Uint16Array {\n    let buffer = new ArrayBuffer(string.length * 2);\n    let array = new Uint16Array(buffer);\n    for (let i = 0, strLen = string.length; i < strLen; i++) {\n      array[i] = string.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _base64EncodeUint8Array(input: Uint8Array): string {\n    let keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let output = '';\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    while (i < input.length) {\n      chr1 = input[i++];\n      chr2 = i < input.length ? input[i++] : Number.NaN;\n      chr3 = i < input.length ? input[i++] : Number.NaN;\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n  }\n}\n\nFairPlayDrmHandler.WebkitEvents = WebkitEvents;\n\nexport {FairPlayDrmHandler};\nexport type {FairPlayDrmConfigType};\n","//@flow\nimport {CustomEventType, Html5EventType} from '../../../../event/event-type';\nimport Track from '../../../../track/track';\nimport VideoTrack from '../../../../track/video-track';\nimport AudioTrack from '../../../../track/audio-track';\nimport PKTextTrack from '../../../../track/text-track';\nimport {RequestType} from '../../../../enums/request-type';\nimport BaseMediaSourceAdapter from '../base-media-source-adapter';\nimport {getSuitableSourceForResolution} from '../../../../utils/resolution';\nimport {filterTracksByRestriction} from '../../../../utils/restrictions';\nimport * as Utils from '../../../../utils/util';\nimport FairPlay from '../../../../drm/fairplay';\nimport Env from '../../../../utils/env';\nimport Error from '../../../../error/error';\nimport defaultConfig from './native-adapter-default-config';\nimport type {FairPlayDrmConfigType} from './fairplay-drm-handler';\nimport {FairPlayDrmHandler} from './fairplay-drm-handler';\n\nconst BACK_TO_FOCUS_TIMEOUT: number = 1000;\nconst MAX_MEDIA_RECOVERY_ATTEMPTS: number = 3;\nconst NUDGE_SEEK_AFTER_FOCUS: number = 0.1;\nconst SAFARI_BUFFERED_SEGMENTS_COUNT: number = 3;\nconst LIVE_DURATION_INTERVAL_MS = 1000;\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nexport default class NativeAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  static id: string = 'NativeAdapter';\n\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(NativeAdapter.id);\n  /**\n   * static video element for canPlayType testing\n   * @member {} TEST_VIDEO\n   * @type {HTMLVideoElement}\n   * @static\n   */\n  static TEST_VIDEO: HTMLVideoElement = Utils.Dom.createElement('video');\n  /**\n   * The DRM protocols implementations for native adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  static _drmProtocols: Array<IDrmProtocol> = [FairPlay];\n  /**\n   * The DRM protocol for the current playback.\n   * @type {?Function}\n   * @private\n   * @static\n   */\n  static _drmProtocol: ?IDrmProtocol = null;\n  /**\n   * The supported progressive mime types by the native adapter.\n   * @member {Array<string>} _progressiveMimeTypes\n   * @static\n   * @private\n   */\n  static _progressiveMimeTypes: Array<string> = ['video/mp4', 'audio/mp3'];\n  /**\n   * The DRM handler playback.\n   * @type {?FairPlayDrmHandler}\n   * @private\n   */\n  _drmHandler: ?FairPlayDrmHandler;\n  /**\n   * The original progressive sources\n   * @member {Array<PKMediaSourceObject>} - _progressiveSources\n   * @private\n   */\n  _progressiveSources: Array<PKMediaSourceObject>;\n  /**\n   * The player tracks.\n   * @member {Array<Track>} - _playerTracks\n   * @private\n   */\n  _playerTracks: Array<Track>;\n  /**\n   * The id of _liveDurationChangeInterval\n   * @member {?number} - _liveDurationChangeInterval\n   * @private\n   */\n  _liveDurationChangeInterval: ?IntervalID;\n  /**\n   * The live edge value\n   * @member {number} - _liveEdge\n   * @private\n   */\n  _liveEdge: number;\n  /**\n   * Id for interval that starts upon waiting/stalling event and check if we are offline\n   * @member {?TimeoutID} - _heartbeatTimeoutId\n   * @private\n   */\n  _heartbeatTimeoutId: ?TimeoutID;\n  /**\n   * video dimensions for native check if video track change and which video dimensions is the selected track\n   * @member {?PKVideoDimensionsObject} - video dimensions\n   * @private\n   */\n  _videoDimensions: ?PKVideoDimensionsObject;\n\n  _loadPromiseReject: ?Function;\n\n  _lastTimeUpdate: number = 0;\n\n  _waitingEventTriggered: ?boolean = false;\n\n  _wasCurrentTimeSetSuccessfully: boolean;\n\n  _segmentDuration: number = 0;\n\n  /**\n   * A counter to track the number of attempts to recover from media error\n   * @type {number}\n   * @private\n   */\n  _mediaErrorRecoveryAttempts: number = 0;\n\n  /**\n   * The last time detach occurred\n   * @type {number}\n   * @private\n   */\n  _lastTimeDetach: number = NaN;\n\n  /**\n   * The start time after attach\n   * @type {number}\n   * @private\n   */\n  _startTimeAttach: number = NaN;\n  /**\n   * Map from our text track to native text track\n   * @type {number}\n   * @private\n   */\n  _nativeTextTracksMap = {};\n  /**\n   *\n   * @type {number}\n   * @private\n   */\n  _captionsHidden: boolean = false;\n  /**\n   * Checks if NativeAdapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the native adapter can play a specific mime type\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canPlayType = false;\n    if (typeof mimeType === 'string') {\n      canPlayType = !!NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase());\n    }\n    NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * Checks if NativeAdapter can play a given drm data.\n   * @function canPlayDrm\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @returns {boolean} - Whether the native adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(drmData: Array<Object>, drmConfig: PKDrmConfigObject): boolean {\n    NativeAdapter._drmProtocol = null;\n    for (let drmProtocol of NativeAdapter._drmProtocols) {\n      if (drmProtocol.isConfigured(drmData, drmConfig)) {\n        NativeAdapter._drmProtocol = drmProtocol;\n        break;\n      }\n    }\n    if (!NativeAdapter._drmProtocol) {\n      for (let drmProtocol of NativeAdapter._drmProtocols) {\n        if (drmProtocol.canPlayDrm(drmData)) {\n          NativeAdapter._drmProtocol = drmProtocol;\n        }\n      }\n    }\n    return !!NativeAdapter._drmProtocol;\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {PKMediaSourceObject} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): IMediaSourceAdapter {\n    const adapterConfig: Object = {\n      displayTextTrack: false,\n      progressiveSources: []\n    };\n    if (Utils.Object.hasPropertyPath(config, 'text.useNativeTextTrack')) {\n      adapterConfig.displayTextTrack = Utils.Object.getPropertyPath(config, 'text.useNativeTextTrack');\n    }\n    if (Utils.Object.hasPropertyPath(config, 'sources.progressive')) {\n      adapterConfig.progressiveSources = Utils.Object.getPropertyPath(config, 'sources.progressive');\n    }\n    if (Utils.Object.hasPropertyPath(config, 'text')) {\n      adapterConfig.enableCEA708Captions = config.text.enableCEA708Captions;\n      adapterConfig.captionsTextTrack1Label = config.text.captionsTextTrack1Label;\n      adapterConfig.captionsTextTrack1LanguageCode = config.text.captionsTextTrack1LanguageCode;\n      adapterConfig.captionsTextTrack2Label = config.text.captionsTextTrack2Label;\n      adapterConfig.captionsTextTrack2LanguageCode = config.text.captionsTextTrack2LanguageCode;\n    }\n    if (Utils.Object.hasPropertyPath(config, 'playback')) {\n      if (Utils.Object.hasPropertyPath(config.playback, 'options.html5.native')) {\n        Utils.Object.mergeDeep(adapterConfig, config.playback.options.html5.native);\n      }\n    }\n    if (Utils.Object.hasPropertyPath(config, 'abr')) {\n      const abr = config.abr;\n      if (abr.restrictions) {\n        Utils.Object.createPropertyPath(adapterConfig, 'abr.restrictions', abr.restrictions);\n      }\n    }\n    adapterConfig.network = config.network;\n    return new this(videoElement, source, adapterConfig);\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n   * @param {PKMediaSourceObject} source - The source object\n   * @param {Object} config - The player configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object) {\n    NativeAdapter._logger.debug('Creating adapter');\n    super(videoElement, source, config);\n    this._config = Utils.Object.mergeDeep({}, defaultConfig, this._config);\n    this._progressiveSources = config.progressiveSources;\n    this._liveEdge = 0;\n  }\n\n  /**\n   * dispatches an error (is given to a class the cannot dispatch, like static fair play class)\n   * @private\n   * @param {Error} error - the error to dispatch\n   * @returns {void}\n   */\n  _dispatchErrorCallback(error: Error): void {\n    this._trigger(Html5EventType.ERROR, error);\n  }\n\n  /**\n   * dispatches the license response time after received\n   * @private\n   * @param {number} data - an object containing data regarding the license load\n   * @returns {void}\n   */\n  _dispatchDRMLicenseLoaded(data: any): void {\n    this._trigger(CustomEventType.DRM_LICENSE_LOADED, data);\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n  _maybeSetDrmPlayback(): void {\n    if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n      const drmConfig: FairPlayDrmConfigType = {\n        licenseUrl: '',\n        certificate: '',\n        network: this._config.network\n      };\n      NativeAdapter._drmProtocol.setDrmPlayback(drmConfig, this._sourceObj.drmData);\n      this._drmHandler = new FairPlayDrmHandler(\n        this._videoElement,\n        drmConfig,\n        error => this._dispatchErrorCallback(error),\n        data => this._dispatchDRMLicenseLoaded(data)\n      );\n    }\n  }\n\n  /**\n   * Set the suitable progressive source according the current resolution\n   * @function _setProgressiveSource\n   * @returns {void}\n   * @private\n   */\n  _setProgressiveSource(): void {\n    let suitableTrack = getSuitableSourceForResolution(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n    if (suitableTrack) {\n      this._sourceObj = suitableTrack;\n    }\n  }\n\n  /**\n   * Checks if the playback source is progressive\n   * @function _isProgressivePlayback\n   * @returns {boolean} - is progressive source\n   * @private\n   */\n  _isProgressivePlayback(): boolean {\n    return this._sourceObj ? NativeAdapter._progressiveMimeTypes.includes(this._sourceObj.mimetype.toLowerCase()) : false;\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._wasCurrentTimeSetSuccessfully = false;\n    this._maybeSetDrmPlayback();\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve, reject) => {\n        this._lastTimeUpdate = startTime || 0;\n        const playbackStartTime = this._startTimeAttach || startTime || 0;\n        this._loadPromiseReject = reject;\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, () => this._onLoadedData(resolve, playbackStartTime));\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.PLAYING, () => this._onPlaying(playbackStartTime));\n        this._eventManager.listen(this._videoElement, Html5EventType.TIME_UPDATE, () => this._onTimeUpdate());\n        this._eventManager.listen(this._videoElement, Html5EventType.PLAY, () => this._resetHeartbeatTimeout());\n        this._eventManager.listen(this._videoElement, Html5EventType.PAUSE, () => this._clearHeartbeatTimeout());\n        this._eventManager.listen(this._videoElement, Html5EventType.ENDED, () => this._clearHeartbeatTimeout());\n        this._eventManager.listen(this._videoElement, Html5EventType.ABORT, () => this._clearHeartbeatTimeout());\n        this._eventManager.listen(this._videoElement, Html5EventType.SEEKED, () => this._syncCurrentTime());\n        this._eventManager.listen(this._videoElement, Html5EventType.WAITING, () => (this._waitingEventTriggered = true));\n        this._eventManager.listen(this._videoElement, Html5EventType.PLAYING, () => (this._waitingEventTriggered = false));\n        // Sometimes when playing live in safari and switching between tabs the currentTime goes back with no seek events\n        this._eventManager.listen(window, 'focus', () => {\n          setTimeout(() => {\n            if (Env.isIOS) {\n              // In IOS HLS, sometimes when coming back from lock screen/Idle mode, the stream will get stuck, and only a small seek nudge will fix it.\n              this._videoElement.currentTime =\n                this._videoElement.currentTime > NUDGE_SEEK_AFTER_FOCUS ? this._videoElement.currentTime - NUDGE_SEEK_AFTER_FOCUS : 0;\n            }\n            this._syncCurrentTime();\n          }, BACK_TO_FOCUS_TIMEOUT);\n        });\n        if (this._isProgressivePlayback()) {\n          this._setProgressiveSource();\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._setSrc().then(() => {\n            this._trigger(CustomEventType.ABR_MODE_CHANGED, {mode: this._isProgressivePlayback() ? 'manual' : 'auto'});\n            this._videoElement.load();\n          });\n        } else {\n          this._videoElement.load();\n        }\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * handle decode error - reload the video and seek to last currentTime\n   * @param {?MediaError}error - the error object to be printed to log\n   * @private\n   * @returns {void}\n   */\n  _handleDecodeError(error: MediaError): void {\n    NativeAdapter._logger.debug('handleDecodeError', error);\n    const prevCurrTime = this._videoElement.currentTime;\n    const prevActiveAudioTrack = this._getActivePKAudioTrack();\n    const prevActiveTextTrack = this._getActivePKTextTrack();\n    this._videoElement.load();\n    this._eventManager.listenOnce(this._videoElement, Html5EventType.PLAYING, () => {\n      this._mediaErrorRecoveryAttempts = 0;\n    });\n\n    this._eventManager.listenOnce(this._videoElement, Html5EventType.CAN_PLAY, () => {\n      this._videoElement.currentTime = prevCurrTime;\n      this._videoElement.play();\n      this._videoElement.pause();\n      if (prevActiveAudioTrack) {\n        this.selectAudioTrack(prevActiveAudioTrack);\n      }\n      if (prevActiveTextTrack) {\n        this.selectTextTrack(prevActiveTextTrack);\n      } else {\n        this.disableNativeTextTracks();\n      }\n    });\n  }\n\n  handleMediaError(error: ?MediaError): boolean {\n    if (this._loadPromiseReject) {\n      this._loadPromiseReject(new Error(Error.Severity.CRITICAL, Error.Category.MEDIA, Error.Code.NATIVE_ADAPTER_LOAD_FAILED, error));\n      return true;\n    } else if (error && error.code === window.MediaError.MEDIA_ERR_DECODE) {\n      this._mediaErrorRecoveryAttempts++;\n      if (this._mediaErrorRecoveryAttempts <= MAX_MEDIA_RECOVERY_ATTEMPTS) {\n        this._handleDecodeError(error);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * attach media - return the media source to handle the video tag\n   * @public\n   * @returns {void}\n   */\n  attachMediaSource(): void {\n    this._startTimeAttach = this._lastTimeDetach;\n    this._lastTimeDetach = NaN;\n  }\n\n  /**\n   * detach media - will remove the media source from handling the video\n   * @public\n   * @returns {void}\n   */\n  detachMediaSource(): void {\n    this._lastTimeDetach = this._videoElement.currentTime;\n    if (this._videoElement && this._videoElement.src) {\n      Utils.Dom.setAttribute(this._videoElement, 'src', '');\n      Utils.Dom.removeAttribute(this._videoElement, 'src');\n    }\n    this._loadPromise = null;\n  }\n\n  _setSrc(): Promise<*> {\n    const pkRequest: PKRequestObject = {url: this._sourceObj ? this._sourceObj.url : '', body: null, headers: {}};\n    let requestFilterPromise;\n    if (typeof Utils.Object.getPropertyPath(this._config, 'network.requestFilter') === 'function') {\n      try {\n        NativeAdapter._logger.debug('Apply request filter');\n        requestFilterPromise = this._config.network.requestFilter(RequestType.MANIFEST, pkRequest);\n      } catch (error) {\n        requestFilterPromise = Promise.reject(error);\n      }\n    }\n    requestFilterPromise = requestFilterPromise || Promise.resolve(pkRequest);\n    requestFilterPromise\n      .then(updatedRequest => {\n        this._videoElement.src = updatedRequest.url;\n      })\n      .catch(error => {\n        this._trigger(Html5EventType.ERROR, new Error(Error.Severity.CRITICAL, Error.Category.NETWORK, Error.Code.REQUEST_FILTER_ERROR, error));\n      });\n    return requestFilterPromise;\n  }\n\n  /**\n   * play event handler.\n   * @param {number} startTime - Optional time to start the video from.\n   * @private\n   * @returns {void}\n   */\n  _onPlaying(startTime: ?number): void {\n    if (this.isLive()) {\n      this._setStartTime(startTime);\n    }\n  }\n\n  /**\n   * Loaded data event handler.\n   * @param {Function} resolve - The resolve promise function.\n   * @param {number} startTime - Optional time to start the video from.\n   * @private\n   * @returns {void}\n   */\n  _onLoadedData(resolve: Function, startTime: ?number): void {\n    const parseTracksAndResolve = () => {\n      this._playerTracks = this._getParsedTracks();\n      this._addNativeAudioTrackChangeListener();\n      this._addNativeTextTrackChangeListener();\n      this._addNativeTextTrackAddedListener();\n      NativeAdapter._logger.debug('The source has been loaded successfully');\n      this._loadPromiseReject = null;\n      resolve({tracks: this._playerTracks});\n      if (this.isLive()) {\n        this._handleLiveDurationChange();\n      }\n    };\n    if (!this.isLive()) {\n      this._setStartTime(startTime);\n    }\n    if (this._videoElement.textTracks.length > 0) {\n      parseTracksAndResolve();\n    } else {\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.CAN_PLAY, parseTracksAndResolve.bind(this));\n    }\n    this._startTimeAttach = NaN;\n  }\n\n  _setStartTime(startTime: ?number) {\n    if (startTime && startTime > -1) {\n      this._videoElement.currentTime = startTime;\n    }\n    this._wasCurrentTimeSetSuccessfully = true;\n  }\n\n  _onTimeUpdate(): void {\n    if (!this._videoElement.paused) {\n      if (this._videoElement.currentTime > this._lastTimeUpdate) {\n        if (this._waitingEventTriggered) {\n          this._waitingEventTriggered = false;\n          this._trigger(Html5EventType.PLAYING);\n        }\n        this._resetHeartbeatTimeout();\n      } else if (this._videoElement.currentTime < this._lastTimeUpdate) {\n        this._syncCurrentTime();\n      } else {\n        this._waitingEventTriggered = true;\n        this._trigger(Html5EventType.WAITING);\n      }\n    }\n    this._handleVideoTracksChange();\n  }\n\n  _syncCurrentTime(): void {\n    this._lastTimeUpdate = this._videoElement.currentTime;\n  }\n\n  _resetHeartbeatTimeout(): void {\n    this._lastTimeUpdate = this._videoElement.currentTime;\n    this._clearHeartbeatTimeout();\n    const onTimeout = () => {\n      this._clearHeartbeatTimeout();\n      this._trigger(\n        Html5EventType.ERROR,\n        new Error(\n          Error.Severity.CRITICAL,\n          Error.Category.NETWORK,\n          Error.Code.TIMEOUT,\n          `The player exceeded max buffer time of ${this._config.heartbeatTimeout} ms. No progress has been done during this time.`\n        )\n      );\n    };\n    this._heartbeatTimeoutId = setTimeout(onTimeout, this._config.heartbeatTimeout);\n  }\n\n  _clearHeartbeatTimeout(): void {\n    if (this._heartbeatTimeoutId) {\n      clearTimeout(this._heartbeatTimeoutId);\n      this._heartbeatTimeoutId = null;\n    }\n  }\n\n  _handleVideoTracksChange(): void {\n    if (!this._isProgressivePlayback()) {\n      const {videoHeight, videoWidth, videoTracks} = this._videoElement;\n      if (!this._videoDimensions || videoHeight !== this._videoDimensions.videoHeight || videoWidth !== this._videoDimensions.videoWidth) {\n        this._videoDimensions = {videoHeight, videoWidth};\n        const setting = {\n          language: '',\n          height: videoHeight,\n          width: videoWidth,\n          active: true,\n          index: Array.from(videoTracks).findIndex((track: VideoTrack) => track.selected)\n        };\n        this._onTrackChanged(new VideoTrack(setting));\n      }\n    }\n  }\n\n  /**\n   * Destroys the native adapter.\n   * @function destroy\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    NativeAdapter._logger.debug('destroy');\n    return new Promise((resolve, reject) => {\n      super.destroy().then(\n        () => {\n          this._drmHandler && this._drmHandler.destroy();\n          this._waitingEventTriggered = false;\n          this._progressiveSources = [];\n          this._loadPromise = null;\n          this._nativeTextTracksMap = {};\n          this._loadPromiseReject = null;\n          this._liveEdge = 0;\n          this._lastTimeUpdate = 0;\n          this._lastTimeDetach = NaN;\n          this._startTimeAttach = NaN;\n          this._videoDimensions = null;\n          this._clearHeartbeatTimeout();\n          if (this._liveDurationChangeInterval) {\n            clearInterval(this._liveDurationChangeInterval);\n            this._liveDurationChangeInterval = null;\n          }\n          resolve();\n        },\n        () => reject\n      );\n    });\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  _getParsedTracks(): Array<Track> {\n    const videoTracks = this._getParsedVideoTracks();\n    const audioTracks = this._getParsedAudioTracks();\n    const textTracks = this._getParsedTextTracks();\n    return videoTracks.concat(audioTracks).concat(textTracks);\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<Track>} - The parsed video tracks\n   * @private\n   */\n  _getParsedVideoTracks(): Array<Track> {\n    if (this._isProgressivePlayback()) {\n      return this._getParsedProgressiveVideoTracks();\n    } else {\n      return this._getParsedAdaptiveVideoTracks();\n    }\n  }\n\n  /**\n   * Get the parsed progressive video tracks\n   * @function _getParsedProgressiveVideoTracks\n   * @returns {Array<Track>} - The parsed progressive video tracks\n   * @private\n   */\n  _getParsedProgressiveVideoTracks(): Array<Track> {\n    const videoTracks = this._progressiveSources;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed adaptive video tracks\n   * @function _getParsedAdaptiveVideoTracks\n   * @returns {Array<Track>} - The parsed adaptive video tracks\n   * @private\n   */\n  _getParsedAdaptiveVideoTracks(): Array<Track> {\n    //TODO check adaptation in safari hls\n    const videoTracks = this._videoElement.videoTracks;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          //TODO calculate width/height/bandwidth\n          id: videoTracks[i].id,\n          active: videoTracks[i].selected,\n          label: videoTracks[i].label,\n          language: videoTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<AudioTrack>} - The parsed audio tracks\n   * @private\n   */\n  _getParsedAudioTracks(): Array<AudioTrack> {\n    const audioTracks = this._videoElement.audioTracks;\n    const parsedTracks = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        const settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].enabled,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<PKTextTrack>} - The parsed text tracks\n   * @private\n   */\n  _getParsedTextTracks(): Array<PKTextTrack> {\n    const captionsTextTrackLabels = [this._config.captionsTextTrack1Label, this._config.captionsTextTrack2Label];\n    const captionsTextTrackLanguageCodes = [this._config.captionsTextTrack1LanguageCode, this._config.captionsTextTrack2LanguageCode];\n    const textTracks = this._videoElement.textTracks;\n    const parsedTracks = [];\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        if (!PKTextTrack.isExternalTrack(textTracks[i])) {\n          const settings = {\n            kind: textTracks[i].kind,\n            active: textTracks[i].mode === PKTextTrack.MODE.SHOWING,\n            label: textTracks[i].label,\n            language: textTracks[i].language,\n            available: true\n          };\n          if (settings.kind === PKTextTrack.KIND.SUBTITLES) {\n            const newTrack: PKTextTrack = new PKTextTrack(settings);\n            parsedTracks.push(newTrack);\n            this._nativeTextTracksMap[newTrack.index] = textTracks[i];\n          } else if (settings.kind === PKTextTrack.KIND.CAPTIONS && this._config.enableCEA708Captions) {\n            settings.label = settings.label || captionsTextTrackLabels.shift();\n            settings.language = settings.language || captionsTextTrackLanguageCodes.shift();\n            settings.available = this._captionsHidden;\n            const newTrack: PKTextTrack = new PKTextTrack(settings);\n            parsedTracks.push(newTrack);\n            this._nativeTextTracksMap[newTrack.index] = textTracks[i];\n          }\n        }\n      }\n\n      if (!this._captionsHidden) {\n        this._maybeShow708Captions();\n      }\n    }\n    return parsedTracks;\n  }\n\n  _maybeShow708Captions(): void {\n    const captions = Array.from(this._videoElement.textTracks).filter(track => track.kind === PKTextTrack.KIND.CAPTIONS);\n    const activeCaption = captions.find(track => track.mode === PKTextTrack.MODE.SHOWING || track.mode === PKTextTrack.MODE.HIDDEN);\n    const textTrack = activeCaption || captions[0];\n    if (textTrack) {\n      textTrack.mode = PKTextTrack.MODE.HIDDEN;\n      this._captionsHidden = true;\n      this._eventManager.listenOnce(textTrack, 'cuechange', () => {\n        const textTracks = this._getPKTextTracks();\n        textTracks.forEach(track => (track.available = true) && (track.mode = PKTextTrack.MODE.DISABLED));\n        this._trigger(CustomEventType.TRACKS_CHANGED, {tracks: this._playerTracks});\n      });\n    }\n  }\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._isProgressivePlayback()) {\n      this._selectProgressiveVideoTrack(videoTrack);\n    } else {\n      this.selectAdaptiveVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a progressive video track\n   * @function _selectProgressiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  _selectProgressiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._progressiveSources;\n    if (videoTrack instanceof VideoTrack && videoTracks && videoTracks[videoTrack.index]) {\n      let currentTime = this._videoElement.currentTime;\n      let paused = this._videoElement.paused;\n      videoTrack.active = true;\n      this._sourceObj = videoTracks[videoTrack.index];\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, () => {\n        if (Env.browser.name === 'Android Browser') {\n          // In android browser we have to seek only after some playback.\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.DURATION_CHANGE, () => {\n            this._videoElement.currentTime = currentTime;\n          });\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n            if (paused) {\n              this._videoElement.pause();\n            }\n          });\n          this._videoElement.play();\n        } else {\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n          });\n          this._videoElement.currentTime = currentTime;\n          if (!paused) {\n            this._videoElement.play();\n          }\n        }\n      });\n      this._setSrc();\n    }\n  }\n\n  /**\n   * Select a native video track\n   * @function selectAdaptiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectAdaptiveVideoTrack(videoTrack: VideoTrack): void {\n    const videoTracks = this._videoElement.videoTracks;\n    if (videoTrack instanceof VideoTrack && videoTracks && videoTracks[videoTrack.index]) {\n      this._disableVideoTracks();\n      videoTracks[videoTrack.index].selected = true;\n      this._onTrackChanged(videoTrack);\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the  audio track to select\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    const audioTracks = this._videoElement.audioTracks;\n    if (audioTrack instanceof AudioTrack && audioTracks && audioTracks[audioTrack.index]) {\n      this._removeNativeAudioTrackChangeListener();\n      this._disableAudioTracks();\n      audioTracks[audioTrack.index].enabled = true;\n      this._onTrackChanged(audioTrack);\n      this._addNativeAudioTrackChangeListener();\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.unlisten(this._videoElement.audioTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.listen(this._videoElement.audioTracks, 'change', () => this._onNativeAudioTrackChange());\n    }\n  }\n\n  _getPKAudioTracks(): Array<AudioTrack> {\n    const audioTracks = this._playerTracks.filter(track => track instanceof AudioTrack);\n    return ((audioTracks: Array<any>): Array<AudioTrack>);\n  }\n\n  _getActivePKAudioTrack(): ?AudioTrack {\n    const pkAudioTracks = this._getPKAudioTracks();\n    return pkAudioTracks.find(track => track.active === true);\n  }\n\n  /**\n   * Handler of the video element AudioTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeAudioTrackChange(): void {\n    const getActiveVidAudioTrackIndex = () => {\n      for (let i = 0; i < this._videoElement.audioTracks.length; i++) {\n        const audioTrack = this._videoElement.audioTracks[i];\n        if (audioTrack.enabled) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    const vidIndex = getActiveVidAudioTrackIndex();\n    const activeAudioTrack = this._getActivePKAudioTrack();\n    const pkIndex = activeAudioTrack ? activeAudioTrack.index : -1;\n    if (vidIndex !== pkIndex) {\n      const audioTracks = this._getPKAudioTracks();\n      const pkAudioTrack = audioTracks.find(track => track.index === vidIndex);\n      if (pkAudioTrack) {\n        NativeAdapter._logger.debug('Native selection of track, update the player audio track (' + pkIndex + ' -> ' + vidIndex + ')');\n        this._onTrackChanged(pkAudioTrack);\n      }\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {PKTextTrack} textTrack - The playkit text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    if (textTrack instanceof PKTextTrack && PKTextTrack.isNativeTextTrack(textTrack)) {\n      this._removeNativeTextTrackChangeListener();\n      const selectedTrack = this._nativeTextTracksMap[textTrack.index];\n      if (selectedTrack) {\n        this.disableNativeTextTracks();\n        selectedTrack.mode = this._getDisplayTextTrackModeString();\n        this._onTrackChanged(textTrack);\n        this._addNativeTextTrackChangeListener();\n      }\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.unlisten(this._videoElement.textTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'change', () => this._onNativeTextTrackChange());\n    }\n  }\n\n  _getPKTextTracks(): Array<TextTrack> {\n    return this._playerTracks.filter(track => track instanceof PKTextTrack);\n  }\n\n  _getActivePKTextTrack(): ?TextTrack {\n    const pkTextTracks = this._getPKTextTracks();\n    return pkTextTracks.find(track => track.active === true);\n  }\n\n  /**\n   * Handler of the video element TextTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackChange(): void {\n    const pkTextTracks = this._getPKTextTracks();\n    const pkOffTrack = pkTextTracks.find(track => track.language === 'off');\n    const getActiveVidTextTrackIndex = (): number => {\n      for (const textTrackId in this._nativeTextTracksMap) {\n        if (this._getDisplayTextTrackModeString() === this._nativeTextTracksMap[textTrackId].mode) {\n          return Number(textTrackId);\n        }\n      }\n      return -1;\n    };\n    const vidIndex: number = getActiveVidTextTrackIndex();\n    const activePKtextTrack = this._getActivePKTextTrack();\n    const pkIndex = activePKtextTrack ? activePKtextTrack.index : -1;\n    if (vidIndex !== pkIndex) {\n      // In case no text track with 'showing' mode\n      // we need to set the off track\n      if (vidIndex == -1) {\n        if (pkOffTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> off)');\n          this._onTrackChanged(pkOffTrack);\n        }\n      } else {\n        // In case the text track on the video element is\n        // different then the text track of the player\n        // we need to set the correct one\n        const pkTextTrack = pkTextTracks.find(track => track.index === vidIndex);\n        if (pkTextTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> ' + vidIndex + ')');\n          this._onTrackChanged(pkTextTrack);\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns the mode (hidden / showing) of the native text track should have according to the displayTextTrack config.\n   * Both 'showing' and 'hidden' indicates the the text track is active and trigger cue events but 'hidden' hides it\n   * from the UI.\n   * @returns {string} the mode string\n   * @private\n   */\n  _getDisplayTextTrackModeString(): string {\n    return this._config.displayTextTrack ? PKTextTrack.MODE.SHOWING : PKTextTrack.MODE.HIDDEN;\n  }\n\n  /**\n   * Add the onaddtrack listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackAddedListener(): void {\n    if (!this._config.displayTextTrack && this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'addtrack', () => this._onNativeTextTrackAdded());\n    }\n  }\n\n  /**\n   * Handler of the video element TextTrackList onaddtrack event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackAdded(): void {\n    this._playerTracks = this._getParsedTracks();\n    this._trigger(CustomEventType.TRACKS_CHANGED, {tracks: this._playerTracks});\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this.disableNativeTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * For progressive playback will always returns false.\n   * For adaptive playback will always returns true.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return !this._isProgressivePlayback();\n  }\n\n  /**\n   * Apply ABR restriction\n   * @function applyABRRestriction\n   * @param {PKABRRestrictionObject} restrictions - abr restrictions config\n   * @returns {void}\n   * @public\n   */\n  applyABRRestriction(restrictions: PKABRRestrictionObject): void {\n    Utils.Object.createPropertyPath(this._config, 'abr.restrictions', restrictions);\n    this._maybeApplyAbrRestrictions(restrictions);\n  }\n\n  /**\n   * apply ABR restrictions\n   * @private\n   * @param {PKABRRestrictionObject} restrictions - abt config object\n   * @returns {void}\n   */\n  _maybeApplyAbrRestrictions(restrictions: PKABRRestrictionObject): void {\n    if (this._isProgressivePlayback()) {\n      const videoTracks = this._playerTracks.filter(track => track instanceof VideoTrack);\n      const availableTracks = filterTracksByRestriction(videoTracks, restrictions);\n      const activeTrackInRange = availableTracks.find(track => track.active);\n      if (!activeTrackInRange && availableTracks.length) {\n        this.selectVideoTrack(availableTracks[0]);\n      } else {\n        NativeAdapter._logger.warn('Invalid restrictions, there are not tracks within the restriction range');\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing video tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableVideoTracks(): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        videoTracks[i].selected = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing audio tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableAudioTracks(): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        audioTracks[i].enabled = false;\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    if (this._videoElement.seekable.length) {\n      return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n    } else if (this._videoElement.buffered.length) {\n      return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  get liveDuration() {\n    return this._getLiveEdge();\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch (e) {\n      return;\n    }\n  }\n\n  getSegmentDuration(): number {\n    return this._segmentDuration;\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._videoElement.duration === Infinity;\n  }\n\n  isOnLiveEdge(): boolean {\n    return this._wasCurrentTimeSetSuccessfully ? super.isOnLiveEdge() : false;\n  }\n\n  /**\n   * Handling live duration change (as safari doesn't trigger durationchange event on live playback)\n   * @function _handleLiveDurationChange\n   * @returns {void}\n   * @private\n   */\n  _handleLiveDurationChange(): void {\n    this._liveDurationChangeInterval = setInterval(() => {\n      this._calculateSegmentDuration();\n      const liveEdge = this._getLiveEdge();\n      if (this._liveEdge !== liveEdge) {\n        this._liveEdge = liveEdge;\n        this._videoElement.dispatchEvent(new window.Event(Html5EventType.DURATION_CHANGE));\n      }\n    }, LIVE_DURATION_INTERVAL_MS);\n  }\n\n  /**\n   * Calculate the segment duration\n   * @function _calculateSegmentDuration\n   * @returns {void}\n   * @private\n   */\n  _calculateSegmentDuration() {\n    if (this._videoElement.seekable.start(0) === 0) {\n      const {buffered, seekable} = this._videoElement;\n      if (buffered.length && seekable.length) {\n        this._segmentDuration = (buffered.end(buffered.length - 1) - seekable.end(seekable.length - 1)) / SAFARI_BUFFERED_SEGMENTS_COUNT;\n      }\n    } else {\n      const liveEdge = this._getLiveEdge();\n      if (this._liveEdge && this._liveEdge !== liveEdge) {\n        this._segmentDuration = liveEdge - this._liveEdge;\n      }\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    if (this.isLive() && this._videoElement.seekable.length) {\n      return this._videoElement.seekable.start(0);\n    } else {\n      return 0;\n    }\n  }\n\n  getDrmInfo(): ?PKDrmDataObject {\n    return this._drmHandler ? this._drmHandler.getDrmInfo() : null;\n  }\n}\n","//@flow\n/* eslint-disable no-unused-vars */\nimport FakeEvent from '../../../event/fake-event';\nimport FakeEventTarget from '../../../event/fake-event-target';\nimport Error from '../../../error/error';\nimport {CustomEventType, Html5EventType} from '../../../event/event-type';\nimport getLogger from '../../../utils/logger';\nimport Track from '../../../track/track';\nimport VideoTrack from '../../../track/video-track';\nimport AudioTrack from '../../../track/audio-track';\nimport TextTrack from '../../../track/text-track';\nimport EventManager from '../../../event/event-manager';\nimport ImageTrack from '../../../track/image-track';\nimport {ThumbnailInfo} from '../../../thumbnail/thumbnail-info';\n\nconst CURRENT_OR_NEXT_SEGMENT_COUNT: number = 2;\n\nexport default class BaseMediaSourceAdapter extends FakeEventTarget implements IMediaSourceAdapter {\n  /**\n   * The id of the adapter.\n   * @member {string} id\n   * @static\n   * @private\n   */\n  static id: string = 'BaseAdapter';\n  /**\n   * Passing the getLogger function to the actual media source adapter.\n   * @type {Function}\n   * @static\n   */\n  static getLogger: Function = getLogger;\n\n  static _logger = BaseMediaSourceAdapter.getLogger(BaseMediaSourceAdapter.id);\n\n  /**\n   * The adapter config.\n   * @member {Object} _config\n   * @private\n   */\n  _config: Object;\n\n  /**\n   * The source object.\n   * @member {PKMediaSourceObject} _sourceObj\n   * @private\n   */\n  _sourceObj: ?PKMediaSourceObject;\n\n  /**\n   * The dom video element.\n   * @member {HTMLVideoElement} _videoElement\n   * @private\n   */\n  _videoElement: HTMLVideoElement;\n\n  /**\n   * The adapter capabilities\n   * @private\n   */\n  _capabilities: PKMediaSourceCapabilities = {fpsControl: false};\n\n  /**\n   * The event manager of the adapter.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n\n  /**\n   * The load promise\n   * @member {Promise<{tracks: Array<Track>}>} - _loadPromise\n   * @type {Promise<{tracks: Array<Track>}>}\n   * @private\n   */\n  _loadPromise: Promise<{tracks: Array<Track>}> | null;\n\n  /**\n   * The duration change handler.\n   * @type {Function}\n   * @private\n   */\n  _onDurationChanged: Function;\n\n  /**\n   * Checks if the media source adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether the media source adapter is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    return true;\n  }\n\n  /**\n   * check for media source supported on browser\n   * @static\n   * @returns {boolean} - Whether the media source is supported.\n   */\n  static isMSESupported(): boolean {\n    const mediaSource = window.MediaSource || window.WebKitMediaSource;\n    // isTypeSupported isn't exist or not a function for old MSE implementation\n    return !!mediaSource && typeof mediaSource.isTypeSupported === 'function';\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n   * @param {PKMediaSourceObject} source - The source object.\n   * @param {Object} config - The media source adapter configuration.\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object = {}) {\n    super();\n    this._videoElement = videoElement;\n    this._sourceObj = source;\n    this._config = config;\n    this._onDurationChanged = () => {\n      if (this.isLive() && this._videoElement.paused) {\n        this._trigger(Html5EventType.TIME_UPDATE);\n      }\n    };\n    this._eventManager = new EventManager();\n    this._handleLiveTimeUpdate();\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n  destroy(): Promise<*> {\n    this._sourceObj = null;\n    this._config = {};\n    this.disableNativeTextTracks();\n    this._videoElement.removeEventListener(Html5EventType.DURATION_CHANGE, this._onDurationChanged);\n    this._eventManager.destroy();\n    return Promise.resolve();\n  }\n\n  /**\n   * Triggers the appropriate track changed event.\n   * @param {Track} track - The selected track.\n   * @private\n   * @returns {void}\n   */\n  _onTrackChanged(track: Track): void {\n    if (track instanceof VideoTrack) {\n      BaseMediaSourceAdapter._logger.debug('Video track changed', track);\n      this._trigger(CustomEventType.VIDEO_TRACK_CHANGED, {selectedVideoTrack: track});\n    } else if (track instanceof AudioTrack) {\n      BaseMediaSourceAdapter._logger.debug('Audio track changed', track);\n      this._trigger(CustomEventType.AUDIO_TRACK_CHANGED, {selectedAudioTrack: track});\n    } else if (track instanceof TextTrack) {\n      BaseMediaSourceAdapter._logger.debug('Text track changed', track);\n      this._trigger(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: track});\n    } else if (track instanceof ImageTrack) {\n      BaseMediaSourceAdapter._logger.debug('Image track changed', track);\n      this._trigger(CustomEventType.IMAGE_TRACK_CHANGED, {selectedImageTrack: track});\n    }\n  }\n\n  /**\n   * Dispatch an adapter event forward.\n   * @param {string} name - The name of the event.\n   * @param {?Object} payload - The event payload.\n   * @returns {void}\n   */\n  _trigger(name: string, payload?: Object): void {\n    this.dispatchEvent(new FakeEvent(name, payload));\n  }\n\n  /** Must implemented methods by the derived media source adapter **/\n\n  static canPlayType(mimeType: string, preferNative: boolean): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('static canPlayType');\n  }\n\n  load(): Promise<Object> {\n    return BaseMediaSourceAdapter._throwNotImplementedError('load');\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    return BaseMediaSourceAdapter._throwNotImplementedError('selectVideoTrack');\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectAudioTrack');\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectTextTrack');\n  }\n\n  selectImageTrack(imageTrack: ImageTrack): void {}\n\n  hideTextTrack(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('hideTextTrack');\n  }\n\n  enableAdaptiveBitrate(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('enableAdaptiveBitrate');\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isAdaptiveBitrateEnabled');\n  }\n\n  applyABRRestriction(restrictions: PKABRRestrictionObject): void {\n    return BaseMediaSourceAdapter._throwNotImplementedError('applyABRRestriction');\n  }\n\n  _getLiveEdge(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('_getLiveEdge');\n  }\n\n  seekToLiveEdge(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('seekToLiveEdge');\n  }\n\n  isLive(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isLive');\n  }\n\n  isOnLiveEdge(): boolean {\n    return this.liveDuration - this._videoElement.currentTime <= this.getSegmentDuration() * CURRENT_OR_NEXT_SEGMENT_COUNT;\n  }\n\n  setMaxBitrate(bitrate: number): void {\n    return;\n  }\n\n  attachMediaSource(): void {}\n\n  detachMediaSource(): void {}\n\n  /**\n   * Handling live time update (as is not triggered when video is paused, but the current time changed)\n   * @function _handleLiveTimeUpdate\n   * @returns {void}\n   * @private\n   */\n  _handleLiveTimeUpdate(): void {\n    this._videoElement.addEventListener(Html5EventType.DURATION_CHANGE, this._onDurationChanged);\n  }\n\n  /**\n   * Disables all the existing text tracks.\n   * @public\n   * @returns {void}\n   */\n  disableNativeTextTracks(): void {\n    Array.from(this._videoElement.textTracks).forEach(track => {\n      if (TextTrack.isNativeTextTrack(track) && !TextTrack.isExternalTrack(track)) {\n        track.mode = TextTrack.MODE.DISABLED;\n      }\n    });\n  }\n\n  /**\n   * Checks if the adapter can recover from an error triggered by the video element error\n   * @param {Event} event - the html5 video element error\n   * @returns {boolean} - if it can recover or not\n   * @public\n   */\n  handleMediaError(event: ?MediaError): boolean {\n    return false;\n  }\n\n  getStartTimeOfDvrWindow(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('getStartTimeOfDvrWindow');\n  }\n\n  getThumbnail(time: number): ?ThumbnailInfo {\n    return null;\n  }\n\n  getSegmentDuration(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('getSegmentDuration');\n  }\n\n  get liveDuration(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('liveDuration');\n  }\n\n  /**\n   * throw a run time error\n   * @param {string} name of the unimplemented function\n   * @returns {any} void/string/boolean\n   */\n  static _throwNotImplementedError(name: string): any {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, name);\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * In case the adapter preformed a load it will return the manifest url.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    if (this._loadPromise && this._sourceObj) {\n      return this._sourceObj.url;\n    }\n    return '';\n  }\n\n  /**\n   * Setter for the src that the adapter plays on the video element.\n   * @param {string} source - The src url.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    if (!this._loadPromise && this._sourceObj) {\n      this._sourceObj.url = source;\n    }\n  }\n\n  /**\n   * @public\n   * @return {PKMediaSourceCapabilities} - The adapter capabilities.\n   */\n  get capabilities(): PKMediaSourceCapabilities {\n    return this._capabilities;\n  }\n\n  get targetBuffer(): number {\n    return NaN;\n  }\n\n  getDrmInfo(): ?PKDrmDataObject {\n    return null;\n  }\n}\n","//@flow\nimport NativeAdapter from './adapters/native-adapter';\nimport getLogger from '../../../utils/logger';\n\n/**\n * Media source provider\n * @classdesc\n */\nexport default class MediaSourceProvider {\n  /**\n   * The logger of the media source provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('MediaSourceProvider');\n  /**\n   * The media source adapter registry.\n   * @member {Array<IMediaSourceAdapterStatic>} _mediaSourceAdapters\n   * @static\n   * @private\n   */\n  static _mediaSourceAdapters: Array<IMediaSourceAdapterStatic> = [NativeAdapter];\n  /**\n   * The selected adapter for playback.\n   * @type {null|IMediaSourceAdapterStatic}\n   * @static\n   * @private\n   */\n  static _selectedAdapter: IMediaSourceAdapterStatic | null = null;\n\n  /**\n   * Add a media source adapter to the registry.\n   * @function register\n   * @param {IMediaSourceAdapterStatic} mediaSourceAdapter - The media source adapter to register.\n   * @static\n   * @returns {void}\n   */\n  static register(mediaSourceAdapter: IMediaSourceAdapterStatic): void {\n    if (mediaSourceAdapter) {\n      if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> has been registered successfully`);\n        MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n      } else {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> is already registered, do not register again`);\n      }\n    }\n  }\n\n  /**\n   * Remove a media source adapter from the registry.\n   * @function unRegister\n   * @param {IMediaSourceAdapterStatic} mediaSourceAdapter - The media source adapter to unRegister.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(mediaSourceAdapter: IMediaSourceAdapterStatic): void {\n    let index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n    if (index > -1) {\n      MediaSourceProvider._logger.debug(`Unregistered <${mediaSourceAdapter.id}> adapter`);\n      MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if the a media source adapter can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   * @param {boolean} [preferNative=true] - prefer native flag.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @returns {boolean} - Whether a media source adapter can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean = true, drmConfig: PKDrmConfigObject): boolean {\n    MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n    let mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n    if (source && source.mimetype) {\n      for (let i = 0; i < mediaSourceAdapters.length; i++) {\n        if (\n          mediaSourceAdapters[i].canPlayType(source.mimetype) &&\n          (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData, drmConfig))\n        ) {\n          MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n          MediaSourceProvider._logger.debug(`Selected adapter is <${MediaSourceProvider._selectedAdapter.id}>`);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Orders the media source adapters array according to the preferNative value.\n   * @param {boolean} preferNative - Whether to prefer native playback.\n   * @private\n   * @returns {void}\n   */\n  static _orderMediaSourceAdapters(preferNative: boolean): void {\n    MediaSourceProvider._mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters.filter(mse => mse.id !== 'NativeAdapter');\n    if (preferNative) {\n      MediaSourceProvider._mediaSourceAdapters.unshift(NativeAdapter);\n    } else {\n      MediaSourceProvider._mediaSourceAdapters.push(NativeAdapter);\n    }\n  }\n\n  /**\n   * Get the appropriate media source adapter to the video source.\n   * @function getMediaSourceAdapter\n   * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n   * @static\n   */\n  static getMediaSourceAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): IMediaSourceAdapter | null {\n    if (videoElement && source && config) {\n      if (!MediaSourceProvider._selectedAdapter) {\n        MediaSourceProvider.canPlaySource(source, true, config.drm);\n      }\n      return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n    }\n    return null;\n  }\n\n  /**\n   * Destroys the media source adapter provider necessary props.\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    MediaSourceProvider._selectedAdapter = null;\n  }\n}\n\nconst registerMediaSourceAdapter = MediaSourceProvider.register;\nexport {registerMediaSourceAdapter};\n","// @flow\nconst StreamType: PKStreamTypes = {\n  DASH: 'dash',\n  HLS: 'hls',\n  PROGRESSIVE: 'progressive'\n};\n\nexport {StreamType};\n","// @flow\nconst AutoPlayType: PKAutoPlayTypes = {\n  TRUE: true,\n  FALSE: false,\n  IN_VIEW: 'inview'\n};\n\nexport {AutoPlayType};\n","// @flow\nconst MediaType: PKMediaTypes = {\n  VOD: 'Vod',\n  LIVE: 'Live',\n  AUDIO: 'Audio',\n  UNKNOWN: 'Unknown'\n};\n\nexport {MediaType};\n","// @flow\nconst MimeType: PKMimeTypes = {\n  HLS: ['application/x-mpegurl', 'application/vnd.apple.mpegurl'],\n  DASH: ['application/dash+xml'],\n  PROGRESSIVE: ['video/mp4'],\n  SMOOTH_STREAMING: ['application/vnd.ms-sstr+xml']\n};\n\nexport {MimeType};\n","// @flow\nconst RequestType: PKRequestType = {\n  MANIFEST: 0,\n  SEGMENT: 1,\n  LICENSE: 2\n};\n\nexport {RequestType};\n","// @flow\nconst ScreenOrientationType: PKOrientationType = {\n  NONE: 'none',\n  ANY: 'any',\n  NATURAL: 'natural',\n  LANDSCAPE: 'landscape',\n  PORTRAIT: 'portrait',\n  PORTRAIT_PRIMARY: 'portrait-primary',\n  PORTRAIT_SECONDARY: 'portrait-secondary',\n  LANDSCAPE_PRIMARY: 'landscape-primary',\n  LANDSCAPE_SECONDARY: 'landscape-secondary'\n};\n\nexport {ScreenOrientationType};\n","//@flow\ntype CategoryType = {[category: string]: number};\n\nconst Category: CategoryType = {\n  /** Errors from the network stack. */\n  NETWORK: 1,\n\n  /** Errors parsing text streams. */\n  TEXT: 2,\n\n  /** Errors parsing or processing audio or video streams. */\n  MEDIA: 3,\n\n  /** Errors parsing the Manifest. */\n  MANIFEST: 4,\n\n  /** Errors related to streaming. */\n  STREAMING: 5,\n\n  /** Errors related to DRM. */\n  DRM: 6,\n\n  /** Miscellaneous errors from the player. */\n  PLAYER: 7,\n\n  /** Errors related to ads. */\n  ADS: 8,\n\n  /** Errors in the database storage (offline). */\n  STORAGE: 9,\n\n  /** Errors related to cast. */\n  CAST: 10,\n\n  /** Errors from VR plugin. */\n  VR: 11\n};\n\nexport {Category};\nexport type {CategoryType};\n","//@flow\nimport {AdErrorCode} from '../ads/ad-error-code';\n\ntype CodeType = {[code: string]: number};\n\nconst Code: CodeType = {\n  /**\n   * A network request was made using an unsupported URI scheme.\n   */\n  UNSUPPORTED_SCHEME: 1000,\n\n  /**\n   * An HTTP network request returned an HTTP status that indicated a failure.\n   */\n  BAD_HTTP_STATUS: 1001,\n\n  /**\n   * An HTTP network request failed with an error, but not from the server.\n   */\n  HTTP_ERROR: 1002,\n\n  /**\n   * A network request timed out.\n   */\n  TIMEOUT: 1003,\n\n  /**\n   * A network request was made with a malformed data URI.\n   */\n  MALFORMED_DATA_URI: 1004,\n\n  /**\n   * A network request was made with a data URI using an unknown encoding.\n   */\n  UNKNOWN_DATA_URI_ENCODING: 1005,\n\n  /**\n   * A request filter threw an error.\n   */\n  REQUEST_FILTER_ERROR: 1006,\n\n  /**\n   * A response filter threw an error.\n   */\n  RESPONSE_FILTER_ERROR: 1007,\n\n  /**\n   * Live manifest is refreshed more than a preconfigured amount of times without any new segment.\n   */\n  LIVE_MANIFEST_REFRESH_ERROR: 1008,\n\n  /** The text parser failed to parse a text stream due to an invalid header. */\n  INVALID_TEXT_HEADER: 2000,\n\n  /** The text parser failed to parse a text stream due to an invalid cue. */\n  INVALID_TEXT_CUE: 2001,\n\n  /**\n   * Was unable to detect the encoding of the response text.  Suggest adding\n   * byte-order-markings to the response data.\n   */\n  UNABLE_TO_DETECT_ENCODING: 2003,\n\n  /** The response data contains invalid Unicode character encoding. */\n  BAD_ENCODING: 2004,\n\n  /**\n   * The XML parser failed to parse an xml stream, or the XML lacks mandatory\n   * elements for TTML.\n   * in the data is the URI associated with the XML.\n   */\n  INVALID_XML: 2005,\n\n  /**\n   * MP4 segment does not contain TTML.\n   */\n  INVALID_MP4_TTML: 2007,\n\n  /**\n   * MP4 segment does not contain VTT.\n   */\n  INVALID_MP4_VTT: 2008,\n\n  /**\n   *  VTT module issue, see the date for more details\n   */\n  UNABLE_TO_CREATE_TEXT_CUE: 2009,\n  /**\n   * error parsing the dash adapter error (for instance, could not parse an error shaka raised)\n   */\n  DASH_ADAPTER_ERROR_PARSE_ISSUE: 2010,\n  /**\n   * the file that the external captions handler is trying to download could not be determined / unsupported.\n   */\n  UNKNOWN_FILE_TYPE: 2011,\n  /**\n   * The language key in the caption object is empty / does not exist. Language is a mandatory field.\n   * https://github.com/kaltura/playkit-js/blob/master/docs/configuration.md#configsourcescaptions\n   */\n  UNKNOWN_LANGUAGE: 2012,\n  /**\n   * invalid thumbnail vtt file format or invalid url option.\n   */\n  INVALID_VTT_THUMBNAILS_FILE: 2013,\n  /**\n   * Some component tried to read past the end of a buffer.  The segment index,\n   * init segment, or PSSH may be malformed.\n   */\n  BUFFER_READ_OUT_OF_BOUNDS: 3000,\n\n  /**\n   * Some component tried to parse an integer that was too large to fit in a\n   * JavaScript number without rounding error.  JavaScript can only natively\n   * represent integers up to 53 bits.\n   */\n  JS_INTEGER_OVERFLOW: 3001,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered an integer,\n   * ID, or other field larger than the maximum supported by the parser.\n   */\n  EBML_OVERFLOW: 3002,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered a floating-\n   * point field of a size not supported by the parser.\n   */\n  EBML_BAD_FLOATING_POINT_SIZE: 3003,\n\n  /**\n   * The MP4 SIDX parser found the wrong box type.\n   * Either the segment index range is incorrect or the data is corrupt.\n   */\n  MP4_SIDX_WRONG_BOX_TYPE: 3004,\n\n  /**\n   * The MP4 SIDX parser encountered an invalid timescale.\n   * The segment index data may be corrupt.\n   */\n  MP4_SIDX_INVALID_TIMESCALE: 3005,\n\n  /** The MP4 SIDX parser encountered a type of SIDX that is not supported. */\n  MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cues element.\n   * The segment index data may be corrupt.\n   */\n  WEBM_CUES_ELEMENT_MISSING: 3007,\n\n  /**\n   * The WebM header parser was unable to locate the Ebml element.\n   * The init segment data may be corrupt.\n   */\n  WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,\n\n  /**\n   * The WebM header parser was unable to locate the Segment element.\n   * The init segment data may be corrupt.\n   */\n  WEBM_SEGMENT_ELEMENT_MISSING: 3009,\n\n  /**\n   * The WebM header parser was unable to locate the Info element.\n   * The init segment data may be corrupt.\n   */\n  WEBM_INFO_ELEMENT_MISSING: 3010,\n\n  /**\n   * The WebM header parser was unable to locate the Duration element.\n   * The init segment data may be corrupt or may have been incorrectly encoded.\n   * Shaka requires a duration in WebM DASH content.\n   */\n  WEBM_DURATION_ELEMENT_MISSING: 3011,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Track Positions element.\n   * The segment index data may be corrupt.\n   */\n  WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Time element.\n   * The segment index data may be corrupt.\n   */\n  WEBM_CUE_TIME_ELEMENT_MISSING: 3013,\n\n  /**\n   * A MediaSource operation failed.\n   * a MediaError code from the video element.\n   */\n  MEDIA_SOURCE_OPERATION_FAILED: 3014,\n\n  /**\n   * A MediaSource operation threw an exception.\n   */\n  MEDIA_SOURCE_OPERATION_THREW: 3015,\n\n  /**\n   * The video element reported an error.\n   * - error.data[0] is a MediaError code.js from the video element.\n   * - On Edge & IE, error.data[1] is a Microsoft extended error code.js in hex.\n   * - On Chrome, error.data[2] is a string with details on the error.\n   */\n  VIDEO_ERROR: 3016,\n\n  /**\n   * A MediaSource operation threw QuotaExceededError and recovery failed. The\n   * content cannot be played correctly because the segments are too large for\n   * the browser/platform. This may occur when attempting to play very high\n   * quality, very high bitrate content on low-end devices.\n   */\n  QUOTA_EXCEEDED_ERROR: 3017,\n\n  /**\n   * a media error from hlsjs adapter\n   */\n  HLS_FATAL_MEDIA_ERROR: 3018,\n\n  /**\n   * HLSJS fragment parsing issue\n   */\n  HLS_FRAG_PARSING_ERROR: 3019,\n\n  /**\n   * HLSJS buffer append issue\n   */\n  HLS_BUFFER_APPEND_ISSUE: 3020,\n  /**\n   * HLSJS buffer appending error\n   */\n  HLS_BUFFER_APPENDING_ISSUE: 3021,\n  /**\n   * Native adapter error, more info in the data part\n   */\n  NATIVE_ADAPTER_LOAD_FAILED: 3022,\n  /**\n   * HLSjs buffer stalled issue\n   */\n  HLS_BUFFER_STALLED_ERROR: 3023,\n  /**\n   * The Player was unable to guess the manifest type based on file extension\n   * or MIME type.  To fix, try one of the following:\n   * Rename the manifest so that the URI ends in a well-known extension.\n   * Configure the server to send a recognizable Content-Type header.\n   * Configure the server to accept a HEAD request for the manifest.\n   */\n  UNABLE_TO_GUESS_MANIFEST_TYPE: 4000,\n\n  /** The DASH Manifest contained invalid XML markup. */\n  DASH_INVALID_XML: 4001,\n\n  /**\n   * The DASH Manifest contained a Representation with insufficient segment\n   * information.\n   */\n  DASH_NO_SEGMENT_INFO: 4002,\n\n  /** The DASH Manifest contained an AdaptationSet with no Representations. */\n  DASH_EMPTY_ADAPTATION_SET: 4003,\n\n  /** The DASH Manifest contained an Period with no AdaptationSets. */\n  DASH_EMPTY_PERIOD: 4004,\n\n  /**\n   * The DASH Manifest does not specify an init segment with a WebM container.\n   */\n  DASH_WEBM_MISSING_INIT: 4005,\n\n  /** The DASH Manifest contained an unsupported container format. */\n  DASH_UNSUPPORTED_CONTAINER: 4006,\n\n  /** The embedded PSSH data has invalid encoding. */\n  DASH_PSSH_BAD_ENCODING: 4007,\n\n  /**\n   * There is an AdaptationSet whose Representations do not have any common\n   * key-systems.\n   */\n  DASH_NO_COMMON_KEY_SYSTEM: 4008,\n\n  /** Having multiple key IDs per Representation is not supported. */\n  DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,\n\n  /** The DASH Manifest specifies conflicting key IDs. */\n  DASH_CONFLICTING_KEY_IDS: 4010,\n\n  /**\n   * The manifest contains a period with no playable streams.\n   * Either the period was originally empty, or the streams within cannot be\n   * played on this browser or platform.\n   */\n  UNPLAYABLE_PERIOD: 4011,\n\n  /**\n   * There exist some streams that could be decoded, but restrictions imposed\n   * by the application or the key system prevent us from playing.  This may\n   * happen under the following conditions:\n   * The application has given restrictions to the Player that restrict\n   * at least one content type completely (e.g. no playable audio),\n   * The key system has imposed output restrictions that cannot be met\n   * (such as HDCP) and there are no unrestricted alternatives.\n   */\n  RESTRICTIONS_CANNOT_BE_MET: 4012,\n\n  /**\n   * No valid periods were found in the manifest.  Please check that your\n   * manifest is correct and free of typos.\n   */\n  NO_PERIODS: 4014,\n\n  /**\n   * HLS playlist doesn't start with a mandory #EXTM3U tag.\n   */\n  HLS_PLAYLIST_HEADER_MISSING: 4015,\n\n  /**\n   * HLS tag has an invalid name that doesn't start with '#EXT'\n   */\n  INVALID_HLS_TAG: 4016,\n\n  /**\n   * HLS playlist has both Master and Media/Segment tags.\n   */\n  HLS_INVALID_PLAYLIST_HIERARCHY: 4017,\n\n  /**\n   * A Representation has an id that is the same as another Representation in\n   * the same Period.  This makes manifest updates impossible since we cannot\n   * map the updated Representation to the old one.\n   */\n  DASH_DUPLICATE_REPRESENTATION_ID: 4018,\n\n  /**\n   * HLS manifest has several #EXT-X-MAP tags. We can only\n   * support one at the moment.\n   */\n  HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,\n\n  /**\n   * HLS parser was unable to guess mime type of a stream.\n   */\n  HLS_COULD_NOT_GUESS_MIME_TYPE: 4021,\n\n  /**\n   * No Master Playlist has been provided. Master playlist provides\n   * vital information about the streams (like codecs) that is\n   * required for MediaSource. We don't support directly providing\n   * a Media Playlist.\n   */\n  HLS_MASTER_PLAYLIST_NOT_PROVIDED: 4022,\n\n  /**\n   * One of the required attributes was not provided.\n   * HLS manifest is invalid.\n   */\n  HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,\n\n  /**\n   * One of the required tags was not provided.\n   * HLS manifest is invalid.\n   */\n  HLS_REQUIRED_TAG_MISSING: 4024,\n\n  /**\n   * HLS parser was unable to guess codecs of a stream.\n   */\n  HLS_COULD_NOT_GUESS_CODECS: 4025,\n\n  /**\n   * HLS parser has encountered encrypted content with unsupported\n   * KEYFORMAT attributes.\n   */\n  HLS_KEYFORMATS_NOT_SUPPORTED: 4026,\n\n  /**\n   * The manifest parser only supports xlink links with\n   * xlink:actuate='onLoad'.\n   */\n  DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,\n\n  /**\n   * The manifest parser has hit its depth limit on\n   * xlink link chains.\n   */\n  DASH_XLINK_DEPTH_LIMIT: 4028,\n\n  /**\n   * HLS parser encountered a live playlist.\n   */\n  HLS_LIVE_CONTENT_NOT_SUPPORTED: 4029,\n\n  /**\n   * HLSJS cannot parse error\n   */\n  HLSJS_CANNOT_PARSE: 4030,\n\n  /**\n   * The StreamingEngine called onChooseStreams() but the callback receiver\n   * did not return the correct number or type of Streams.\n   *\n   * This can happen when there is multi-Period content where one Period is\n   * video+audio and another is video-only or audio-only.  We don't support this\n   * case because it is incompatible with MSE.  When the browser reaches the\n   * transition, it will pause, waiting for the audio stream.\n   */\n  INVALID_STREAMS_CHOSEN: 5005,\n\n  /**\n   * The manifest indicated protected content, but the manifest parser was\n   * unable to determine what key systems should be used.\n   */\n  NO_RECOGNIZED_KEY_SYSTEMS: 6000,\n\n  /**\n   * None of the requested key system configurations are available.  This may\n   * happen under the following conditions:\n   *  The key system is not supported,\n   *  The key system does not support the features requested (e.g.\n   *        persistent state),\n   *  A user prompt was shown and the user denied access,\n   *   The key system is not available from unsecure contexts. (ie.\n   * requires HTTPS) See https://goo.gl/EEhZqT.\n   */\n  REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,\n\n  /**\n   * The browser found one of the requested key systems, but it failed to\n   * create an instance of the CDM for some unknown reason.\n   */\n  FAILED_TO_CREATE_CDM: 6002,\n\n  /**\n   * The browser found one of the requested key systems and created an instance\n   * of the CDM, but it failed to attach the CDM to the video for some unknown\n   * reason.\n   */\n  FAILED_TO_ATTACH_TO_VIDEO: 6003,\n\n  /**\n   * The CDM rejected the server certificate supplied by the application.\n   * The certificate may be malformed or in an unsupported format.\n   */\n  INVALID_SERVER_CERTIFICATE: 6004,\n\n  /**\n   * The CDM refused to create a session for some unknown reason.\n   */\n  FAILED_TO_CREATE_SESSION: 6005,\n\n  /**\n   * The CDM was unable to generate a license request for the init data it was\n   * given.  The init data may be malformed or in an unsupported format.\n   */\n  FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,\n\n  /**\n   * The license request failed.  This could be a timeout, a network failure, or\n   * a rejection by the server.\n   */\n  LICENSE_REQUEST_FAILED: 6007,\n\n  /**\n   * The license response was rejected by the CDM.  The server's response may be\n   * invalid or malformed for this CDM.\n   */\n  LICENSE_RESPONSE_REJECTED: 6008,\n\n  /**\n   * The manifest does not specify any DRM info, but the content is encrypted.\n   * Either the manifest or the manifest parser are broken.\n   */\n  ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,\n\n  /**\n   * No license server was given for the key system signaled by the manifest.\n   * A license server URI is required for every key system.\n   */\n  NO_LICENSE_SERVER_GIVEN: 6012,\n\n  /**\n   * A required offline session was removed.  The content is not playable.\n   */\n  OFFLINE_SESSION_REMOVED: 6013,\n\n  /**\n   * The license has expired.  This is triggered when playback is stalled on a\n   * 'waitingforkeys' event and there are any expired keys in the key status map\n   * of any active session.\n   */\n  EXPIRED: 6014,\n  /**\n   * DRM\n   */\n  BAD_FAIRPLAY_RESPONSE: 6015,\n  /**\n   * DRM\n   */\n  COULD_NOT_CREATE_MEDIA_KEYS: 6016,\n  /**\n   * DRM\n   */\n  COULD_NOT_CREATE_KEY_SESSION: 6017,\n\n  /**\n   * The call to Player.load() was interrupted by a call to Player.unload()\n   * or another call to Player.load().\n   */\n  LOAD_INTERRUPTED: 7000,\n  /**\n   * HLSJS levelSwitchError - bitrate switch issue\n   */\n  BITRATE_SWITCH_ISSUE: 7001,\n  /**\n   * The call to Player.load() failed. see other data for more details.\n   */\n  LOAD_FAILED: 7002,\n  /**\n   * Build error. unregistered plugin\n   */\n  RUNTIME_ERROR_NOT_REGISTERED_PLUGIN: 7003,\n  /**\n   * Build error. Unimplemnted method\n   */\n  RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED: 7004,\n  /**\n   * Build error. not a valid handler\n   */\n  RUNTIME_ERROR_NOT_VALID_HANDLER: 7005,\n  /**\n   * When the play API called without any source\n   */\n  NO_SOURCE_PROVIDED: 7006,\n  /**\n   * When the load API called without compatible engine to play the source\n   */\n  NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE: 7007,\n  /**\n   * An error occurred while trying to enter picture in picture mode, more info in the data\n   */\n  ENTER_PICTURE_IN_PICTURE_FAILED: 7008,\n  /**\n   * An error occurred while trying to exit picture in picture mode, more info in the data\n   */\n  EXIT_PICTURE_IN_PICTURE_FAILED: 7009,\n  /**\n   * An error occurred while trying to init a plugin. The plugin not initialized.\n   */\n  PLUGIN_LOAD_FAILED: 7010,\n\n  /**\n   * The Cast API is unavailable.  This may be because of one of the following:\n   * - The browser may not have Cast support\n   * - The browser may be missing a necessary Cast extension\n   * - The Cast sender library may not be loaded in your app\n   */\n  CAST_API_UNAVAILABLE: 8000,\n\n  /**\n   * No cast receivers are available at this time.\n   */\n  NO_CAST_RECEIVERS: 8001,\n\n  /**\n   * The library is already casting.\n   */\n  ALREADY_CASTING: 8002,\n\n  /**\n   * A Cast SDK error that we did not explicitly plan for has occurred.\n   * Check data[0] and refer to the Cast SDK documentation for details.\n   */\n  UNEXPECTED_CAST_ERROR: 8003,\n\n  /**\n   * The cast operation was canceled by the user.\n   */\n  CAST_CANCELED_BY_USER: 8004,\n\n  /**\n   * The cast connection timed out.\n   */\n  CAST_CONNECTION_TIMED_OUT: 8005,\n\n  /**\n   * The requested receiver app ID does not exist or is unavailable.\n   * Check the requested app ID for typos.\n   */\n  CAST_RECEIVER_APP_UNAVAILABLE: 8006,\n\n  /**\n   * Offline storage is not supported on this browser; it is required for\n   * offline support.\n   */\n  STORAGE_NOT_SUPPORTED: 9000,\n\n  /**\n   * An unknown error occurred in the IndexedDB.\n   * On Firefox, one common source for UnknownError calls is reverting\n   * Firefox to an old version. This makes the indexedDB storage inaccessible\n   * for older versions. The only way to fix this is to delete the storage\n   * data in your profile. See https://goo.gl/eKVPPe.\n   */\n  INDEXED_DB_ERROR: 9001,\n\n  /**\n   * The operation was aborted.  For example, by a call to destroy().\n   */\n  OPERATION_ABORTED: 9002,\n\n  /**\n   * The specified item was not found in the IndexedDB.\n   */\n  REQUESTED_ITEM_NOT_FOUND: 9003,\n\n  /**\n   * A network request was made with a malformed offline URI.\n   */\n  MALFORMED_OFFLINE_URI: 9004,\n\n  /**\n   * The specified content is live or in-progress.\n   */\n  CANNOT_STORE_LIVE_OFFLINE: 9005,\n\n  /**\n   * There is already a store operation in-progress, wait until it completes\n   * before starting another.\n   */\n  STORE_ALREADY_IN_PROGRESS: 9006,\n\n  /**\n   * The specified manifest is encrypted but does not specify any init data.\n   * Without init data specified in the manifest, the content will not be\n   * playable offline.\n   */\n  NO_INIT_DATA_FOR_OFFLINE: 9007,\n\n  /**\n   * shaka.offline.Storage was constructed with a Player proxy instead of a\n   * local player instance.  To fix this, use Player directly with Storage\n   * instead of the results of CastProxy.prototype.getPlayer().\n   */\n  LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,\n\n  /**\n   * When the manifest contains no period playable streams, it means the\n   * manifest is unsupported by the browser.\n   */\n  CONTENT_UNSUPPORTED_BY_BROWSER: 9009,\n\n  /**\n   * Cannot add Item to the indexed db\n   */\n  CANNOT_ADD_ITEM: 9010,\n\n  /**\n   * Download operation aborted.\n   */\n  DOWNLOAD_FAILED: 9011,\n\n  /**\n   * Fetching the entry provider information failed.\n   */\n  COULD_NOT_GET_INFO_FROM_MEDIA_PROVIDER: 9012,\n\n  /**\n   * Could not find the entry id in the DB.\n   */\n  ENTRY_DOES_NOT_EXIST: 9013,\n\n  /**\n   * Pause operation failed\n   */\n  PAUSE_FAILED: 9014,\n\n  /**\n   * Resume operation failed\n   */\n  RESUME_FAILED: 9015,\n\n  /**\n   * Renewing the license of the entry failed\n   */\n  RENEW_LICENSE_FAILED: 9016,\n\n  /**\n   * Could not download the entry as it already exists in the data base.\n   */\n  ENTRY_ALREADY_EXISTS: 9017,\n\n  /**\n   * Could not remove the requested entry\n   */\n  REMOVE_FAILED: 9018,\n\n  /**\n   * Load media failed.\n   */\n  CAST_LOAD_MEDIA_FAILED: 10001,\n\n  /**\n   * Custom message parsing error.\n   */\n  CAST_CUSTOM_MESSAGE_PARSING_ERROR: 10002,\n\n  /**\n   * Edit tracks info error.\n   */\n  CAST_EDIT_TRACKS_INFO_ERROR: 10003,\n\n  /**\n   * VR plugin is not supported.\n   */\n  VR_NOT_SUPPORTED: 11000\n};\n\nObject.assign(Code, AdErrorCode);\n\nexport {Code};\nexport type {CodeType};\n","//@flow\nimport getLogger, {getLogLevel, LogLevel} from '../utils/logger';\nimport type {SeverityType} from './severity';\nimport {Severity} from './severity';\nimport type {CodeType} from './code';\nimport {Code} from './code';\nimport type {CategoryType} from './category';\nimport {Category} from './category';\n\nconst CLASS_NAME: string = 'Error';\n\n/**\n * @classdesc This is a description of the error class.\n */\nexport default class Error {\n  severity: number;\n  category: number;\n  code: number;\n  data: any;\n  /**\n   * @enum {number}\n   */\n  static Severity: SeverityType = Severity;\n  /**\n   * @enum {number}\n   */\n  static Category: CategoryType = Category;\n  /**\n   * @enum {number}\n   */\n  static Code: CodeType = Code;\n  static _logger: any = getLogger(CLASS_NAME);\n\n  /**\n   * @constructor\n   * @param {number} severity - error's severity\n   * @param {number} category - error's category.\n   * @param {number} code - error's code.\n   * @param {any} data - additional data for the error.\n   */\n  constructor(severity: number, category: number, code: number, data: any = {}) {\n    this.severity = severity;\n    this.category = category;\n    this.code = code;\n    this.data = data;\n    if (getLogLevel(CLASS_NAME) !== LogLevel.OFF) {\n      Error._logger.error(`Category:${category} | Code:${code} |`, data);\n    }\n  }\n}\n","//@flow\n\ntype SeverityType = {[severity: string]: number};\n\nconst Severity: SeverityType = {\n  /**\n   * An error occurred, but the Player is attempting to recover from the error.\n   *\n   * If the Player cannot ultimately recover, it still may not throw a CRITICAL\n   * error.  For example, retrying for a media segment will never result in\n   * a CRITICAL error (the Player will just retry forever).\n   */\n  RECOVERABLE: 1,\n  /**\n   * A critical error that the library cannot recover from.  These usually cause\n   * the Player to stop loading or updating.  A new manifest must be loaded\n   * to reset the library.\n   */\n  CRITICAL: 2\n};\n\nexport {Severity};\nexport type {SeverityType};\n","//@flow\nimport {MultiMap} from '../utils/multi-map';\nimport FakeEventTarget from './fake-event-target';\nimport FakeEvent from './fake-event';\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nclass EventManager {\n  _bindingMap: MultiMap<string, Binding_> | null;\n\n  constructor() {\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new MultiMap();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n  destroy() {\n    this.removeAll();\n    this._bindingMap = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Attaches an event listener to an event target for only one time.\n   * @param {EventTarget} target - The event target.\n   * @param {string} type - The event type.\n   * @param {ListenerType} listener - The event listener.\n   * @param {?Object} options - The event options.\n   * @returns {void}\n   */\n  listenOnce(target: EventTarget | FakeEventTarget, type: string, listener: ListenerType, options: ?Object): void {\n    let oneListener = (event: Event | FakeEvent) => {\n      this.unlisten(target, type, oneListener);\n      (listener: Function).call(this, event);\n    };\n    this.listen(target, type, oneListener, options);\n  }\n\n  /**\n   * Attaches an event listener to an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {ListenerType} listener The event listener.\n   * @param {?Object} options The event options.\n   * @returns {void}\n   */\n  listen(target: EventTarget | FakeEventTarget, type: string, listener: ListenerType, options: ?Object): void {\n    let binding = new Binding_(target, type, listener, options);\n    if (this._bindingMap) {\n      this._bindingMap.push(type, binding);\n    }\n  }\n\n  /**\n   * Detaches an event listener from an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n   * @returns {void}\n   */\n  unlisten(target: any, type: string, listener: ?ListenerType): void {\n    if (this._bindingMap) {\n      let list = this._bindingMap.get(type);\n\n      for (let i = 0; i < list.length; ++i) {\n        let binding = list[i];\n\n        if (binding.target === target && (binding.listener === listener || !listener)) {\n          binding.unlisten();\n          if (this._bindingMap) {\n            this._bindingMap.remove(type, binding);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Detaches all event listeners from all targets.\n   * @returns {void}\n   */\n  removeAll(): void {\n    if (this._bindingMap) {\n      let listeners = this._bindingMap.getAll();\n\n      for (let listener of listeners) {\n        listener.unlisten();\n      }\n      if (this._bindingMap) {\n        this._bindingMap.clear();\n      }\n    }\n  }\n}\n\n/**\n * @typedef {function(!Event)}\n */\ntype ListenerType = EventListener | ((event: FakeEvent) => any);\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nclass Binding_ {\n  target: any;\n  type: string;\n  listener: ListenerType | null;\n  options: ?Object;\n\n  constructor(target: EventTarget | FakeEventTarget, type: string, listener: ListenerType, options: ?Object) {\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?ListenerType} */\n    this.listener = listener;\n\n    /** @type {?Object} */\n    this.options = options;\n\n    //$FlowFixMe\n    this.target.addEventListener(type, listener, false);\n  }\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n  unlisten(): void {\n    if (!this.target) return;\n\n    this.target.removeEventListener(this.type, this.listener, this.options);\n\n    this.target = null;\n    this.listener = null;\n    this.options = null;\n  }\n}\n\nexport default EventManager;\n","//@flow\nimport * as Utils from '../utils/util';\nimport {AdEventType} from '../ads/ad-event-type';\n\nconst Html5EventType: PKEventTypes = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting',\n  /**\n   * Fires when the engine enters picture in picture\n   */\n  ENTER_PICTURE_IN_PICTURE: 'enterpictureinpicture',\n  /**\n   * Fires when the engine exits picture in picture\n   */\n  LEAVE_PICTURE_IN_PICTURE: 'leavepictureinpicture',\n  /**\n   * Fires when the engine changes presentation mode on safari webkitpresentationmodechanged\n   */\n  PRESENTATION_MODE_CHANGED: 'webkitpresentationmodechanged'\n};\n\nconst CustomEventType: PKEventTypes = {\n  /**\n   * Fires when the media is loaded.\n   */\n  MEDIA_LOADED: 'medialoaded',\n  /**\n   * Fires when the player ends reset operation.\n   */\n  PLAYER_RESET: 'playerreset',\n  /**\n   * Fires when the player ends destroy operation.\n   */\n  PLAYER_DESTROY: 'playerdestroy',\n  /**\n   * Fires when the player enters fullscreen.\n   */\n  ENTER_FULLSCREEN: 'enterfullscreen',\n  /**\n   * Fires when the player exits fullscreen.\n   */\n  EXIT_FULLSCREEN: 'exitfullscreen',\n  /**\n   * Fires when browser fails to play.\n   */\n  PLAY_FAILED: 'playfailed',\n  /**\n   * Fires when browser fails to autoplay with sound.\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead.\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started.\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended.\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute.\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed.\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed.\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed.\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active image track has been changed.\n   */\n  IMAGE_TRACK_CHANGED: 'imagetrackchanged',\n  /**\n   * Fires when the text track added to native\n   */\n  TEXT_TRACK_ADDED: 'texttrackadded',\n  /**\n   * Fires when the active text track cue has changed.\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed.\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa.\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed.\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires when playback start requested.\n   */\n  PLAYBACK_START: 'playbackstart',\n  /**\n   * Fires on the first 'play' event.\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires on the first 'playing' event.\n   */\n  FIRST_PLAYING: 'firstplaying',\n  /**\n   * Fires when the playback (includes postrolls) is ended.\n   */\n  PLAYBACK_ENDED: 'playbackended',\n  /**\n   * Fires when the player has selected the source to play.\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed.\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when the adapter recovered from a media error\n   */\n  MEDIA_RECOVERED: 'mediarecovered',\n  /**\n   * Fired when the vr stereo mode changed\n   */\n  VR_STEREO_MODE_CHANGED: 'vrstereomodechanged',\n  /**\n   * Fired when the frames drop are exceeds the allowed (configured) threshold\n   */\n  FPS_DROP: 'fpsdrop',\n  /**\n   * Fired when the a bookmark service returns an error\n   * This event will be removed once plugins will have a way to expose their event enums\n   */\n  BOOKMARK_ERROR: 'bookmarkerror',\n  /**\n   * Fired when the a bookmark service returns a concurrency limit error\n   * This event will be removed once plugins will have a way to expose their event enums\n   */\n  CONCURRENCY_LIMIT: 'concurrencylimit',\n  /**\n   * Fired when the player container changes it's dimensions\n   */\n  RESIZE: 'resize',\n  /**\n   * Fired when the timed metadata triggered\n   */\n  TIMED_METADATA: 'timedmetadata',\n  /**\n   * Fired when the timed metadata triggered\n   */\n  TIMED_METADATA_CHANGE: 'timedmetadatachange',\n  /**\n   * Fires when new timed metadata added\n   */\n  TIMED_METADATA_ADDED: 'timedmetadataadded',\n  /**\n   * Fired when a fragment or segment is done loading successfully\n   */\n  FRAG_LOADED: 'fragloaded',\n  /**\n   * Fired when a manifest is done loading successfully\n   */\n  MANIFEST_LOADED: 'manifestloaded',\n  /**\n   * Fired when the user interact with the player ui\n   */\n  USER_GESTURE: 'usergesture',\n  /**\n   * Fired when the drm license is responded from the DRM server\n   */\n  DRM_LICENSE_LOADED: 'drmlicenseloaded',\n  /**\n   * Fired when the source url switched\n   */\n  SOURCE_URL_SWITCHED: 'sourceurlswitched'\n};\n\nconst EventType: PKEventTypes = Utils.Object.merge([Html5EventType, CustomEventType, AdEventType]);\n\nexport {EventType, Html5EventType, CustomEventType};\n","//@flow\nimport FakeEvent from './fake-event';\nimport {MultiMap} from '../utils/multi-map';\nimport getLogger from '../utils/logger';\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @export\n */\nclass FakeEventTarget {\n  _listeners: MultiMap<string, (event: FakeEvent) => boolean | void>;\n  dispatchTarget: FakeEventTarget;\n  __logger: any;\n\n  constructor() {\n    /**\n     * @private {!MultiMap.<FakeEventTarget.EventListener>}\n     */\n    this._listeners = new MultiMap();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {FakeEventTarget}\n     */\n    this.dispatchTarget = this;\n    this.__logger = getLogger('FakeEventTarget');\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.EventListener} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  addEventListener(type: string, listener: typeof EventListener) {\n    this._listeners.push(type, listener);\n  }\n\n  /**\n   * Remove an event listener from this object.\n   *\n   * @param {string} type The event type for which you wish to remove a listener.\n   * @param {FakeEventTarget.EventListener} listener The callback or\n   *   listener object to remove.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  removeEventListener(type: string, listener: typeof EventListener) {\n    this._listeners.remove(type, listener);\n  }\n\n  /**\n   * Dispatch an event from this object.\n   *\n   * @param {!Event} event The event to be dispatched from this object.\n   * @return {boolean} True if the default action was prevented.\n   * @override\n   * @export\n   */\n  dispatchEvent(event: FakeEvent) {\n    // In many browsers, it is complex to overwrite properties of actual Events.\n    // Here we expect only to dispatch FakeEvents, which are simpler.\n    //goog.asserts.assert(event instanceof FakeEvent,\n    //    'FakeEventTarget can only dispatch FakeEvents!');\n\n    let list = this._listeners.get(event.type) || [];\n\n    for (let i = 0; i < list.length; ++i) {\n      // Do this every time, since events can be re-dispatched from handlers.\n      //$FlowFixMe - need to cast to event target but can't yet make EventTarget inherited\n      event.target = this.dispatchTarget;\n      //$FlowFixMe - need to cast to event target but can't yet make EventTarget inherited\n      event.currentTarget = this.dispatchTarget;\n\n      let listener = list[i];\n      try {\n        // native DOM event handler\n        //$FlowFixMe\n        if (listener.handleEvent) {\n          //$FlowFixMe\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (exception) {\n        // Exceptions during event handlers should not affect the caller,\n        // but should appear on the console as uncaught, according to MDN:\n        // http://goo.gl/N6Ff27\n        this.__logger.error(`Error occurred when handling event: ${event.type}.`, exception);\n      }\n\n      if (event.stopped) {\n        break;\n      }\n    }\n\n    return event.defaultPrevented;\n  }\n}\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\ndeclare function EventListener(event: FakeEvent): boolean | void;\n\nexport default FakeEventTarget;\n","//@flow\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nclass FakeEvent {\n  /** @const {boolean} */\n  bubbles: boolean;\n\n  /** @const {boolean} */\n  cancelable: boolean;\n\n  /** @const {boolean} */\n  defaultPrevented: boolean;\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number | Date;\n\n  /** @const {string} */\n  type: string;\n\n  /** @const {boolean} */\n  isTrusted: boolean;\n\n  /** @type {EventTarget} */\n  currentTarget: any;\n\n  /** @type {EventTarget} */\n  target: any;\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n  stopped: boolean;\n\n  payload: any;\n\n  constructor(type: string, payload: any) {\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  preventDefault() {}\n\n  /**\n   * Stops processing event listeners for this event.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopImmediatePropagation() {\n    this.stopped = true;\n  }\n\n  /**\n   * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopPropagation() {}\n}\n\nexport default FakeEvent;\n","//@flow\nimport EventManager from '../event/event-manager';\nimport Player from '../player';\nimport FakeEvent from '../event/fake-event';\nimport * as Utils from '../utils/util';\nimport {ScreenOrientationType} from '../enums/screen-orientation-type';\n\n/**\n * The IOS fullscreen class name.\n * @type {string}\n * @const\n */\nconst IN_BROWSER_FULLSCREEN: string = 'playkit-in-browser-fullscreen-mode';\n\nconst EXIT_PIP_TIMEOUT: number = 1000;\n\n/**\n * @class FullscreenController\n * @param {Player} player - The player.\n */\nclass FullscreenController {\n  _player: Player;\n  // Flag to indicate that player is in fullscreen(when different element on fullscreen - api return correct state).\n  // Not relevant for IOS\n  _isElementInFullscreen: boolean = false;\n  _isInBrowserFullscreen: boolean;\n  _isScreenLocked: boolean = false;\n  _isScreenOrientationSupport: boolean =\n    // $FlowFixMe\n    !!screen && !!screen.orientation && typeof screen.orientation.unlock === 'function' && typeof screen.orientation.lock === 'function';\n  _eventManager: EventManager;\n  // Flag to overcome browsers which supports more than one fullscreenchange event\n  _isFullscreenEventDispatched: boolean = false;\n\n  /**\n   * after component mounted, set up event listeners to window fullscreen state change\n   * @param {Player} player - element to enter fullscreen\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  constructor(player: Player): void {\n    this._player = player;\n    //flag to cover the option that inBrowserFullscreen selected and we should know if it's full screen\n    this._isInBrowserFullscreen = false;\n    this._eventManager = new EventManager();\n  }\n\n  /**\n   * if native fullscreen mode\n   * @memberof FullScreenController\n   * @returns {boolean} - the current fullscreen state of the document\n   */\n  _isNativeDocumentFullscreen(): boolean {\n    return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);\n  }\n\n  /**\n   * if native ios fullscreen mode\n   * @memberof FullScreenController\n   * @returns {boolean} - the current fullscreen state of the video element in ios\n   */\n  _isIOSFullscreen(): boolean {\n    //for ios mobile checking video element\n    const videoElement: ?HTMLVideoElement = typeof this._player.getVideoElement === 'function' ? this._player.getVideoElement() : null;\n    // $FlowFixMe for ios mobile\n    return (\n      this._player.env.os.name === 'iOS' &&\n      !!videoElement &&\n      (videoElement.webkitPresentationMode === 'fullscreen' || (!videoElement.webkitPresentationMode && videoElement.webkitDisplayingFullscreen))\n    );\n  }\n\n  /**\n   * if fullscreen mode\n   * @memberof FullScreenController\n   * @returns {boolean} - the current fullscreen state of the document\n   */\n  isFullscreen(): boolean {\n    return (\n      (this._isNativeDocumentFullscreen() && this._isElementInFullscreen) ||\n      this._isIOSFullscreen() ||\n      //indicator for manually full screen in ios - with css flag\n      this._isInBrowserFullscreen\n    );\n  }\n\n  /**\n   * if mobile detected, get the video element and request fullscreen.\n   * otherwise, request fullscreen to the parent player view than includes the GUI as well\n   * @param {?string} elementId - element to enter fullscreen\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  enterFullscreen(elementId: ?string): void {\n    if (!this.isFullscreen()) {\n      this.registerFullScreenEvents();\n      let fullScreenElement = elementId && Utils.Dom.getElementById(elementId);\n      const playbackConfig = this._player.config.playback;\n      if (!fullScreenElement) {\n        fullScreenElement = this._player.getView();\n      }\n      if (this._player.env.os.name === 'iOS') {\n        if (playbackConfig.inBrowserFullscreen && playbackConfig.playsinline) {\n          this._enterInBrowserFullscreen(fullScreenElement);\n        } else {\n          const videoElement: ?HTMLVideoElement = this._player.getVideoElement();\n          if (videoElement && typeof videoElement.webkitEnterFullScreen === 'function') {\n            if (this._player.isInPictureInPicture()) {\n              // iOS < 13 (iPad) has an issue to enter to full screen from PiP\n              setTimeout(() => videoElement.webkitEnterFullScreen(), EXIT_PIP_TIMEOUT);\n              this._player.exitPictureInPicture();\n            } else {\n              videoElement.webkitEnterFullScreen();\n            }\n          }\n        }\n      } else {\n        this._requestFullscreen(fullScreenElement);\n      }\n    }\n  }\n\n  /**\n   * exit fullscreen cross platform function\n   *\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  exitFullscreen(): void {\n    if (this.isFullscreen()) {\n      if (this._player.env.os.name === 'iOS') {\n        // player will be in full screen with this flag or otherwise will be natively full screen\n        if (this._isInBrowserFullscreen) {\n          this._exitInBrowserFullscreen();\n        } else {\n          const videoElement: ?HTMLVideoElement = this._player.getVideoElement();\n          if (videoElement && typeof videoElement.webkitExitFullscreen === 'function') {\n            videoElement.webkitExitFullscreen();\n          }\n        }\n      } else {\n        this._requestExitFullscreen();\n      }\n    }\n  }\n\n  /**\n   * get native fullscreen function response\n   *\n   * @param {HTMLElement} fullScreenElement - element to enter fullscreen\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _nativeEnterFullScreen(fullScreenElement: HTMLElement) {\n    if (typeof fullScreenElement.requestFullscreen === 'function') {\n      return fullScreenElement.requestFullscreen();\n    } else if (typeof fullScreenElement.mozRequestFullScreen === 'function') {\n      return fullScreenElement.mozRequestFullScreen();\n    } else if (typeof fullScreenElement.webkitRequestFullScreen === 'function') {\n      return fullScreenElement.webkitRequestFullScreen();\n    } else if (typeof fullScreenElement.msRequestFullscreen === 'function') {\n      return fullScreenElement.msRequestFullscreen();\n    }\n  }\n\n  /**\n   * request fullscreen function to all browsers\n   *\n   * @param {HTMLElement} fullScreenElement - element to enter fullscreen\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _requestFullscreen(fullScreenElement: HTMLElement) {\n    if (this._player.isInPictureInPicture()) {\n      this._player.exitPictureInPicture();\n    }\n    Promise.resolve(this._nativeEnterFullScreen(fullScreenElement)).then(\n      () => {\n        this._isElementInFullscreen = true;\n        const screenLockOrientionMode = Utils.Object.getPropertyPath(this._player, 'config.playback.screenLockOrientionMode');\n        const validOrientation =\n          screenLockOrientionMode !== ScreenOrientationType.NONE && Object.values(ScreenOrientationType).includes(screenLockOrientionMode);\n        if (this._isScreenOrientationSupport && validOrientation) {\n          screen.orientation\n            // $FlowFixMe\n            .lock(screenLockOrientionMode)\n            .then(() => (this._isScreenLocked = true))\n            .catch(() => (this._isScreenLocked = false));\n        }\n      },\n      () => {}\n    );\n  }\n\n  /**\n   * get native fullscreen function response\n   *\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _nativeExitFullScreen() {\n    if (typeof document.exitFullscreen === 'function') {\n      return document.exitFullscreen();\n    } else if (typeof document.webkitExitFullscreen === 'function') {\n      return document.webkitExitFullscreen();\n    } else if (typeof document.mozCancelFullScreen === 'function') {\n      return document.mozCancelFullScreen();\n    } else if (typeof document.msExitFullscreen === 'function') {\n      return document.msExitFullscreen();\n    }\n  }\n\n  /**\n   * request exit from fullscreen function for all browsers\n   *\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _requestExitFullscreen(): void {\n    Promise.resolve(this._nativeExitFullScreen()).then(\n      () => {\n        this._isElementInFullscreen = false;\n        if (this._isScreenOrientationSupport && this._isScreenLocked) {\n          // $FlowFixMe\n          screen.orientation.unlock();\n          this._isScreenLocked = false;\n        }\n      },\n      () => {}\n    );\n  }\n\n  /**\n   * enter from ios manually method enter to fullscreen with css\n   * @memberof FullScreenController\n   * @param {HTMLElement} fullScreenElement - element to enter fullscreen\n   * @returns {void}\n   */\n  _enterInBrowserFullscreen(fullScreenElement: HTMLElement): void {\n    if (this._player.isInPictureInPicture()) {\n      this._player.exitPictureInPicture();\n    }\n    // add class for fullscreen\n    Utils.Dom.addClassName(fullScreenElement, IN_BROWSER_FULLSCREEN);\n    this._isInBrowserFullscreen = true;\n    this._fullscreenEnterHandler();\n    this._player.dispatchEvent(new FakeEvent(this._player.Event.RESIZE));\n  }\n\n  /**\n   * exit from ios manually method enter to fullscreen with css\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _exitInBrowserFullscreen(): void {\n    //get the element with relevant css, otherwise keep the flow of exit manually\n    const fullScreenElement = Utils.Dom.getElementBySelector('.' + IN_BROWSER_FULLSCREEN);\n    if (fullScreenElement) {\n      Utils.Dom.removeClassName(fullScreenElement, IN_BROWSER_FULLSCREEN);\n    }\n    this._isInBrowserFullscreen = false;\n    this._fullscreenExitHandler();\n    this._player.dispatchEvent(new FakeEvent(this._player.Event.RESIZE));\n  }\n\n  /**\n   * set up event listeners to window fullscreen state change\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  registerFullScreenEvents(): void {\n    if (this._player.env.os.name === 'iOS') {\n      this._handleIosFullscreen();\n    } else {\n      this._eventManager.listen(document, 'webkitfullscreenchange', () => this._fullscreenChangeHandler());\n      this._eventManager.listen(document, 'mozfullscreenchange', () => this._fullscreenChangeHandler());\n      this._eventManager.listen(document, 'fullscreenchange', () => this._fullscreenChangeHandler());\n      this._eventManager.listen(document, 'MSFullscreenChange', () => this._fullscreenChangeHandler());\n    }\n  }\n\n  /**\n   * Handle iOS full screen changes\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _handleIosFullscreen(): void {\n    /**\n     * Attach listeners to ios full screen change.\n     * @returns {void}\n     */\n    const attachIosFullscreenListeners = () => {\n      let vidEl = this._player.getVideoElement();\n      if (vidEl) {\n        this._eventManager.listen(vidEl, 'webkitbeginfullscreen', () => this._fullscreenEnterHandler());\n        this._eventManager.listen(vidEl, 'webkitendfullscreen', () => this._fullscreenExitHandler());\n      }\n    };\n    if (this._player.getVideoElement()) {\n      attachIosFullscreenListeners();\n    } else {\n      this._eventManager.listenOnce(this._player, this._player.Event.SOURCE_SELECTED, () => attachIosFullscreenListeners());\n    }\n  }\n\n  /**\n   * fullscreen change handler function.\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _fullscreenChangeHandler(): void {\n    //fire player event for current state, if player is in fullscreen fire player fullscreen event otherwise exit\n    this.isFullscreen() ? this._fullscreenEnterHandler() : this._fullscreenExitHandler();\n  }\n\n  /**\n   * fullscreen enter handler function.\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _fullscreenEnterHandler(): void {\n    if (this.isFullscreen() && !this._isFullscreenEventDispatched) {\n      this._isFullscreenEventDispatched = true;\n      this._player.dispatchEvent(new FakeEvent(this._player.Event.ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * fullscreen exit handler function.\n   * @memberof FullScreenController\n   * @returns {void}\n   */\n  _fullscreenExitHandler(): void {\n    if (!this.isFullscreen() && this._isFullscreenEventDispatched) {\n      this._isFullscreenEventDispatched = false;\n      this._eventManager.removeAll();\n      this._player.dispatchEvent(new FakeEvent(this._player.Event.EXIT_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Destroys the FullScreenController.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    this._eventManager.destroy();\n  }\n}\n\nexport {FullscreenController};\n","// @flow\n\n/**\n * Base middleware.\n * @classdesc\n */\nexport default class BaseMiddleware {\n  /**\n   * Id of the middleware instance.\n   * @public\n   */\n  id: string;\n\n  /**\n   * Calls the next handler in the middleware chain.\n   * @param {Function} next - The next handler in the middleware chain.\n   * @returns {void}\n   */\n  callNext(next: Function): void {\n    if (next) {\n      next();\n    }\n  }\n}\n","// @flow\nimport {MultiMap} from '../utils/multi-map';\nimport BaseMiddleware from './base-middleware';\nimport getLogger from '../utils/logger';\n\n/**\n * Generic middleware implementation.\n */\nexport default class Middleware {\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n  _middlewares: MultiMap<string, *>;\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  _actions: {[action: string]: string};\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n  _logger: any;\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n  constructor(actions: {[action: string]: string}) {\n    this._actions = actions;\n    this._middlewares = new MultiMap();\n    this._logger = getLogger('Middleware');\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    for (let action in this._actions) {\n      let apiAction = this._actions[action];\n      // $FlowFixMe\n      if (typeof middlewareInstance[apiAction] === 'function') {\n        this._logger.debug(`Register <${middlewareInstance.id}> for action ${apiAction}`);\n        // $FlowFixMe\n        this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n      }\n    }\n  }\n\n  /**\n   * Runs a middleware chain for a specific action.\n   * @param {string} action - The action to run.\n   * @param {Function} callback - The callback function.\n   * @param {Array<any>} params - The action params.\n   * @public\n   * @returns {void}\n   */\n  run(action: string, callback: Function, ...params: Array<any>): void {\n    this._logger.debug('Start middleware chain for action ' + action);\n    let middlewares = this._middlewares.get(action);\n    this._executeMiddleware(\n      middlewares,\n      (...params) => {\n        this._logger.debug('Finish middleware chain for action ' + action);\n        callback(...params);\n      },\n      params\n    );\n  }\n\n  /**\n   * Executes all the middlewares one by one.\n   * @param {Array<Function>} middlewares - The middlewares for a specific action.\n   * @param {Function} callback - The callback function.\n   * @param {Array<any>} origParams - The original action params.\n   * @private\n   * @returns {void}\n   */\n  _executeMiddleware(middlewares: Array<Function>, callback: Function, origParams: Array<any>): void {\n    let params = origParams;\n    const applyFunc = (fn, prevParams, next) => {\n      if (prevParams?.length) {\n        params = prevParams;\n      }\n      params?.length ? fn(...params, next) : fn(next);\n    };\n    const composition = middlewares.reduceRight(\n      (next, fn) => (...prevParams) => {\n        applyFunc(fn, prevParams, next);\n      },\n      (...prevParams) => {\n        applyFunc(callback, prevParams);\n      }\n    );\n    composition();\n  }\n}\n","// @flow\nimport Middleware from './middleware';\nimport BaseMiddleware from './base-middleware';\n\n/**\n * The playback middleware.\n */\nexport default class PlaybackMiddleware {\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n  static Actions: {[action: string]: string} = {\n    LOAD: 'load',\n    PLAY: 'play',\n    PAUSE: 'pause',\n    SET_CURRENT_TIME: 'setCurrentTime'\n  };\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  _middleware: Middleware;\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._middleware = new Middleware(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    this._middleware.use(middlewareInstance);\n  }\n\n  /**\n   * Runs a load chain.\n   * @param {Function} callback - The last load handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  load(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.LOAD, callback);\n  }\n\n  /**\n   * Runs a play chain.\n   * @param {Function} callback - The last play handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  play(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n  }\n\n  /**\n   * Runs a pause chain.\n   * @param {Function} callback - The last pause handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  pause(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n  }\n\n  /**\n   * Runs a setCurrentTime chain.\n   * @param {Number} to - The number to set in seconds.\n   * @param {Function} callback - The last setCurrentTime handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  setCurrentTime(to: number, callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.SET_CURRENT_TIME, callback, to);\n  }\n}\n","import {ScreenOrientationType} from './enums/screen-orientation-type';\n\nconst DefaultConfig = {\n  log: {\n    level: 'ERROR'\n  },\n  text: {\n    enableCEA708Captions: true,\n    useNativeTextTrack: false,\n    forceCenter: false,\n    captionsTextTrack1Label: 'English',\n    captionsTextTrack1LanguageCode: 'en',\n    captionsTextTrack2Label: 'Spanish',\n    captionsTextTrack2LanguageCode: 'es'\n  },\n  playback: {\n    audioLanguage: '',\n    textLanguage: '',\n    volume: 1,\n    playsinline: true,\n    preload: 'none',\n    autoplay: false,\n    loop: false,\n    autopause: false,\n    allowMutedAutoPlay: true,\n    muted: false,\n    pictureInPicture: true,\n    options: {\n      html5: {\n        hls: {},\n        dash: {},\n        native: {}\n      }\n    },\n    preferNative: {\n      hls: false,\n      dash: false\n    },\n    inBrowserFullscreen: false,\n    screenLockOrientionMode: ScreenOrientationType.NONE,\n    playAdsWithMSE: false,\n    streamPriority: [\n      {\n        engine: 'html5',\n        format: 'hls'\n      },\n      {\n        engine: 'html5',\n        format: 'dash'\n      },\n      {\n        engine: 'html5',\n        format: 'progressive'\n      },\n      {\n        engine: 'flash',\n        format: 'hls'\n      }\n    ]\n  },\n  streaming: {\n    forceBreakStall: false\n  },\n  abr: {\n    enabled: true,\n    fpsDroppedFramesInterval: 5000,\n    fpsDroppedMonitoringThreshold: 0.2,\n    capLevelOnFPSDrop: true,\n    capLevelToPlayerSize: false,\n    restrictions: {\n      minHeight: 0,\n      maxHeight: Infinity,\n      minWidth: 0,\n      maxWidth: Infinity,\n      minBitrate: 0,\n      maxBitrate: Infinity\n    }\n  },\n  drm: {\n    keySystem: ''\n  },\n  network: {\n    maxStaleLevelReloads: 20\n  }\n};\n\nconst DefaultSources = {\n  options: {},\n  metadata: {}\n};\n\nexport {DefaultConfig, DefaultSources};\n","//@flow\nimport Env from './utils/env';\nimport EventManager from './event/event-manager';\nimport PosterManager from './utils/poster-manager';\nimport FakeEvent from './event/fake-event';\nimport FakeEventTarget from './event/fake-event-target';\nimport {CustomEventType, EventType, Html5EventType} from './event/event-type';\nimport * as Utils from './utils/util';\nimport Locale from './utils/locale';\nimport getLogger, {getLogLevel, LogLevel, LogLevelType, setLogHandler, setLogLevel} from './utils/logger';\nimport StateManager from './state/state-manager';\nimport Track from './track/track';\nimport VideoTrack from './track/video-track';\nimport AudioTrack from './track/audio-track';\nimport TextTrack from './track/text-track';\nimport TextStyle from './track/text-style';\nimport {Cue} from './track/vtt-cue';\nimport {processCues} from './track/text-track-display';\nimport {StateType} from './state/state-type';\nimport {TrackType} from './track/track-type';\nimport {StreamType} from './engines/stream-type';\nimport {EngineType} from './engines/engine-type';\nimport {MediaType} from './enums/media-type';\nimport {AbrMode} from './track/abr-mode-type';\nimport {CorsType} from './engines/html5/cors-types';\nimport PlaybackMiddleware from './middleware/playback-middleware';\nimport {DefaultConfig, DefaultSources} from './player-config.js';\nimport './assets/style.css';\nimport PKError from './error/error';\nimport {EngineProvider} from './engines/engine-provider';\nimport {ExternalCaptionsHandler} from './track/external-captions-handler';\nimport {AdBreakType} from './ads/ad-break-type';\nimport {AdTagType} from './ads/ad-tag-type';\nimport {ResizeWatcher} from './utils';\nimport {FullscreenController} from './fullscreen/fullscreen-controller';\nimport {EngineDecorator} from './engines/engine-decorator';\nimport {LabelOptions} from './track/label-options';\nimport {AutoPlayType} from './enums/auto-play-type';\nimport ImageTrack from './track/image-track';\nimport {ThumbnailInfo} from './thumbnail/thumbnail-info';\nimport {EngineDecoratorManager} from './engines/engine-decorator-manager';\nimport {filterTracksByRestriction} from './utils/restrictions';\nimport {ExternalThumbnailsHandler} from './thumbnail/external-thumbnails-handler';\n\n/**\n * The black cover class name.\n * @type {string}\n * @const\n */\nconst BLACK_COVER_CLASS_NAME: string = 'playkit-black-cover';\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nconst CONTAINER_CLASS_NAME: string = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nconst POSTER_CLASS_NAME: string = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nconst ENGINE_CLASS_NAME: string = 'playkit-engine';\n\n/**\n * The text style class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_STYLE_CLASS_NAME: string = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_CLASS_NAME: string = 'playkit-subtitles';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nconst AUTO: string = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nconst OFF: string = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nconst DURATION_OFFSET: number = 0.1;\n\n/**\n * The threshold in seconds from duration that we still consider it as live edge\n * @type {number}\n * @const\n */\nconst LIVE_EDGE_THRESHOLD: number = 1;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\nexport default class Player extends FakeEventTarget {\n  /**\n   * The player class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Player');\n\n  /**\n   * Runs the engines capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Player._logger.debug('Running player capabilities');\n    EngineProvider.getEngines().forEach(Engine => Engine.runCapabilities());\n  }\n\n  /**\n   * Gets the engines capabilities.\n   * @param {?string} engineType - The engine type.\n   * @return {Promise<Object>} - The engines capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(engineType: ?string): Promise<{[name: string]: any}> {\n    Player._logger.debug('Get player capabilities', engineType);\n    const promises = [];\n    EngineProvider.getEngines().forEach(Engine => promises.push(Engine.getCapabilities()));\n    return Promise.all(promises).then(arrayOfResults => {\n      const playerCapabilities = {};\n      arrayOfResults.forEach(res => Object.assign(playerCapabilities, res));\n      return engineType ? playerCapabilities[engineType] : playerCapabilities;\n    });\n  }\n\n  /**\n   * Sets an engine capabilities.\n   * @param {string} engineType - The engine type.\n   * @param {Object} capabilities - The engine capabilities.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static setCapabilities(engineType: string, capabilities: {[name: string]: any}): void {\n    Player._logger.debug('Set player capabilities', engineType, capabilities);\n    const selectedEngine = EngineProvider.getEngines().find(Engine => Engine.id === engineType);\n    if (selectedEngine) {\n      selectedEngine.setCapabilities(capabilities);\n    }\n  }\n\n  /**\n   * The event manager of the player.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n\n  /**\n   * The poster manager of the player.\n   * @type {PosterManager}\n   * @private\n   */\n  _posterManager: PosterManager;\n  /**\n   * The runtime configuration of the player.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * The current sources object.\n   * @type {PKSourcesConfigObject}\n   * @private\n   */\n  _sources: PKSourcesConfigObject = {};\n  /**\n   * The playback engine.\n   * @type {IEngine}\n   * @private\n   */\n  _engine: IEngine;\n  /**\n   * The state manager of the player.\n   * @type {StateManager}\n   * @private\n   */\n  _stateManager: StateManager;\n  /**\n   * The tracks of the player.\n   * @type {Array<Track | TextTrack | AudioTrack | VideoTrack>}\n   * @private\n   */\n  _tracks: Array<Track | TextTrack | AudioTrack | VideoTrack>;\n  /**\n   * The player ready promise\n   * @type {Promise<*>}\n   * @private\n   */\n  _readyPromise: ?Promise<*>;\n  /**\n   * Whether the play is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlay: boolean;\n  /**\n   * Whether the playing is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlaying: boolean;\n  /**\n   * Whether the playback already start\n   * @type {boolean}\n   * @private\n   */\n  _playbackStart: boolean;\n  /**\n   * If quality has changed after playback ended - pend the change\n   * @type {boolean}\n   * @private\n   */\n  _pendingSelectedVideoTrack: ?VideoTrack;\n  /**\n   * The available playback rates for the player.\n   * @type {Array<number>}\n   * @private\n   */\n  _playbackRates: Array<number>;\n  /**\n   * The player DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n  /**\n   * The player text DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _textDisplayEl: HTMLDivElement;\n  /**\n   * The player black cover div.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _blackCoverEl: HTMLDivElement;\n  /**\n   * The player DOM id.\n   * @type {string}\n   * @private\n   */\n  _playerId: string;\n  /**\n   * The player last updated text cues list\n   * @type {Array<any>}\n   * @private\n   */\n  _activeTextCues: Array<any> = [];\n  /**\n   * The player text disaply settings\n   * @type {PKTextTrackDisplaySettingObject}\n   * @private\n   */\n  _textDisplaySettings: PKTextTrackDisplaySettingObject = {};\n  /**\n   * The player text style settings\n   * @type {TextStyle}\n   * @private\n   */\n  _textStyle: TextStyle;\n  /**\n   * The playback middleware of the player.\n   * @type {PlaybackMiddleware}\n   * @private\n   */\n  _playbackMiddleware: PlaybackMiddleware;\n  /**\n   * The environment(os,device,browser) object of the player.\n   * @type {Object}\n   * @private\n   */\n  _env: Object;\n  /**\n   * The currently selected engine type\n   * @type {string}\n   * @private\n   */\n  _engineType: string;\n  /**\n   * The currently selected stream type\n   * @type {string}\n   * @private\n   */\n  _streamType: string;\n  /**\n   * The current playback attributes state\n   * @type {Object}\n   * @private\n   */\n  _playbackAttributesState: {[attribute: string]: any} = {\n    muted: undefined,\n    volume: undefined,\n    rate: undefined,\n    videoTrack: undefined,\n    audioLanguage: '',\n    textLanguage: ''\n  };\n  /**\n   * Whether a load media request has sent, the player should wait to media.\n   * @type {boolean}\n   * @private\n   */\n  _loadingMedia: boolean;\n  /**\n   * Whether the player is loading a source.\n   * @type {boolean}\n   * @private\n   */\n  _loading: boolean;\n  /**\n   * Reset indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _reset: boolean;\n  /**\n   * Destroyed indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _destroyed: boolean;\n  /**\n   * Fallback to muted auto play mode indicator.\n   * @type {boolean}\n   * @private\n   */\n  _fallbackToMutedAutoPlay: boolean;\n  /**\n   * holds the external tracks handler controller\n   * @type {ExternalCaptionsHandler}\n   * @private\n   */\n  _externalCaptionsHandler: ExternalCaptionsHandler;\n  /**\n   * holds the external tracks handler controller\n   * @type {ExternalCaptionsHandler}\n   * @private\n   */\n  _externalThumbnailsHandler: ExternalThumbnailsHandler;\n  /**\n   * holds the full screen controller\n   * @type {FullscreenController}\n   * @private\n   */\n  _fullscreenController: FullscreenController;\n  /**\n   * holds the resize observer. Incharge of notifying on resize changes.\n   * @type {?AdsController}\n   * @private\n   */\n  _resizeWatcher: ResizeWatcher;\n  /**\n   * Whether the user interacted with the player\n   * @type {boolean}\n   * @private\n   */\n  _hasUserInteracted: boolean = false;\n  /**\n   * Whether the video is seeked to live edge\n   * @type {boolean}\n   * @private\n   */\n  _isOnLiveEdge: boolean = false;\n  /**\n   * Whether should load after attach media used\n   * @type {boolean}\n   * @private\n   */\n  _shouldLoadAfterAttach: boolean = false;\n  /**\n   * The aspect ratio of the player.\n   * @type {?string}\n   * @private\n   */\n  _aspectRatio: ?string;\n  /**\n   * The engine decorator manager.\n   * @type {?EngineDecoratorManager}\n   * @private\n   */\n  _engineDecoratorManager: ?EngineDecoratorManager;\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  constructor(config: Object = {}) {\n    super();\n    this._setConfigLogLevel(config);\n    this._playerId = Utils.Generator.uniqueId(5);\n    this._prepareVideoElement();\n    Player.runCapabilities();\n    this._env = Env;\n    this._tracks = [];\n    this._firstPlay = true;\n    this._loadingMedia = false;\n    this._loading = false;\n    this._playbackStart = false;\n    this._firstPlaying = false;\n    this._reset = true;\n    this._destroyed = false;\n    this._fallbackToMutedAutoPlay = false;\n    this._config = Player._defaultConfig;\n    this._sources = Utils.Object.copyDeep(DefaultSources);\n    this._eventManager = new EventManager();\n    this._posterManager = new PosterManager();\n    this._stateManager = new StateManager(this);\n    this._resizeWatcher = new ResizeWatcher();\n    this._playbackMiddleware = new PlaybackMiddleware();\n    this._textStyle = new TextStyle();\n    this._createReadyPromise();\n    this._createPlayerContainer();\n    this._appendDomElements();\n    this._externalCaptionsHandler = new ExternalCaptionsHandler(this);\n    this._externalThumbnailsHandler = new ExternalThumbnailsHandler();\n    this._fullscreenController = new FullscreenController(this);\n    this.configure(config);\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n  configure(config: Object = {}): void {\n    this._setConfigLogLevel(config);\n    Utils.Object.mergeDeep(this._config, config);\n    this._applyTextTrackConfig(config);\n    this._applyABRRestriction(config);\n  }\n\n  /**\n   * Configures the player metadata according to a given configuration.\n   * @param {PKMetadataConfigObject} sourcesMetadata - The sources metadata for the player instance.\n   * @returns {void}\n   */\n  setSourcesMetadata(sourcesMetadata: PKMetadataConfigObject): void {\n    if (this._sources) {\n      if (!this._sources.metadata) {\n        this._sources.metadata = {};\n      }\n      Utils.Object.mergeDeep(this._sources.metadata, sourcesMetadata);\n    }\n  }\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {PKSourcesConfigObject} sources - The sources for the player instance.\n   * @returns {void}\n   */\n  setSources(sources: PKSourcesConfigObject): void {\n    if (this._hasSources(sources)) {\n      this.reset();\n      Utils.Object.mergeDeep(this._sources, sources);\n      this._resizeWatcher.init(Utils.Dom.getElementById(this._playerId));\n      Player._logger.debug('Change source started');\n      this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_STARTED));\n      this._reset = false;\n      if (this._selectEngineByPriority()) {\n        this.dispatchEvent(new FakeEvent(CustomEventType.SOURCE_SELECTED, {selectedSource: this._sources[this._streamType]}));\n        this._attachMedia();\n        this._handlePlaybackOptions();\n        this._posterManager.setSrc(this._sources.poster);\n        this._handleDimensions();\n        this._handlePreload();\n        this._handleAutoPlay();\n        Player._logger.debug('Change source ended');\n        this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_ENDED));\n      } else {\n        Player._logger.warn('No playable engines was found to play the given sources');\n        this.dispatchEvent(\n          new FakeEvent(\n            Html5EventType.ERROR,\n            new PKError(\n              PKError.Severity.CRITICAL,\n              PKError.Category.PLAYER,\n              PKError.Code.NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE,\n              'No Engine Found To Play The Source'\n            )\n          )\n        );\n      }\n    } else {\n      Utils.Object.mergeDeep(this._sources, sources);\n    }\n  }\n\n  /**\n   * The player readiness\n   * @public\n   * @returns {Promise<*>} - The ready promise\n   */\n  ready(): Promise<*> {\n    return this._readyPromise ? this._readyPromise : Promise.resolve();\n  }\n\n  /**\n   * Load media\n   * @public\n   * @returns {void}\n   */\n  load(): void {\n    const loadPlayer = () => {\n      if (this._engine) {\n        this._load();\n      } else {\n        this._eventManager.listenOnce(this, CustomEventType.SOURCE_SELECTED, () => this._load());\n      }\n    };\n    if (!this.src) {\n      this._playbackMiddleware.load(() => loadPlayer());\n    } else {\n      Player._logger.debug('The source has already been loaded. load request ignored');\n    }\n  }\n\n  /**\n   * Start/resume playback.\n   * @param {PKPlayOptionsObject} playOptions - additional options to control the play.\n   * @param {boolean} playOptions.programmatic - if true, the play call was not initiated by a user gesture and should be handled like auto play.\n   * @returns {void}\n   * @public\n   */\n  play(playOptions?: PKPlayOptionsObject): void {\n    if (playOptions && playOptions.programmatic) {\n      this._autoPlay();\n      return;\n    }\n\n    if (!this._playbackStart) {\n      this._playbackStart = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.PLAYBACK_START));\n      if (!this.src) {\n        this._prepareVideoElement();\n      }\n      this.load();\n    }\n    if (this._engine) {\n      this._playbackMiddleware.play(() => this._play());\n    } else if (this._loadingMedia) {\n      // load media requested but the response is delayed\n      this._playbackMiddleware.play(() => this._playAfterAsyncMiddleware());\n    } else {\n      this.dispatchEvent(\n        new FakeEvent(\n          Html5EventType.ERROR,\n          new PKError(PKError.Severity.CRITICAL, PKError.Category.PLAYER, PKError.Code.NO_SOURCE_PROVIDED, 'No Source Provided')\n        )\n      );\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @returns {void}\n   * @public\n   */\n  pause(): void {\n    if (this._engine) {\n      this._playbackMiddleware.pause(this._pause.bind(this));\n    }\n  }\n\n  /**\n   * Gets the view of the player (i.e the dom container object).\n   * @return {HTMLElement} - The dom container.\n   * @public\n   */\n  getView(): HTMLElement {\n    return this._el;\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): ?HTMLVideoElement {\n    if (this._engine) {\n      return this._engine.getVideoElement();\n    }\n  }\n\n  /**\n   * Get video height.\n   * @returns {?number} - The intrinsic height of the video.\n   * @public\n   */\n  get videoHeight(): ?number {\n    if (this._engine) {\n      return this._engine.videoHeight;\n    }\n    return null;\n  }\n\n  /**\n   * Get video width.\n   * @returns {?number} - The intrinsic width of the video.\n   * @public\n   */\n  get videoWidth(): ?number {\n    if (this._engine) {\n      return this._engine.videoWidth;\n    }\n    return null;\n  }\n\n  /**\n   * Resets the necessary components before change media.\n   * @public\n   * @param {boolean} isChangeMedia - Whether or not this reset triggered due to change media\n   * @returns {void}\n   */\n  reset(isChangeMedia: boolean = false): void {\n    if (this._reset) return;\n    this.pause();\n    //make sure all services are reset before engine and engine attributes are reset\n    this._externalCaptionsHandler.reset();\n    this._externalThumbnailsHandler.reset();\n    this._posterManager.reset();\n    this._stateManager.reset();\n    this._sources = Utils.Object.copyDeep(DefaultSources);\n    this._activeTextCues = [];\n    this._updateTextDisplay([]);\n    this._tracks = [];\n    TextTrack.reset();\n    this._resetStateFlags();\n    this._engineType = '';\n    this._streamType = '';\n    this._pendingSelectedVideoTrack = null;\n    if (this._engine) {\n      this._engine.reset();\n    }\n    this.showBlackCover();\n    this._reset = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_RESET, {isChangeMedia}));\n    this._eventManager.removeAll();\n    this._resizeWatcher.init(Utils.Dom.getElementById(this._playerId));\n    this._createReadyPromise();\n    this._isOnLiveEdge = false;\n    this._shouldLoadAfterAttach = false;\n  }\n\n  /**\n   * Destroys the player.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    if (this._destroyed) return;\n    //make sure all services are destroyed before engine and engine attributes are destroyed\n    this._externalCaptionsHandler.destroy();\n    this._posterManager.destroy();\n    this._stateManager.destroy();\n    this._fullscreenController.destroy();\n    this._activeTextCues = [];\n    this._textDisplaySettings = {};\n    this._config = {};\n    this._tracks = [];\n    this._engineType = '';\n    this._streamType = '';\n    this._readyPromise = null;\n    this._pendingSelectedVideoTrack = null;\n    this._resetStateFlags();\n    this._playbackAttributesState = {};\n    if (this._engine) {\n      this._engine.destroy();\n    }\n    if (this._engineDecoratorManager) {\n      this._engineDecoratorManager.destroy();\n    }\n    this._resizeWatcher.destroy();\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._destroyed = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_DESTROY));\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Hides the black cover div.\n   * @public\n   * @returns {void}\n   */\n  hideBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'hidden';\n    }\n  }\n\n  /**\n   * Shows the black cover div.\n   * @public\n   * @returns {void}\n   */\n  showBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'visible';\n    }\n  }\n\n  /**\n   * Attach the engine's media source\n   * @public\n   * @returns {void}\n   */\n  attachMediaSource(): void {\n    if (this._engine) {\n      this._shouldLoadAfterAttach = true;\n      this._engine.attachMediaSource();\n      this._eventManager.listenOnce(this, Html5EventType.CAN_PLAY, () => {\n        if (typeof this._playbackAttributesState.rate === 'number') {\n          this.playbackRate = this._playbackAttributesState.rate;\n        }\n      });\n    }\n  }\n\n  /**\n   * detach the engine's media source\n   * @public\n   * @returns {void}\n   */\n  detachMediaSource(): void {\n    if (this._engine) {\n      this.pause();\n      this.hideTextTrack();\n      this._shouldLoadAfterAttach = false;\n      this._createReadyPromise();\n      this._engine.detachMediaSource();\n    }\n  }\n\n  /**\n   * detach the engine's media source\n   * @public\n   * @returns {void}\n   * @param {IEngineDecoratorProvider} engineDecoratorProvider - function to create the decorator\n   */\n  registerEngineDecoratorProvider(engineDecoratorProvider: IEngineDecoratorProvider): void {\n    if (!this._engineDecoratorManager) {\n      this._engineDecoratorManager = new EngineDecoratorManager();\n    }\n    if (engineDecoratorProvider) {\n      this._engineDecoratorManager.register(engineDecoratorProvider);\n    }\n  }\n\n  /**\n   * Get the first buffered range of the engine.\n   * @returns {TimeRanges} - First buffered range of the engine in seconds.\n   * @public\n   */\n  get buffered(): ?TimeRanges {\n    if (this._engine) {\n      return this._engine.buffered;\n    }\n    return null;\n  }\n\n  get stats(): PKStatsObject {\n    let statsObject: PKStatsObject = {\n      targetBuffer: NaN,\n      availableBuffer: NaN\n    };\n    if (this._engine) {\n      statsObject.targetBuffer = this._engine.targetBuffer;\n      statsObject.availableBuffer = this._engine.availableBuffer;\n    }\n\n    return statsObject;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   */\n  set currentTime(to: number): void {\n    this._playbackMiddleware.setCurrentTime(to, this._setCurrentTime.bind(this));\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {?Number} - The playback current time.\n   * @public\n   */\n  get currentTime(): ?number {\n    if (this._engine) {\n      return this._engine.currentTime;\n    }\n    return null;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {?Number} - The playback duration.\n   * @public\n   */\n  get duration(): ?number {\n    if (this._engine) {\n      return this._engine.duration;\n    }\n    return null;\n  }\n\n  /**\n   * Get the live duration in seconds.\n   * @returns {?Number} - The live duration.\n   * @public\n   */\n  get liveDuration(): ?number {\n    if (this._engine) {\n      return this._engine.liveDuration;\n    }\n    return null;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @returns {void}\n   * @public\n   */\n  set volume(vol: number): void {\n    if (this._engine) {\n      if (Utils.Number.isFloat(vol) || vol === 0 || vol === 1) {\n        let boundedVol = vol;\n        if (boundedVol < 0) {\n          boundedVol = 0;\n        }\n        if (boundedVol > 1) {\n          boundedVol = 1;\n        }\n        this._engine.volume = boundedVol;\n      }\n    }\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {?Number} - The playback volume.\n   * @public\n   */\n  get volume(): ?number {\n    if (this._engine) {\n      return this._engine.volume;\n    }\n    return null;\n  }\n\n  /**\n   * Get paused state.\n   * @returns {?boolean} - Whether the video is paused or not.\n   * @public\n   */\n  get paused(): ?boolean {\n    if (this._engine) {\n      return this._engine.paused;\n    }\n    return null;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {?boolean} - Whether the video is seeking or not.\n   * @public\n   */\n  get seeking(): ?boolean {\n    if (this._engine) {\n      return this._engine.seeking;\n    }\n    return null;\n  }\n\n  /**\n   * Set playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @param {boolean} playsinline - Whether the video should plays in line.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (this._engine) {\n      this._engine.playsinline = playsinline;\n    }\n  }\n\n  /**\n   * Get playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @returns {boolean} - Whether the video plays in line.\n   */\n  get playsinline(): ?boolean {\n    if (this._engine) {\n      return this._engine.playsinline;\n    }\n    return null;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The mute value.\n   * @returns {void}\n   * @public\n   */\n  set muted(mute: boolean): void {\n    if (this._engine) {\n      this._engine.muted = mute;\n      this.dispatchEvent(new FakeEvent(CustomEventType.MUTE_CHANGE, {mute: mute}));\n      if (mute === false) {\n        this._fallbackToMutedAutoPlay = mute;\n      }\n    }\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {?boolean} - Whether the video is muted or not.\n   * @public\n   */\n  get muted(): ?boolean {\n    if (this._engine) {\n      return this._engine.muted;\n    }\n    return null;\n  }\n\n  /**\n   * Get the player source.\n   * @returns {?string} - The current source of the player.\n   * @public\n   */\n  get src(): ?string {\n    if (this._engine) {\n      return this._engine.src;\n    }\n    return null;\n  }\n\n  /**\n   * Sets the dimensions of the player.\n   * @param {PKDimensionsConfig} dimensions - the player dimensions config.\n   * @returns {void}\n   * @public\n   */\n  set dimensions(dimensions?: PKDimensionsConfig) {\n    const targetElement = this._getTargetElement();\n    if (!dimensions || Utils.Object.isEmptyObject(dimensions)) {\n      this._aspectRatio = null;\n      targetElement.style.width = null;\n      targetElement.style.height = null;\n    } else {\n      const {height, width} = Utils.Object.mergeDeep(this.dimensions, dimensions);\n      targetElement.style.width = typeof width === 'number' ? `${width}px` : width;\n      targetElement.style.height = typeof height === 'number' ? `${height}px` : height;\n      this._calcRatio(targetElement, dimensions);\n    }\n  }\n\n  _getTargetElement(): HTMLElement {\n    return Utils.Dom.getElementById(this._config.targetId);\n  }\n\n  /**\n   * Get the dimensions of the player.\n   * @returns {PKPlayerDimensions} - The dimensions of the player.\n   * @public\n   */\n  get dimensions(): PKPlayerDimensions {\n    return {\n      width: this._el.clientWidth,\n      height: this._el.clientHeight\n    };\n  }\n\n  /**\n   * Get the poster source URL\n   * @returns {string} - the poster image URL\n   */\n  get poster(): string {\n    return this._posterManager.src;\n  }\n\n  /**\n   * Sets the playbackRate property.\n   * @param {number} rate - The playback speed of the video.\n   */\n  set playbackRate(rate: number): void {\n    if (this._engine) {\n      this._engine.playbackRate = rate;\n    }\n  }\n\n  /**\n   * Gets the current playback speed of the video.\n   * @returns {number} - The current playback speed of the video.\n   */\n  get playbackRate(): ?number {\n    if (this._engine) {\n      return this._engine.playbackRate;\n    }\n    return null;\n  }\n\n  /**\n   * Gets the possible playback speeds of the video.\n   * @returns {Array<number>} - The possible playback speeds speed of the video.\n   */\n  get playbackRates(): Array<number> {\n    if (this._playbackRates) {\n      return this._playbackRates;\n    } else if (this._engine) {\n      return this._engine.playbackRates;\n    }\n    return [];\n  }\n\n  /**\n   * Gets the default playback speed of the video.\n   * @returns {number} - The default playback speed of the video.\n   */\n  get defaultPlaybackRate(): number {\n    if (this._engine) {\n      return this._engine.defaultPlaybackRate;\n    }\n    return 1;\n  }\n\n  /**\n   * get the engine type\n   * @returns {string} - html5\n   */\n  get engineType(): ?string {\n    return this._engineType;\n  }\n\n  /**\n   * get the stream type\n   * @returns {string} - hls|dash|progressive\n   */\n  get streamType(): ?string {\n    return this._streamType;\n  }\n\n  /**\n   * Getter for the environment of the player instance.\n   * @return {Object} - The current environment object.\n   * @public\n   */\n  get env(): Object {\n    return this._env;\n  }\n\n  /**\n   * Get the player config.\n   * @returns {Object} - A copy of the player configuration.\n   * @public\n   */\n  get config(): Object {\n    return Utils.Object.mergeDeep({}, this._config);\n  }\n\n  /**\n   * Get the current player sources object.\n   * @returns {Object} - A copy of the player configuration.\n   * @public\n   */\n  get sources(): PKSourcesConfigObject {\n    return Utils.Object.mergeDeep({}, this._sources);\n  }\n\n  /**\n   * Get whether the user already interacted with the player\n   * @returns {boolean} - Whether the user interacted with the player\n   * @public\n   */\n  get hasUserInteracted(): boolean {\n    return this._hasUserInteracted;\n  }\n\n  /**\n   * Set the _loadingMedia flag to inform the player that a load media request has sent.\n   * @param {boolean} loading - Whether a load media request has sent.\n   * @returns {void}\n   * @public\n   */\n  set loadingMedia(loading: boolean): void {\n    this._loadingMedia = loading;\n  }\n\n  /**\n   * Set crossOrigin attribute.\n   * @param {?string} crossOrigin - 'anonymous' or 'use-credentials'\n   * anonymous: CORS requests for this element will not have the credentials flag set.\n   * use-credentials: CORS requests for this element will have the credentials flag set; this means the request will provide credentials.\n   */\n  set crossOrigin(crossOrigin: ?string): void {\n    if (this._engine) {\n      this._engine.crossOrigin = crossOrigin;\n    }\n  }\n\n  /**\n   * Get crossOrigin attribute.\n   * @returns {?string} - 'anonymous' or 'use-credentials'\n   */\n  get crossOrigin(): ?string {\n    if (this._engine) {\n      return this._engine.crossOrigin;\n    }\n    return null;\n  }\n\n  /**\n   * Get ended attribute state.\n   * @returns {?boolean} - Whether the media has been ended.\n   */\n  get ended(): ?boolean {\n    if (this._engine) {\n      return this._engine.ended;\n    }\n    return null;\n  }\n\n  /**\n   * Get the playback middleware.\n   * @returns {PlaybackMiddleware} - The playback middleware.\n   */\n  get playbackMiddleware(): PlaybackMiddleware {\n    return this._playbackMiddleware;\n  }\n\n  /**\n   * Get the poster manager.\n   * @returns {PlaybackMiddleware} - The poster manager.\n   */\n  get posterManager(): PosterManager {\n    return this._posterManager;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Live API\">\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return !!(this._sources.type !== MediaType.VOD && (this._sources.type === MediaType.LIVE || (this._engine && this._engine.isLive())));\n  }\n\n  /**\n   * Checking if the current playback is audio only.\n   * @function isAudio\n   * @returns {boolean} - Whether playback is audio.\n   * @private\n   */\n  isAudio(): boolean {\n    return this._sources.type === MediaType.AUDIO;\n  }\n\n  /**\n   * Get whether the video is seeked to live edge in dvr\n   * @returns {boolean} - Whether the video is seeked to live edge in dvr\n   * @public\n   */\n  isOnLiveEdge(): boolean {\n    if (this._engine && typeof this._engine.isOnLiveEdge === 'function') {\n      return this._engine.isOnLiveEdge();\n    }\n    return this._isOnLiveEdge;\n  }\n\n  /**\n   * Checking if the current live playback has DVR window.\n   * @function isDvr\n   * @returns {boolean} - Whether live playback has DVR window.\n   * @public\n   */\n  isDvr(): boolean {\n    return this.isLive() && this._sources.dvr;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._engine && this.isLive()) {\n      this._engine.seekToLiveEdge();\n      this._isOnLiveEdge = true;\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._engine ? this._engine.getStartTimeOfDvrWindow() : 0;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks API\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function getTracks\n   * @template {Track | AudioTrack | TextTrack | VideoTrack} T\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<T>} - The parsed tracks.\n   * @public\n   */\n  getTracks<T: Track | AudioTrack | TextTrack | VideoTrack | ImageTrack>(type?: $Values<typeof TrackType>): Array<T> {\n    switch (type) {\n      case TrackType.VIDEO:\n        return Utils.Object.copyDeep(this._getVideoTracks());\n      case TrackType.AUDIO:\n        return Utils.Object.copyDeep(this._getAudioTracks());\n      case TrackType.TEXT:\n        return Utils.Object.copyDeep(this._getTextTracks());\n      case TrackType.IMAGE:\n        return Utils.Object.copyDeep(this._getImageTracks());\n      default:\n        return Utils.Object.copyDeep(this._tracks);\n    }\n  }\n\n  /**\n   * Get an object includes the active video/audio/text tracks\n   * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n   */\n  getActiveTracks(): Object {\n    return Utils.Object.copyDeep({\n      video: this._getVideoTracks().find(track => track.active),\n      audio: this._getAudioTracks().find(track => track.active),\n      text: this._getTextTracks().find(track => track.active)\n    });\n  }\n\n  /**\n   * Select a track\n   * @function selectTrack\n   * @param {?Track} track - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectTrack(track: ?Track): void {\n    if (this._engine) {\n      if (track instanceof VideoTrack) {\n        this._playbackAttributesState.videoTrack = track;\n        if (this._stateManager.currentState.type === StateType.IDLE) {\n          this._pendingSelectedVideoTrack = track;\n        } else {\n          this._engine.selectVideoTrack(track);\n        }\n      } else if (track instanceof AudioTrack) {\n        this._engine.selectAudioTrack(track);\n      } else if (track instanceof TextTrack) {\n        this._resetTextDisplay();\n        if (track.language === OFF) {\n          this.hideTextTrack();\n          this._externalCaptionsHandler.hideTextTrack();\n          this._playbackAttributesState.textLanguage = OFF;\n        } else if (track.external) {\n          this._engine.hideTextTrack();\n          this._externalCaptionsHandler.selectTextTrack(track);\n        } else {\n          this._externalCaptionsHandler.hideTextTrack();\n          this._engine.selectTextTrack(track);\n        }\n      } else if (track instanceof ImageTrack) {\n        this._engine.selectImageTrack(track);\n      }\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._engine) {\n      this._engine.hideTextTrack();\n      this._resetTextDisplay();\n      const textTracks = this._getTextTracks();\n      const activeTextTrack = textTracks.find(track => track.active === true);\n      if (activeTextTrack && activeTextTrack.external) {\n        this._externalCaptionsHandler.hideTextTrack();\n      }\n      textTracks.map(track => (track.active = false));\n      const textTrack = textTracks.find(track => track.language === OFF);\n      if (textTrack) {\n        textTrack.active = true;\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n      }\n      this._playbackAttributesState.textLanguage = OFF;\n    }\n  }\n\n  /**\n   * Show the text track.\n   * @returns {void}\n   * @public\n   */\n  showTextTrack(): void {\n    const textTracks = this._getTextTracks();\n    const prevLanguage = this._playbackAttributesState.textLanguage !== OFF && this._playbackAttributesState.textLanguage;\n    const prevOrAutoTextLang =\n      prevLanguage ||\n      this._getLanguage<TextTrack>(\n        textTracks,\n        AUTO,\n        textTracks.find(textTrack => textTrack.default)\n      );\n    this._setDefaultTrack<TextTrack>(textTracks, prevOrAutoTextLang);\n  }\n\n  /**\n   * Add text track\n   * @function addTextTrack\n   * @param {string} kind - Specifies the kind of text track.\n   * @param {?string} label - A string specifying the label for the text track.\n   * @param {?string} language - A two-letter language code that specifies the language of the text track.\n   * @returns {?TextTrack} - A TextTrack Object, which represents the new text track.\n   * @public\n   */\n  addTextTrack(kind: string, label?: string, language?: string): ?TextTrack {\n    if (this._engine && typeof this._engine.addTextTrack === 'function') {\n      return this._engine.addTextTrack(kind, label, language);\n    }\n  }\n\n  /**\n   * get the native text tracks\n   * @function getNativeTextTracks\n   * @returns {Array<TextTrack>} - The native TextTracks array.\n   * @public\n   */\n  getNativeTextTracks(): Array<TextTrack> {\n    if (this._engine && typeof this._engine.getNativeTextTracks === 'function') {\n      return this._engine.getNativeTextTracks();\n    }\n    return [];\n  }\n\n  /**\n   * Enables adaptive bitrate switching.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._engine) {\n      this._engine.enableAdaptiveBitrate();\n    }\n    this._playbackAttributesState.videoTrack = undefined;\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._engine) {\n      return this._engine.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * update the ABR restriction config\n   * @function _applyABRRestriction\n   * @returns {void}\n   * @param {Object} config - new config which configure for checking if it relevant config has changed\n   * @private\n   */\n  _applyABRRestriction(config: Object): void {\n    if (Utils.Object.hasPropertyPath(config, 'abr.restrictions') && this._engine && this._tracks.length) {\n      const {restrictions} = this._config.abr;\n      const videoTracks = this._tracks.filter(track => track instanceof VideoTrack);\n      const newVideoTracks = filterTracksByRestriction(videoTracks, restrictions);\n      if (newVideoTracks.length) {\n        const currentVideoTracks = this._tracks.filter(track => track instanceof VideoTrack && track.available);\n        const tracksHasChanged = !(\n          currentVideoTracks.length === newVideoTracks.length &&\n          currentVideoTracks.every((element: VideoTrack, index: number) => {\n            return element.bandwidth === newVideoTracks[index].bandwidth;\n          })\n        );\n        if (tracksHasChanged) {\n          this._engine.applyABRRestriction(restrictions);\n          this._tracks.forEach(track => {\n            if (newVideoTracks.includes(track) || !(track instanceof VideoTrack)) {\n              track.available = true;\n            } else {\n              track.available = false;\n              track.active = false;\n            }\n          });\n          if (!this.getActiveTracks().video) {\n            newVideoTracks[0].active = true;\n          }\n          this.dispatchEvent(new FakeEvent(CustomEventType.TRACKS_CHANGED, {tracks: this._tracks.filter(track => track.available)}));\n        }\n      } else {\n        Player._logger.warn('Invalid restriction, Nothing has changed values do not meet the restriction');\n      }\n    }\n  }\n  /**\n   * update the text track config from current config\n   * @function _applyTextTrackConfig\n   * @returns {void}\n   * @param {Object} config - new config which configure for checking if it relevant config has changed\n   * @private\n   */\n  _applyTextTrackConfig(config: Object): void {\n    if (Utils.Object.hasPropertyPath(config, 'text.textTrackDisplaySetting') || Utils.Object.getPropertyPath(config, 'text.forceCenter')) {\n      let textDisplaySettings = {};\n      if (Utils.Object.hasPropertyPath(this._config, 'text.textTrackDisplaySetting')) {\n        textDisplaySettings = Utils.Object.mergeDeep(textDisplaySettings, this._config.text.textTrackDisplaySetting);\n      }\n      if (Utils.Object.getPropertyPath(this._config, 'text.forceCenter')) {\n        textDisplaySettings = Utils.Object.mergeDeep(textDisplaySettings, {\n          position: 'auto',\n          align: 'center',\n          size: '100'\n        });\n      }\n      this.setTextDisplaySettings(textDisplaySettings);\n    }\n    try {\n      if (Utils.Object.hasPropertyPath(config, 'text.textStyle')) {\n        this.textStyle = TextStyle.fromJson(this._config.text.textStyle);\n      }\n    } catch (e) {\n      Player._logger.warn(e);\n    }\n  }\n\n  /**\n   *  Returns in-stream thumbnail for a chosen time.\n   * @param {number} time - playback time.\n   * @public\n   * @return {?ThumbnailInfo} - Thumbnail info\n   */\n  getThumbnail(time: number): ?ThumbnailInfo {\n    if (this._externalThumbnailsHandler.isUsingVttThumbnails()) {\n      return this._externalThumbnailsHandler.getThumbnail(time);\n    } else if (this._engine) {\n      return this._engine.getThumbnail(time);\n    }\n    return null;\n  }\n\n  /**\n   * update the text display settings\n   * @param {PKTextTrackDisplaySettingObject} settings - text cue display settings\n   * @public\n   * @returns {void}\n   */\n  setTextDisplaySettings(settings: PKTextTrackDisplaySettingObject): void {\n    this._textDisplaySettings = Utils.Object.mergeDeep(this._textDisplaySettings, settings);\n    this._updateCueDisplaySettings();\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  get textDisplaySetting(): Object {\n    return Utils.Object.copyDeep(this._textDisplaySettings);\n  }\n\n  /**\n   * Sets style attributes for text tracks.\n   * @param {TextStyle} style - text styling settings\n   * @returns {void}\n   */\n  set textStyle(style: TextStyle): void {\n    if (!(style instanceof TextStyle)) {\n      throw new Error('Style must be instance of TextStyle');\n    }\n    let element = Utils.Dom.getElementBySelector(`.${this._playerId}.${SUBTITLES_STYLE_CLASS_NAME}`);\n    if (!element) {\n      element = Utils.Dom.createElement('style');\n      Utils.Dom.addClassName(element, this._playerId);\n      Utils.Dom.addClassName(element, SUBTITLES_STYLE_CLASS_NAME);\n      Utils.Dom.appendChild(document.head, element);\n    }\n    let sheet = element.sheet;\n\n    while (sheet.cssRules.length) {\n      sheet.deleteRule(0);\n    }\n\n    try {\n      this._textStyle = style;\n      if (this._config.text.useNativeTextTrack) {\n        sheet.insertRule(`#${this._playerId} video.${ENGINE_CLASS_NAME}::cue { ${style.toCSS()} }`, 0);\n      } else if (this._engine) {\n        this._engine.resetAllCues();\n        this._externalCaptionsHandler.resetAllCues();\n        this._updateTextDisplay(this._activeTextCues);\n      }\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_STYLE_CHANGED));\n    } catch (e) {\n      Player._logger.error(e.message);\n    }\n  }\n\n  /**\n   * Gets style attributes for text tracks.\n   * @returns {?TextStyle} - the current style attribute\n   */\n  get textStyle(): ?TextStyle {\n    return this._textStyle.clone();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Fullscreen API\">\n  /**\n   * @returns {boolean} - Whether the player is in fullscreen mode.\n   * @public\n   */\n  isFullscreen(): boolean {\n    return this._fullscreenController.isFullscreen();\n  }\n\n  /**\n   * Notify the player that the ui application entered to fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyEnterFullscreen(): void {\n    if (this.isFullscreen()) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Notify the player that the ui application exited from fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyExitFullscreen(): void {\n    if (!this.isFullscreen()) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.EXIT_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Request the player to enter fullscreen.\n   * @public\n   * @param {string} elementId - element id to full screen\n   * @returns {void}\n   */\n  enterFullscreen(elementId: ?string): void {\n    this._fullscreenController.enterFullscreen(elementId);\n  }\n\n  /**\n   * Request the player to exit fullscreen.\n   * @public\n   * @returns {void}\n   */\n  exitFullscreen(): void {\n    this._fullscreenController.exitFullscreen();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Picture In Picture API\">\n\n  /**\n   * Request the player to enter picture in picture mode\n   * @public\n   * @returns {void}\n   */\n  enterPictureInPicture(): void {\n    if (this.isFullscreen()) {\n      this.exitFullscreen();\n    }\n    if (this._engine && !this._engine.isInPictureInPicture) {\n      this._engine.enterPictureInPicture();\n    }\n  }\n\n  /**\n   * Request the player to exit picture in picture mode\n   * @public\n   * @returns {void}\n   */\n  exitPictureInPicture(): void {\n    if (this._engine && this._engine.isInPictureInPicture) {\n      this._engine.exitPictureInPicture();\n    }\n  }\n\n  /**\n   * Check if the player is in picture in picture mode\n   * @public\n   * @return {boolean} if the player is in picture in picture mode or not\n   */\n  isInPictureInPicture(): boolean {\n    if (this._engine) {\n      return this._engine.isInPictureInPicture;\n    }\n    return false;\n  }\n\n  /**\n   * Check if picture in picture supported in this environment\n   * @public\n   * @return {boolean} if the picture in picture feature is supported in this environment\n   */\n  isPictureInPictureSupported(): boolean {\n    return !!this._config.playback.pictureInPicture && this._engine.isPictureInPictureSupported();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"VR API\">\n\n  /**\n   * Checking if the selected source is VR.\n   * @returns {boolean} - Whether is VR.\n   * @public\n   */\n  isVr(): boolean {\n    return !!this._sources.vr;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Logger API\">\n\n  /**\n   * get the log level\n   * @param {?string} name - the logger name\n   * @returns {Object} - the log level\n   */\n  getLogLevel(name?: string): Object {\n    return getLogLevel(name);\n  }\n\n  /**\n   * sets the logger level\n   * @param {Object} level - the log level\n   * @param {?string} name - the logger name\n   * @returns {void}\n   */\n  setLogLevel(level: Object, name?: string) {\n    setLogLevel(level, name);\n  }\n\n  getDrmInfo(): ?PKDrmDataObject {\n    return this._engine?.getDrmInfo();\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Private Methods\">\n\n  // <editor-fold desc=\"Playback\">\n\n  /**\n   * Remove the current text track from the player view.\n   * @returns {void}\n   * @private\n   */\n  _resetTextDisplay(): void {\n    this._activeTextCues = [];\n    this._updateTextDisplay([]);\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @private\n   */\n  _prepareVideoElement(): void {\n    EngineProvider.getEngines().forEach((Engine: IEngineStatic) => {\n      Engine.prepareVideoElement(this._playerId);\n    });\n  }\n\n  /**\n   * Set the config level of the player\n   * @returns {void}\n   * @param {Object} config - object containing the log level.\n   * @private\n   */\n  _setConfigLogLevel(config: Object): void {\n    if (config.log && config.log.level && LogLevel[config.log.level]) {\n      setLogLevel(LogLevel[config.log.level]);\n    }\n    if (config.log && typeof config.log.handler === 'function') {\n      setLogHandler(config.log.handler);\n    }\n  }\n\n  /**\n   * Check if sources has been received.\n   * @param {PKSourcesConfigObject} sources - sources config.\n   * @returns {boolean} - Whether sources has been received to the player.\n   * @private\n   */\n  _hasSources(sources: PKSourcesConfigObject): boolean {\n    if (sources) {\n      // $FlowFixMe\n      return !!Object.values(StreamType).find(type => sources[type] && sources[type].length > 0);\n    }\n    return false;\n  }\n\n  /**\n   * Creates the player container.\n   * @private\n   * @returns {void}\n   */\n  _createPlayerContainer(): void {\n    const el = (this._el = Utils.Dom.createElement('div'));\n    Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n    Utils.Dom.setAttribute(el, 'id', this._playerId);\n    Utils.Dom.setAttribute(el, 'tabindex', '-1');\n  }\n\n  /**\n   * Appends the engine's video element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendEngineEl(): void {\n    if (this._el) {\n      const engineEl = this._engine.getVideoElement();\n      const className = `${ENGINE_CLASS_NAME}`;\n      Utils.Dom.addClassName(engineEl, className);\n      const classNameWithId = `${ENGINE_CLASS_NAME}-${this._engine.id}`;\n      Utils.Dom.addClassName(engineEl, classNameWithId);\n      Utils.Dom.prependTo(engineEl, this._el);\n      if (this._engine.id === 'youtube') {\n        this._el.style.zIndex = 1;\n      }\n    }\n  }\n\n  /**\n   * Appends DOM elements by the following priority:\n   * 1. poster (strongest)\n   * 2. black screen\n   * 3. subtitles (weakest)\n   * @private\n   * @returns {void}\n   */\n  _appendDomElements(): void {\n    // Append playkit-black-cover\n    this._blackCoverEl = Utils.Dom.createElement('div');\n    Utils.Dom.addClassName(this._blackCoverEl, BLACK_COVER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._blackCoverEl);\n    // Append playkit-poster\n    const el = this._posterManager.getElement();\n    Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, el);\n    // Append playkit-subtitles\n    this._textDisplayEl = Utils.Dom.createElement('div');\n    Utils.Dom.setAttribute(this._textDisplayEl, 'aria-live', 'polite');\n    Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._textDisplayEl);\n  }\n\n  /**\n   * Creates the ready promise.\n   * @private\n   * @returns {void}\n   */\n  _createReadyPromise(): void {\n    this._readyPromise = new Promise((resolve, reject) => {\n      this._eventManager.listenOnce(this, CustomEventType.TRACKS_CHANGED, () => {\n        this.dispatchEvent(new FakeEvent(CustomEventType.MEDIA_LOADED));\n        resolve();\n      });\n      this._eventManager.listen(this, Html5EventType.ERROR, (event: FakeEvent) => {\n        if (event.payload.severity === PKError.Severity.CRITICAL) {\n          reject();\n        }\n      });\n    }).catch(() => {\n      // silence the promise rejection, error is handled by the error event\n    });\n  }\n\n  /**\n   * Selects an engine to play a source according to a given stream priority.\n   * @return {boolean} - Whether a proper engine was found to play the given sources\n   * according to the priority.\n   * @private\n   */\n  _selectEngineByPriority(): boolean {\n    const streamPriority = this._config.playback.streamPriority;\n    const preferNative = this._config.playback.preferNative;\n    const sources = this._sources;\n    for (let priority of streamPriority) {\n      const engineId = typeof priority.engine === 'string' ? priority.engine.toLowerCase() : '';\n      const format = typeof priority.format === 'string' ? priority.format.toLowerCase() : '';\n      const Engine = EngineProvider.getEngines().find(Engine => Engine.id === engineId);\n      if (Engine) {\n        // $FlowFixMe\n        const formatSources = sources[format];\n        if (formatSources && formatSources.length > 0) {\n          const source = formatSources[0];\n          if (Engine.canPlaySource(source, preferNative[format], this._config.drm)) {\n            Player._logger.debug('Source selected: ', formatSources);\n            this._loadEngine(Engine, source);\n            this._engineType = engineId;\n            this._streamType = format;\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Loads the selected engine.\n   * @param {IEngineStatic} Engine - The selected engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadEngine(Engine: IEngineStatic, source: PKMediaSourceObject) {\n    if (!this._engine) {\n      this._createEngine(Engine, source);\n      this._appendEngineEl();\n    } else {\n      if (this._engine.id === Engine.id) {\n        this._engine.restore(source, {...this._config, sources: this._sources});\n      } else {\n        this._engine.destroy();\n        this._createEngine(Engine, source);\n        this._appendEngineEl();\n      }\n    }\n  }\n\n  /**\n   * Creates an engine or an engine decorator.\n   * @param {IEngine} Engine - The selected engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @returns {void}\n   * @private\n   */\n  _createEngine(Engine: IEngineStatic, source: PKMediaSourceObject): void {\n    const engine = Engine.createEngine(source, {...this._config, sources: this._sources}, this._playerId);\n    this._engine = this._engineDecoratorManager ? new EngineDecorator(engine, this._engineDecoratorManager) : engine;\n  }\n\n  /**\n   * Listen to all HTML5 defined events and trigger them on the player\n   * @private\n   * @returns {void}\n   */\n  _attachMedia(): void {\n    if (this._engine) {\n      Object.keys(Html5EventType).forEach(html5Event => {\n        this._eventManager.listen(this._engine, Html5EventType[html5Event], (event: FakeEvent) => {\n          return this.dispatchEvent(event);\n        });\n      });\n      this._eventManager.listen(this._engine, Html5EventType.SEEKING, () => {\n        if (this.isLive()) {\n          this._isOnLiveEdge = this.duration && this.currentTime ? this.currentTime >= this.duration - LIVE_EDGE_THRESHOLD && !this.paused : false;\n        }\n      });\n      this._eventManager.listen(this._engine, Html5EventType.SEEKED, () => {\n        const browser = this._env.browser.name;\n        if (browser === 'Edge' || browser === 'IE') {\n          this._removeTextCuePatch();\n        }\n      });\n      this._eventManager.listen(this._engine, CustomEventType.MEDIA_RECOVERED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.IMAGE_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_TRACK_ADDED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedVideoTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => {\n        this.ready().then(() => (this._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language));\n        this._markActiveTrack(event.payload.selectedAudioTrack);\n        this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this._onTextTrackChanged(event));\n      this._eventManager.listen(this._engine, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this._onTracksChanged(event));\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._engine, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.TIMED_METADATA, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.TIMED_METADATA_CHANGE, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.TIMED_METADATA_ADDED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.PLAY_FAILED, (event: FakeEvent) => {\n        this._onPlayFailed(event);\n        this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.FPS_DROP, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.FRAG_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.DRM_LICENSE_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.MANIFEST_LOADED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.MEDIA_RECOVERED, () => this._handleRecovered());\n      this._eventManager.listen(this, Html5EventType.PLAY, this._onPlay.bind(this));\n      this._eventManager.listen(this, Html5EventType.PAUSE, this._onPause.bind(this));\n      this._eventManager.listen(this, Html5EventType.PLAYING, this._onPlaying.bind(this));\n      this._eventManager.listen(this, Html5EventType.ENDED, this._onEnded.bind(this));\n      this._eventManager.listen(this, CustomEventType.MUTE_CHANGE, () => {\n        this._playbackAttributesState.muted = this.muted;\n      });\n      this._eventManager.listen(this, Html5EventType.VOLUME_CHANGE, () => {\n        this._playbackAttributesState.volume = this.volume;\n      });\n      this._eventManager.listen(this, Html5EventType.RATE_CHANGE, () => {\n        this._playbackAttributesState.rate = this.playbackRate;\n      });\n      this._eventManager.listen(this, CustomEventType.ENTER_FULLSCREEN, () => this._resetTextCuesAndReposition());\n      this._eventManager.listen(this, CustomEventType.EXIT_FULLSCREEN, () => this._resetTextCuesAndReposition());\n      this._eventManager.listen(this._resizeWatcher, CustomEventType.RESIZE, (event: FakeEvent) => {\n        this._resetTextCuesAndReposition();\n        this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._externalCaptionsHandler, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._externalCaptionsHandler, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) =>\n        this._onTextTrackChanged(event)\n      );\n      this._eventManager.listen(this._externalCaptionsHandler, Html5EventType.ERROR, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._externalThumbnailsHandler, Html5EventType.ERROR, (event: FakeEvent) => this.dispatchEvent(event));\n      const rootElement = Utils.Dom.getElementBySelector(`#${this.config.targetId}`);\n      if (rootElement) {\n        this._eventManager.listen(\n          rootElement,\n          'click',\n          () => {\n            this._hasUserInteracted = true;\n            this.dispatchEvent(new FakeEvent(CustomEventType.USER_GESTURE));\n          },\n          {capture: true}\n        );\n      }\n    }\n  }\n\n  /**\n   * if the media was recovered (after a media failure) then initiate play again (if that was the state before)\n   * @returns {void}\n   * @private\n   */\n  _handleRecovered(): void {\n    if (this._stateManager.currentState.type === StateType.PLAYING) {\n      this.play();\n    }\n  }\n\n  /**\n   * The text track changed event object\n   * @param {FakeEvent} event - payload with text track\n   * @returns {void}\n   * @private\n   */\n  _onTextTrackChanged(event: FakeEvent): void {\n    this.ready().then(() => (this._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language));\n    this._markActiveTrack(event.payload.selectedTextTrack);\n    this.dispatchEvent(event);\n  }\n\n  /**\n   * Reset the active cues hasBeenReset = true and then reposition it, timeout here is for the screen to\n   * finish render the fullscreen\n   * @returns {void}\n   * @private\n   */\n  _resetTextCuesAndReposition(): void {\n    this._engine.resetAllCues();\n    this._externalCaptionsHandler.resetAllCues();\n    this._updateTextDisplay([]);\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  /**\n   * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n   * are not removed\n   * @returns {void}\n   * @private\n   */\n  _removeTextCuePatch(): void {\n    let filteredActiveTextCues = this._activeTextCues.filter(textCue => {\n      const cueEndTime = textCue._endTime;\n      const cueStartTime = textCue._startTime;\n      const currTime = this.currentTime;\n      if (currTime < cueEndTime && currTime > cueStartTime) {\n        return textCue;\n      }\n    });\n    this._updateTextDisplay(filteredActiveTextCues);\n  }\n\n  /**\n   * Handles the playback options, from current state or config.\n   * @returns {void}\n   * @private\n   */\n  _handlePlaybackOptions(): void {\n    this._config.playback = this._config.playback || {};\n    if (typeof this._playbackAttributesState.muted === 'boolean') {\n      this.muted = this._playbackAttributesState.muted;\n    } else if (typeof this._config.playback.muted === 'boolean') {\n      this.muted = this._config.playback.muted;\n    }\n    if (typeof this._playbackAttributesState.volume === 'number') {\n      this.volume = this._playbackAttributesState.volume;\n    } else if (typeof this._config.playback.volume === 'number') {\n      this.volume = this._config.playback.volume;\n    }\n    if (typeof this._config.playback.playsinline === 'boolean') {\n      this.playsinline = this._config.playback.playsinline;\n    }\n    if (typeof this._config.playback.crossOrigin === 'string') {\n      this.crossOrigin = this._config.playback.crossOrigin;\n    }\n    if (Array.isArray(this._config.playback.playbackRates)) {\n      const validPlaybackRates = this._config.playback.playbackRates\n        .filter((number, index, self) => number > 0 && number <= 16 && self.indexOf(number) === index)\n        .sort((a, b) => a - b);\n      if (validPlaybackRates) {\n        this._playbackRates = validPlaybackRates;\n      }\n    }\n  }\n\n  /**\n   * Handles preload.\n   * @returns {void}\n   * @private\n   */\n  _handlePreload(): void {\n    if (this._config.playback.preload === 'auto' && !this._config.playback.autoplay) {\n      this.load();\n    }\n  }\n\n  _autoPlay(): void {\n    const allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n    Player.getCapabilities(this.engineType).then(capabilities => {\n      if (capabilities.autoplay) {\n        onAutoPlay();\n      } else {\n        if (capabilities.mutedAutoPlay) {\n          if (this.muted && !this._fallbackToMutedAutoPlay) {\n            onMutedAutoPlay();\n          } else if (allowMutedAutoPlay) {\n            onFallbackToMutedAutoPlay();\n          } else {\n            onAutoPlayFailed();\n          }\n        } else {\n          onAutoPlayFailed();\n        }\n      }\n    });\n\n    const onAutoPlay = () => {\n      Player._logger.debug('Start autoplay');\n      // If the previous state was fallback to muted autoplay:\n      // unmute the player and clear the fallback state\n      if (this._fallbackToMutedAutoPlay) {\n        this._fallbackToMutedAutoPlay = false;\n        this.muted = false;\n      }\n      this.play();\n    };\n\n    const onMutedAutoPlay = () => {\n      Player._logger.debug('Start muted autoplay');\n      this.play();\n    };\n\n    const onFallbackToMutedAutoPlay = () => {\n      Player._logger.debug('Fallback to muted autoplay');\n      this._fallbackToMutedAutoPlay = true;\n      this.muted = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.FALLBACK_TO_MUTED_AUTOPLAY));\n      this.play();\n    };\n\n    const onAutoPlayFailed = () => {\n      Player._logger.warn('Autoplay failed, pause player');\n      this._posterManager.show();\n      this.load();\n      this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED));\n    };\n  }\n\n  /**\n   }\n   * Checks auto play configuration and handles initialization accordingly.\n   * @returns {void}\n   * @private\n   */\n  _handleAutoPlay(): void {\n    if (this.isAudio() || this._config.playback.autoplay !== AutoPlayType.TRUE) {\n      this._posterManager.show();\n    }\n    if (this._config.playback.autoplay === AutoPlayType.TRUE) {\n      this._autoPlay();\n    }\n  }\n\n  /**\n   * Play after async ads\n   * @private\n   * @returns {void}\n   */\n  _playAfterAsyncMiddleware(): void {\n    if (this._engine) {\n      this._play();\n    } else {\n      this._eventManager.listenOnce(this, CustomEventType.SOURCE_SELECTED, () => this._play());\n    }\n  }\n\n  _load(): void {\n    const resetFlags = () => {\n      this._loading = false;\n      this._reset = false;\n    };\n    if (this._engine && !this.src && !this._loading) {\n      this._loading = true;\n      const startTime = this._sources.startTime;\n      this._engine\n        .load(startTime)\n        .then(data => {\n          if (this.isLive() && (startTime === -1 || Number(startTime) >= Number(this.duration))) {\n            this._isOnLiveEdge = true;\n          }\n          this._updateTracks(data.tracks);\n          this.dispatchEvent(new FakeEvent(CustomEventType.TRACKS_CHANGED, {tracks: this._tracks}));\n          this._externalThumbnailsHandler.load(this.sources.thumbnails);\n        })\n        .finally(() => {\n          resetFlags();\n        });\n    }\n  }\n\n  /**\n   * Handles and sets the initial dimensions configuration if such exists.\n   * @private\n   * @returns {void}\n   */\n  _handleDimensions(): void {\n    const {dimensions} = this.config;\n    if (Utils.Object.isObject(dimensions) && !Utils.Object.isEmptyObject(dimensions)) {\n      this.dimensions = dimensions;\n    }\n  }\n\n  /**\n   * Start/resume the engine playback.\n   * @private\n   * @returns {void}\n   */\n  _play(): void {\n    if (this._shouldLoadAfterAttach) {\n      this._load();\n      this._shouldLoadAfterAttach = false;\n    }\n    this.ready().then(() => {\n      if (this._shouldPlayerSeekToLiveEdge()) {\n        this.seekToLiveEdge();\n      }\n      this._engine.play();\n    });\n  }\n\n  /**\n   * Checking if player should seek to live edge.\n   * @returns {boolean} - Whether player should seek to live edge.\n   * @private\n   */\n  _shouldPlayerSeekToLiveEdge(): boolean {\n    if (this.isLive()) {\n      const outOfDvr = !this.isDvr() || (typeof this.currentTime === 'number' && this.currentTime < 0);\n      if (!this._firstPlay) {\n        return outOfDvr;\n      } else {\n        return !!this.src && !this.isOnLiveEdge();\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Starts the engine pause.\n   * @private\n   * @returns {void}\n   */\n  _pause(): void {\n    this._engine.pause();\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @private\n   * @returns {void}\n   */\n  _setCurrentTime(to: number): void {\n    if (this._engine) {\n      if (Utils.Number.isNumber(to)) {\n        let boundedTo = to;\n        if (to < 0) {\n          boundedTo = 0;\n        }\n        const safeDuration = this.isLive() ? this._engine.duration : this._engine.duration - DURATION_OFFSET;\n\n        if (boundedTo > safeDuration) {\n          boundedTo = safeDuration;\n        }\n        this._engine.currentTime = boundedTo;\n      }\n    }\n  }\n\n  /**\n   * @function _onPause\n   * @return {void}\n   * @private\n   */\n  _onPause(): void {\n    this._isOnLiveEdge = false;\n  }\n\n  /**\n   * @function _onPlay\n   * @return {void}\n   * @private\n   */\n  _onPlay(): void {\n    if (this._firstPlay) {\n      this._firstPlay = false;\n      this.dispatchEvent(new FakeEvent(CustomEventType.FIRST_PLAY));\n      this.hideBlackCover();\n      if (typeof this._playbackAttributesState.rate === 'number') {\n        this.playbackRate = this._playbackAttributesState.rate;\n      }\n    }\n  }\n\n  /**\n   * @function _onPlaying\n   * @return {void}\n   * @private\n   */\n  _onPlaying(): void {\n    if (!this._firstPlaying) {\n      this._firstPlaying = true;\n      if (!this.isAudio()) {\n        this._posterManager.hide();\n      }\n      this.dispatchEvent(new FakeEvent(CustomEventType.FIRST_PLAYING));\n    }\n    if (this._engine && this._pendingSelectedVideoTrack) {\n      this._engine.selectVideoTrack(this._pendingSelectedVideoTrack);\n      this._pendingSelectedVideoTrack = null;\n    }\n  }\n\n  /**\n   * @function _onPlayFailed\n   * @param {FakeEvent} event - the play failed event\n   * @return {void}\n   * @private\n   */\n  _onPlayFailed(event: FakeEvent): void {\n    if (this._firstPlay && this._config.playback.autoplay) {\n      this._posterManager.show();\n      this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED, event.payload));\n    }\n  }\n\n  /**\n   * @function _onEnded\n   * @return {void}\n   * @private\n   */\n  _onEnded(): void {\n    if (!this.paused) {\n      this._pause();\n    }\n  }\n\n  /**\n   * Resets the state flags of the player.\n   * @returns {void}\n   * @private\n   */\n  _resetStateFlags(): void {\n    this._loading = false;\n    this._firstPlay = true;\n    this._loadingMedia = false;\n    this._playbackStart = false;\n    this._firstPlaying = false;\n  }\n\n  /**\n   * Calculates the aspect ratio of the player.\n   * @param {HTMLDivElement} targetElement - the player root element.\n   * @param {PKDimensionsConfig} dimensions - the player dimensions input.\n   * @returns {void}\n   * @public\n   */\n  _calcRatio(targetElement: HTMLDivElement, dimensions: PKDimensionsConfig) {\n    if (typeof dimensions.ratio !== 'undefined') {\n      this._aspectRatio = dimensions.ratio;\n    }\n    if (this._aspectRatio) {\n      const [ratioWidth, ratioHeight] = this._aspectRatio.split(':').map(r => Number(r));\n      if (dimensions.width || (!dimensions.width && !dimensions.height)) {\n        const height = (ratioHeight / ratioWidth) * targetElement.clientWidth;\n        targetElement.style.height = `${height}px`;\n      } else if (dimensions.height && !dimensions.width) {\n        const width = (ratioWidth / ratioHeight) * targetElement.clientHeight;\n        targetElement.style.width = `${width}px`;\n      }\n    }\n  }\n\n  /**\n   * @returns {Object} - The default configuration of the player.\n   * @private\n   * @static\n   */\n  static get _defaultConfig(): Object {\n    return Utils.Object.copyDeep(DefaultConfig);\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks\">\n\n  /**\n   * handle tracks change\n   * @param {FakeEvent} event - the tracks change event payload\n   * @private\n   * @returns {void}\n   */\n  _onTracksChanged(event: FakeEvent): void {\n    this._updateTracks(event.payload.tracks);\n    this.dispatchEvent(event);\n  }\n\n  /**\n   * update the player tracks\n   * @param {Array<Track>} tracks - the player tracks\n   * @private\n   * @returns {void}\n   */\n  _updateTracks(tracks: Array<Track>): void {\n    Player._logger.debug('Tracks changed', tracks);\n    this._tracks = tracks.concat(this._externalCaptionsHandler.getExternalTracks(tracks));\n    this._applyABRRestriction(this._config);\n    this._addTextTrackOffOption();\n    this._maybeSetTracksLabels();\n    this._setDefaultTracks();\n  }\n\n  /**\n   * Returns the tracks according to a type.\n   * @function _getTextTracks\n   * @template {TextTrack | AudioTrack | VideoTrack} T\n   * @param {T} [type] - a tracks type filter.\n   * @returns {Array<T>} - The parsed tracks.\n   * @private\n   */\n  _getTracksByType<T: TextTrack | AudioTrack | VideoTrack | ImageTrack>(type: T): Array<T> {\n    return this._tracks.reduce((arr, track) => {\n      if (track instanceof type && track.available) {\n        arr.push(track);\n      }\n      return arr;\n    }, ([]: Array<T>));\n  }\n\n  /**\n   * Returns the image tracks.\n   * @function _getImageTracks\n   * @returns {Array<ImageTrack>} - The image tracks.\n   * @private\n   */\n  _getImageTracks(): Array<ImageTrack> {\n    return this._getTracksByType<ImageTrack>(ImageTrack);\n  }\n\n  /**\n   * Returns the text tracks.\n   * @function _getTextTracks\n   * @returns {Array<TextTrack>} - The text tracks.\n   * @private\n   */\n  _getTextTracks(): Array<TextTrack> {\n    return this._getTracksByType<TextTrack>(TextTrack);\n  }\n\n  /**\n   * Returns the video tracks.\n   * @function _getVideoTracks\n   * @returns {Array<VideoTrack>} - The video tracks.\n   * @private\n   */\n  _getVideoTracks(): Array<VideoTrack> {\n    return this._getTracksByType<VideoTrack>(VideoTrack);\n  }\n\n  /**\n   * Returns the audio tracks.\n   * @function _getAudioTracks\n   * @returns {Array<AudioTrack>} - The audio tracks.\n   * @private\n   */\n  _getAudioTracks(): Array<AudioTrack> {\n    return this._getTracksByType<AudioTrack>(AudioTrack);\n  }\n\n  /**\n   * Mark the selected track as active\n   * @function _markActiveTrack\n   * @param {Track} track - the track to mark\n   * @returns {void}\n   * @private\n   */\n  _markActiveTrack(track: Track): void {\n    let tracks;\n    if (track instanceof VideoTrack) {\n      tracks = this._getVideoTracks();\n    } else if (track instanceof AudioTrack) {\n      tracks = this._getAudioTracks();\n    } else if (track instanceof TextTrack) {\n      tracks = this._getTextTracks();\n    }\n    if (tracks) {\n      for (let i = 0; i < tracks.length; i++) {\n        tracks[i].active = track.index === tracks[i].index;\n      }\n    }\n  }\n\n  /**\n   * handle text cue change\n   * @param {FakeEvent} event - the cue change event payload\n   * @private\n   * @returns {void}\n   */\n  _onCueChange(event: FakeEvent): void {\n    Player._logger.debug('Text cue changed', event.payload.cues);\n    //TODO: remove filter once FEC-11048 fix is done\n    try {\n      this._activeTextCues = event.payload.cues.filter((cue, index, cues) => {\n        const prevCue = cues[index - 1];\n        if (!prevCue) {\n          return true;\n        }\n        return !(cue.startTime === prevCue.startTime && cue.endTime === prevCue.endTime && cue.text.trim() === prevCue.text.trim());\n      });\n    } catch (e) {\n      this._activeTextCues = event.payload.cues;\n    }\n    this._updateCueDisplaySettings();\n    this._updateTextDisplay(this._activeTextCues);\n    this.dispatchEvent(event);\n  }\n\n  /**\n   * update the text cue display settings\n   * @private\n   * @returns {void}\n   */\n  _updateCueDisplaySettings(): void {\n    const activeCues = this._activeTextCues;\n    const settings = this._textDisplaySettings;\n    for (let i = 0; i < activeCues.length; i++) {\n      let cue = activeCues[i];\n      for (let name in settings) {\n        if (settings[name]) {\n          cue[name] = settings[name];\n        }\n      }\n    }\n  }\n\n  /**\n   * update the text display\n   * @param {Array<Cue>} cues - list of cues\n   * @private\n   * @returns {void}\n   */\n  _updateTextDisplay(cues: Array<Cue>): void {\n    if (!this._config.text.useNativeTextTrack) {\n      processCues(window, cues, this._textDisplayEl, this._textStyle);\n    }\n  }\n\n  /**\n   * Add off text track if there are actual text tracks associated with media\n   * setting this track is the same as calling Player's hideTextTrack\n   * @private\n   * @returns {void}\n   */\n  _addTextTrackOffOption(): void {\n    const textTracks = this._getTextTracks();\n    if (textTracks && textTracks.length) {\n      this._tracks.push(\n        new TextTrack({\n          active: false,\n          kind: TextTrack.KIND.SUBTITLES,\n          label: 'Off',\n          language: OFF\n        })\n      );\n    }\n  }\n\n  /**\n   * Sets the default tracks defined in the player config.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTracks(): void {\n    const activeTracks = this.getActiveTracks();\n    const playbackConfig = this.config.playback;\n    const offTextTrack: ?Track = this._getTextTracks().find(track => TextTrack.langComparer(OFF, track.language));\n    const currentOrConfiguredTextLang =\n      window.localStorage.getItem('kaltura-player-js_textLanguage') ||\n      this._playbackAttributesState.textLanguage ||\n      this._getLanguage<TextTrack>(this._getTextTracks(), playbackConfig.textLanguage, activeTracks.text);\n    const currentOrConfiguredAudioLang =\n      this._playbackAttributesState.audioLanguage ||\n      this._getLanguage<AudioTrack>(this._getAudioTracks(), playbackConfig.audioLanguage, activeTracks.audio);\n    this._setDefaultTrack<TextTrack>(this._getTextTracks(), currentOrConfiguredTextLang, offTextTrack);\n    this._setDefaultTrack<AudioTrack>(this._getAudioTracks(), currentOrConfiguredAudioLang, activeTracks.audio);\n    this._setDefaultVideoTrack();\n  }\n\n  /**\n   * Gets the track language that should be set by default.\n   * @param {Array<T>} tracks - the audio or text tracks.\n   * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n   * @param {?T} defaultTrack - The default track.\n   * @private\n   * @returns {string} - The track language to set by default.\n   */\n  _getLanguage<T: TextTrack | AudioTrack>(tracks: Array<T>, configuredLanguage: string, defaultTrack: ?T): string {\n    let language = configuredLanguage;\n    if (language === AUTO) {\n      const localeTrack: ?T = tracks.find(track => Track.langComparer(Locale.language, track.language));\n      if (localeTrack) {\n        language = localeTrack.language;\n      } else if (defaultTrack && defaultTrack.language !== OFF) {\n        language = defaultTrack.language;\n      } else if (tracks && tracks.length > 0) {\n        language = tracks[0].language;\n      }\n    }\n    return language;\n  }\n\n  /**\n   * Sets a specific default track.\n   * @template {TextTrack | AudioTrack} T\n   * @param {Array<T>} tracks - the audio or text tracks.\n   * @param {string} language - The track language.\n   * @param {Track} defaultTrack - The default track to set in case there is no language configured.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTrack<T: TextTrack | AudioTrack>(tracks: Array<T>, language: string, defaultTrack: ?Track): void {\n    const updateTrack = track => {\n      this.selectTrack(track);\n      this._markActiveTrack(track);\n    };\n    const sameTrack: ?T = tracks.find(track => Track.langComparer(language, track.language, true));\n    if (sameTrack) {\n      updateTrack(sameTrack);\n    } else {\n      const track: ?T = tracks.find(track => Track.langComparer(language, track.language, false));\n      if (track) {\n        updateTrack(track);\n      } else if (defaultTrack && !defaultTrack.active) {\n        this.selectTrack(defaultTrack);\n      }\n    }\n  }\n\n  /**\n   * Sets the video track selected by the user.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultVideoTrack(): void {\n    const sortedVideoTracks = this._getVideoTracks().sort((track1: VideoTrack, track2: VideoTrack) => track2.bandwidth - track1.bandwidth);\n    let selectedVideoTrack = sortedVideoTracks.find(\n      (track: VideoTrack) => track.label && track.label === this._playbackAttributesState.videoTrack?.label\n    );\n    if (!selectedVideoTrack) {\n      selectedVideoTrack = sortedVideoTracks.find(\n        (track: VideoTrack) => track.height && track.height === this._playbackAttributesState.videoTrack?.height\n      );\n    }\n    if (selectedVideoTrack) {\n      this.selectTrack(selectedVideoTrack);\n    }\n  }\n\n  /**\n   * Checks for callbacks that should change the tracks, and call them on the\n   * respective track group (audio/text/video)\n   * @private\n   * @returns {void}\n   */\n  _maybeSetTracksLabels() {\n    const customLabels = this._config.customLabels;\n    if (customLabels) {\n      for (let callbackType in customLabels) {\n        if (!Object.prototype.hasOwnProperty.call(customLabels, callbackType)) {\n          return;\n        }\n        switch (callbackType) {\n          case LabelOptions.QUALITIES:\n            this._setTracksCustomLabels(this._getVideoTracks(), customLabels[callbackType]);\n            break;\n          case LabelOptions.AUDIO:\n            this._setTracksCustomLabels(this._getAudioTracks(), customLabels[callbackType]);\n            break;\n          case LabelOptions.CAPTIONS:\n            this._setTracksCustomLabels(this._getTextTracks(), customLabels[callbackType]);\n            break;\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @template {AudioTrack | TextTrack | VideoTrack} T\n   * @param {Array<T>} tracks - tracks\n   * @param {Function} callback - application label callback, returns a string\n   * @private\n   * @returns {void}\n   */\n  _setTracksCustomLabels<T: AudioTrack | TextTrack | VideoTrack>(tracks: Array<T>, callback: Function) {\n    tracks.forEach(track => {\n      const result = callback(Utils.Object.copyDeep(track));\n      if (result) {\n        track.label = result;\n      }\n    });\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Enums\">\n\n  /**\n   * Gets the player event types.\n   * @returns {PKEventTypes} - The event types of the player.\n   * @public\n   */\n  get Event(): PKEventTypes {\n    return EventType;\n  }\n\n  /**\n   * Gets the player TextStyle.\n   * @returns {TextStyle} - The TextStyle class\n   * @public\n   */\n  get TextStyle(): typeof TextStyle {\n    return TextStyle;\n  }\n\n  /**\n   * Gets the player state types.\n   * @returns {PKStateTypes} - The state types of the player.\n   * @public\n   */\n  get State(): PKStateTypes {\n    return StateType;\n  }\n\n  /**\n   * Gets the player tracks types.\n   * @returns {TrackType} - The tracks types of the player.\n   * @public\n   */\n  get Track(): typeof TrackType {\n    return TrackType;\n  }\n\n  /**\n   * Gets the player log level types.\n   * @returns {PKLogLevelTypes} - The log level types of the player.\n   * @public\n   */\n  get LogLevelType(): PKLogLevelTypes {\n    return LogLevelType;\n  }\n\n  /**\n   * Gets the player log level objects.\n   * @returns {PKLogLevels} - The log levels objects of the player.\n   * @public\n   */\n  get LogLevel(): PKLogLevels {\n    return LogLevel;\n  }\n\n  /**\n   * Gets the player abr modes.\n   * @returns {PKAbrModes} - The abr modes of the player.\n   * @public\n   */\n  get AbrMode(): PKAbrModes {\n    return AbrMode;\n  }\n\n  /**\n   * Gets the player media types.\n   * @returns {PKMediaTypes} - The media types of the player.\n   * @public\n   */\n  get MediaType(): PKMediaTypes {\n    return MediaType;\n  }\n\n  /**\n   * Gets the player stream types.\n   * @returns {PKStreamTypes} - The stream types of the player.\n   * @public\n   */\n  get StreamType(): PKStreamTypes {\n    return StreamType;\n  }\n\n  /**\n   * Gets the player engine types.\n   * @returns {PKEngineTypes} - The engine types of the player.\n   * @public\n   */\n  get EngineType(): PKEngineTypes {\n    return EngineType;\n  }\n\n  /**\n   * Gets the player cors types.\n   * @returns {PKCorsTypes} - The player cors types.\n   * @public\n   */\n  get CorsType(): PKCorsTypes {\n    return CorsType;\n  }\n\n  /**\n   * Gets the ad break types.\n   * @returns {PKAdBreakTypes} - The ad break types of the player.\n   * @public\n   */\n  get AdBreakType(): PKAdBreakTypes {\n    return AdBreakType;\n  }\n\n  /**\n   * Gets the ad break tag types.\n   * @returns {PKAdTagTypes} - The ad tag types of the player.\n   * @public\n   */\n  get AdTagType(): PKAdTagTypes {\n    return AdTagType;\n  }\n\n  /**\n   * Gets the player static error class.\n   * @returns {PKError} - The player static error class.\n   * @public\n   */\n  get Error(): typeof PKError {\n    return PKError;\n  }\n\n  // </editor-fold>\n}\n","//@flow\nimport Player from './player';\nimport BaseMediaSourceAdapter from './engines/html5/media-source/base-media-source-adapter';\nimport {registerMediaSourceAdapter} from './engines/html5/media-source/media-source-provider';\nimport {EngineDecoratorProvider} from './engines/engine-decorator-provider';\nimport {registerEngine, unRegisterEngine} from './engines/engine-provider';\nimport BaseMiddleware from './middleware/base-middleware';\nimport State from './state/state';\nimport Track from './track/track';\nimport ImageTrack from './track/image-track';\nimport VideoTrack from './track/video-track';\nimport AudioTrack from './track/audio-track';\nimport TextTrack from './track/text-track';\nimport {TimedMetadata, createTextTrackCue, createTimedMetadata} from './track/timed-metadata';\nimport TextStyle from './track/text-style';\nimport {Cue} from './track/vtt-cue';\nimport Env from './utils/env';\nimport * as Utils from './utils';\nimport Error from './error/error';\nimport FakeEvent from './event/fake-event';\nimport FakeEventTarget from './event/fake-event-target';\nimport EventManager from './event/event-manager';\nimport {StateType} from './state/state-type';\nimport {TrackType} from './track/track-type';\nimport {StreamType} from './engines/stream-type';\nimport {EngineType} from './engines/engine-type';\nimport {MediaType} from './enums/media-type';\nimport {CustomEventType, EventType, Html5EventType} from './event/event-type';\nimport {AbrMode} from './track/abr-mode-type';\nimport getLogger, {getLogLevel, LogLevel, LogLevelType, setLogLevel, setLogHandler} from './utils/logger';\nimport {CorsType} from './engines/html5/cors-types';\nimport {DrmScheme} from './drm/drm-scheme';\nimport {MimeType} from './enums/mime-type';\nimport {RequestType} from './enums/request-type';\nimport {AdBreakType} from './ads/ad-break-type';\nimport {AdTagType} from './ads/ad-tag-type';\nimport {AdEventType} from './ads/ad-event-type';\nimport {ScreenOrientationType} from './enums/screen-orientation-type';\nimport {AutoPlayType} from './enums/auto-play-type';\nimport {ThumbnailInfo} from './thumbnail/thumbnail-info';\nimport {filterTracksByRestriction} from './utils/restrictions';\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nconst VERSION = __VERSION__;\nconst NAME = __NAME__;\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nexport function loadPlayer(config: ?Object) {\n  return new Player(config || {});\n}\n\n// Export the media source adapters necessary utils\nexport {registerMediaSourceAdapter, BaseMediaSourceAdapter};\n\n// Export the middleware framework\nexport {BaseMiddleware};\n\n// Export the tracks classes\nexport {Track, VideoTrack, AudioTrack, TextTrack, ImageTrack, TextStyle, Cue};\n\n// Export the timed metadata class and function\nexport {TimedMetadata, createTextTrackCue, createTimedMetadata};\n\n// Export utils library\nexport {Utils};\n\nexport {Utils as utils};\n\n// Export Error class\nexport {Error};\n\n// Export Event system\nexport {FakeEvent, FakeEventTarget, EventManager};\n\n// Export version and player name\nexport {VERSION, NAME};\n\n// Export environment data\nexport {Env};\n\n// Export State class\nexport {State};\n\n// Export the player capabilities\nconst getCapabilities = Player.getCapabilities;\nconst setCapabilities = Player.setCapabilities;\n\n// Export capabilities utils\nexport {getCapabilities, setCapabilities};\n\n// Export engineDecoratorProvider\nexport {EngineDecoratorProvider};\n\n// Export engine framework\nexport {registerEngine, unRegisterEngine};\n\n// Export ads framework\nexport {AdBreakType, AdTagType, AdEventType};\n\n//filter invalid tracks\nexport {filterTracksByRestriction};\n\n// Export enums\nexport {\n  Html5EventType,\n  CustomEventType,\n  EventType,\n  StateType,\n  TrackType,\n  EngineType,\n  MediaType,\n  StreamType,\n  AbrMode,\n  LogLevelType,\n  CorsType,\n  DrmScheme,\n  MimeType,\n  RequestType,\n  ScreenOrientationType,\n  AutoPlayType\n};\n\nexport {ThumbnailInfo};\n\n// Export logger utils\nexport {getLogger, LogLevel, getLogLevel, setLogLevel, setLogHandler};\n\nexport default loadPlayer;\n","//@flow\nimport Player from '../player';\nimport EventManager from '../event/event-manager';\nimport State from './state';\nimport {StateType} from './state-type';\nimport {CustomEventType, Html5EventType} from '../event/event-type';\nimport FakeEvent from '../event/fake-event';\nimport getLogger from '../utils/logger';\nimport Env from '../utils/env';\nimport Error from '../error/error';\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nexport default class StateManager {\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  _logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n  _curState: State;\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n  _prevState: State | null;\n  /**\n   * Holds the time of the beginning of the last buffering (waiting event)\n   * @member\n   * @type {number | null}\n   * @private\n   */\n  _lastWaitingTime: ?number | null;\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n  _history: Array<State>;\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n  _transitions: Transition = {\n    [StateType.IDLE]: {\n      [Html5EventType.LOAD_START]: () => this._updateState(StateType.LOADING),\n      [Html5EventType.PLAY]: () => this._updateState(StateType.BUFFERING),\n      [Html5EventType.SEEKED]: () => this._updateState(StateType.PAUSED)\n    },\n    [StateType.LOADING]: {\n      [Html5EventType.LOADED_METADATA]: () => this._updateState(StateType.PAUSED),\n      [Html5EventType.ERROR]: e => e.payload.severity === Error.Severity.CRITICAL && this._updateState(StateType.IDLE),\n      [Html5EventType.SEEKED]: () => {\n        if (this._prevState && this._prevState.type === StateType.PLAYING) {\n          this._updateState(StateType.PLAYING);\n        }\n      }\n    },\n    [StateType.PAUSED]: {\n      [Html5EventType.PLAY]: () => this._updateState(StateType.PLAYING),\n      [Html5EventType.PLAYING]: () => this._updateState(StateType.PLAYING),\n      [Html5EventType.ENDED]: () => this._updateState(StateType.IDLE)\n    },\n    [StateType.PLAYING]: {\n      [Html5EventType.PAUSE]: () => this._updateState(StateType.PAUSED),\n      [Html5EventType.WAITING]: () => {\n        if (this._player.seeking) {\n          this._updateState(StateType.LOADING);\n        } else {\n          this._updateState(StateType.BUFFERING);\n          this._lastWaitingTime = this._player.currentTime;\n        }\n      },\n      [Html5EventType.ENDED]: () => this._updateState(StateType.IDLE),\n      [Html5EventType.ERROR]: e => e.payload.severity === Error.Severity.CRITICAL && this._updateState(StateType.IDLE)\n    },\n    [StateType.BUFFERING]: {\n      [Html5EventType.PLAYING]: () => this._updateState(StateType.PLAYING),\n      [Html5EventType.PAUSE]: () => this._updateState(StateType.PAUSED),\n      [Html5EventType.TIME_UPDATE]: () => {\n        if (\n          Env.browser.name === 'IE' &&\n          this._player.currentTime !== this._lastWaitingTime &&\n          this._prevState &&\n          this._prevState.type === StateType.PLAYING\n        ) {\n          this._lastWaitingTime = null;\n          this._updateState(StateType.PLAYING);\n        }\n      }\n    }\n  };\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n  constructor(player: Player) {\n    this._player = player;\n    this._logger = getLogger('StateManager');\n    this._eventManager = new EventManager();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new State(StateType.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n  _attachListeners(): void {\n    this._eventManager.listen(this._player, Html5EventType.ERROR, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.ENDED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAY, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOAD_START, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAYING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOADED_METADATA, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PAUSE, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.WAITING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.SEEKED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.TIME_UPDATE, this._doTransition.bind(this));\n  }\n\n  /**\n   * Performs a state transition depends on the event which occurs in the player system.\n   * @param {FakeEvent} event - The event occurs in the player system.\n   * @private\n   * @returns {void}\n   */\n  _doTransition(event: FakeEvent): void {\n    if (event.type !== Html5EventType.TIME_UPDATE || (this._curState === StateType.BUFFERING && event.type === Html5EventType.TIME_UPDATE)) {\n      this._logger.debug('Do transition request', event.type); // don't show most of 'timeupdate' events\n    }\n    let transition = this._transitions[this._curState.type];\n    if (typeof transition[event.type] === 'function') {\n      transition[event.type](event);\n    }\n  }\n\n  /**\n   * Updates the player's state.\n   * @param {string} type - The type of the new state.\n   * @private\n   * @returns {void}\n   */\n  _updateState(type: string): void {\n    if (this._curState.type !== type) {\n      this._curState.duration = Date.now() / 1000;\n      this._history.push(this._curState);\n      this._prevState = this._curState;\n      this._curState = new State(type);\n      this._logger.debug(`Switch player state: from ${this._prevState.type} to ${this._curState.type}`);\n      this._dispatchEvent();\n    }\n  }\n\n  /**\n   * Fires the playerStateChanged event after state has been changed.\n   * @private\n   * @returns {void}\n   */\n  _dispatchEvent(): void {\n    let event = new FakeEvent(\n      CustomEventType.PLAYER_STATE_CHANGED,\n      ({\n        oldState: this._prevState,\n        newState: this._curState\n      }: StateChanged)\n    );\n    this._player.dispatchEvent(event);\n  }\n\n  /**\n   * Destroys the state manager.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._history = [];\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Resets the state manager.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._history = [];\n  }\n\n  /**\n   * Getter to the current state of the player.\n   * @public\n   * @returns {State} - The current state object\n   */\n  get currentState(): State {\n    return this._curState;\n  }\n\n  /**\n   * Getter to the previous state of the player.\n   * @public\n   * @returns {State|null} - The previous state object, or null if such doesn't exists\n   */\n  get previousState(): State | null {\n    return this._prevState;\n  }\n\n  /**\n   * Getter to the state history of the player.\n   * @public\n   * @returns {Array.<State>} - The full states history objects\n   */\n  get history(): Array<State> {\n    return this._history;\n  }\n}\n","//@flow\nconst StateType: PKStateTypes = {\n  IDLE: 'idle',\n  LOADING: 'loading',\n  PLAYING: 'playing',\n  PAUSED: 'paused',\n  BUFFERING: 'buffering'\n};\n\nexport {StateType};\n","//@flow\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nexport default class State {\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n  type: string;\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _duration: number;\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _timestamp: number;\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n  constructor(type: string) {\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n  get duration(): number {\n    return this._duration;\n  }\n\n  /**\n   * Setter for the duration of the state.\n   * @param {number} endTime - The timestamp of the next state.\n   */\n  set duration(endTime: number): void {\n    this._duration = endTime - this._timestamp;\n  }\n}\n","import EventManager from '../event/event-manager';\nimport FakeEventTarget from '../event/fake-event-target';\nimport getLogger from '../utils/logger';\nimport {Parser, StringDecoder} from '../track/text-track-display';\nimport * as Utils from '../utils/util';\nimport {ThumbnailInfo} from './thumbnail-info';\nimport {Cue} from '../track/vtt-cue';\nimport Error from '../error/error';\nimport FakeEvent from '../event/fake-event';\nimport {Html5EventType} from '../event/event-type';\n\nconst VTT_INCLUDES_SIZE_ONLY: RegExp = /#wh=/i;\nconst VTT_INCLUDES_SIZE_AND_COORDS: RegExp = /#xywh=/i;\n\nconst RELATIVE_PATH_PATTERN: RegExp = new RegExp('^/[^/].+');\n\nclass ExternalThumbnailsHandler extends FakeEventTarget {\n  constructor() {\n    super();\n    this._eventManager = new EventManager();\n  }\n\n  /**\n   * The external thumbnails handler class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('ExternalThumbnailsHandler');\n\n  /**\n   * event manager for the external thumbnails handler\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n\n  /**\n   * the processed thumbnail cues\n   * @type {Array<Cue>}\n   * @private\n   */\n  _cues: Array<PKThumbnailVttCue> = [];\n\n  /**\n   * computed img dimensions based on its natural ratio\n   * @type {Object}\n   * @private\n   */\n  _naturalImgSize: {width: number, height: number};\n\n  /**\n   * start the loading and parsing process of the vtt thumbnails file.\n   * @param {PKExternalThumbnailsConfig} thumbnailsConfig - the external vtt thumbnails config\n   * @returns {void}\n   * @public\n   */\n  async load(thumbnailsConfig: PKExternalThumbnailsConfig): Promise<void> {\n    if (!thumbnailsConfig) {\n      return;\n    }\n    ExternalThumbnailsHandler._logger.debug('start loading the vtt thumbnails');\n    await this._downloadAndParseCues(thumbnailsConfig);\n  }\n\n  /**\n   * returns the thumbnail info for the requested timing.\n   * @param {number} time - timing in th playback timeline in milliseconds.\n   * @returns {ThumbnailInfo | null} - the thumbnail img info.\n   * @public\n   */\n  getThumbnail(time: number): ThumbnailInfo | null {\n    const cue: PKThumbnailVttCue = this._findCue(time, this._cues);\n    if (cue) {\n      let {size, coordinates, imgUrl} = cue;\n      size = size ? size : this._naturalImgSize;\n      coordinates = coordinates ? coordinates : {x: 0, y: 0};\n      const thumbnailInfo = {url: imgUrl, ...size, ...coordinates};\n      return new ThumbnailInfo(thumbnailInfo);\n    }\n    return null;\n  }\n\n  /**\n   * indicate whether or not this player using external vtt thumbnails.\n   * @returns {boolean} whether or not this player using external vtt thumbnails.\n   * @public\n   */\n  isUsingVttThumbnails(): boolean {\n    return !!this._cues?.length;\n  }\n\n  /**\n   * download and parse the vtt file\n   * @param {PKExternalThumbnailsConfig} thumbnailsConfig - the thumbnails user config\n   * @returns {Promise<void>} - resolve when the loading and parsing process is complete\n   * @private\n   */\n  async _downloadAndParseCues(thumbnailsConfig: PKExternalThumbnailsConfig): Promise<void> {\n    try {\n      const VttStr: string = await this._downloadVttFile(thumbnailsConfig);\n      const cuesArray: Array<Cue> = await this._processVtt(VttStr);\n      this._cues = await this._formatIntoThumbnailCues(cuesArray, thumbnailsConfig);\n    } catch (error) {\n      this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n    }\n  }\n\n  /**\n   * Make a request to download the vtt file.\n   * @param {PKExternalThumbnailsConfig} thumbnailsConfig - the thumbnails config object.\n   * @returns {Promise<string>} - resolves with the vtt string.\n   * @private\n   */\n  async _downloadVttFile(thumbnailsConfig: PKExternalThumbnailsConfig): Promise<string> {\n    try {\n      return await Utils.Http.execute(thumbnailsConfig.vttUrl, {}, 'GET');\n    } catch (error) {\n      throw new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.HTTP_ERROR, error);\n    }\n  }\n\n  /**\n   * this calls the VTTCue parser and parse the .vtt thumbnails string into vttCues objects\n   * @param {string} vttStr - a string in a .vtt format to be parsed into VTTCues\n   * @returns {Array<Cue>} - parsed cues array\n   * @private\n   */\n  async _processVtt(vttStr: string): Promise<Array<Cue>> {\n    return new Promise((resolve, reject) => {\n      const parser: Parser = new Parser(window, StringDecoder());\n      const cues: Cue[] = [];\n      parser.oncue = cue => cues.push(cue);\n      parser.onflush = () => {\n        ExternalThumbnailsHandler._logger.debug('finished parsing thumbnails cues');\n        resolve(cues);\n      };\n      parser.parse(vttStr);\n      parser.flush();\n      parser.onparsingerror(error => reject(error));\n    });\n  }\n\n  /**\n   * format vtt text track cues into thumbnails track cues.\n   * @param {Array<Cue>} cues - array of VTTCues in the vtt text track format\n   * @param {PKExternalThumbnailsConfig} thumbnailsConfig - the external vtt thumbnails config\n   * @returns {Array<PKThumbnailVttCue>} - cues contains the thumbnails metadata.\n   * @private\n   */\n  async _formatIntoThumbnailCues(cues: Array<Cue>, thumbnailsConfig: PKExternalThumbnailsConfig): Array<any> {\n    if (!this.validateThumbnailsVTTFormat(cues)) {\n      throw new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.INVALID_VTT_THUMBNAILS_FILE, {\n        message: 'invalid thumbnail vtt format',\n        vttUrl: thumbnailsConfig.vttUrl\n      });\n    } else {\n      const sampleProcessedCue: PKThumbnailVttCue = this._extractCueMetadata(cues[0], thumbnailsConfig);\n      if (!(await this.validateImgUrl(sampleProcessedCue.imgUrl))) {\n        throw new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.INVALID_VTT_THUMBNAILS_FILE, {\n          message: 'failed loading the image - invalid image url',\n          imgUrl: sampleProcessedCue.imgUrl\n        });\n      } else {\n        this._naturalImgSize = await this.extractImgNaturalDimensions(sampleProcessedCue.imgUrl);\n        const thumbnailCues: Array<PKThumbnailVttCue> = [];\n        for (const cue of cues) {\n          const processedCue: PKThumbnailVttCue = this._extractCueMetadata(cue, thumbnailsConfig);\n          thumbnailCues.push(processedCue);\n        }\n        return thumbnailCues;\n      }\n    }\n  }\n\n  validateThumbnailsVTTFormat(cues): boolean {\n    return cues.length && cues[0] instanceof Cue;\n  }\n\n  /**\n   * extracts the image dimensions based on its natural ratio and save it.\n   * @param {string} imgUrl - the img url extracted from the vtt cue\n   * @returns {Object} - the natural image dimensions\n   * @private\n   */\n  extractImgNaturalDimensions(imgUrl: string): Promise<{height: number, width: number} | null> {\n    return new Promise(resolve => {\n      const img = new Image();\n      img.src = imgUrl;\n      this._eventManager.listenOnce(img, 'load', () => {\n        resolve({height: img.naturalHeight, width: img.naturalWidth});\n      });\n      this._eventManager.listenOnce(img, 'error', () => resolve(null));\n    });\n  }\n\n  /**\n   * make sure the final constructed thumbnail img url is valid.\n   * @param {string} imgUrl - the img url extracted from the vtt cue\n   * @returns {boolean} - indicates the url is valid or not\n   * @private\n   */\n  validateImgUrl(imgUrl: string): Promise<boolean> {\n    return new Promise(resolve => {\n      const img = new Image();\n      img.src = imgUrl;\n      this._eventManager.listenOnce(img, 'load', () => {\n        resolve(true);\n      });\n      this._eventManager.listenOnce(img, 'error', () => resolve(false));\n    });\n  }\n\n  /**\n   * format vtt cue into thumbnail cue - by extracting the img options metadata.\n   * @param {VTTCue} vttCue - a parsed VTTCue in the vtt text cue format\n   * @param {PKExternalThumbnailsConfig} thumbnailsConfig - the thumbnails config\n   * @returns {PKThumbnailVttCue} - cue object contains the img metadata.\n   * @private\n   */\n  _extractCueMetadata(vttCue: VTTCue, thumbnailsConfig: PKExternalThumbnailsConfig): PKThumbnailVttCue {\n    const {startTime, endTime, text} = vttCue;\n    const imgBaseUrl = thumbnailsConfig.vttUrl.substring(0, thumbnailsConfig.vttUrl.lastIndexOf('/'));\n    const isVTTIncludesImgSizeOnly: boolean = VTT_INCLUDES_SIZE_ONLY.test(text);\n    const isVTTIncludesImgSizeAndCoords: boolean = VTT_INCLUDES_SIZE_AND_COORDS.test(text);\n    let isValidThumbnailVTTFormat: boolean = false;\n\n    let imgUrl: string;\n    let imgData: string;\n    let coordinates: {x: number, y: number} | null = null;\n    let size: {width: number, height: number} = null;\n\n    if (isVTTIncludesImgSizeOnly) {\n      [imgUrl] = text.split(VTT_INCLUDES_SIZE_ONLY);\n      ExternalThumbnailsHandler._logger.warn(\n        `vtt thumbnails in \"${VTT_INCLUDES_SIZE_ONLY}\" form - is supported but the width and height options are ignored and The images will be displayed in their natural dimensions`\n      );\n      isValidThumbnailVTTFormat = imgUrl !== undefined;\n    } else if (isVTTIncludesImgSizeAndCoords) {\n      [imgUrl, imgData] = text.split(VTT_INCLUDES_SIZE_AND_COORDS);\n      const [x, y, width, height] = imgData.split(',').map(Number);\n      coordinates = {x, y};\n      size = {width, height};\n      isValidThumbnailVTTFormat = [x, y, width, height, imgUrl].every(option => option !== undefined);\n    } else {\n      imgUrl = text;\n      isValidThumbnailVTTFormat = !!text;\n    }\n\n    if (!(imgUrl.indexOf('http://') === 0 || imgUrl.indexOf('https://') === 0)) {\n      imgUrl = RELATIVE_PATH_PATTERN.test(imgUrl) ? imgUrl.substring(1) : imgUrl;\n      imgUrl = `${imgBaseUrl}/${imgUrl}`;\n    }\n\n    if (!isValidThumbnailVTTFormat) {\n      throw new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.INVALID_VTT_THUMBNAILS_FILE, {\n        message: 'error while parsing the vtt cues - invalid cue',\n        parsedCue: {startTime, endTime, options: text}\n      });\n    } else {\n      return {startTime, endTime, imgUrl, size, coordinates};\n    }\n  }\n\n  /**\n   * search the cue that matches the requested timing in the timeline - in the cues array.\n   * @param {number} time - timing in th playback timeline in milliseconds.\n   * @param {Array<PKThumbnailVttCue>} cues - the thumbnails cues array.\n   * @returns {PKThumbnailVttCue | null} - the thumbnail cue linked to that timing.\n   * @private\n   */\n  _findCue(time: number, cues: Array<PKThumbnailVttCue>): PKThumbnailVttCue | null {\n    let left = 0;\n    let right = cues.length - 1;\n    while (left <= right) {\n      const middle = Math.floor((left + right) / 2);\n      const potentialCueMatch: PKThumbnailVttCue = cues[middle];\n      if (time >= potentialCueMatch.startTime && time < potentialCueMatch.endTime) {\n        return cues[middle];\n      } else if (time < potentialCueMatch.startTime) {\n        right = middle - 1;\n      } else {\n        left = middle + 1;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * resets the handler\n   * @returns {void}\n   * @public\n   */\n  reset(): void {\n    this._cues = [];\n    this._eventManager.removeAll();\n    this._naturalImgSize = {};\n  }\n\n  /**\n   * destroy the handler\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    this.reset();\n    this._eventManager.destroy();\n  }\n}\n\nexport {ExternalThumbnailsHandler};\n","// @flow\nclass ThumbnailInfo {\n  _url: string;\n  _width: number;\n  _height: number;\n  _x: number;\n  _y: number;\n\n  constructor(info: {url: string, width: number, height: number, x: number, y: number}) {\n    const {url, width, height, x, y} = info;\n    this._url = url;\n    this._width = width;\n    this._height = height;\n    this._x = x;\n    this._y = y;\n  }\n\n  get url(): string {\n    return this._url;\n  }\n\n  get width(): number {\n    return this._width;\n  }\n\n  get height(): number {\n    return this._height;\n  }\n\n  get x(): number {\n    return this._x;\n  }\n\n  get y(): number {\n    return this._y;\n  }\n}\n\nexport {ThumbnailInfo};\n","// @flow\nconst AbrMode: PKAbrModes = {\n  MANUAL: 'manual',\n  AUTO: 'auto'\n};\n\nexport {AbrMode};\n","//@flow\nimport Track from './track';\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nconst AudioTrack: AudioTrack = class AudioTrack extends Track {};\n\nexport default AudioTrack;\n","//@flow\nimport Error from '../error/error';\nimport * as Utils from '../utils/util';\nimport {Parser, StringDecoder} from './text-track-display';\nimport TextTrack, {getActiveCues} from './text-track';\nimport Track from './track';\nimport {CustomEventType, Html5EventType} from '../event/event-type';\nimport FakeEvent from '../event/fake-event';\nimport getLogger from '../utils/logger';\nimport EventManager from '../event/event-manager';\nimport FakeEventTarget from '../event/fake-event-target';\nimport {Cue} from './vtt-cue';\nimport Player from '../player';\n\ntype CueStatusType = {[status: string]: number};\n\n/**\n * enum for cues statuses\n * @const\n * @type {Object}\n */\nconst CuesStatus: CueStatusType = {\n  NOT_DOWNLOADED: 1,\n  DOWNLOADING: 2,\n  DOWNLOADED: 3\n};\n\nconst SRT_POSTFIX: string = 'srt';\n\nconst VTT_POSTFIX: string = 'vtt';\n\nclass ExternalCaptionsHandler extends FakeEventTarget {\n  /**\n   * The external captions handler class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('ExternalCaptionsHandler');\n  /**\n   * Index that specifies the last cue that is playing / played in the text track cue array.\n   * @type {number}\n   * @private\n   */\n  _externalCueIndex: number = 0;\n  /**\n   * the player object.\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * event manager for the external caption handler\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * a map that holds the current cues that are in process. process may be in download or that the cues are being parsed.\n   * @type {Object}\n   * @private\n   */\n  _textTrackModel: Object = {};\n  /**\n   * array of the active text cues of current track\n   * @type {Array<Cue>}\n   * @private\n   */\n  _activeTextCues: Array<Cue> = [];\n  /**\n   * indicates if a current external (non native) track is active or not.\n   * @type {boolean}\n   * @private\n   */\n  _isTextTrackActive: boolean = false;\n  /**\n   * indicates the last player time in the last time update event.\n   * @type {number}\n   * @private\n   */\n  _lastTimeUpdate: number = 0;\n\n  /**\n   * constructor\n   * @param {Player} player - the player object.\n   */\n  constructor(player: Player) {\n    super();\n    this._player = player;\n    this._eventManager = new EventManager();\n  }\n\n  /**\n   * selects external track start listening to cues\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._player.config.text.useNativeTextTrack) {\n      this._removeCueChangeListeners();\n      this._resetExternalNativeTextTrack();\n    } else {\n      // only if external text track was active we need to hide it.\n      if (this._isTextTrackActive) {\n        this._eventManager.unlisten(this._player, Html5EventType.TIME_UPDATE);\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: []}));\n        this._resetCurrentTrack();\n      }\n    }\n  }\n\n  /**\n   * get external tracks (native and/or player module tracks)\n   * @returns {Array<TextTrack>} returns an array with the new external tracks\n   * @param {Array<Track>} tracks array with the player text tracks.\n   * @public\n   */\n  getExternalTracks(tracks: Array<Track>): Array<TextTrack> {\n    const captions = this._player.sources.captions;\n    if (!captions) {\n      return [];\n    }\n    if (this._player.config.text.useNativeTextTrack) {\n      this._addNativeTextTrack();\n    }\n    const playerTextTracks = tracks.filter(track => track instanceof TextTrack);\n    const newTextTracks = [];\n    captions.forEach(caption => {\n      if (!caption.language) {\n        const error = new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNKNOWN_LANGUAGE, {caption: caption});\n        this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n      } else {\n        const track = this._createTextTrack(caption);\n        this._maybeAddTrack(track, caption, playerTextTracks, newTextTracks);\n      }\n    });\n    return newTextTracks;\n  }\n\n  /**\n   * checking if there is already a track with the same language\n   * @param {TextTrack} track - textTrack to be added text tracks array that will be returned to the player\n   * @param {PKExternalCaptionObject} caption - caption to be added to the model\n   * @param {Array<Text>} playerTextTracks - player text tracks array\n   * @param {Array<TextTrack>} newTextTracks - text track array that will be returned to the player\n   * @returns {void}\n   * @private\n   */\n  _maybeAddTrack(track: TextTrack, caption: PKExternalCaptionObject, playerTextTracks: Array<Track>, newTextTracks: Array<TextTrack>): void {\n    const sameLangTrack = playerTextTracks.find(textTrack => textTrack.available && Track.langComparer(caption.language, textTrack.language));\n    if (!sameLangTrack) {\n      newTextTracks.push(track);\n      this._updateTextTracksModel(caption);\n    } else {\n      ExternalCaptionsHandler._logger.warn('duplicated language, taking the inband option. Language: ', sameLangTrack.language);\n    }\n  }\n\n  /**\n   * creates a new text track\n   * @param {PKExternalCaptionObject} caption - caption to create the text track with\n   * @returns {TextTrack} - new text track\n   * @private\n   */\n  _createTextTrack(caption: PKExternalCaptionObject): TextTrack {\n    return new TextTrack({\n      active: !!caption.default,\n      kind: TextTrack.KIND.SUBTITLES,\n      label: caption.label,\n      language: caption.language,\n      external: true\n    });\n  }\n\n  /**\n   * adding the caption to the class texttracks model\n   * @param {PKExternalCaptionObject} caption - the caption to be added\n   * @returns {void}\n   * @private\n   */\n  _updateTextTracksModel(caption: PKExternalCaptionObject): void {\n    this._textTrackModel[caption.language] = {\n      cuesStatus: CuesStatus.NOT_DOWNLOADED,\n      cues: [],\n      url: caption.url,\n      type: caption.type\n    };\n  }\n\n  /**\n   * selects external track start listening to cues\n   * @param {TextTrack} textTrack - selected text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: TextTrack): void {\n    if (this._textTrackModel[textTrack.language]) {\n      if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.DOWNLOADED) {\n        this._selectTextTrack(textTrack);\n      } else if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.NOT_DOWNLOADED) {\n        this._downloadAndParseCues(textTrack)\n          .then(() => {\n            this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADED;\n            this._selectTextTrack(textTrack);\n          })\n          .catch(error => this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error)));\n      }\n    }\n  }\n\n  _selectTextTrack(textTrack: TextTrack) {\n    this.hideTextTrack();\n    if (this._player.config.text.useNativeTextTrack) {\n      this._addCuesToNativeTextTrack(this._textTrackModel[textTrack.language].cues);\n      this._addCueChangeListener();\n    } else {\n      this._setTextTrack(textTrack);\n    }\n    textTrack.active = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n  }\n  /**\n   * set hasBeenReset to true for all the cues.\n   * @returns {void}\n   */\n  resetAllCues(): void {\n    for (let textTrack in this._textTrackModel) {\n      this._textTrackModel[textTrack].cues.forEach(cue => {\n        cue.hasBeenReset = true;\n      });\n    }\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(): void {\n    const videoElement: ?HTMLVideoElement = this._player.getVideoElement();\n    if (videoElement && videoElement.textTracks) {\n      let textTrackEl: TextTrack = Array.from(videoElement.textTracks).find(\n        track => TextTrack.isNativeTextTrack(track) && track.mode === TextTrack.MODE.SHOWING\n      );\n      if (textTrackEl) {\n        this._eventManager.listen(textTrackEl, 'cuechange', (e: FakeEvent) => this._onCueChange(e));\n      }\n    }\n  }\n\n  /**\n   * Remove cuechange listeners from textTracks\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListeners(): void {\n    const videoElement: ?HTMLVideoElement = this._player.getVideoElement();\n    if (videoElement && videoElement.textTracks) {\n      for (let i = 0; i < videoElement.textTracks.length; i++) {\n        this._eventManager.unlisten(videoElement.textTracks[i], 'cuechange');\n      }\n    }\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let activeCues: TextTrackCueList = e.currentTarget.activeCues;\n    let normalizedActiveCues = getActiveCues(activeCues);\n    this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: normalizedActiveCues}));\n  }\n\n  /**\n   * resets the handler\n   * @returns {void}\n   */\n  reset(): void {\n    this._resetCurrentTrack();\n    this._textTrackModel = {};\n    this._resetExternalNativeTextTrack();\n    this._eventManager.removeAll();\n  }\n\n  /**\n   * destroy function\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._textTrackModel = {};\n    this._eventManager.destroy();\n    this._activeTextCues = [];\n  }\n\n  /**\n   * resets all the params of the current external text track that is playing\n   * @returns {void}\n   * @private\n   */\n  _resetCurrentTrack(): void {\n    this._activeTextCues = [];\n    this._isTextTrackActive = false;\n    this._maybeSetExternalCueIndex();\n  }\n\n  /**\n   * Make a request to download a caption and parse it's content to cues.\n   * @param {TextTrack} textTrack - download and parse the cues of the text track\n   * @returns {Promise<any>} - resolves when the request returns and the caption string is parsed to cues.\n   * @private\n   */\n  _getCuesString(textTrack: TextTrack): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const track = this._textTrackModel[textTrack.language];\n      const captionType = track.type || this._getFileType(track.url);\n      if (![SRT_POSTFIX, VTT_POSTFIX].includes(captionType)) {\n        this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.NOT_DOWNLOADED;\n        reject(new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNKNOWN_FILE_TYPE, {captionType: captionType}));\n      }\n      Utils.Http.execute(track.url, {}, 'GET')\n        .then(response => {\n          resolve(captionType === SRT_POSTFIX ? this._convertSrtToVtt(response) : response);\n        })\n        .catch(() => {\n          this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.NOT_DOWNLOADED;\n          reject(\n            new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.HTTP_ERROR, {\n              url: track.url\n            })\n          );\n        });\n    });\n  }\n\n  /**\n   * this calls the VTTCue parser and parse the .vtt captions string into vttCues objects\n   * @param {string} vttStr - a string in a .vtt format to parse into VTTCues\n   * @returns {Promise<*>} - parsed cues array\n   * @private\n   */\n  _parseCues(vttStr: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const parser = new Parser(window, StringDecoder());\n      const cues = [];\n      parser.oncue = cue => cues.push(cue);\n      parser.onflush = () => {\n        ExternalCaptionsHandler._logger.debug('finished parsing external cues');\n        resolve(cues);\n      };\n      parser.parse(vttStr);\n      parser.flush();\n      parser.onparsingerror(e => reject(e));\n    });\n  }\n\n  /**\n   * converts a .SRT string into .VTT string\n   * @param {string} str - a string in a .SRT format\n   * @returns {string} - a string in a .VTT format\n   * @private\n   */\n  _convertSrtToVtt(str: string): string {\n    const vttStr = str.replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d) --> (\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, (match, part1, part2, part3, part4) => {\n      return `${part1}.${part2} --> ${part3}.${part4}`;\n    });\n    return `WEBVTT\\n\\n${vttStr}`;\n  }\n\n  /**\n   * resolves with a caption object that contains all the caption data\n   * start the parsing, creation and addition of the external captions.\n   * @param {TextTrack} textTrack - create a single caption. when the process ends, this._textTrackModel is updated with\n   * DOWNLOADED status\n   * @returns {Promise<any>} - a promise that the action ended\n   * @private\n   */\n  _downloadAndParseCues(textTrack: TextTrack): Promise<*> {\n    this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADING;\n    return new Promise((resolve, reject) => {\n      this._getCuesString(textTrack)\n        .then(vttString => this._parseCues(vttString))\n        .then(cuesArray => {\n          this._textTrackModel[textTrack.language].cues = cuesArray;\n          resolve();\n        })\n        .catch(error => reject(error));\n    });\n  }\n\n  /**\n   * getting the file extension\n   * @param {string} url - the url of the file\n   * @returns {string} type of the file\n   * @private\n   */\n  _getFileType(url: string): string {\n    return url.split(/[#?]/)[0].split('.').pop().trim();\n  }\n\n  /**\n   * callback for the 'timeupdate' event. on each time update this runs and checks if the active text cues array\n   * was changed.\n   * @param {TextTrack} track - the text track that that is currently displayed (active)\n   * @returns {void}\n   * @private\n   */\n  _handleCaptionOnTimeUpdate(track: TextTrack): void {\n    const currentTime = this._player.currentTime;\n    if (currentTime) {\n      let cueIndexUpdated = false;\n      if (this._hadSeeked()) {\n        this._activeTextCues = [];\n        cueIndexUpdated = this._maybeSetExternalCueIndex();\n      }\n      const activeCuesRemoved = this._maybeRemoveActiveCues();\n      const activeCuesAdded = this._maybeAddToActiveCues(track);\n\n      if (cueIndexUpdated || activeCuesAdded || activeCuesRemoved) {\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: this._activeTextCues}));\n      }\n      // sometimes the timeupdate event is fired before the seeked event - so we need to know the user seeked.\n      this._lastTimeUpdate = currentTime;\n    }\n  }\n\n  /**\n   * check if there was a seek. we do that because 'timeupdate' is fired before 'seeked' event.\n   * @returns {boolean} if there was a seek before\n   * @private\n   */\n  _hadSeeked(): boolean {\n    return !!this._player.currentTime && Math.abs(this._player.currentTime - this._lastTimeUpdate) > 1;\n  }\n\n  /**\n   * @returns {boolean} if a cue/cues were removed from the active text cues array\n   * @private\n   */\n  _maybeRemoveActiveCues(): boolean {\n    const currentTime = this._player.currentTime;\n    if (!currentTime) {\n      return false;\n    }\n    let hadRemoved = false;\n    for (let activeTextCuesIndex = 0; activeTextCuesIndex < this._activeTextCues.length; activeTextCuesIndex++) {\n      const cue = this._activeTextCues[activeTextCuesIndex];\n      if (currentTime < cue.startTime || cue.endTime < currentTime) {\n        this._activeTextCues.splice(activeTextCuesIndex, 1);\n        hadRemoved = true;\n      }\n    }\n    return hadRemoved;\n  }\n\n  /**\n   * @param {TextTrack} track - the selected text track\n   * @returns {boolean} - if cues were added to the active text track\n   * @private\n   */\n  _maybeAddToActiveCues(track: TextTrack): boolean {\n    const currentTime = this._player.currentTime;\n    if (!currentTime) {\n      return false;\n    }\n    let hadAdded = false;\n    const cues = this._textTrackModel[track.language].cues;\n    while (this._externalCueIndex < cues.length && currentTime > cues[this._externalCueIndex].startTime) {\n      this._activeTextCues.push(cues[this._externalCueIndex]);\n      this._externalCueIndex++;\n      hadAdded = true;\n    }\n    return hadAdded;\n  }\n\n  /**\n   * updating the index of the text cues to the right location after a user seeked.\n   * @returns {boolean} if the index was changed\n   * @private\n   */\n  _maybeSetExternalCueIndex(): boolean {\n    let textTrack = this._player._getTextTracks().find(track => track.active && track.external);\n    if (textTrack && textTrack.external) {\n      const cues = this._textTrackModel[textTrack.language] ? this._textTrackModel[textTrack.language].cues : [];\n      let i = 0;\n      for (; i < cues.length; i++) {\n        // if there is a cue that should be displayed right now, cue start time < current time < cue end time\n        if (cues[i].startTime < this._player.currentTime && this._player.currentTime < cues[i].endTime) {\n          break;\n          // this is for the first cue that is after the current time\n        } else if (cues[i].endTime > this._player.currentTime && cues[i].startTime > this._player.currentTime) {\n          break;\n        }\n      }\n      this._externalCueIndex = i;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * delete cues on reset to avoid usage of the text track on the next media\n   * @return {void}\n   */\n  _resetExternalNativeTextTrack(): void {\n    const videoElement = this._player.getVideoElement();\n    if (videoElement && videoElement.textTracks) {\n      const track = Array.from(videoElement.textTracks).find(track => (track ? TextTrack.isExternalTrack(track) : false));\n      if (track) {\n        track.cues && Object.values(track.cues).forEach(cue => track.removeCue(cue));\n        track.mode = TextTrack.MODE.DISABLED;\n      }\n    }\n  }\n\n  /**\n   * adding cues to an existing text element in a video tag\n   * @param {Array<Cue>} cues - the cues to be added\n   * @return {void}\n   */\n  _addCuesToNativeTextTrack(cues: Array<Cue>): void {\n    const videoElement = this._player.getVideoElement();\n    if (videoElement && videoElement.textTracks) {\n      const track: TextTrack = Array.from(videoElement.textTracks).find(track => (track ? TextTrack.isExternalTrack(track) : false));\n      if (track) {\n        track.mode = TextTrack.MODE.SHOWING;\n        // For IE 11 which is not support VTTCue API\n        if (window.VTTCue === undefined) {\n          let convertedCues: Array<TextTrackCue> = this._convertCues(cues);\n          convertedCues.forEach(cue => track.addCue(cue));\n        } else {\n          cues.forEach(cue => track.addCue(cue));\n        }\n      }\n    }\n  }\n\n  /**\n   * converting cues to be instances of TextTrackCue\n   * for browser which dose not support VTTCue API\n   * @param {Array<Cue>} cues - the cues to be converted\n   * @returns {Array<TextTrackCue>} the converted cues\n   */\n  _convertCues(cues: Array<Cue>): Array<TextTrackCue> {\n    return cues.map(cue => new window.TextTrackCue(cue.startTime, cue.endTime, cue.text));\n  }\n\n  /**\n   * adds a new text track element to the video element or set an existing one\n   * (when adding a text track with existing language to the video element it will remove all its cues)\n   * @returns {void}\n   */\n  _addNativeTextTrack(): void {\n    const videoElement = this._player.getVideoElement();\n    if (videoElement && videoElement.textTracks) {\n      const sameLanguageTrackIndex = Array.from(videoElement.textTracks).findIndex(track => (track ? TextTrack.isExternalTrack(track) : false));\n      if (sameLanguageTrackIndex > -1) {\n        this._resetExternalNativeTextTrack();\n      } else {\n        videoElement.addTextTrack(TextTrack.KIND.SUBTITLES, TextTrack.EXTERNAL_TRACK_ID, TextTrack.EXTERNAL_TRACK_ID);\n      }\n    }\n  }\n\n  /**\n   * triggering the text track changed event and start listening to the time update on the player (for the the external text track).\n   * @param {TextTrack} textTrack - text track to be set\n   * @returns {void}\n   * @private\n   */\n  _setTextTrack(textTrack: TextTrack): void {\n    if (!this._player.config.text.useNativeTextTrack) {\n      this._isTextTrackActive = true;\n      ExternalCaptionsHandler._logger.debug('External text track changed', textTrack);\n      this._activeTextCues = [];\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: this._activeTextCues}));\n      this._eventManager.listen(this._player, Html5EventType.TIME_UPDATE, () => this._handleCaptionOnTimeUpdate(textTrack));\n    }\n  }\n}\n\nexport {ExternalCaptionsHandler};\n","//@flow\nimport Track from './track';\n\nconst ImageTrack: ImageTrack = class ImageTrack extends Track {\n  _url: string;\n  _width: number;\n  _height: number;\n  _duration: number;\n  _rows: number;\n  _cols: number;\n  _customData: any;\n\n  constructor(settings: {\n    id: string,\n    active: boolean,\n    index: number,\n    url: string,\n    width: number,\n    height: number,\n    duration: number,\n    rows: number,\n    cols: number,\n    customData: any\n  }) {\n    super(settings);\n    const {url, width, height, duration, rows, cols, customData} = settings;\n    this._url = url;\n    this._width = width;\n    this._height = height;\n    this._duration = duration;\n    this._customData = customData;\n    this._rows = rows || 1;\n    this._cols = cols || 1;\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  get duration() {\n    return this._duration;\n  }\n\n  get rows() {\n    return this._rows;\n  }\n\n  get cols() {\n    return this._cols;\n  }\n\n  get customData() {\n    return this._customData;\n  }\n\n  get sliceWidth() {\n    return this._width / this._rows;\n  }\n\n  get sliceHeight() {\n    return this._height / this._cols;\n  }\n};\n\nexport default ImageTrack;\n","// @flow\n\nconst LabelOptions = {\n  AUDIO: 'audio',\n  CAPTIONS: 'captions',\n  QUALITIES: 'qualities'\n};\n\nexport {LabelOptions};\n","// @flow\n/**\n * We use this number to calculate the scale of the text. so it will be : 1 + 0.25 * FontSizes.value\n * So, if the user selects 400% the scale would be: 1 + 0.25 * 4 = 2. so the font size should be multiplied by 2.\n * The calculation of the size of the font is done in text-track-display and not in this module, because\n * the calculation in text-track-display also set the location of the container of the subtitiles according to the\n * font size.\n * @type {number}\n */\nconst IMPLICIT_SCALE_PERCENTAGE: number = 0.25;\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nclass TextStyle {\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n  static FontFamily: {[string]: string} = {\n    ARIAL: 'Arial',\n    HELVETICA: 'Helvetica',\n    VERDANA: 'Verdana',\n    SANS_SERIF: 'sans-serif'\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, [number, number, number]>}}\n   * @export\n   */\n  static StandardColors: {[string]: [number, number, number]} = {\n    WHITE: [255, 255, 255],\n    BLACK: [0, 0, 0],\n    RED: [255, 0, 0],\n    GREEN: [0, 255, 0],\n    BLUE: [0, 0, 255],\n    YELLOW: [255, 255, 0],\n    MAGENTA: [255, 0, 255],\n    CYAN: [0, 255, 255]\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n  static StandardOpacities: {[string]: number} = {\n    OPAQUE: 1,\n    SEMI_HIGH: 0.75,\n    SEMI_LOW: 0.25,\n    TRANSPARENT: 0\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.[number, number, number, number, number, number]>}\n   * @export\n   */\n  static EdgeStyles: {[string]: Array<[number, number, number, number, number, number]>} = {\n    NONE: [],\n    RAISED: [\n      [34, 34, 34, 1, 1, 0],\n      [34, 34, 34, 2, 2, 0],\n      [34, 34, 34, 3, 3, 0]\n    ],\n    DEPRESSED: [\n      [204, 204, 204, 1, 1, 0],\n      [204, 204, 204, 0, 1, 0],\n      [34, 34, 34, -1, -1, 0],\n      [34, 34, 34, 0, -1, 0]\n    ],\n    UNIFORM: [\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4]\n    ],\n    DROP: [\n      [34, 34, 34, 2, 2, 3],\n      [34, 34, 34, 2, 2, 4],\n      [34, 34, 34, 2, 2, 5]\n    ]\n  };\n\n  /**\n   * Possible font sizes are 50%, 75%, 100%, 200%, 300%, 400%\n   */\n  static FontSizes: Array<Object> = [\n    {\n      value: -2,\n      label: '50%'\n    },\n    {\n      value: -1,\n      label: '75%'\n    },\n    {\n      value: 0,\n      label: '100%'\n    },\n    {\n      value: 2,\n      label: '200%'\n    },\n    {\n      value: 3,\n      label: '300%'\n    },\n    {\n      value: 4,\n      label: '400%'\n    }\n  ];\n\n  /**\n   * Creates a CSS RGBA sctring for a given color and opacity values\n   * @param {TextStyle.StandardColors} color - color value in RGB\n   * @param {TextStyle.StandardOpacities} opacity - opacity value\n   * @return {string} - CSS rgba string\n   * @private\n   */\n  static toRGBA(color: [number, number, number], opacity: number): string {\n    // shaka.asserts.assert(color.length == 3);\n    return 'rgba(' + color.concat(opacity).join(',') + ')';\n  }\n\n  static fromJson(setting: PKTextStyleObject): TextStyle {\n    const getValue = (newValue: any, defaultValue: any): any => {\n      return typeof newValue !== 'undefined' && newValue !== null ? newValue : defaultValue;\n    };\n    let textStyle = new TextStyle();\n    textStyle.fontEdge = getValue(setting.fontEdge, textStyle.fontEdge);\n    textStyle.fontSize = getValue(setting.fontSize, textStyle.fontSize);\n    textStyle.fontScale = getValue(setting.fontScale, textStyle.fontScale);\n    textStyle.fontColor = getValue(setting.fontColor, textStyle.fontColor);\n    textStyle.fontOpacity = getValue(setting.fontOpacity, textStyle.fontOpacity);\n    textStyle.backgroundColor = getValue(setting.backgroundColor, textStyle.backgroundColor);\n    textStyle.backgroundOpacity = getValue(setting.backgroundOpacity, textStyle.backgroundOpacity);\n    textStyle.fontFamily = getValue(setting.fontFamily, textStyle.fontFamily);\n    return textStyle;\n  }\n\n  static toJson(text: TextStyle): PKTextStyleObject {\n    return {\n      fontEdge: text.fontEdge,\n      fontSize: text.fontSize,\n      fontScale: text.fontScale,\n      fontColor: text.fontColor,\n      fontOpacity: text.fontOpacity,\n      backgroundColor: text.backgroundColor,\n      backgroundOpacity: text.backgroundOpacity,\n      fontFamily: text.fontFamily\n    };\n  }\n\n  _fontSizeIndex: number = 2; // 100%\n\n  set fontSize(fontSize: string) {\n    const index = TextStyle.FontSizes.findIndex(({label}) => label === fontSize);\n    if (index !== -1) {\n      this._fontSizeIndex = index;\n    }\n  }\n\n  /**\n   * Percentage string matching a FontSizes entry\n   */\n  get fontSize() {\n    return TextStyle.FontSizes[this._fontSizeIndex].label;\n  }\n\n  set fontScale(fontScale: number) {\n    const index = TextStyle.FontSizes.findIndex(({value}) => value === fontScale);\n    if (index !== -1) {\n      this._fontSizeIndex = index;\n    }\n  }\n\n  /**\n   * Numeric value matching a FontSizes entry (for backward compatibility)\n   */\n  get fontScale() {\n    return TextStyle.FontSizes[this._fontSizeIndex].value;\n  }\n\n  /**\n   * @type {TextStyle.FontFamily}\n   */\n  fontFamily: string = TextStyle.FontFamily.SANS_SERIF;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  fontColor: [number, number, number] = TextStyle.StandardColors.WHITE;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   * @expose\n   */\n  fontOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  backgroundColor: [number, number, number] = TextStyle.StandardColors.BLACK;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   */\n  backgroundOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.EdgeStyles}\n   * @expose\n   */\n  fontEdge: Array<[number, number, number, number, number, number]> = TextStyle.EdgeStyles.NONE;\n\n  getTextShadow(): string {\n    // A given edge effect may be implemented with multiple shadows.\n    // Collect them all into an array, then combine into one attribute.\n    let shadows: Array<string> = [];\n    for (let i = 0; i < this.fontEdge.length; i++) {\n      // shaka.asserts.assert(this.fontEdge[i].length == 6);\n      const color: [number, number, number] = (this.fontEdge[i].slice(0, 3): any);\n      let shadow: Array<number> = this.fontEdge[i].slice(3, 6);\n      shadows.push(TextStyle.toRGBA(color, this.fontOpacity) + ' ' + shadow.join('px ') + 'px');\n    }\n    return shadows.join(',');\n  }\n\n  /**\n   * Compute the CSS text necessary to represent this TextStyle.\n   * Output does not contain any selectors.\n   *\n   * @return {string} - ::CUE CSS string\n   */\n  toCSS(): string {\n    let attributes: Array<string> = [];\n    attributes.push('font-family: ' + this.fontFamily);\n    attributes.push('color: ' + TextStyle.toRGBA(this.fontColor, this.fontOpacity));\n    attributes.push('background-color: ' + TextStyle.toRGBA(this.backgroundColor, this.backgroundOpacity));\n    attributes.push('text-shadow: ' + this.getTextShadow());\n    attributes.push('font-size: ' + this.fontSize);\n    return attributes.join('!important; ');\n  }\n\n  /**\n   * clones the textStyle object\n   * @returns {TextStyle} the cloned textStyle object\n   */\n  clone(): TextStyle {\n    return TextStyle.fromJson(TextStyle.toJson(this));\n  }\n\n  /**\n   * comparing between 2 textStyle objects.\n   * @param {TextStyle} textStyle - The textStyle to compare with.\n   * @returns {boolean} - Whether the text styles are equal.\n   */\n  isEqual(textStyle: TextStyle): boolean {\n    return JSON.stringify(TextStyle.toJson(this)) === JSON.stringify(TextStyle.toJson(textStyle));\n  }\n\n  get implicitFontScale(): number {\n    const fontSizeValue = TextStyle.FontSizes[this._fontSizeIndex].value;\n    return IMPLICIT_SCALE_PERCENTAGE * fontSizeValue + 1;\n  }\n}\n\nexport default TextStyle;\n","import {Cue} from './vtt-cue';\nimport {Region} from './vtt-region';\nimport TextStyle from './text-style';\nimport TextTrack from './text-track';\n\n/* eslint-disable */\n/*\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nconst fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  const m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(':', ''), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nconst ESCAPE = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&lrm;': '\\u200e',\n  '&rlm;': '\\u200f',\n  '&nbsp;': '\\u00a0'\n};\n\nconst TAG_NAME = {\n  c: 'span',\n  i: 'i',\n  b: 'b',\n  u: 'u',\n  ruby: 'ruby',\n  rt: 'rt',\n  v: 'span',\n  lang: 'span'\n};\n\nconst TAG_ANNOTATION = {\n  v: 'title',\n  lang: 'lang'\n};\n\nconst NEEDS_PARENT = {\n  rt: 'ruby'\n};\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function (k, v) {\n    if (!this.get(k) && v !== '') {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function (k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function (k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function (k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function (k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function (k, v) {\n    var m;\n    if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n      v = parseFloat(v);\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n  for (var i in groups) {\n    if (typeof groups[i] !== 'string') {\n      continue;\n    }\n    var kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input;\n\n  // 4.1 WebVTT timestamp\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp, 'Malformed timestamp: ' + oInput);\n    }\n    // Remove time stamp from input.\n    input = input.replace(/^[^\\sa-zA-Z-]+/, '');\n    return ts;\n  }\n\n  // 4.4.2 WebVTT cue settings\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n\n    parseOptions(\n      input,\n      function (k, v) {\n        switch (k) {\n          case 'region':\n            // Find the last region we parsed with the same region id.\n            for (var i = regionList.length - 1; i >= 0; i--) {\n              if (regionList[i].id === v) {\n                settings.set(k, regionList[i].region);\n                break;\n              }\n            }\n            break;\n          case 'vertical':\n            settings.alt(k, v, ['rl', 'lr']);\n            break;\n          case 'line':\n            var vals = v.split(','),\n              vals0 = vals[0];\n            settings.integer(k, vals0);\n            settings.percent(k, vals0) ? settings.set('snapToLines', false) : null;\n            settings.alt(k, vals0, ['auto']);\n            if (vals.length === 2) {\n              settings.alt('lineAlign', vals[1], ['start', 'center', 'end']);\n            }\n            break;\n          case 'position':\n            vals = v.split(',');\n            settings.percent(k, vals[0]);\n            if (vals.length === 2) {\n              settings.alt('positionAlign', vals[1], ['start', 'center', 'end']);\n            }\n            break;\n          case 'size':\n            settings.percent(k, v);\n            break;\n          case 'align':\n            settings.alt(k, v, ['start', 'center', 'end', 'left', 'right']);\n            break;\n        }\n      },\n      /:/,\n      /\\s/\n    );\n\n    // Apply default values for any missing fields.\n    cue.region = settings.get('region', null);\n    cue.vertical = settings.get('vertical', '');\n    cue.line = settings.get('line', cue.line || 'auto');\n    cue.lineAlign = settings.get('lineAlign', 'start');\n    cue.snapToLines = settings.get('snapToLines', true);\n    cue.size = settings.get('size', 100);\n    // Safari still uses the old middle value and won't accept center\n    try {\n      cue.align = settings.get('align', 'center');\n    } catch (e) {\n      cue.align = settings.get('align', 'middle');\n    }\n    cue.position = settings.get('position', cue.position || 'auto');\n    cue.positionAlign = settings.get(\n      'positionAlign',\n      {\n        start: 'start',\n        left: 'start',\n        center: 'center',\n        middle: 'center',\n        end: 'end',\n        right: 'end'\n      },\n      cue.align\n    );\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, '');\n  }\n\n  // 4.1 WebVTT cue timings.\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp(); // (1) collect cue start time\n  skipWhitespace();\n  if (input.substr(0, 3) !== '-->') {\n    // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp(); // (5) collect cue end time\n\n  // 4.1 WebVTT cue settings list.\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    const m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    let m;\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    const tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    let element = window.document.createElement(tagName);\n    const name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  let rootDiv = window.document.createElement('div'),\n    current = rootDiv,\n    t,\n    tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === '/') {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace('>', '')) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      let ts = parseTimeStamp(t.substr(1, t.length - 2));\n      let node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction('timestamp', ts);\n        current.appendChild(node);\n        continue;\n      }\n      const m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nconst strongRTLRanges = [\n  [0x5be, 0x5be],\n  [0x5c0, 0x5c0],\n  [0x5c3, 0x5c3],\n  [0x5c6, 0x5c6],\n  [0x5d0, 0x5ea],\n  [0x5f0, 0x5f4],\n  [0x608, 0x608],\n  [0x60b, 0x60b],\n  [0x60d, 0x60d],\n  [0x61b, 0x61b],\n  [0x61e, 0x64a],\n  [0x66d, 0x66f],\n  [0x671, 0x6d5],\n  [0x6e5, 0x6e6],\n  [0x6ee, 0x6ef],\n  [0x6fa, 0x70d],\n  [0x70f, 0x710],\n  [0x712, 0x72f],\n  [0x74d, 0x7a5],\n  [0x7b1, 0x7b1],\n  [0x7c0, 0x7ea],\n  [0x7f4, 0x7f5],\n  [0x7fa, 0x7fa],\n  [0x800, 0x815],\n  [0x81a, 0x81a],\n  [0x824, 0x824],\n  [0x828, 0x828],\n  [0x830, 0x83e],\n  [0x840, 0x858],\n  [0x85e, 0x85e],\n  [0x8a0, 0x8a0],\n  [0x8a2, 0x8ac],\n  [0x200f, 0x200f],\n  [0xfb1d, 0xfb1d],\n  [0xfb1f, 0xfb28],\n  [0xfb2a, 0xfb36],\n  [0xfb38, 0xfb3c],\n  [0xfb3e, 0xfb3e],\n  [0xfb40, 0xfb41],\n  [0xfb43, 0xfb44],\n  [0xfb46, 0xfbc1],\n  [0xfbd3, 0xfd3d],\n  [0xfd50, 0xfd8f],\n  [0xfd92, 0xfdc7],\n  [0xfdf0, 0xfdfc],\n  [0xfe70, 0xfe74],\n  [0xfe76, 0xfefc],\n  [0x10800, 0x10805],\n  [0x10808, 0x10808],\n  [0x1080a, 0x10835],\n  [0x10837, 0x10838],\n  [0x1083c, 0x1083c],\n  [0x1083f, 0x10855],\n  [0x10857, 0x1085f],\n  [0x10900, 0x1091b],\n  [0x10920, 0x10939],\n  [0x1093f, 0x1093f],\n  [0x10980, 0x109b7],\n  [0x109be, 0x109bf],\n  [0x10a00, 0x10a00],\n  [0x10a10, 0x10a13],\n  [0x10a15, 0x10a17],\n  [0x10a19, 0x10a33],\n  [0x10a40, 0x10a47],\n  [0x10a50, 0x10a58],\n  [0x10a60, 0x10a7f],\n  [0x10b00, 0x10b35],\n  [0x10b40, 0x10b55],\n  [0x10b58, 0x10b72],\n  [0x10b78, 0x10b7f],\n  [0x10c00, 0x10c48],\n  [0x1ee00, 0x1ee03],\n  [0x1ee05, 0x1ee1f],\n  [0x1ee21, 0x1ee22],\n  [0x1ee24, 0x1ee24],\n  [0x1ee27, 0x1ee27],\n  [0x1ee29, 0x1ee32],\n  [0x1ee34, 0x1ee37],\n  [0x1ee39, 0x1ee39],\n  [0x1ee3b, 0x1ee3b],\n  [0x1ee42, 0x1ee42],\n  [0x1ee47, 0x1ee47],\n  [0x1ee49, 0x1ee49],\n  [0x1ee4b, 0x1ee4b],\n  [0x1ee4d, 0x1ee4f],\n  [0x1ee51, 0x1ee52],\n  [0x1ee54, 0x1ee54],\n  [0x1ee57, 0x1ee57],\n  [0x1ee59, 0x1ee59],\n  [0x1ee5b, 0x1ee5b],\n  [0x1ee5d, 0x1ee5d],\n  [0x1ee5f, 0x1ee5f],\n  [0x1ee61, 0x1ee62],\n  [0x1ee64, 0x1ee64],\n  [0x1ee67, 0x1ee6a],\n  [0x1ee6c, 0x1ee72],\n  [0x1ee74, 0x1ee77],\n  [0x1ee79, 0x1ee7c],\n  [0x1ee7e, 0x1ee7e],\n  [0x1ee80, 0x1ee89],\n  [0x1ee8b, 0x1ee9b],\n  [0x1eea1, 0x1eea3],\n  [0x1eea5, 0x1eea9],\n  [0x1eeab, 0x1eebb],\n  [0x10fffd, 0x10fffd]\n];\n\nfunction isStrongRTLChar(charCode) {\n  for (let i = 0; i < strongRTLRanges.length; i++) {\n    const currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  let nodeStack = [],\n    text = '',\n    charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return 'ltr';\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (let i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    const node = nodeStack.pop(),\n      text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      const m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === 'ruby') {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (let i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return 'rtl';\n      }\n    }\n  }\n  return 'ltr';\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === 'number' && (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  const track = cue.track;\n  const trackList = track.textTrackList;\n  let count = 0;\n  for (let i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === TextTrack.MODE.SHOWING) {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nclass StyleBox {\n  constructor() {}\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  applyStyles(styles, div) {\n    div = div || this.div;\n    for (let prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  }\n\n  formatStyle(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  }\n}\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nclass CueStyleBox extends StyleBox {\n  constructor(window, cue, styleOptions) {\n    super();\n    const isIE8 = typeof navigator !== 'undefined' && /MSIE\\s8\\.0/.test(navigator.userAgent);\n    let color = 'rgba(255, 255, 255, 1)';\n    let backgroundColor = 'rgba(0, 0, 0, 0.8)';\n    let textShadow = '';\n\n    if (typeof WebVTTSet !== 'undefined') {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = 'rgb(255, 255, 255)';\n      backgroundColor = 'rgb(0, 0, 0)';\n    }\n\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    let styles = {\n      color: styleOptions.color,\n      backgroundColor: styleOptions.backgroundColor,\n      textShadow: styleOptions.textShadow,\n      position: 'relative',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: 'inline'\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === '' ? 'horizontal-tb' : cue.vertical === 'lr' ? 'vertical-lr' : 'vertical-rl';\n      styles.unicodeBidi = 'plaintext';\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement('div');\n    styles = {\n      textAlign: cue.align === 'middle' ? 'center' : cue.align,\n      font: styleOptions.font,\n      whiteSpace: 'pre-line',\n      position: 'absolute'\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode =\n        cue.vertical === '' ? 'horizontal-tb' : cue.vertical === 'lr' ? 'vertical-lr' : ('vertical-rl'.stylesunicodeBidi = 'plaintext');\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    let textPos = 0;\n    let align = cue.positionAlign || cue.align;\n    switch (align) {\n      case 'start':\n      case 'left':\n        textPos = cue.position;\n        break;\n      case 'center':\n        textPos = cue.position - cue.size / 2;\n        break;\n      case 'end':\n      case 'right':\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === '') {\n      this.applyStyles({\n        left: this.formatStyle(textPos, '%'),\n        width: this.formatStyle(Math.min(cue.size, 100 - textPos) || cue.size, '%')\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, '%'),\n        height: this.formatStyle(Math.min(cue.size, 100 - textPos) || cue.size, '%')\n      });\n    }\n\n    this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, 'px'),\n        bottom: this.formatStyle(box.bottom, 'px'),\n        left: this.formatStyle(box.left, 'px'),\n        right: this.formatStyle(box.right, 'px'),\n        height: this.formatStyle(box.height, 'px'),\n        width: this.formatStyle(box.width, 'px')\n      });\n    };\n  }\n}\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nclass BoxPosition {\n  constructor(obj) {\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    let lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      let rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length) : 0;\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || top + (obj.height || height);\n    this.width = obj.width || width;\n    this.lineHeight = lh || obj.lineHeight || 13;\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  move(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n      case '+x':\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case '-x':\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case '+y':\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case '-y':\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  }\n\n  // Check if this box overlaps another box, b2.\n  overlaps = function (b2) {\n    return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n  };\n\n  // Check if this box overlaps any other boxes in boxes.\n  overlapsAny(boxes) {\n    for (let i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Check if this box is within another box.\n  within(container) {\n    return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n  }\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  overlapsOppositeAxis(container, axis) {\n    switch (axis) {\n      case '+x':\n        return this.left < container.left;\n      case '-x':\n        return this.right > container.right;\n      case '+y':\n        return this.top < container.top;\n      case '-y':\n        return this.bottom > container.bottom;\n    }\n  }\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  intersectPercentage(b2) {\n    let x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  }\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  toCSSCompatValues(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  }\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  static getSimpleBoxPosition(obj) {\n    let height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    let width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    let top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n    return {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || top + (obj.height || height),\n      width: obj.width || width\n    };\n  }\n}\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    let bestPosition,\n      specifiedPosition = new BoxPosition(b),\n      percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (let i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      let p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  let boxPosition = new BoxPosition(styleBox),\n    cue = styleBox.cue,\n    linePos = computeLinePos(cue),\n    axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case '':\n        axis = ['+y', '-y'];\n        size = 'height';\n        break;\n      case 'rl':\n        axis = ['+x', '-x'];\n        size = 'width';\n        break;\n      case 'lr':\n        axis = ['-x', '+x'];\n        size = 'width';\n        break;\n    }\n\n    let step = boxPosition.lineHeight,\n      position = step * Math.round(linePos),\n      maxPosition = containerBox[size] + step,\n      initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === '' ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    let calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n      case 'center':\n        linePos -= calculatedPercentage / 2;\n        break;\n      case 'end':\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case '':\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, '%')\n        });\n        break;\n      case 'rl':\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, '%')\n        });\n        break;\n      case 'lr':\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, '%')\n        });\n        break;\n    }\n\n    axis = ['+y', '-x', '+x', '-y'];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  let bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nconst FONT_SIZE_PERCENT = 0.058;\nconst FONT_STYLE = 'sans-serif';\nconst CUE_BACKGROUND_PADDING = '1.5%';\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay, style) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  let paddedOverlay = window.document.createElement('div');\n  paddedOverlay.style.position = 'absolute';\n  paddedOverlay.style.left = '0';\n  paddedOverlay.style.right = '0';\n  paddedOverlay.style.top = '0';\n  paddedOverlay.style.bottom = '0';\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (let i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  let boxPositions = [],\n    containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n    dimensionSize = containerBox.height < containerBox.width ? containerBox.height : containerBox.width,\n    fontSize = Math.round(dimensionSize * FONT_SIZE_PERCENT * 100) / 100;\n  let styleOptions = {\n    font: fontSize * fontScale * style.implicitFontScale + 'px ' + style.fontFamily,\n    color: TextStyle.toRGBA(style.fontColor, style.fontOpacity),\n    backgroundColor: TextStyle.toRGBA(style.backgroundColor, style.backgroundOpacity),\n    textShadow: style.getTextShadow()\n  };\n\n  (function () {\n    let styleBox, cue;\n\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n}\n\nlet Parser = function (window, decoder) {\n  this.window = window;\n  this.state = 'INITIAL';\n  this.buffer = '';\n  this.decoder = decoder || new TextDecoder('utf8');\n  this.regionList = [];\n};\n\nlet StringDecoder = function () {\n  return {\n    decode: function (data) {\n      if (!data) {\n        return '';\n      }\n      if (typeof data !== 'string') {\n        throw new Error('Error - expected string data.');\n      }\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nvar _objCreate =\n  Object.create ||\n  (function () {\n    function F() {}\n\n    return function (o) {\n      if (arguments.length !== 1) {\n        throw new Error('Object.create shim only accepts one parameter.');\n      }\n      F.prototype = o;\n      return new F();\n    };\n  })();\n\n// Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\nfunction ParsingError(errorData, message) {\n  this.name = 'ParsingError';\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError;\n\n// ParsingError metadata for acceptable ParsingErrors.\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: 'Malformed WebVTT signature.'\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: 'Malformed time stamp.'\n  }\n};\n\nParser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function (e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function (data) {\n    var self = this;\n\n    // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {stream: true});\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n      var line = buffer.substr(0, pos);\n      // Advance the buffer early in case we fail below.\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n      self.buffer = buffer.substr(pos);\n      return line;\n    }\n\n    // 3.4 WebVTT region and WebVTT region settings syntax\n    function parseRegion(input) {\n      var settings = new Settings();\n\n      parseOptions(\n        input,\n        function (k, v) {\n          switch (k) {\n            case 'id':\n              settings.set(k, v);\n              break;\n            case 'width':\n              settings.percent(k, v);\n              break;\n            case 'lines':\n              settings.integer(k, v);\n              break;\n            case 'regionanchor':\n            case 'viewportanchor':\n              var xy = v.split(',');\n              if (xy.length !== 2) {\n                break;\n              }\n              // We have to make sure both x and y parse, so use a temporary\n              // settings object here.\n              var anchor = new Settings();\n              anchor.percent('x', xy[0]);\n              anchor.percent('y', xy[1]);\n              if (!anchor.has('x') || !anchor.has('y')) {\n                break;\n              }\n              settings.set(k + 'X', anchor.get('x'));\n              settings.set(k + 'Y', anchor.get('y'));\n              break;\n            case 'scroll':\n              settings.alt(k, v, ['up']);\n              break;\n          }\n        },\n        /=/,\n        /\\s/\n      );\n\n      // Create the region, using default values for any values that were not\n      // specified.\n      if (settings.has('id')) {\n        var region = new Region();\n        region.width = settings.get('width', 100);\n        region.lines = settings.get('lines', 3);\n        region.regionAnchorX = settings.get('regionanchorX', 0);\n        region.regionAnchorY = settings.get('regionanchorY', 100);\n        region.viewportAnchorX = settings.get('viewportanchorX', 0);\n        region.viewportAnchorY = settings.get('viewportanchorY', 100);\n        region.scroll = settings.get('scroll', '');\n        // Register the region.\n        self.onregion && self.onregion(region);\n        // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n        self.regionList.push({\n          id: settings.get('id'),\n          region: region\n        });\n      }\n    }\n\n    // 3.2 WebVTT metadata header syntax\n    function parseHeader(input) {\n      parseOptions(\n        input,\n        function (k, v) {\n          switch (k) {\n            case 'Region':\n              // 3.3 WebVTT region metadata header syntax\n              parseRegion(v);\n              break;\n          }\n        },\n        /:/\n      );\n    }\n\n    // 5.1 WebVTT file parsing.\n    try {\n      var line;\n      if (self.state === 'INITIAL') {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = 'HEADER';\n      }\n\n      var alreadyCollectedLine = false;\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case 'HEADER':\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = 'ID';\n            }\n            continue;\n          case 'NOTE':\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = 'ID';\n            }\n            continue;\n          case 'ID':\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = 'NOTE';\n              break;\n            }\n            // 19-29 - Allow any number of line terminators, then initialize new cue values.\n            if (!line) {\n              continue;\n            }\n            self.cue = new Cue(0, 0, '');\n            self.state = 'CUE';\n            // 30-39 - Check if self line contains an optional identifier or timing data.\n            if (line.indexOf('-->') === -1) {\n              self.cue.id = line;\n              continue;\n            }\n          // Process line as start of a cue.\n          /*falls through*/\n          case 'CUE':\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e);\n              // In case of an error ignore rest of the cue.\n              self.cue = null;\n              self.state = 'BADCUE';\n              continue;\n            }\n            self.state = 'CUETEXT';\n            continue;\n          case 'CUETEXT':\n            var hasSubstring = line.indexOf('-->') !== -1;\n            // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n            if (!line || (hasSubstring && (alreadyCollectedLine = true))) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = 'ID';\n              continue;\n            }\n            if (self.cue.text) {\n              self.cue.text += '\\n';\n            }\n            self.cue.text += line;\n            continue;\n          case 'BADCUE': // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = 'ID';\n            }\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n\n      // If we are currently parsing a cue, report what we have.\n      if (self.state === 'CUETEXT' && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n      self.cue = null;\n      // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n      self.state = self.state === 'INITIAL' ? 'BADWEBVTT' : 'BADCUE';\n    }\n    return this;\n  },\n  flush: function () {\n    var self = this;\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode();\n      // Synthesize the end of the current cue or region.\n      if (self.cue || self.state === 'HEADER') {\n        self.buffer += '\\n\\n';\n        self.parse();\n      }\n      // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n      if (self.state === 'INITIAL') {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n    self.onflush && self.onflush();\n    return this;\n  }\n};\n\nexport {processCues, convertCueToDOMTree, Parser, StringDecoder};\n","//@flow\nimport Track from './track';\nimport {Cue} from './vtt-cue';\nimport Error from '../error/error';\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nconst TextTrack: TextTrack = class TextTrack extends Track {\n  MODE: {[mode: string]: string};\n  KIND: {[kind: string]: string};\n  EXTERNAL_TRACK_ID: string;\n\n  isMetaDataTrack: Function;\n  isNativeTextTrack: Function;\n  isExternalTrack: Function;\n\n  /**\n   * use as a uniq identifier of the track.\n   * @static\n   * @type {number}\n   * @private\n   */\n  static _tracksCount: number = 0;\n  /**\n   * index generator.\n   * @returns {number} - the next track index.\n   */\n  static _generateIndex(): number {\n    return TextTrack._tracksCount++;\n  }\n  /**\n   * reset the track count.\n   * @returns {void}\n   */\n  static reset(): void {\n    TextTrack._tracksCount = 0;\n  }\n\n  /**\n   * The kind of the text track:\n   * subtitles/captions/metadata.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _kind: string;\n  /**\n   * flag to know if it's external or not\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _external: boolean;\n  /**\n   * flag to know if it's default or not\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _default: boolean;\n\n  /**\n   * Getter for the kind of the text track.\n   * @public\n   * @returns {string} - The kind of the text track.\n   */\n  get kind(): string {\n    return this._kind;\n  }\n\n  /**\n   * Getter for the external of the text track.\n   * @public\n   * @returns {boolean} - Whether the text track is external.\n   */\n  get external(): boolean {\n    return this._external;\n  }\n\n  /**\n   * Getter for the default of the text track.\n   * @public\n   * @returns {boolean} - Whether the text track is default.\n   */\n  get default(): boolean {\n    return this._default;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    // use language tag if no display label is available\n    this._label = this.label || this.language;\n    this._kind = settings.kind;\n    this._external = settings.external;\n    this._index = TextTrack._generateIndex();\n    this._default = this.active;\n  }\n};\n\nTextTrack.MODE = {\n  DISABLED: 'disabled',\n  SHOWING: 'showing',\n  HIDDEN: 'hidden'\n};\n\nTextTrack.KIND = {\n  METADATA: 'metadata',\n  SUBTITLES: 'subtitles',\n  CAPTIONS: 'captions'\n};\n\nTextTrack.EXTERNAL_TRACK_ID = 'playkit-external-track';\n\nTextTrack.isMetaDataTrack = (track: any) => {\n  return track && track.kind === TextTrack.KIND.METADATA;\n};\n\nTextTrack.isNativeTextTrack = (track: any) => {\n  return track && [TextTrack.KIND.SUBTITLES, TextTrack.KIND.CAPTIONS].includes(track.kind);\n};\n\nTextTrack.isExternalTrack = (track: any) => {\n  return track && [track.language, track.label].includes(TextTrack.EXTERNAL_TRACK_ID);\n};\n\n/**\n * Normalize cues to be of type of VTT model.\n * @param {TextTrackCueList} textTrackCueList - The text track cue list contains the cues.\n * @returns {void}\n * @private\n */\nfunction getActiveCues(textTrackCueList: TextTrackCueList): Array<Cue> {\n  let normalizedCues: Array<Cue> = [];\n  for (let cue of textTrackCueList) {\n    //Normalize cues to be of type of VTT model\n    if ((window.VTTCue && cue instanceof window.VTTCue) || (window.DataCue && cue instanceof window.DataCue)) {\n      normalizedCues.push(cue);\n    } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n      try {\n        normalizedCues.push(new Cue(cue.startTime, cue.endTime, cue.text));\n      } catch (error) {\n        new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNABLE_TO_CREATE_TEXT_CUE, error);\n      }\n    }\n  }\n  return normalizedCues;\n}\n\nexport default TextTrack;\nexport {getActiveCues};\n","//@flow\nclass TimedMetadata {\n  static TYPE: {[type: string]: string};\n\n  startTime: number;\n  endTime: number;\n  id: string;\n  type: string;\n  metadata: string | Object;\n  /**\n   * @constructor\n   * @param {number} startTime - start time.\n   * @param {number} endTime - end time.\n   * @param {string} id - id.\n   * @param {string} type - type.\n   * @param {any} metadata - metadata.\n   */\n  constructor(startTime: number, endTime: number, id: string, type: string, metadata: any) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.id = id;\n    this.type = type;\n    this.metadata = metadata;\n  }\n}\n\nTimedMetadata.TYPE = {\n  ID3: 'id3',\n  EMSG: 'emsg',\n  CUE_POINT: 'cuepoint',\n  CUSTOM: 'custom'\n};\n\n/**\n * Create a standard TextTrackCue.\n * @param {TimedMetadata} timedMetadata - timed metadata object.\n * @returns {TextTrackCue} - the created text track cue\n * @private\n */\nfunction createTextTrackCue(timedMetadata: TimedMetadata): ?TextTrackCue {\n  try {\n    const {startTime, endTime, id, type, metadata} = timedMetadata;\n    let cue = {};\n    if (window.VTTCue) {\n      cue = new window.VTTCue(startTime, endTime, '');\n    } else if (window.TextTrackCue) {\n      // IE11 support\n      cue = new window.TextTrackCue(startTime, endTime, '');\n    }\n    const cueValue = {key: type, data: metadata};\n    cue.id = id;\n    cue.value = cueValue;\n    return cue;\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Create a timed metadata object from a standard TextTrackCue.\n * @param {TextTrackCue} cue - text track cue.\n * @returns {?TimedMetadata} - the created timed metadata object.\n * @private\n */\nfunction createTimedMetadata(cue: TextTrackCue): ?TimedMetadata {\n  if (cue) {\n    const {startTime, endTime, id} = cue;\n    const typeAndMetadata = _getTypeAndMetadata(cue);\n    if (typeAndMetadata) {\n      const {type, metadata} = _getTypeAndMetadata(cue);\n      return new TimedMetadata(startTime, endTime, id, type, metadata);\n    }\n  }\n  return null;\n}\n\n/**\n * @param {TextTrackCue} cue - cue\n * @return {Object} - type and data\n * @private\n */\nfunction _getTypeAndMetadata(cue: TextTrackCue): Object {\n  if (cue) {\n    const {type, value, track} = cue;\n    if (value) {\n      const {key, data} = value;\n      const isId3 = type === 'org.id3' || (track && track.label) === 'id3';\n      let timedMetadataType = Object.values(TimedMetadata.TYPE).find(type => type === key);\n      if (!timedMetadataType) {\n        timedMetadataType = isId3 ? TimedMetadata.TYPE.ID3 : TimedMetadata.TYPE.CUSTOM;\n      }\n      return {\n        type: timedMetadataType,\n        metadata: isId3 || !data ? value : data\n      };\n    }\n  }\n  return null;\n}\n\nexport {TimedMetadata, createTextTrackCue, createTimedMetadata};\n","//@flow\nconst TrackType = Object.freeze({\n  VIDEO: 'video',\n  AUDIO: 'audio',\n  TEXT: 'text',\n  IMAGE: 'image'\n});\n\nexport {TrackType};\n","//@flow\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nexport default class Track {\n  /**\n   * Comparing language strings.\n   * @param {string} inputLang - The configured language.\n   * @param {string} trackLang - The default track language.\n   * @param {boolean} equal - Optional flag to check for matching languages.\n   * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n   */\n  static langComparer(inputLang: string, trackLang: string, equal: ?boolean): boolean {\n    try {\n      inputLang = inputLang.toLowerCase();\n      trackLang = trackLang.toLowerCase();\n      if (equal) {\n        return inputLang ? inputLang === trackLang : false;\n      } else {\n        return inputLang ? inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang) : false;\n      }\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static clone<T>(track: any): T {\n    return (Object.assign(Object.create(Object.getPrototypeOf(track)), track): T);\n  }\n\n  /**\n   * The id of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _id: ?string;\n  /**\n   * The active mode of the track.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _active: boolean;\n  /**\n   * The label of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _label: ?string;\n  /**\n   * The language of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _language: string;\n  /**\n   * The index of the track.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _index: number;\n  /**\n   * Indicator if track available or not.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _available: boolean;\n  /**\n   * The clone function reference.\n   * @member\n   * @type {Function}\n   * @public\n   */\n  clone: Function;\n\n  /**\n   * Getter for the track id.\n   * @public\n   * @returns {?string} - The track id.\n   */\n  get id(): ?string {\n    return this._id;\n  }\n\n  /**\n   * Getter for the active mode of the track.\n   * @public\n   * @returns {boolean} - The active mode of the track.\n   */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * Setter for the active mode of the track.\n   * @public\n   * @param {boolean} value - Whether the track is active or not.\n   */\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  /**\n   * Getter for the label of the track.\n   * @public\n   * @returns {string} - The label of the track.\n   */\n  get label(): ?string {\n    return this._label;\n  }\n\n  /**\n   * Getter for the language of the track.\n   * @public\n   * @returns {string} - The language of the track.\n   */\n  get language(): string {\n    return this._language;\n  }\n\n  /**\n   * Getter for the index of the track.\n   * @public\n   * @returns {number} - The index of the track.\n   */\n  get index(): number {\n    return this._index;\n  }\n\n  /**\n   * Getter for the available indicator\n   * @public\n   * @returns {boolean} - The indicator if track available or not.\n   */\n  get available(): boolean {\n    return this._available;\n  }\n\n  /**\n   * Setter for the index of the track.\n   * @public\n   * @param {number} value - The index of the track.\n   * @returns {void}\n   */\n  set index(value: number): void {\n    this._index = value;\n  }\n\n  /**\n   * Setter for the label of the track.\n   * @public\n   * @param {string} value - The label of the track.\n   */\n  set label(value: string) {\n    this._label = value;\n  }\n\n  /**\n   * Setter for the available indicator\n   * @public\n   * @param {boolean} isAvailable - The indicator if track available or not\n   */\n  set available(isAvailable: boolean) {\n    this._available = isAvailable;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n    this._available = typeof settings.available === 'boolean' ? settings.available : true;\n    this.clone = Track.clone.bind(null, this);\n  }\n}\n","//@flow\nimport Track from './track';\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nconst VideoTrack: VideoTrack = class VideoTrack extends Track {\n  /**\n   * @member {number} _bandwidth - The bandwidth of the video track\n   * @type {number}\n   * @private\n   */\n  _bandwidth: number;\n\n  /**\n   * @member {number} _width - The width of the video track\n   * @type {number}\n   * @private\n   */\n  _width: number;\n\n  /**\n   * @member {number} _height - The height of the video track\n   * @type {number}\n   * @private\n   */\n  _height: number;\n\n  /**\n   * @public\n   * @returns {number} - The bandwidth of the video track\n   */\n  get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The width of the video track\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The height of the video track\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._bandwidth = settings.bandwidth;\n    this._width = settings.width;\n    this._height = settings.height;\n    this._label = settings.label ? settings.label : this._height ? this._height + 'p' : undefined;\n  }\n};\n\nexport default VideoTrack;\n","//@flow\nimport {convertCueToDOMTree} from './text-track-display';\n\nconst autoKeyword: string = 'auto';\nconst directionSetting: {[string]: boolean} = {\n  '': true,\n  lr: true,\n  rl: true\n};\nconst alignSetting: {[string]: boolean} = {\n  start: true,\n  center: true,\n  end: true,\n  left: true,\n  right: true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value): string | boolean {\n  if (typeof value !== 'string') {\n    return false;\n  }\n  const dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value: string): string | boolean {\n  if (typeof value !== 'string') {\n    return false;\n  }\n  const align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\nclass VTTCue {\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n  hasBeenReset: boolean = false;\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  displayState: any = undefined;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n  _id: string = '';\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n  _pauseOnExit: boolean = false;\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _startTime: number;\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _endTime: number;\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n  _text: string;\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n  _region: ?string = null;\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n  _vertical: string = '';\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  _snapToLines: boolean = true;\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n  _line: string | number = 'auto';\n  /**\n   * An alignment for the cue boxs line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n  _lineAlign: string = 'start';\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n  _position: number = 50;\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n  _positionAlign: string = 'center';\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n  _size: number = 50;\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n  _align: string = 'center';\n\n  constructor(startTime: number, endTime: number, text: string) {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n\n  resetCue(): void {\n    this.hasBeenReset = true;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  set id(value: string) {\n    this._id = '' + value;\n  }\n\n  get pauseOnExit(): boolean {\n    return this._pauseOnExit;\n  }\n\n  set pauseOnExit(value: boolean) {\n    this._pauseOnExit = value;\n  }\n\n  get startTime(): number {\n    return this._startTime;\n  }\n\n  set startTime(value: number) {\n    if (typeof value !== 'number') {\n      throw new TypeError('Start time must be set to a number.');\n    }\n    this._startTime = value;\n    this.resetCue();\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set endTime(value: number) {\n    if (typeof value !== 'number') {\n      throw new TypeError('End time must be set to a number.');\n    }\n    this._endTime = value;\n    this.resetCue();\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    this._text = '' + value;\n    this.resetCue();\n  }\n\n  get region(): ?string {\n    return this._region;\n  }\n\n  set region(value: string) {\n    this._region = value;\n    this.resetCue();\n  }\n\n  get vertical(): string {\n    return this._vertical;\n  }\n\n  set vertical(value: string) {\n    const setting = findDirectionSetting(value);\n    // Have to check for false because the setting an be an empty string.\n    if (setting === false) {\n      throw new SyntaxError('An invalid or illegal string was specified.');\n    } else if (typeof setting === 'string') {\n      this._vertical = setting;\n      this.resetCue();\n    }\n  }\n\n  get snapToLines(): boolean {\n    return this._snapToLines;\n  }\n\n  set snapToLines(value: boolean) {\n    this._snapToLines = value;\n    this.resetCue();\n  }\n\n  get line(): string | number {\n    return this._line;\n  }\n\n  set line(value: string | number) {\n    if (typeof value !== 'number' && value !== autoKeyword) {\n      throw new SyntaxError('An invalid number or illegal string was specified.');\n    }\n    this._line = value;\n    this.resetCue();\n  }\n\n  get lineAlign(): string {\n    return this._lineAlign;\n  }\n\n  set lineAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError('An invalid or illegal string was specified.');\n    } else if (typeof setting === 'string') {\n      this._lineAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get position(): number {\n    return this._position;\n  }\n\n  set position(value: number) {\n    if (value < 0 || value > 100) {\n      throw new Error('Position must be between 0 and 100.');\n    }\n    this._position = value;\n    this.resetCue();\n  }\n\n  get positionAlign(): string {\n    return this._positionAlign;\n  }\n\n  set positionAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError('An invalid or illegal string was specified.');\n    } else if (typeof setting === 'string') {\n      this._positionAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get size(): number | boolean {\n    return this._size;\n  }\n\n  set size(value: number): void {\n    if (value < 0 || value > 100) {\n      throw new Error('Size must be between 0 and 100.');\n    }\n    this._size = value;\n    this.resetCue();\n  }\n\n  get align(): string {\n    return this._align;\n  }\n\n  set align(value: string): void {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError('An invalid or illegal string was specified.');\n    } else if (typeof setting === 'string') {\n      this._align = (setting: string);\n      this.resetCue();\n    }\n  }\n\n  getCueAsHTML() {\n    return convertCueToDOMTree(window, this.text);\n  }\n}\n\nlet Cue;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  Cue = window.VTTCue;\n} else {\n  Cue = VTTCue;\n}\n\nexport {Cue};\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar scrollSetting = {\n  '': true,\n  up: true\n};\n\n/**\n * find scroll setting\n * @param {string} value - a string\n * @returns {*} the settings\n */\nfunction findScrollSetting(value) {\n  if (typeof value !== 'string') {\n    return false;\n  }\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\n/**\n * check percentage validation\n * @param {number} value - percentage\n * @returns {boolean} - boolean\n */\nfunction isValidPercentValue(value) {\n  return typeof value === 'number' && value >= 0 && value <= 100;\n}\n\n// VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\nclass VTTRegion {\n  _width: number = 100;\n  _lines: number = 3;\n  _regionAnchorX: number = 0;\n  _regionAnchorY: number = 100;\n  _viewportAnchorX: number = 0;\n  _viewportAnchorY: number = 100;\n  _scroll: number = '';\n\n  constructor() {}\n\n  get width(): number {\n    return this._width;\n  }\n\n  set width(value: number) {\n    if (!isValidPercentValue(value)) {\n      throw new Error('Width must be between 0 and 100.');\n    }\n    this._width = value;\n  }\n\n  get scroll(): number {\n    return this._scroll;\n  }\n\n  set scroll(value: number) {\n    var setting = findScrollSetting(value);\n    // Have to check for false as an empty string is a legal value.\n    if (setting === false) {\n      throw new SyntaxError('An invalid or illegal string was specified.');\n    }\n    this._scroll = setting;\n  }\n\n  get viewportAnchorY(): number {\n    return this._viewportAnchorY;\n  }\n\n  set viewportAnchorY(value: number) {\n    if (!isValidPercentValue(value)) {\n      throw new Error('ViewportAnchorY must be between 0 and 100.');\n    }\n    this._viewportAnchorY = value;\n  }\n\n  get viewportAnchorX(): number {\n    return this._viewportAnchorX;\n  }\n\n  set viewportAnchorX(value: number) {\n    if (!isValidPercentValue(value)) {\n      throw new Error('ViewportAnchorX must be between 0 and 100.');\n    }\n    this._viewportAnchorX = value;\n  }\n\n  get regionAnchorX(): number {\n    return this._regionAnchorX;\n  }\n\n  set regionAnchorX(value: number) {\n    if (!isValidPercentValue(value)) {\n      throw new Error('RegionAnchorY must be between 0 and 100.');\n    }\n    this._regionAnchorX = value;\n  }\n\n  get lines(): number {\n    return this._lines;\n  }\n\n  set lines(value: number) {\n    if (typeof value !== 'number') {\n      throw new TypeError('Lines must be set to a number.');\n    }\n    this._lines = value;\n  }\n\n  get regionAnchorY(): number {\n    return this._regionAnchorY;\n  }\n\n  set regionAnchorY(value: number) {\n    if (!isValidPercentValue(value)) {\n      throw new Error('RegionAnchorX must be between 0 and 100.');\n    }\n    this._regionAnchorY = value;\n  }\n}\n\nlet Region;\nif (typeof window !== 'undefined' && window.VTTRegion) {\n  Region = window.VTTRegion;\n} else {\n  Region = VTTRegion;\n}\n\nexport {Region};\n","//@flow\n/**\n * @param {Array<any>} list The array to search.\n * @param {Function} comparisonFn\n *      Called and provided a candidate item as the first argument.\n *      Should return:\n *          > -1 if the item should be located at a lower index than the provided item.\n *          > 1 if the item should be located at a higher index than the provided item.\n *          > 0 if the item is the item you're looking for.\n *\n * @return {any} The object if it is found or null otherwise.\n */\nexport function binarySearch(list: Array<any> = [], comparisonFn: Function = () => 1): any {\n  if (list.length === 0 || (list.length === 1 && comparisonFn(list[0]) !== 0)) {\n    return null;\n  }\n  const mid = Math.floor(list.length / 2);\n  if (comparisonFn(list[mid]) === 0) {\n    return list[mid];\n  }\n  if (comparisonFn(list[mid]) > 0) {\n    return binarySearch(list.slice(0, mid), comparisonFn);\n  } else {\n    return binarySearch(list.slice(mid + 1), comparisonFn);\n  }\n}\n","// @flow\nimport UAParser from 'ua-parser-js';\n\nconst SmartTvRegex = /^.*(smart-tv|smarttv).*$/i;\n\nconst LGTVRegex = /^.*(web0s).*(smarttv).*$/i;\n\nconst SAMSUNGTVRegex = /^.*(smart-tv).*(tizen).*$/i;\n\nconst HISENSETVRegex = /^.*(vidaa).*(smarttv).*$/i;\n\n//recognize as safari\nconst SAMSUNGBrowserParser = [\n  [SAMSUNGTVRegex],\n  [\n    [UAParser.BROWSER.NAME, 'SAMSUNG_TV_BROWSER'],\n    [UAParser.BROWSER.MAJOR, ''],\n    [UAParser.BROWSER.VERSION, '']\n  ]\n];\n\n//recognize os of smartTV devices\nconst OSParser = [[LGTVRegex], [UAParser.OS.NAME], [HISENSETVRegex], [UAParser.OS.NAME]];\n\n//add smart tv as smart tv devices\nconst DeviceParser = [\n  [LGTVRegex],\n  [\n    [UAParser.DEVICE.VENDOR, 'LG'],\n    [UAParser.DEVICE.TYPE, UAParser.DEVICE.SMARTTV]\n  ],\n  [SAMSUNGTVRegex],\n  [\n    [UAParser.DEVICE.VENDOR, 'SAMSUNG'],\n    [UAParser.DEVICE.TYPE, UAParser.DEVICE.SMARTTV]\n  ],\n  [HISENSETVRegex],\n  [\n    [UAParser.DEVICE.VENDOR, 'HISENSE'],\n    [UAParser.DEVICE.TYPE, UAParser.DEVICE.SMARTTV]\n  ],\n  [SmartTvRegex],\n  [[UAParser.DEVICE.TYPE, UAParser.DEVICE.SMARTTV]]\n];\n\nconst EdgeChromiumParser = [[/(edg)\\/((\\d+)?[\\w.]+)/i], [[UAParser.BROWSER.NAME, 'Edge'], UAParser.BROWSER.VERSION, UAParser.BROWSER.MAJOR]];\n\nconst BrowserParser = [...EdgeChromiumParser, ...SAMSUNGBrowserParser];\n\nlet Env = new UAParser(undefined, {browser: BrowserParser, device: DeviceParser, os: OSParser}).getResult();\n\nEnv.isConsole = Env.device.type === UAParser.DEVICE.CONSOLE;\nEnv.isSmartTV = Env.device.type === UAParser.DEVICE.SMARTTV;\nEnv.isMobile = Env.device.type === UAParser.DEVICE.MOBILE;\nEnv.isTablet = Env.device.type === UAParser.DEVICE.TABLET;\nEnv.isWearable = Env.device.type === UAParser.DEVICE.WEARABLE;\nEnv.isEmbedded = Env.device.type === UAParser.DEVICE.EMBEDDED;\nEnv.isIPadOS = Env.os.name === 'Mac OS' && 'ontouchend' in document;\nEnv.isSafari = Env.browser.name.includes('Safari');\nEnv.isIOS = Env.os.name === 'iOS';\nEnv.isMacOS = Env.os.name === 'Mac OS';\n\nexport default Env;\n","export * from './util';\nexport {ResizeWatcher} from './resize-watcher';\nexport {MultiMap} from './multi-map';\nexport {binarySearch} from './binary-search';\n","// @flow\nimport Error from '../error/error';\n\nconst JSONP_TIMEOUT: number = 5000;\nconst CALLBACK_PREFIX: string = 'jsonpcallback';\nconst JSONP_FORMAT_STRING: string = 'responseFormat=jsonp&callback=';\n\n/**\n * JSONP utility.\n * @param {string} url - The url of the request.\n * @param {string} callback - Callback function to be called when the request returns.\n * @param {Object} options - Object contains configuration (currently only timeout).\n * @returns {Promise<*>} - A promise with the callback output.\n */\nfunction jsonp(url: string, callback: Function, options: Object): Promise<*> {\n  options = options || {};\n  const timeout = options.timeout ? options.timeout : JSONP_TIMEOUT;\n  const script = document.createElement('script');\n  const callbackId = CALLBACK_PREFIX + Math.round(Date.now() + Math.random() * 1000001);\n  let scriptUri = url;\n  let timer;\n\n  /**\n   * function to clean the DOM from the script tag and from the function\n   * @returns {void}\n   */\n  const _cleanup = () => {\n    if (script && script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[callbackId] = () => {};\n    if (timer) {\n      clearTimeout(timer);\n    }\n  };\n\n  return new Promise((resolve, reject) => {\n    if (timeout) {\n      timer = setTimeout(function () {\n        _cleanup();\n        reject(new Error(Error.Severity.CRITICAL, Error.Category.NETWORK, Error.Code.TIMEOUT, url));\n      }, timeout);\n    }\n\n    /**\n     * a wrapper to the callback function, to save a closure\n     * @param {Object} data - the data we get from the server, in response to the request\n     * @returns {void}\n     */\n    window[callbackId] = (data: Object) => {\n      const callbackResult = callback(data, url);\n      _cleanup();\n      resolve(callbackResult);\n    };\n\n    if (scriptUri.match(/\\?/)) {\n      scriptUri += '&' + JSONP_FORMAT_STRING + callbackId;\n    } else {\n      scriptUri += '?' + JSONP_FORMAT_STRING + callbackId;\n    }\n\n    script.type = 'text/javascript';\n    script.src = scriptUri;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n}\n\nexport {jsonp};\n","//@flow\n/**\n * Locale class\n * @class\n *\n */\nexport default class Locale {\n  /**\n   * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n   * @returns {string} - the IOS-693-1 language string\n   * @static\n   */\n  static get language(): string {\n    let lang: string;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0];\n    } else if (navigator.userLanguage) {\n      // IE only\n      lang = navigator.userLanguage;\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language;\n    }\n\n    if (lang && lang.match('-')) {\n      lang = lang.split('-')[0];\n    }\n\n    return lang;\n  }\n}\n","//@flow\nimport * as JsLogger from 'js-logger';\n\nconst LogLevel: PKLogLevels = {\n  DEBUG: JsLogger.DEBUG,\n  INFO: JsLogger.INFO,\n  TIME: JsLogger.TIME,\n  WARN: JsLogger.WARN,\n  ERROR: JsLogger.ERROR,\n  OFF: JsLogger.OFF\n};\n\nconst LogLevelType: PKLogLevelTypes = {};\n\n// Build the log level types enums according to the LogLevel object\nObject.keys(LogLevel).forEach(key => {\n  LogLevelType[key] = key;\n});\n\nJsLogger.useDefaults({defaultLevel: JsLogger.ERROR});\n\n/**\n * sets the logger handler\n * @private\n * @param {LogHandlerType} handler - the log level\n * @returns {void}\n */\nfunction setLogHandler(handler: LogHandlerType): void {\n  JsLogger.setHandler((messages, context) => handler(messages, context));\n}\n\n/**\n * get a logger\n * @param {?string} name - the logger name\n * @returns {Object} - the logger class\n */\nfunction getLogger(name?: string): Object {\n  if (!name) {\n    return JsLogger;\n  }\n  return JsLogger.get(name);\n}\n\n/**\n * get the log level\n * @param {?string} name - the logger name\n * @returns {PKLogLevelObject} - the log level\n */\nfunction getLogLevel(name?: string): PKLogLevelObject {\n  return getLogger(name).getLevel();\n}\n\n/**\n * sets the logger level\n * @param {PKLogLevelObject} level - the log level\n * @param {?string} name - the logger name\n * @returns {void}\n */\nfunction setLogLevel(level: PKLogLevelObject, name?: string): void {\n  getLogger(name).setLevel(level);\n}\n\nexport default getLogger;\nexport {LogLevel, LogLevelType, getLogLevel, setLogLevel, setLogHandler};\n","//@flow\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nclass MultiMap<K, T> {\n  _map: Map<K, T[]>;\n\n  constructor() {\n    /** @private {!Object.<K, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {K} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n  push(key: K, value: T): void {\n    if (this._map.has(key)) {\n      let list = this._map.get(key);\n      if (Array.isArray(list)) {\n        list.push(value);\n        this._map.set(key, list);\n      }\n    } else {\n      this._map.set(key, [value]);\n    }\n  }\n\n  /**\n   * Set an array of values for the key, overwriting any previous data.\n   * @param {K} key -\n   * @param {!Array.<T>} values -\n   * @returns {void}\n   */\n  set(key: K, values: T[]): void {\n    this._map.set(key, values);\n  }\n\n  /**\n   * Check for a key.\n   * @param {K} key -\n   * @return {boolean} true if the key exists.\n   */\n  has(key: K): boolean {\n    return this._map.has(key);\n  }\n\n  /**\n   * Get a list of values by key.\n   * @param {K} key -\n   * @return {Array.<T>} or null if no such key exists.\n   */\n  get(key: K): Array<T> {\n    let list = this._map.get(key);\n    // slice() clones the list so that it and the map can each be modified\n    // without affecting the other.\n    return list ? list.slice() : [];\n  }\n\n  /**\n   * Get a list of all values.\n   * @returns {!Array.<T>} -\n   */\n  getAll(): T[] {\n    let list: T[] = [];\n    for (var value of this._map.values()) {\n      list = list.concat(value);\n    }\n    return list;\n  }\n\n  /**\n   * Remove a specific value, if it exists. If there are no more values to the key, the key is removed\n   * @param {K} key -\n   * @param {T} value -\n   * @returns {void}\n   */\n  remove(key: K, value: T): void {\n    if (!this._map.has(key)) return;\n    let list = this._map.get(key);\n    if (Array.isArray(list)) {\n      for (let i = 0; i < list.length; ++i) {\n        if (list[i] == value) {\n          list.splice(i, 1);\n          --i;\n        }\n      }\n      if (list.length === 0) {\n        this._map.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Get all keys from the multimap.\n   * @return {!Array.<K>}\n   */\n  // eslint-disable-next-line no-undef\n  keys(): Iterator<K> {\n    return this._map.keys();\n  }\n\n  /**\n   * Clear all keys and values from the multimap.\n   * @returns {void}\n   */\n  clear(): void {\n    this._map.clear();\n  }\n}\nexport {MultiMap};\n","// @flow\nimport * as Utils from './util';\n\nclass PosterManager {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  _posterUrl: string;\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n\n  constructor() {\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n  setSrc(posterUrl: ?string): void {\n    if (posterUrl) {\n      this._posterUrl = posterUrl;\n      Utils.Dom.setStyle(this._el, 'background-image', `url(\"${this._posterUrl}\")`);\n      this.hide();\n    }\n  }\n\n  /**\n   * Get the poster source URL\n   * @public\n   * @returns {string} - the poster image URL\n   */\n  get src(): string {\n    return this._posterUrl;\n  }\n\n  /**\n   * Get the poster HTML Div element\n   * @public\n   * @returns {HTMLDivElement} - Poster HTML Dom element\n   */\n  getElement(): HTMLDivElement {\n    return this._el;\n  }\n\n  /**\n   * Create the HTML Div element of the poster\n   * @private\n   * @returns {void}\n   */\n  _createEl(): void {\n    if (!this._el) {\n      const el = (this._el = Utils.Dom.createElement('div'));\n      Utils.Dom.setAttribute(el, 'id', Utils.Generator.uniqueId(5));\n      Utils.Dom.setAttribute(el, 'tabindex', '-1');\n    }\n  }\n\n  /**\n   * Removes the poster element from the dom\n   * @private\n   * @returns {void}\n   */\n  _removeEl(): void {\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  /**\n   * Show the poster image\n   * @public\n   * @private\n   * @returns {void}\n   */\n  show(): void {\n    Utils.Dom.setStyle(this._el, 'display', '');\n  }\n\n  /**\n   * Hide the poster image\n   * @public\n   * @returns {void}\n   */\n  hide(): void {\n    Utils.Dom.setStyle(this._el, 'display', 'none');\n  }\n\n  /**\n   * Resets the poster url and the background image\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._posterUrl = '';\n    Utils.Dom.setStyle(this._el, 'background-image', '');\n  }\n\n  /**\n   * Destroys the poster element\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.reset();\n    this._removeEl();\n  }\n}\n\nexport default PosterManager;\n","//@flow\nimport FakeEvent from '../event/fake-event';\nimport FakeEventTarget from '../event/fake-event-target';\nimport {CustomEventType} from '../event/event-type';\n\n/**\n * A Factory class to create a resize observer for the player.\n */\nclass ResizeWatcher extends FakeEventTarget {\n  _observer: ?Object;\n  _el: ?HTMLElement;\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Removes resize listeners.\n   * @returns {void}\n   */\n  destroy(): void {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    this._observer = null;\n    this._el = null;\n  }\n\n  /**\n   * Start listening to a resize of the element.\n   * @param {HTMLElement} el - the element to listen to.\n   * @returns {void}\n   */\n  init(el: HTMLElement): void {\n    if (this._observer) {\n      return;\n    }\n    this._el = el;\n    window.ResizeObserver ? this._createNativeObserver() : this._createIframeObserver();\n    if (this._el instanceof HTMLElement && this._observer) {\n      this._observer.observe(this._el);\n    }\n  }\n\n  _createNativeObserver() {\n    this._observer = new window.ResizeObserver(entries => {\n      entries.forEach(() => {\n        this._triggerResize();\n      });\n    });\n  }\n\n  _createIframeObserver() {\n    this._observer = new IFrameObserver(this._triggerResize.bind(this));\n  }\n\n  _triggerResize() {\n    this.dispatchEvent(new FakeEvent(CustomEventType.RESIZE));\n  }\n}\n\nconst IFRAME_CLASS_NAME: string = 'playkit-size-iframe';\n\n/**\n * This class mimics the API of the ResizeObserver API (currently available only in Chrome).\n * Creates an empty iFrame next to the player container, which gets the dimensions of it's parent and listens to\n * the iframes resize event.\n * @param {Function} callback - the function to be called when a resize event is detected.\n */\nclass IFrameObserver {\n  _observersStore: Object = {};\n  _onChangeCallback: Function;\n\n  constructor(callback: Function) {\n    this._onChangeCallback = callback;\n  }\n\n  /**\n   * start detecting resize event\n   * @param {HTMLElement} el - The element that is going to be resized.\n   * @returns {void}\n   */\n  observe(el: HTMLElement): void {\n    const iframe = this._createIframe();\n    const playerId = el.getAttribute('id');\n    this._observersStore[playerId] = iframe;\n    el.appendChild(iframe);\n    iframe.contentWindow.onresize = () => this._onChangeCallback();\n  }\n\n  /**\n   * remove all resize listeners\n   * @returns {void}\n   */\n  disconnect(): void {\n    for (let target in this._observersStore) {\n      const el = document.getElementById(target);\n      const iframe = this._observersStore[target];\n      iframe.onresize = null;\n      if (el) {\n        el.removeChild(iframe);\n        delete this._observersStore[el.getAttribute('id')];\n      }\n    }\n  }\n\n  _createIframe(): HTMLIFrameElement {\n    let iframe = document.createElement('iframe');\n    iframe.className = IFRAME_CLASS_NAME;\n    return iframe;\n  }\n}\n\nexport {ResizeWatcher};\n","//@flow\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks: Array<Object>, width: number, height: number): ?Object {\n  let mostSuitableWidth = null;\n  if (height && tracks) {\n    let mostSuitableWidthTracks = [];\n    let minWidthDiff = Infinity;\n    for (let track of tracks) {\n      // first filter the most width suitable\n      let widthDiff = Math.abs(track.width - width);\n      if (widthDiff < minWidthDiff) {\n        minWidthDiff = widthDiff;\n        mostSuitableWidthTracks = [track];\n      } else if (widthDiff === minWidthDiff) {\n        mostSuitableWidthTracks.push(track);\n      }\n    }\n    let videoRatio = width / height;\n    let mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    let minRatioDiff = Infinity;\n    for (let track of mostSuitableWidthTracks) {\n      // filter the most ratio suitable from the width filter results\n      if (track.height) {\n        let ratioDiff = Math.abs(track.width / track.height - videoRatio);\n        if (ratioDiff < minRatioDiff) {\n          minRatioDiff = ratioDiff;\n          mostSuitableWidthAndRatioTracks = [track];\n        } else if (ratioDiff === minRatioDiff) {\n          mostSuitableWidthAndRatioTracks.push(track);\n        }\n      }\n    }\n    let maxBandwidth = 0;\n    for (let track of mostSuitableWidthAndRatioTracks) {\n      // select the top bitrate from the ratio filter results\n      if (track.bandwidth > maxBandwidth || !track.bandwidth) {\n        maxBandwidth = track.bandwidth || maxBandwidth;\n        mostSuitableWidth = track;\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexport {getSuitableSourceForResolution};\n","//@flow\n\nimport VideoTrack from '../track/video-track';\n\n/**\n * Filter the video tracks which not in the range\n * @function filterVideoTracksByRestriction\n * @param {Array<VideoTrack>} tracks - The tracks to filter\n * @param {PKABRRestrictionObject} restriction - The restriction\n * @returns {Array<VideoTrack>} - The relevant video tracks after restrictions.\n */\nfunction _filterVideoTracksByRestriction(tracks: Array<VideoTrack>, restriction: PKABRRestrictionObject): Array<VideoTrack> {\n  const MIN_DEFAULT_VALUE = 0;\n  const MAX_DEFAULT_VALUE = Infinity;\n  const inRange = (x, min, max) => {\n    return x >= (min || MIN_DEFAULT_VALUE) && x <= (max || MAX_DEFAULT_VALUE);\n  };\n  const {maxHeight, minHeight, maxWidth, minWidth} = restriction;\n  if (minHeight !== MIN_DEFAULT_VALUE || minWidth !== MIN_DEFAULT_VALUE || maxHeight !== MAX_DEFAULT_VALUE || maxWidth !== MAX_DEFAULT_VALUE) {\n    return tracks.filter(track => inRange(track.height, minHeight, maxHeight)).filter(track => inRange(track.width, minWidth, maxWidth));\n  }\n  const {maxBitrate, minBitrate} = restriction;\n  if (minBitrate !== MIN_DEFAULT_VALUE || maxBitrate !== MAX_DEFAULT_VALUE) {\n    return tracks.filter(track => inRange(track.bandwidth, minBitrate, maxBitrate));\n  }\n  return tracks;\n}\n\n/**\n * Filter the video tracks which not in the range\n * @function filterVideoTracksByRestriction\n * @param {Array<VideoTrack>} videoTracks - The tracks to filter\n * @param {PKABRRestrictionObject} restriction - The restriction\n * @returns {Array<VideoTrack>} - The relevant video tracks after restrictions.\n */\nfunction filterTracksByRestriction(videoTracks: Array<VideoTrack>, restriction: PKABRRestrictionObject): Array<VideoTrack> {\n  const filterVideoTracks = _filterVideoTracksByRestriction(videoTracks, restriction);\n  return filterVideoTracks.length ? filterVideoTracks : [];\n}\n\nexport {filterTracksByRestriction};\n","//@flow\nimport {jsonp} from './jsonp';\n\n('use strict');\n\nconst _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function (n: number): boolean {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nconst _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function (string: string): string {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function (string: string, searchString: string): boolean {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nconst _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function (objects: Array<Object>): Object {\n    let target = {};\n    for (let obj of objects) {\n      Object.assign(target, obj);\n    }\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function (item: any) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n  },\n\n  /**\n   * @param {any} item - The item to check if it's class\n   * @returns {boolean} - Whether the item is a class\n   */\n  isClassInstance: function (item: any) {\n    return item && item.constructor && item.constructor.name && item.constructor.name !== 'Object';\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function (target: any, ...sources: any): Object {\n    if (!sources.length) {\n      return target;\n    }\n    const source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (const key in source) {\n        if (this.isObject(source[key]) && !this.isClassInstance(source[key])) {\n          if (!target[key]) Object.assign(target, {[key]: {}});\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, {[key]: source[key]});\n        }\n      }\n    }\n    return this.mergeDeep(target, ...sources);\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function (data: any): any {\n    let node;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach((e, i) => {\n        if ((typeof e === 'object' && e !== {}) || (Array.isArray(e) && e.length > 0)) {\n          node[i] = this.copyDeep(e);\n        }\n      });\n    } else if (data !== null && typeof data === 'object') {\n      if (data.clone && typeof data.clone === 'function') {\n        node = data.clone();\n      } else {\n        node = Object.assign({__proto__: data.__proto__}, data);\n        Object.keys(node).forEach(key => {\n          if ((typeof node[key] === 'object' && node[key] !== {}) || (Array.isArray(node[key]) && node[key].length > 0)) {\n            node[key] = this.copyDeep(node[key]);\n          }\n        });\n      }\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function (obj: Object): boolean {\n    for (let key in obj) {\n      if (window.Object.prototype.hasOwnProperty.call(obj, key)) return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function (obj: Object, propertyPath: string): any {\n    return propertyPath.split('.').reduce(function (o, x) {\n      return typeof o === 'undefined' || o === null ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function (obj: Object, propertyPath: string): boolean {\n    if (!propertyPath) {\n      return false;\n    }\n    let properties = propertyPath.split('.');\n    for (let i = 0; i < properties.length; i++) {\n      let prop = properties[i];\n      if (!obj || !window.Object.prototype.hasOwnProperty.call(obj, prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Create an object with a given property path.\n   * @param {Object} obj - The object to create on.\n   * @param {string} path - The path to create in the object.\n   * @param {any} value - The value to set in the path.\n   * @returns {Object} - The result object.\n   */\n  createPropertyPath: function (obj: Object, path: string, value: any = null): Object {\n    let pathArray = path.split('.');\n    let current = obj;\n    while (pathArray.length > 1) {\n      const [head, ...tail] = pathArray;\n      pathArray = tail;\n      if (current[head] === undefined) {\n        current[head] = {};\n      }\n      current = current[head];\n    }\n    current[pathArray[0]] = value;\n    return obj;\n  },\n\n  /**\n   * Deleted a property path from an object.\n   * @param {Object} obj - The object to delete the property path from.\n   * @param {string} path - The path to delete in the object.\n   * @returns {void}\n   */\n  deletePropertyPath: function (obj: Object, path: string): void {\n    if (!obj || !path) {\n      return;\n    }\n    let pathArray = path.split('.');\n    for (let i = 0; i < pathArray.length - 1; i++) {\n      obj = obj[pathArray[i]];\n      if (typeof obj === 'undefined') {\n        return;\n      }\n    }\n    delete obj[pathArray.pop()];\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function (): DeferredPromise {\n    let res, rej;\n    // $FlowFixMe\n    let promise = new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    // $FlowFixMe\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function (thisObj: any, fn: Function): Function {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nconst _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function (length: ?number) {\n    let from = 2;\n    let to = from + (!length || length < 0 ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function (): string {\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4();\n  }\n};\n\nconst _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName(element: HTMLElement, className: string): void {\n    if (element) {\n      if (element.classList) {\n        element.classList.add(className);\n      } else {\n        if (!_Dom.hasClassName(element, className)) {\n          element.className += className;\n        }\n      }\n    }\n  },\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName(element: HTMLElement, className: string): void {\n    if (element) {\n      if (element.classList) {\n        element.classList.remove(className);\n      } else {\n        if (_Dom.hasClassName(element, className)) {\n          element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n        }\n      }\n    }\n  },\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName(element: HTMLElement, className: string) {\n    return element && element.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(element.className);\n  },\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute(element: HTMLElement, name: string, value: string): void {\n    element.setAttribute(name, value);\n  },\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute(element: HTMLElement, name: string): void {\n    element.removeAttribute(name);\n  },\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle(element: HTMLElement, name: string, value: string): void {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild(parent: ?Element, child: ?Element): void {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild(parent: ?Node, child: ?Element): void {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo(child: HTMLElement, parent: HTMLElement): void {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById(id: string): any {\n    return document.getElementById(id);\n  },\n  /**\n   * Returns a live HTMLCollection of elements with the given tag name.\n   * @param {string} tagName - The desired tag name.\n   * @returns {Element} - The elements with the desired tag name.\n   */\n  getElementsByTagName(tagName: string): any {\n    return document.getElementsByTagName(tagName);\n  },\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement(tagName: string): any {\n    return document.createElement(tagName);\n  },\n  /**\n   * Loads an external style sheet asynchronously.\n   * @param {string} url - The css url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadStyleSheetAsync(url: string): Promise<HTMLLinkElement> {\n    return new Promise((resolve, reject) => {\n      let resolved = false,\n        cssLinkElement = this.createElement('link');\n      cssLinkElement.type = 'text/css';\n      cssLinkElement.rel = 'stylesheet';\n      cssLinkElement.href = url;\n      cssLinkElement.async = true;\n      cssLinkElement.onload = cssLinkElement.onreadystatechange = function () {\n        if (!resolved && (!this.readyState || this.readyState === 'complete')) {\n          resolved = true;\n          resolve(this);\n        }\n      };\n      cssLinkElement.onerror = cssLinkElement.onabort = reject;\n      _Dom.appendChild(document.head, cssLinkElement);\n    });\n  },\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync(url: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      let r = false,\n        t = document.getElementsByTagName('script')[0],\n        s = this.createElement('script');\n      s.type = 'text/javascript';\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === 'complete')) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  },\n  /**\n   * Returns the first element that matches a specified CSS selector(s) in the document.\n   * @param {string} selector - One or more CSS selectors to match the element.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  getElementBySelector(selector: string): any {\n    try {\n      return document.querySelector(selector);\n    } catch (e) {\n      return;\n    }\n  },\n  /**\n   * Inserts a node as a child, right before an existing child.\n   * @param {HTMLElement} parent -  The parent node object.\n   * @param {HTMLElement} newChild -  The node object to insert.\n   * @param {?HTMLElement} existingChild - The child node to insert the new node before. If set to null, the insertBefore method will insert the newChild at the end.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  insertBefore(parent: HTMLElement, newChild: HTMLElement, existingChild: ?HTMLElement): ?HTMLElement {\n    try {\n      return parent.insertBefore(newChild, existingChild);\n    } catch (e) {\n      return null;\n    }\n  }\n};\n\nconst _Http = {\n  protocol: /^(https?:)/i.test(document.location.protocol) ? document.location.protocol : 'https:',\n  execute: function (\n    url: string,\n    params: any,\n    method: string = 'POST',\n    headers?: Map<string, string>,\n    timeout?: number,\n    ontimeout?: Function\n  ): Promise<any> {\n    let request = new XMLHttpRequest();\n    return new Promise((resolve, reject) => {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            try {\n              let jsonResponse = JSON.parse(request.responseText);\n              resolve(jsonResponse);\n            } catch (e) {\n              resolve(request.responseText);\n            }\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach((value, key) => {\n          request.setRequestHeader(key, value);\n        });\n      }\n      if (timeout) {\n        request.timeout = timeout;\n      }\n      if (ontimeout) {\n        request.ontimeout = e => {\n          ontimeout();\n          reject(e);\n        };\n      }\n      request.send(params);\n    });\n  },\n  jsonp,\n  convertHeadersToDictionary: function (headerRow: string): {[header: string]: string} {\n    let headerMap = {};\n    try {\n      // Convert the header string into an array of individual headers\n      const arr = headerRow.trim().split(/[\\r\\n]+/);\n\n      // Create a map of header names to values\n      arr.forEach(function (line) {\n        const parts = line.split(': ');\n        const header = parts.shift().toLowerCase();\n        const value = parts.join(': ');\n        headerMap[header] = value;\n      });\n    } catch (e) {\n      // do nothing\n    }\n    return headerMap;\n  }\n};\n\nconst _VERSION = {\n  /**\n   * Compares two software version numbers (e.g. \"1.7.1\" or \"1.2b\").\n   *\n   * @param {string} v1 The first version to be compared.\n   * @param {string} v2 The second version to be compared.\n   * @param {object} [options] Optional flags that affect comparison behavior:\n   * lexicographical: (true/[false]) compares each part of the version strings lexicographically instead of naturally;\n   *                  this allows suffixes such as \"b\" or \"dev\" but will cause \"1.10\" to be considered smaller than \"1.2\".\n   * zeroExtend: ([true]/false) changes the result if one version string has less parts than the other. In\n   *             this case the shorter string will be padded with \"zero\" parts instead of being considered smaller.\n   *\n   * @returns {number|NaN}\n   * - 0 if the versions are equal\n   * - a negative integer iff v1 < v2\n   * - a positive integer iff v1 > v2\n   * - NaN if either version string is in the wrong format\n   */\n\n  compare: function (v1: string, v2: string, options: Object = {}) {\n    options = _Object.merge([{lexicographical: false, zeroExtend: true}, options]);\n    const lexicographical = options.lexicographical;\n    const zeroExtend = options.zeroExtend;\n    let v1parts = (v1 || '0').split('.');\n    let v2parts = (v2 || '0').split('.');\n\n    const isValidPart = x => {\n      return (lexicographical ? /^\\d+[A-Za-z]*$/ : /^\\d+[A-Za-z]?$/).test(x);\n    };\n\n    const mapParts = (parts: Array<string>) => {\n      return parts.map(x => {\n        const match = /[A-Za-z]/.exec(x);\n        return Number(match ? x.replace(match[0], '.' + x.charCodeAt(match.index)) : x);\n      });\n    };\n\n    if (!v1parts.every(isValidPart) || !v2parts.every(isValidPart)) {\n      return NaN;\n    }\n\n    if (zeroExtend) {\n      while (v1parts.length < v2parts.length) v1parts.push('0');\n      while (v2parts.length < v1parts.length) v2parts.push('0');\n    }\n\n    if (!lexicographical) {\n      v1parts = mapParts(v1parts);\n      v2parts = mapParts(v2parts);\n    }\n\n    for (let i = 0; i < v1parts.length; ++i) {\n      if (v2parts.length === i) {\n        return 1;\n      }\n\n      if (v1parts[i] === v2parts[i]) {\n        continue;\n      }\n      // $FlowFixMe\n      else if (v1parts[i] > v2parts[i]) {\n        return 1;\n      } else {\n        return -1;\n      }\n    }\n\n    if (v1parts.length !== v2parts.length) {\n      return -1;\n    }\n\n    return 0;\n  }\n};\n\nexport {_Number as Number, _String as String, _Object as Object, _Generator as Generator, _Dom as Dom, _Http as Http, _VERSION as VERSION};\n"],"sourceRoot":""}