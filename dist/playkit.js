!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Playkit",[],t):"object"==typeof exports?exports.Playkit=t():e.Playkit=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(20),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),o={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF},l=function(){function e(t){r(this,e),u.useDefaults(t||{})}return i(e,[{key:"getLogger",value:function(e){return e?u.get(e):u}}]),e}(),s=new l({defaultLevel:u.DEBUG});t.default=s,t.LOG_LEVEL=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=n}return i(e,[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),s=r(l),c=n(8),f=r(c),d=n(1),p=(r(d),n(4)),h=r(p),g=n(9),y=r(g),_=n(12),v=n(19),b=n(0),m=r(b),E=n(14),k=r(E),w=n(7),P=r(w),A=n(17),O=r(A),T=m.default.getLogger("Player"),M=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._stateManager=new O.default(n),n._pluginManager=new P.default,n._eventManager=new s.default,n._engineEventHandlers=new Map;for(var r in h.default)h.default.hasOwnProperty(r)&&n._engineEventHandlers.set("onEngine"+(0,v.capitlize)(h.default[r])+"_",function(e){return n.dispatchEvent(e)});return n._config=e||t.defaultConfig_(),n.loadPlugins(n._config),n.selectEngine(n._config),n.attachMedia(),T.info("player is ready!"),n}return u(t,e),o(t,[{key:"destroy",value:function(){this._engine.destroy(),this._eventManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._config=null}},{key:"loadPlugins",value:function(e){var t=e.plugins;for(var n in t)t.hasOwnProperty(n)&&this._pluginManager.load(n,this,t[n])}},{key:"selectEngine",value:function(e){if(e&&e.sources)for(var t=e.sources,n=0;n<t.length;n++)if(k.default.canPlayType(t[n].mimetype)){this.loadEngine(t[n],e);break}}},{key:"loadEngine",value:function(e,t){this._engine=new k.default(e,t),"auto"===t.preload&&this.load()}},{key:"attachMedia",value:function(){for(var e in h.default)if(h.default.hasOwnProperty(e)){var t=this._engineEventHandlers.get("onEngine"+(0,v.capitlize)(h.default[e])+"_");t&&this._eventManager.listen(this._engine,h.default[e],t)}}},{key:"play",value:function(){return this._engine.play()}},{key:"pause",value:function(){return this._engine.pause()}},{key:"load",value:function(){this._engine.load()}},{key:"ready",value:function(){}},{key:"buffered",value:function(){}},{key:"config",get:function(){return this._config}},{key:"currentTime",set:function(e){if((0,_.isNumber)(e)){var t=e;e<0&&(t=0),t>this._engine.duration&&(t=this._engine.duration),this._engine.currentTime=t}},get:function(){return this._engine.currentTime}},{key:"duration",get:function(){return this._engine.duration}},{key:"volume",set:function(e){if((0,_.isFloat)(e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){return this._engine.volume}},{key:"paused",get:function(){return this._engine.paused}},{key:"seeking",get:function(){return this._engine.seeking}},{key:"muted",set:function(e){this._engine.muted=e},get:function(){return this._engine.muted}},{key:"src",get:function(){return this._engine.src}},{key:"Event",get:function(){return h.default}},{key:"State",get:function(){return y.default}}],[{key:"defaultConfig_",value:function(){return{}}}]),t}(f.default);t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),o=r(u),l=n(1),s=(r(l),function(){function e(){i(this,e),this._bindingMap=new o.default}return a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listen",value:function(e,t,n){var r=new c(e,t,n);this._bindingMap&&this._bindingMap.push(t,r)}},{key:"unlisten",value:function(e,t){if(this._bindingMap)for(var n=this._bindingMap.get(t),r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.unlisten(),this._bindingMap&&this._bindingMap.remove(t,i))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e=this._bindingMap.getAll(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.unlisten()}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this._bindingMap&&this._bindingMap.clear()}}}]),e}()),c=function(){function e(t,n,r){i(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener(n,r,!1)}return a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,!1),this.target=null,this.listener=null)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={PLAY:"play",PAUSE:"pause",PLAYING:"playing",PROGRESS:"progress",ABORT:"abort",ERROR:"error",SUSPEND:"suspend",EMPTIED:"emptied",ENDED:"ended",WAITING:"waiting",STALLED:"stalled",LOAD_START:"loadstart",LOADED_METADATA:"loadedmetadata",LOADED_DATA:"loadeddata",TIME_UPDATE:"timeupdate",RATE_CHANGE:"ratechange",VOLUME_CHANGE:"volumechange",TEXT_TRACK_CHANGE:"texttrackchange",PLAYER_STATE_CHANGED:"playerStateChanged",SEEKED:"seeked",SEEKING:"seeking"};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMediaSourceAdapter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),o=r(u),l=n(0),s=r(l),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <"+t.name+"> is already registered, do not register again."):(e._logger.debug("Adapter <"+t.name+"> has been registered successfully."),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var n=e._mediaSourceAdapters.indexOf(t);n>-1&&(e._logger.debug("Unregistered <"+t.name+"> adapter."),e._mediaSourceAdapters.splice(n,1))}},{key:"canPlayType",value:function(t){for(var n=e._mediaSourceAdapters,r=0;r<n.length;r++)if(n[r].canPlayType(t))return e._selectedAdapter=n[r],e._logger.debug("Selected adapter is <"+e._selectedAdapter.name+">."),!0;return!1}},{key:"getMediaSourceAdapter",value:function(t,n,r){return t&&n&&r?(e._selectedAdapter||e.canPlayType(n.mimetype),e._selectedAdapter?e._selectedAdapter.createAdapter(t,n,r.engines):null):null}}]),e}();c._logger=s.default.getLogger("MediaSourceProvider"),c._mediaSourceAdapters=[o.default],c._selectedAdapter=null,t.default=c;var f=c.register;t.registerMediaSourceAdapter=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),o=(r(u),n(0)),l=r(o),s=n(12),c=n(3),f=r(c),d=n(11),p=r(d),h=function(){function e(t,n,r){i(this,e),this.name=t,this.player=n,this.eventManager=new f.default,this.logger=l.default.getLogger(this.name),this.config=(0,s.merge)(this.constructor.defaultConfig,r)}return a(e,null,[{key:"createPlugin",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"isValid",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"isValid()").getError()}}]),a(e,[{key:"getConfig",value:function(e){return e?this.config[e]:this.config}},{key:"updateConfig",value:function(e){this.config=(0,s.merge)(this.config,e)}},{key:"destroy",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"destroy()").getError()}},{key:"getName",value:function(){return this.name}}]),e}();h.defaultConfig={},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlugin=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),o=r(u),l=n(11),s=r(l),c=n(2),f=(r(c),n(0)),d=r(f),p=d.default.getLogger("PluginManager"),h=function(){function e(){i(this,e),this._plugins=new Map}return a(e,[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw new s.default(s.default.TYPE.NOT_REGISTERED_PLUGIN,t).getError();var i=e._registry.get(t);return null!=i&&i.isValid()?(this._plugins.set(t,i.createPlugin(t,n,r)),p.debug("Plugin <"+t+"> has been loaded."),!0):(p.debug("Plugin <"+t+"> isn't loaded, isValid()=false."),!1)}},{key:"destroy",value:function(){this._plugins.forEach(this._destroy.bind(this))}},{key:"_destroy",value:function(e,t){e.destroy(),this._plugins.delete(t)}},{key:"get",value:function(e){return this._plugins.get(e)}}],[{key:"register",value:function(t,n){if("function"!=typeof n||n.prototype instanceof o.default==0)throw new s.default(s.default.TYPE.NOT_VALID_HANDLER).getError();return e._registry.has(t)?(p.debug("Plugin <"+t+"> is already registered, do not register again."),!1):(e._registry.set(t,n),p.debug("Plugin <"+t+"> has been registered successfully."),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),p.debug("Unregistered <"+t+"> plugin."))}}]),e}();h._registry=new Map,t.default=h;var g=h.register;t.registerPlugin=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),o=(r(u),n(10)),l=r(o),s=function(){function e(){i(this,e),this._listeners=new l.default,this.dispatchTarget=this}return a(e,[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this._map=new Map}return i(e,[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;e=e.concat(u)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.name=t.name,this.message=t.message(n)}return i(e,[{key:"getError",value:function(){return{name:this.name,message:this.message}}}]),e}();a.TYPE={NOT_REGISTERED_PLUGIN:{name:"PluginNotRegisteredException",message:function(e){return"Cannot load "+e+" plugin. Name not found in the registry"}},NOT_VALID_HANDLER:{name:"PluginHandlerIsNotValidException",message:function(){return"To activate plugin you must provide a class derived from BasePlugin"}},NOT_IMPLEMENTED_METHOD:{name:"NotImplementedException",message:function(e){return e+" method not implemented"}}},t.default=a},function(e,t,n){"use strict";function r(e){return Number(e)===e}function i(e){return r(e)&&e%1==0}function a(e){return r(e)&&e%1!=0}function u(e,t){return e||t?e?t?Object.assign(e,t):e:t:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=r,t.isInt=i,t.isFloat=a,t.merge=u},function(e,t){e.exports={name:"playkit-js",version:"0.0.1",main:"dist/playkit.js",scripts:{clean:"rm -rf ./dist",prebuild:"npm run clean",build:"webpack",dev:"webpack --progress --colors --watch",test:"NODE_ENV=test ./node_modules/.bin/karma start --single-run","test:watch":"NODE_ENV=test ./node_modules/.bin/karma start --auto-watch",start:"webpack-dev-server",release:"NODE_ENV=production npm run build -- -p && git add --all dist && git commit -m'Update dist' && standard-version",eslint:"eslint . --color",flow:"flow check",prepush:"npm run eslint & npm run test & npm run flow"},devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-eslint":"^7.1.1","babel-loader":"^6.2.7","babel-plugin-istanbul":"^4.0.0","babel-plugin-transform-class-properties":"^6.22.0","babel-plugin-transform-flow-strip-types":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-register":"^6.23.0",chai:"^3.5.0","cross-env":"^3.1.4",eslint:"^3.10.0","eslint-loader":"^1.6.1","eslint-plugin-flowtype":"^2.30.0","eslint-plugin-import":"^2.2.0","eslint-plugin-mocha-no-only":"^0.0.5","flow-bin":"latest",istanbul:"^0.4.5",karma:"^1.5.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.2",mocha:"^3.2.0","mocha-cli":"^1.0.1",nyc:"^10.1.2",sinon:"^2.0.0","sinon-chai":"^2.8.0","standard-version":"^4.0.0","uglifyjs-webpack-plugin":"^0.4.3",webpack:"latest","webpack-dev-server":"latest"},repository:{type:"git",url:"https://github.com/kaltura/playkit-js"},keywords:["kaltura","player","html5 player"],license:"AGPLV3",bugs:{url:"https://github.com/kaltura/playkit-js/issues"},homepage:"https://github.com/kaltura/playkit-js",dependencies:{"js-logger":"^1.3.0"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(8),s=r(l),c=n(1),f=r(c),d=n(3),p=r(d),h=n(4),g=r(h),y=n(5),_=r(y),v=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.createVideoElement(),r._eventManager=new p.default,r.setSource(e,n),r.attach(),r}return u(t,e),o(t,null,[{key:"canPlayType",value:function(e){return _.default.canPlayType(e)}}]),o(t,[{key:"destroy",value:function(){this.detach(),this._mediaSourceAdapter&&this._mediaSourceAdapter.destroy(),this._el&&(this.pause(),this._el.removeAttribute("src"),this._el.parentNode&&this._el.parentNode.removeChild(this._el))}},{key:"attach",value:function(){var e=this;for(var t in g.default)!function(t){g.default.hasOwnProperty(t)&&e._eventManager.listen(e._el,g.default[t],function(){e.dispatchEvent(new f.default(g.default[t]))})}(t)}},{key:"detach",value:function(){for(var e in g.default)g.default.hasOwnProperty(e)&&this._eventManager.unlisten(this._el,g.default[e])}},{key:"createVideoElement",value:function(){this._el=document.createElement("video"),this._el.style.width="640px",this._el.style.height="360px",this._el.style.backgroundColor="black",this._el.controls=!0,document&&document.body&&document.body.appendChild(this._el)}},{key:"getVideoElement",value:function(){return this._el}},{key:"setSource",value:function(e,t){this.loadMediaSourceAdapter(e,t)}},{key:"loadMediaSourceAdapter",value:function(e,t){this._mediaSourceAdapter=_.default.getMediaSourceAdapter(this,e,t)}},{key:"play",value:function(){return this._el.play()}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.load()}},{key:"ready",value:function(){}},{key:"src",set:function(e){this._el.src=e},get:function(){return this._el.src}},{key:"currentTime",get:function(){return this._el.currentTime},set:function(e){this._el.currentTime=e}},{key:"duration",get:function(){return this._el.duration}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}}],[{key:"isSupported",value:function(){try{t.TEST_VID=document.createElement("video"),t.TEST_VID.volume=.5}catch(e){return!1}return!!t.TEST_VID.canPlayType}}]),t}(s.default);v.EngineName="html5",t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){function e(t,n,i){r(this,e),this._engine=t,this._config=i,this._videoElement=t.getVideoElement(),this._source=n.url,n&&(this._videoElement.src=n.url)}return i(e,null,[{key:"name",get:function(){return e._name}}]),i(e,[{key:"load",value:function(){e._logger.debug("load"),this._videoElement.load()}},{key:"destroy",value:function(){e._logger.debug("destroy"),this._videoElement.src=""}}],[{key:"canPlayType",value:function(t){var n=!!document.createElement("video").canPlayType(t);return e._logger.debug("canPlayType result for mimeType:"+t+" is "+n.toString()),n}},{key:"isSupported",value:function(){return e._logger.debug("isSupported:true"),!0}},{key:"createAdapter",value:function(t,n,r){return e._logger.debug("Creating adapter"),new this(t,n,r)}}]),e}();o._name="NativeAdapter",o._logger=u.default.getLogger(o._name),t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u.default(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.BasePlugin=t.registerPlugin=t.registerMediaSourceAdapter=void 0,t.playkit=i;var a=n(2),u=r(a),o=n(0),l=r(o),s=n(13),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),f=n(5),d=n(7),p=n(6),h=r(p),g=c.version;l.default.getLogger().log("%c Playkit "+g,"color: yellow; font-size: large"),l.default.getLogger().log("%c For more details see https://github.com/kaltura/playkit-js","color: yellow;"),t.registerMediaSourceAdapter=f.registerMediaSourceAdapter,t.registerPlugin=d.registerPlugin,t.BasePlugin=h.default,t.VERSION=g,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),l=(r(o),n(3)),s=r(l),c=n(18),f=r(c),d=n(9),p=r(d),h=n(4),g=r(h),y=n(1),_=r(y),v=n(0),b=r(v),m=function(){function e(t){var n,r,u,o,l,c,d=this;a(this,e),this._transitions=(c={},i(c,p.default.IDLE,(n={},i(n,g.default.LOAD_START,function(){d._updateState(p.default.LOADING),d._dispatchEvent()}),i(n,g.default.PLAY,function(){d._updateState(p.default.BUFFERING),d._dispatchEvent()}),n)),i(c,p.default.LOADING,(r={},i(r,g.default.LOADED_METADATA,function(){d._player.config.autoPlay?d._updateState(p.default.PLAYING):d._updateState(p.default.PAUSED),d._dispatchEvent()}),i(r,g.default.ERROR,function(){d._updateState(p.default.IDLE),d._dispatchEvent()}),r)),i(c,p.default.PAUSED,(u={},i(u,g.default.PLAY,function(){d._updateState(p.default.PLAYING),d._dispatchEvent()}),i(u,g.default.PLAYING,function(){d._updateState(p.default.PLAYING),d._dispatchEvent()}),i(u,g.default.ENDED,function(){d._updateState(p.default.IDLE),d._dispatchEvent()}),u)),i(c,p.default.PLAYING,(o={},i(o,g.default.PAUSE,function(){d._updateState(p.default.PAUSED),d._dispatchEvent()}),i(o,g.default.WAITING,function(){d._updateState(p.default.BUFFERING),d._dispatchEvent()}),i(o,g.default.ENDED,function(){d._updateState(p.default.IDLE),d._dispatchEvent()}),i(o,g.default.ERROR,function(){d._updateState(p.default.IDLE),d._dispatchEvent()}),o)),i(c,p.default.BUFFERING,(l={},i(l,g.default.PLAYING,function(){d._updateState(p.default.PLAYING),d._dispatchEvent()}),i(l,g.default.PAUSE,function(){d._updateState(p.default.PAUSED),d._dispatchEvent()}),l)),c),this._player=t,this._logger=b.default.getLogger("StateManager"),this._eventManager=new s.default,this._history=[],this._prevState=null,this._curState=new f.default(p.default.IDLE),this._attachListeners()}return u(e,[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,g.default.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,g.default.WAITING,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){this._logger.debug("Do transition request",e);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new f.default(e),this._logger.debug("Switch player state: from "+this._prevState.type+" to "+this._curState.type))}},{key:"_dispatchEvent",value:function(){var e=new _.default(g.default.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}return i(e,[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){return"string"==typeof e&&"string"==typeof t&&-1!=e.indexOf(t,e.length-t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.capitlize=r,t.endsWith=i},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var u={};u.VERSION="1.3.0";var o,l={},s=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};u.DEBUG=f(1,"DEBUG"),u.INFO=f(2,"INFO"),u.TIME=f(3,"TIME"),u.WARN=f(4,"WARN"),u.ERROR=f(8,"ERROR"),u.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(u.DEBUG,arguments)},info:function(){this.invoke(u.INFO,arguments)},warn:function(){this.invoke(u.WARN,arguments)},error:function(){this.invoke(u.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,"end"])},invoke:function(e,t){o&&this.enabledFor(e)&&o(t,c({level:e},this.context))}};var p=new d({filterLevel:u.OFF});!function(){var e=u;e.enabledFor=s(p,p.enabledFor),e.debug=s(p,p.debug),e.time=s(p,p.time),e.timeEnd=s(p,p.timeEnd),e.info=s(p,p.info),e.warn=s(p,p.warn),e.error=s(p,p.error),e.log=e.info}(),u.setHandler=function(e){o=e},u.setLevel=function(e){p.setLevel(e);for(var t in l)l.hasOwnProperty(t)&&l[t].setLevel(e)},u.get=function(e){return l[e]||(l[e]=new d(c({name:e},p.context)))},u.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,o=console.log;i.level===u.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(o,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===u.WARN&&console.warn?o=console.warn:i.level===u.ERROR&&console.error?o=console.error:i.level===u.INFO&&console.info&&(o=console.info),e.formatter(r,i),n(o,r))}},u.useDefaults=function(e){u.setLevel(e&&e.defaultLevel||u.DEBUG),u.setHandler(u.createDefaultHandler(e))},r=u,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()}])});
//# sourceMappingURL=playkit.js.map